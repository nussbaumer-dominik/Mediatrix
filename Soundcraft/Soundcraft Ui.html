<!DOCTYPE html>
<!-- saved from url=(0027)http://10.10.2.1/mixer.html -->
<html><!-- <html manifest="offline2.manifest"> --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Ui">

    <!-- <meta http-equiv='cache-control' content='no-cache'> -->
    <!-- <meta http-equiv='expires' content='0'> -->
    <!-- <meta http-equiv='pragma' content='no-cache'> -->

    <link rel="icon" href="http://10.10.2.1/favicon.png" type="image/gif" sizes="16x16">
    <link rel="apple-touch-icon" sizes="40x40" href="http://10.10.2.1/AppIcon40x40.png">
    <link rel="apple-touch-icon" sizes="80x80" href="http://10.10.2.1/AppIcon40x40@2x.png">
    <link rel="apple-touch-icon" sizes="50x50" href="http://10.10.2.1/AppIcon50x50.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://10.10.2.1/AppIcon60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://10.10.2.1/AppIcon60x60@2x.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://10.10.2.1/AppIcon76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://10.10.2.1/AppIcon76x76@2x.png">

    <meta name="description" content="Soundcraft Ui Digital Mixer Web GUI">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

    <style>*{margin:0;padding:0}html,body{position:relative;overflow-x:hidden;overflow-y:hidden;width:100%;height:100%;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:none;touch-action:none}canvas{display:block;width:100%;height:100%}input[type=radio]{margin-right:4px;margin-left:4px;width:18px;height:18px}#DIM_CAPTURE,.DIM_CAPTURE{position:absolute;z-index:3;top:0;right:0;bottom:0;left:0;display:none;background-color:rgba(0,0,0,0.4);text-align:center;color:#f9f9f9;text-shadow:4px 4px #111;font-family:"open_sans_condensedbold";font-size:9mm}.DIM_DIALOG,.DIM_DIALOG_PHONE{position:absolute;z-index:3000;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,0.7);text-align:center;color:#f9f9f9;text-shadow:4px 4px #111;font-family:"open_sans_condensedbold";font-size:6mm}.DIM_DIALOG div,.DIM_DIALOG_PHONE div{z-index:1000;display:table;width:100%;height:100%;text-align:center}.DIM_DIALOG div div,.DIM_DIALOG_PHONE div div{display:table-cell;vertical-align:middle}.DIM_DIALOG_PHONE{font-size:3.5mm}#audio{display:none;position:absolute;z-index:2000;bottom:36px;right:5px;width:auto;height:auto;background-color:rgba(0,0,0,0)}#PORTRAIT_PAGE{position:absolute;z-index:2000;top:0;right:0;bottom:0;left:0;display:none;text-align:center;color:#fff;background-color:rgba(0,0,0,1.0);font-family:"Helvetica","Droid Sans","Lucida Grande","Roboto","Microsoft Sans Serif","Arial","sans serif","sans";font-size:10mm}#noConnectMessage{position:absolute;z-index:20000;top:0;right:0;bottom:0;left:0;visibility:hidden;color:#fff;background-color:rgba(0,0,0,0.5);text-shadow:-2px -2px #000;font-family:"Helvetica","Droid Sans","Lucida Grande","Roboto","Microsoft Sans Serif","Arial","sans serif","sans";font-size:10mm}#noConnectMessage div{display:table;width:100%;height:100%;text-align:center;vertical-align:middle}#noConnectMessage div div{display:table-cell;vertical-align:middle}#MSG_CONTAINER,#EDIT_CONTAINER,#CONF_CONTAINER,.MSG_CONTAINER{position:absolute;z-index:1000;top:30%;left:50%;width:auto;min-width:300px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding-top:20px;padding-bottom:20px;padding-left:20px;padding-right:20px;-webkit-transition:opacity 300ms ease-in;-moz-transition:opacity 300ms ease-in;-ms-transition:opacity 300ms ease-in;-o-transition:opacity 300ms ease-in;transition:opacity 300ms ease-in;border:0 solid;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:12px;background-color:rgba(0,0,0,0.8)}#MSG_CONTAINER{pointer-events:none;opacity:0}#EDIT_CONTAINER,#CONF_CONTAINER{display:none;background-color:rgba(0,0,0,0.9)}#MSG_CONTAINER div,#EDIT_CONTAINER div,#CONF_CONTAINER div{z-index:1000;display:table;width:100%;height:100%;text-align:center}#MSG_BODY,#EDIT_BODY,#CONF_BODY{display:table-cell;vertical-align:middle;color:#f9f9f9;text-shadow:2px 2px #222;font-family:"open_sans_condensedbold";font-size:10mm}#MSG_BODY{color:#f9f9f9;text-shadow:2px 2px #222;font-family:"open_sans_condensedbold";font-size:10mm}#eb{position:absolute;top:0;left:0;display:none;width:110px;height:31px;text-align:center;color:#f0f0f0;border-width:1px;border-color:#000;background:#444;font:bold 14pt open_sans_condensedbold}#eb2{width:160px;height:31px;margin-top:10px;margin-bottom:12px;text-align:center;color:#c4c4c4;border-width:2px;border-style:solid;border-color:#777;outline:0;background:#0e0f11;font:bold 14pt open_sans_condensedbold}#EDIT_OK,#EDIT_CANCEL,#CONF_OK,#CONF_CANCEL{width:100px;height:30px;color:#c4c4c4;border:solid 1px #3c6d3e;outline:0;text-align:center;background:#294a2a;font:bold 14pt open_sans_condensedbold}.BTN{width:100px;height:36px;color:#232323;border:solid 1px #eee;outline:0;text-align:center;background:#d0cdd0;text-shadow:1px 1px #ddd;font:bold 14pt open_sans_condensedbold}#CONF_OK,#EDIT_OK{border-color:#3c6d3e;background:#294a2a}#CONF_CANCEL,#EDIT_CANCEL{border-color:#6d3c3c;background:#4a2929}#CONF_LABEL,#EDIT_LABEL{margin-right:5px;margin-left:5px;font-size:24px}@font-face{font-family:'umixled';font-weight:normal;font-style:normal;src:url('fonts/umix_led/umix_led.eot');src:url('fonts/umix_led/umix_led.eot?#iefix') format('embedded-opentype'),url('fonts/umix_led/umix_led.woff') format('woff'),url('fonts/umix_led/umix_led.ttf') format('truetype')}@font-face{font-family:'open_sans_condensedbold';font-weight:normal;font-style:normal;src:url('fonts/opensans_condbold/OpenSans-CondBold-webfont.eot');src:url('fonts/opensans_condbold/OpenSans-CondBold-webfont.eot?#iefix') format('embedded-opentype'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.woff') format('woff'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.ttf') format('truetype'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.svg#open_sans_condensedbold')}@font-face{font-family:'open_sansbold';font-weight:normal;font-style:normal;src:url('fonts/opensans_bold/OpenSans-Bold-webfont.eot');src:url('fonts/opensans_bold/OpenSans-Bold-webfont.eot?#iefix') format('embedded-opentype'),url('fonts/opensans_bold/OpenSans-Bold-webfont.woff') format('woff'),url('fonts/opensans_bold/OpenSans-Bold-webfont.ttf') format('truetype'),url('fonts/opensans_bold/OpenSans-Bold-webfont.svg#open_sansbold') format('svg')}.ui-keyboard{font-size:14px;text-align:center;background:#282828;border:1px solid #484848;padding:4px;width:100%;height:auto;left:0;top:auto;bottom:0;position:fixed;white-space:nowrap;overflow-x:auto;-ms-touch-action:manipulation;touch-action:manipulation}.ui-keyboard-has-focus{z-index:16001}.ui-keyboard-button{border:1px solid #404040;padding:0 .5em;margin:1px;min-width:3em;height:3em;line-height:3em;vertical-align:top;font-family:Helvetica,Arial,sans-serif;color:#eee;text-align:center;border-radius:5px;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,0.5);box-shadow:1px 1px 3px 0 rgba(0,0,0,0.5);background:#444;background-image:-webkit-linear-gradient(-90deg,#444 0,#333 100%);background-image:linear-gradient(-90deg,#444 0,#333 100%);cursor:pointer;overflow:hidden;-moz-user-focus:ignore}.ui-keyboard-button:not([disabled]):hover{background:#eee;background-image:-webkit-linear-gradient(-90deg,#4f4f4f 0,#444 100%);background-image:linear-gradient(-90deg,#4f4f4f 0,#444 100%)}.ui-keyboard-button:not([disabled]):active{background:#ddd;background-image:-webkit-linear-gradient(-90deg,#555 0,#5f5f5f 100%);background-image:linear-gradient(-90deg,#555 0,#5f5f5f 100%)}.ui-keyboard-button span{display:block;width:100%;font-size:1.2em;text-align:center}.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo){min-width:6em}.ui-keyboard-space{width:15em}.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) span{font-size:.8em;position:relative;top:-1em;left:-1.6em}.ui-keyboard-placeholder{color:#888}.ui-keyboard-nokeyboard{color:#888;border-color:#888}.ui-keyboard-spacer{display:inline-block;width:1px;height:0;cursor:default}.ui-keyboard-NBSP span,.ui-keyboard-ZWSP span,.ui-keyboard-ZWNJ span,.ui-keyboard-ZWJ span,.ui-keyboard-LRM span,.ui-keyboard-RLM span{font-size:.5em;line-height:1.5em;white-space:normal}.ui-keyboard-button.ui-keyboard-combo.ui-state-default{-webkit-box-shadow:1px 1px 3px 0 rgba(213,133,18,0.5);box-shadow:1px 1px 3px 0 rgba(213,133,18,0.5);border-color:#d58512}.ui-keyboard-button.ui-keyboard-combo.ui-state-active{-webkit-box-shadow:1px 1px 3px 0 rgba(38,154,188,0.5);box-shadow:1px 1px 3px 0 rgba(38,154,188,0.5);border-color:#269abc}button.ui-keyboard-accept.ui-keyboard-valid-input{-webkit-box-shadow:1px 1px 3px 0 rgba(57,132,57,0.5);box-shadow:1px 1px 3px 0 rgba(57,132,57,0.5);border-color:#398439}button.ui-keyboard-accept.ui-keyboard-valid-input:not([disabled]):hover{border-color:#4cae4c}button.ui-keyboard-accept.ui-keyboard-invalid-input{-webkit-box-shadow:1px 1px 3px 0 rgba(172,41,37,0.5);box-shadow:1px 1px 3px 0 rgba(172,41,37,0.5);border-color:#ac2925}button.ui-keyboard-accept.ui-keyboard-invalid-input:not([disabled]):hover{border-color:#d43f3a}button.ui-keyboard-toggle span{width:.9em;height:.9em;display:inline-block;background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTguNyw0LjRINy41SDUuMHYtMS45YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40LDAtMi41LDEuMS0yLjUsMi41djEuOWgxLjIgdi0xLjljMC0wLjcsMC42LTEuMiwxLjItMS4yczEuMiwwLjYsMS4yLDEuMnYxLjljLTAuNywwLTEuMiwwLjYtMS4yLDEuMlY4LjggYzAsMC43LDAuNiwxLjIsMS4yLDEuMmg1LjBDOS40LDEwLDEwLDkuNCwxMCw4LjhWNS42QzEwLDUuMCw5LjQsNC40LDguOCw0LjR6IE02LjYsNy40djEuMCBjMCwwLjItMC4xLDAuMy0wLjMsMC4zUzYuMCw4LjYsNi4wLDguNFY3LjRjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zLDAuMy0wLjYsMC42LTAuNiBTNi45LDYuNiw2LjksNi45QzYuOSw3LjEsNi44LDcuMyw2LjYsNy40eiIvPjwvc3ZnPg==')}button.ui-keyboard-toggle.ui-keyboard-disabled span{background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTcuNCA0LjRWMi41YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40IDAtMi41IDEuMS0yLjUgMi41djEuOSBjLTAuNyAwLTEuMiAwLjUtMS4yIDEuMnYzLjFDMS4zIDkuNCAxLjggMTAgMi41IDEwaDQuOWMwLjcgMCAxLjItMC42IDEuMi0xLjJWNS42IEM4LjcgNC45IDguMSA0LjQgNy40IDQuNHogTTUuMyA3LjR2MS4wYzAgMC4yLTAuMSAwLjMtMC4zIDAuM2MtMC4yIDAtMC4zLTAuMS0wLjMtMC4zVjcuNCBjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zIDAuMy0wLjYgMC42LTAuNmMwLjMgMCAwLjYgMC4zIDAuNiAwLjYgQzUuNiA3LjEgNS41IDcuMyA1LjMgNy40eiBNNi4yIDQuNEgzLjdWMi41YzAtMC43IDAuNS0xLjIgMS4yLTEuMmMwLjcgMCAxLjIgMC42IDEuMiAxLjIgVjQuNHoiLz48L3N2Zz4=')}.ui-keyboard.ui-keyboard-disabled button:not(.ui-keyboard-toggle),.ui-keyboard.ui-keyboard-disabled input{opacity:.5}.ui-keyboard-overlay{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.5)}.ui-keyboard-popup{display:inline-block;max-width:22em}.ui-keyboard-caret{background:#c00;width:1px;margin-top:3px}div.ui-keyboard-extender{margin-left:5px;margin-right:10px}button.ui-keyboard-extender span{width:.9em;height:.9em;display:inline-block;margin-bottom:3px;background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGw6I2VlZSI+PGc+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2VlZSIgZD0iTSAwLjUsNC41IDE1LjUsNC41IDE1LjUsMTUuNSAwLjUsMTUuNSBaIj48L3BhdGg+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iMiIgeT0iNiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjYiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSI4IiB5PSI2Ij48L3JlY3Q+PHBhdGggZD0ibSAxMSw2IDMsMCAwLDUgLTIsMCAwLC0zIC0xLDAgeiI+PC9wYXRoPjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjEyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSI2IiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjEyIj48L3JlY3Q+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iOSIgeT0iOSI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjYiIHk9IjkiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSIyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHg9IjIiIHk9IjkiPjwvcmVjdD48L2c+PC9zdmc+')}</style>
    <script type="text/javascript" src="./Soundcraft Ui_files/initparams.js"></script>
    <script type="text/javascript">var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,f=0;f<d;f++){var e=a[f];if(b.call(c,e,f,a))return{i:f,v:e}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var f=b.length,e=a.length,g=Math.max(0,Math.min(c|0,b.length)),h=0;h<e&&g<f;)if(b[g++]!=a[h++])return!1;return h>=e}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);for(var f=Math.max(0,Math.min(c|0,b.length)),e=a.length;0<e&&0<f;)if(b[--f]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6-impl","es3");
(function(a,b){function c(a){var b=a.length,c=k.type(a);return k.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function d(a){var b=S[a]={};k.each(a.match(qa)||[],function(a,c){b[c]=!0});return b}function f(a,c,d,e){if(k.acceptData(a)){var f=k.expando,g=a.nodeType,u=g?k.cache:a,h=g?a[f]:a[f]&&f;if(h&&u[h]&&(e||u[h].data)||d!==b||"string"!==typeof c){h||(h=g?a[f]=ea.pop()||k.guid++:f);u[h]||(u[h]=g?{}:{toJSON:k.noop});if("object"===typeof c||
"function"===typeof c)e?u[h]=k.extend(u[h],c):u[h].data=k.extend(u[h].data,c);a=u[h];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[k.camelCase(c)]=d);"string"===typeof c?(d=a[c],null==d&&(d=a[k.camelCase(c)])):d=a;return d}}}function e(a,b,c){if(k.acceptData(a)){var d,e,f=a.nodeType,g=f?k.cache:a,u=f?a[k.expando]:k.expando;if(g[u]){if(b&&(d=c?g[u]:g[u].data)){k.isArray(b)?b=b.concat(k.map(b,k.camelCase)):b in d?b=[b]:(b=k.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?
!h(d):!k.isEmptyObject(d))return}if(!c&&(delete g[u].data,!h(g[u])))return;f?k.cleanData([a],!0):k.support.deleteExpando||g!=g.window?delete g[u]:g[u]=null}}}function g(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(ca,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:R.test(d)?k.parseJSON(d):d}catch(Aa){}k.data(a,c,d)}else d=b;return d}function h(a){for(var b in a)if(("data"!==b||!k.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function l(){return!0}function m(){return!1}function n(){try{return B.activeElement}catch(u){}}function p(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function r(a,b,c){if(k.isFunction(b))return k.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return k.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Mb.test(b))return k.filter(b,a,c);b=k.filter(b,a)}return k.grep(a,function(a){return 0<=k.inArray(a,b)!==c})}function q(a){var b=qb.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function t(a,b){return k.nodeName(a,"table")&&k.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function v(a){a.type=(null!==k.find.attr(a,"type"))+"/"+a.type;return a}function J(a){var b=Nb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function O(a,b){for(var c,d=0;null!=(c=a[d]);d++)k._data(c,"globalEval",
!b||k._data(b[d],"globalEval"))}function F(a,b){if(1===b.nodeType&&k.hasData(a)){var c,d,e;d=k._data(a);var f=k._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)k.event.add(b,c,g[c][d]);f.data&&(f.data=k.extend({},f.data))}}function x(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==M?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==M?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||k.nodeName(e,c)?g.push(e):
k.merge(g,x(e,c));return c===b||c&&k.nodeName(a,c)?k.merge([a],g):g}function H(a){gb.test(a.type)&&(a.defaultChecked=a.checked)}function K(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if(b=rb[e]+c,b in a)return b;return d}function C(a,b){a=b||a;return"none"===k.css(a,"display")||!k.contains(a.ownerDocument,a)}function G(a,b){for(var c,d,e,f=[],g=0,u=a.length;g<u;g++)d=a[g],d.style&&(f[g]=k._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||
(d.style.display=""),""===d.style.display&&C(d)&&(f[g]=k._data(d,"olddisplay",ka(d.nodeName)))):f[g]||(e=C(d),(c&&"none"!==c||!e)&&k._data(d,"olddisplay",e?c:k.css(d,"display"))));for(g=0;g<u;g++)d=a[g],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none");return a}function na(a,b,c){return(a=Ob.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function V(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=k.css(a,
c+Ka[b],!0,e)),d?("content"===c&&(f-=k.css(a,"padding"+Ka[b],!0,e)),"margin"!==c&&(f-=k.css(a,"border"+Ka[b]+"Width",!0,e))):(f+=k.css(a,"padding"+Ka[b],!0,e),"padding"!==c&&(f+=k.css(a,"border"+Ka[b]+"Width",!0,e)));return f}function ra(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=La(a),g=k.support.boxSizing&&"border-box"===k.css(a,"boxSizing",!1,f);if(0>=e||null==e){e=Ma(a,b,f);if(0>e||null==e)e=a.style[b];if(ab.test(e))return e;d=g&&(k.support.boxSizingReliable||e===a.style[b]);
e=parseFloat(e)||0}return e+V(a,b,c||(g?"border":"content"),d,f)+"px"}function ka(a){var b=B,c=sb[a];c||(c=ga(a,b),"none"!==c&&c||(Wa=(Wa||k("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Wa[0].contentWindow||Wa[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=ga(a,b),Wa.detach()),sb[a]=c);return c}function ga(a,b){var c=k(b.createElement(a)).appendTo(b.body),d=k.css(c[0],"display");c.remove();
return d}function la(a,b,c,d){var e;if(k.isArray(b))k.each(b,function(b,e){c||Pb.test(a)?d(a,e):la(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==k.type(b))d(a,b);else for(e in b)la(a+"["+e+"]",b[e],c,d)}function T(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(qa)||[];if(k.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function N(a,b,c,d){function e(u){var h;f[u]=!0;k.each(a[u]||
[],function(a,u){var m=u(b,c,d);if("string"===typeof m&&!g&&!f[m])return b.dataTypes.unshift(m),e(m),!1;if(g)return!(h=m)});return h}var f={},g=a===hb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function E(a,c){var d,e,f=k.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);d&&k.extend(!0,a,d);return a}function P(){try{return new a.XMLHttpRequest}catch(u){}}function Q(){setTimeout(function(){Sa=b});return Sa=k.now()}function z(a,b,c){for(var d,e=(Xa[b]||[]).concat(Xa["*"]),
f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function y(a,b,c){var d,e=0,f=bb.length,g=k.Deferred().always(function(){delete u.elem}),u=function(){if(d)return!1;for(var b=Sa||Q(),b=Math.max(0,h.startTime+h.duration-b),c=1-(b/h.duration||0),e=0,f=h.tweens.length;e<f;e++)h.tweens[e].run(c);g.notifyWith(a,[h,c,b]);if(1>c&&f)return b;g.resolveWith(a,[h]);return!1},h=g.promise({elem:a,props:k.extend({},b),opts:k.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Sa||
Q(),duration:c.duration,tweens:[],createTween:function(b,c){var d=k.Tween(a,h.opts,b,c,h.opts.specialEasing[b]||h.opts.easing);h.tweens.push(d);return d},stop:function(b){var c=0,e=b?h.tweens.length:0;if(d)return this;for(d=!0;c<e;c++)h.tweens[c].run(1);b?g.resolveWith(a,[h,b]):g.rejectWith(a,[h,b]);return this}});c=h.props;for(U(c,h.opts.specialEasing);e<f;e++)if(b=bb[e].call(h,a,c,h.opts))return b;k.map(c,z,h);k.isFunction(h.opts.start)&&h.opts.start.call(a,h);k.fx.timer(k.extend(u,{elem:a,anim:h,
queue:h.opts.queue}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function U(a,b){var c,d,e,f,g;for(c in a)if(d=k.camelCase(c),e=b[d],f=a[c],k.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=k.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function D(a,b,c,d,e){return new D.prototype.init(a,b,c,d,e)}function fa(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=
Ka[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function Z(a){return k.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var ha,Ba,M=typeof b,ta=a.location,B=a.document,aa=B.documentElement,ba=a.jQuery,da=a.$,W={},ea=[],Na=ea.concat,va=ea.push,oa=ea.slice,Oa=ea.indexOf,Fa=W.toString,X=W.hasOwnProperty,ia="1.10.2".trim,k=function(a,b){return new k.fn.init(a,b,Ba)},za=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qa=/\S+/g,Pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,wa=
/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ca=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ha=/^[\],:{}\s]*$/,w=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Y=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,xa=/^-ms-/,ja=/-([\da-z])/gi,ua=function(a,b){return b.toUpperCase()},L=function(a){if(B.addEventListener||"load"===a.type||"complete"===B.readyState)A(),k.ready()},A=function(){B.addEventListener?(B.removeEventListener("DOMContentLoaded",L,!1),a.removeEventListener("load",L,!1)):
(B.detachEvent("onreadystatechange",L),a.detachEvent("onload",L))};k.fn=k.prototype={jquery:"1.10.2",constructor:k,init:function(a,c,d){var e;if(!a)return this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:wa.exec(a);if(!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof k?c[0]:c,k.merge(this,k.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:B,!0)),Ca.test(e[1])&&k.isPlainObject(c))for(e in c)if(k.isFunction(this[e]))this[e](c[e]);
else this.attr(e,c[e])}else{if((c=B.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=B;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(k.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return k.makeArray(a,this)},selector:"",length:0,toArray:function(){return oa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},
pushStack:function(a){a=k.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return k.each(this,a,b)},ready:function(a){k.ready.promise().done(a);return this},slice:function(){return this.pushStack(oa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(k.map(this,function(b,c){return a.call(b,
c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:va,sort:[].sort,splice:[].splice};k.fn.init.prototype=k.fn;k.extend=k.fn.extend=function(){var a,c,d,e,f,g=arguments[0]||{},h=1,m=arguments.length,l=!1;"boolean"===typeof g&&(l=g,g=arguments[1]||{},h=2);"object"===typeof g||k.isFunction(g)||(g={});m===h&&(g=this,--h);for(;h<m;h++)if(null!=(f=arguments[h]))for(e in f)a=g[e],d=f[e],g!==d&&(l&&d&&(k.isPlainObject(d)||(c=k.isArray(d)))?(c?(c=!1,a=a&&k.isArray(a)?a:[]):a=a&&k.isPlainObject(a)?
a:{},g[e]=k.extend(l,a,d)):d!==b&&(g[e]=d));return g};k.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(b){a.$===k&&(a.$=da);b&&a.jQuery===k&&(a.jQuery=ba);return k},isReady:!1,readyWait:1,holdReady:function(a){a?k.readyWait++:k.ready(!0)},ready:function(a){if(!0===a?!--k.readyWait:!k.isReady){if(!B.body)return setTimeout(k.ready);k.isReady=!0;!0!==a&&0<--k.readyWait||(ha.resolveWith(B,[k]),k.fn.trigger&&k(B).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
k.type(a)},isArray:Array.isArray||function(a){return"array"===k.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?W[Fa.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==k.type(a)||a.nodeType||k.isWindow(a))return!1;try{if(a.constructor&&!X.call(a,"constructor")&&!X.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(ma){return!1}if(k.support.ownLast)for(c in a)return X.call(a,
c);for(c in a);return c===b||X.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||B;var d=Ca.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=k.buildFragment([a],b,c);c&&k(c).remove();return k.merge([],d.childNodes)},parseJSON:function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(null===b)return b;if("string"===typeof b&&(b=k.trim(b))&&
Ha.test(b.replace(sa,"@").replace(Y,"]").replace(w,"")))return(new Function("return "+b))();k.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!==typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(Aa){d=b}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&k.trim(b)&&
(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(xa,"ms-").replace(ja,ua)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length;e=c(a);if(d)if(e)for(;f<g&&(e=b.apply(a[f],d),!1!==e);f++);else for(f in a){if(e=b.apply(a[f],d),!1===e)break}else if(e)for(;f<g&&(e=b.call(a[f],f,a[f]),!1!==e);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},trim:ia&&!ia.call("﻿ ")?function(a){return null==
a?"":ia.call(a)}:function(a){return null==a?"":(a+"").replace(Pa,"")},makeArray:function(a,b){var d=b||[];null!=a&&(c(Object(a))?k.merge(d,"string"===typeof a?[a]:a):va.call(d,a));return d},inArray:function(a,b,c){var d;if(b){if(Oa)return Oa.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];a.length=e;return a},grep:function(a,
b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=[];if(c(a))for(;f<g;f++)e=b(a[f],f,d),null!=e&&(h[h.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(h[h.length]=e);return Na.apply([],h)},guid:1,proxy:function(a,c){var d,e;"string"===typeof c&&(e=a[c],c=a,a=e);if(!k.isFunction(a))return b;d=oa.call(arguments,2);e=function(){return a.apply(c||this,d.concat(oa.call(arguments)))};e.guid=a.guid=a.guid||k.guid++;return e},
access:function(a,c,d,e,f,g,h){var u=0,m=a.length,l=null==d;if("object"===k.type(d))for(u in f=!0,d)k.access(a,c,u,d[u],!0,g,h);else if(e!==b&&(f=!0,k.isFunction(e)||(h=!0),l&&(h?(c.call(a,e),c=null):(l=c,c=function(a,b,c){return l.call(k(a),c)})),c))for(;u<m;u++)c(a[u],d,h?e:e.call(a[u],u,c(a[u],d)));return f?a:l?c.call(a):m?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=
f[e];return c}});k.ready.promise=function(b){if(!ha)if(ha=k.Deferred(),"complete"===B.readyState)setTimeout(k.ready);else if(B.addEventListener)B.addEventListener("DOMContentLoaded",L,!1),a.addEventListener("load",L,!1);else{B.attachEvent("onreadystatechange",L);a.attachEvent("onload",L);var c=!1;try{c=null==a.frameElement&&B.documentElement}catch(ma){}c&&c.doScroll&&function Aa(){if(!k.isReady){try{c.doScroll("left")}catch(fb){return setTimeout(Aa,50)}A();k.ready()}}()}return ha.promise(b)};k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){W["[object "+b+"]"]=b.toLowerCase()});Ba=k(B);(function(a,b){function c(a,b,c,d){var e,f,g,h,u;(b?b.ownerDocument||b:pa)!==x&&D(b);b=b||x;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(P&&!d){if(e=ib.exec(a))if(g=e[1])if(9===h)if((f=b.getElementById(g))&&f.parentNode){if(f.id===g)return c.push(f),c}else return c;else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&Q(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ha.apply(c,b.getElementsByTagName(a)),
c;if((g=e[3])&&A.getElementsByClassName&&b.getElementsByClassName)return ha.apply(c,b.getElementsByClassName(g)),c}if(A.qsa&&(!O||!O.test(a))){f=e=F;g=b;u=9===h&&a;if(1===h&&"object"!==b.nodeName.toLowerCase()){h=n(a);(e=b.getAttribute("id"))?f=e.replace(X,"\\$&"):b.setAttribute("id",f);f="[id='"+f+"'] ";for(g=h.length;g--;)h[g]=f+p(h[g]);g=ta.test(a)&&b.parentNode||b;u=h.join(",")}if(u)try{return ha.apply(c,g.querySelectorAll(u)),c}catch(uc){}finally{e||b.removeAttribute("id")}}}var m;a:{a=a.replace(Ua,
"$1");f=n(a);if(!d&&1===f.length){e=f[0]=f[0].slice(0);if(2<e.length&&"ID"===(m=e[0]).type&&A.getById&&9===b.nodeType&&P&&y.relative[e[1].type]){b=(y.find.ID(m.matches[0].replace(ba,W),b)||[])[0];if(!b){m=c;break a}a=a.slice(e.shift().value.length)}for(h=Ia.needsContext.test(a)?0:e.length;h--;){m=e[h];if(y.relative[g=m.type])break;if(g=y.find[g])if(d=g(m.matches[0].replace(ba,W),ta.test(e[0].type)&&b.parentNode||b)){e.splice(h,1);a=d.length&&p(e);if(!a){ha.apply(c,d);m=c;break a}break}}}R(a,f)(d,
b,!P,c,ta.test(a));m=c}return m}function d(){function a(c,d){b.push(c+=" ")>y.cacheLength&&delete a[b.shift()];return a[c]=d}var b=[];return a}function e(a){a[F]=!0;return a}function f(a){var b=x.createElement("div");try{return!!a(b)}catch(sc){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);
if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function u(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function m(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return e(function(b){b=+b;return e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function I(){}function n(a,b){var d,e,f,g,h,u,m;if(h=C[a+" "])return b?0:h.slice(0);h=a;
u=[];for(m=y.preFilter;h;){if(!d||(e=Za.exec(h)))e&&(h=h.slice(e[0].length)||h),u.push(f=[]);d=!1;if(e=N.exec(h))d=e.shift(),f.push({value:d,type:e[0].replace(Ua," ")}),h=h.slice(d.length);for(g in y.filter)!(e=Ia[g].exec(h))||m[g]&&!(e=m[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):C(a,u).slice(0)}function p(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function w(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=
fa++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,u,m,l=xa+" "+f;if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(m=b[F]||(b[F]={}),(u=m[d])&&u[0]===l){if(!0===(h=u[1])||h===v)return!0===h}else if(u=m[d]=[l],u[1]=a(b,c,g)||v,!0===u[1])return!0}}function q(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function r(a,b,c,d,e){for(var f,
g=[],h=0,u=a.length,m=null!=b;h<u;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),m&&b.push(h);return g}function L(a,b,d,f,g,h){f&&!f[F]&&(f=L(f));g&&!g[F]&&(g=L(g,h));return e(function(e,h,u,m){var l,k,I=[],n=[],ma=h.length,p;if(!(p=e)){p=b||"*";for(var w=u.nodeType?[u]:u,q=[],Aa=0,L=w.length;Aa<L;Aa++)c(p,w[Aa],q);p=q}p=!a||!e&&b?p:r(p,I,a,u,m);w=d?g||(e?a:ma||f)?[]:h:p;d&&d(p,w,u,m);if(f)for(l=r(w,n),f(l,[],u,m),u=l.length;u--;)if(k=l[u])w[n[u]]=!(p[n[u]]=k);if(e){if(g||a){if(g){l=[];for(u=w.length;u--;)(k=
w[u])&&l.push(p[u]=k);g(null,w=[],l,m)}for(u=w.length;u--;)(k=w[u])&&-1<(l=g?Ga.call(e,k):I[u])&&(e[l]=!(h[l]=k))}}else w=r(w===h?w.splice(ma,w.length):w),g?g(null,h,w,m):ha.apply(h,w)})}function sa(a){var b,c,d,e=a.length,f=y.relative[a[0].type];c=f||y.relative[" "];for(var g=f?1:0,h=w(function(a){return a===b},c,!0),u=w(function(a){return-1<Ga.call(b,a)},c,!0),m=[function(a,c,d){return!f&&(d||c!==J)||((b=c).nodeType?h(a,c,d):u(a,c,d))}];g<e;g++)if(c=y.relative[a[g].type])m=[w(q(m),c)];else{c=y.filter[a[g].type].apply(null,
a[g].matches);if(c[F]){for(d=++g;d<e&&!y.relative[a[d].type];d++);return L(1<g&&q(m),1<g&&p(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(Ua,"$1"),c,g<d&&sa(a.slice(g,d)),d<e&&sa(a=a.slice(d)),d<e&&p(a))}m.push(c)}return q(m)}function t(a,b){var d=0,f=0<b.length,g=0<a.length,h=function(e,h,u,m,l){var k,I,n=[],ma=0,w="0",p=e&&[],q=null!=l,Aa=J,L=e||g&&y.find.TAG("*",l&&h.parentNode||h),fb=xa+=null==Aa?1:Math.random()||.1;q&&(J=h!==x&&h,v=d);for(;null!=(l=L[w]);w++){if(g&&l){for(k=
0;I=a[k++];)if(I(l,h,u)){m.push(l);break}q&&(xa=fb,v=++d)}f&&((l=!I&&l)&&ma--,e&&p.push(l))}ma+=w;if(f&&w!==ma){for(k=0;I=b[k++];)I(p,n,h,u);if(e){if(0<ma)for(;w--;)p[w]||n[w]||(n[w]=M.call(m));n=r(n)}ha.apply(m,n);q&&!e&&0<n.length&&1<ma+b.length&&c.uniqueSort(m)}q&&(xa=fb,J=Aa);return p};return f?e(h):h}var S,A,v,y,Y,E,R,J,U,D,x,ca,P,O,Da,z,Q,F="sizzle"+-1*new Date,pa=a.document,xa=0,fa=0,H=d(),C=d(),db=d(),Z=!1,Qa=function(a,b){a===b&&(Z=!0);return 0},B=typeof b,K={}.hasOwnProperty,ja=[],M=ja.pop,
Ba=ja.push,ha=ja.push,G=ja.slice,Ga=ja.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},Ea="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Ya="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Ea+")|)|)[\\x20\\t\\r\\n\\f]*\\]",ua=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Ya.replace(3,8)+")*)|.*)\\)|)",
Ua=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Za=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,N=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ta=/[\x20\t\r\n\f]*[+~]/,da=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]","g"),Ta=new RegExp(ua),aa=new RegExp("^"+Ea+"$"),Ia={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+
Ya),PSEUDO:new RegExp("^"+ua),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},T=/^[^{]+\{\s*\[native \w/,
ib=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ea=/^(?:input|select|textarea|button)$/i,V=/^h\d$/i,X=/'|\\/g,ba=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),W=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ha.apply(ja=G.call(pa.childNodes),pa.childNodes),ja[pa.childNodes.length].nodeType}catch(rc){ha={apply:ja.length?function(a,b){Ba.apply(a,G.call(b))}:function(a,b){for(var c=a.length,d=
0;a[c++]=b[d++];);a.length=c-1}}}E=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};A=c.support={};D=c.setDocument=function(a){var b=a?a.ownerDocument||a:pa;a=b.defaultView;if(b===x||9!==b.nodeType||!b.documentElement)return x;x=b;ca=b.documentElement;P=!E(b);a&&a.attachEvent&&a!==a.top&&a.attachEvent("onbeforeunload",function(){D()});A.attributes=f(function(a){a.className="i";return!a.getAttribute("className")});A.getElementsByTagName=f(function(a){a.appendChild(b.createComment(""));
return!a.getElementsByTagName("*").length});A.getElementsByClassName=f(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});A.getById=f(function(a){ca.appendChild(a).id=F;return!b.getElementsByName||!b.getElementsByName(F).length});A.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==B&&P){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ba,W);
return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(ba,W);return function(a){return(a=typeof a.getAttributeNode!==B&&a.getAttributeNode("id"))&&a.value===b}});y.find.TAG=A.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==B)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f};y.find.CLASS=A.getElementsByClassName&&
function(a,b){if(typeof b.getElementsByClassName!==B&&P)return b.getElementsByClassName(a)};Da=[];O=[];if(A.qsa=T.test(b.querySelectorAll))f(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||O.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||O.push(":checked")}),f(function(a){var c=
b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("t","");a.querySelectorAll("[t^='']").length&&O.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":enabled").length||O.push(":enabled",":disabled");a.querySelectorAll("*,:x");O.push(",.*:")});(A.matchesSelector=T.test(z=ca.webkitMatchesSelector||ca.mozMatchesSelector||ca.oMatchesSelector||ca.msMatchesSelector))&&f(function(a){A.disconnectedMatch=z.call(a,"div");z.call(a,"[s!='']:x");Da.push("!=",
ua)});O=O.length&&new RegExp(O.join("|"));Da=Da.length&&new RegExp(Da.join("|"));Q=T.test(ca.contains)||ca.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Qa=ca.compareDocumentPosition?function(a,c){if(a===c)return Z=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&
a.compareDocumentPosition(c);return d?d&1||!A.sortDetached&&c.compareDocumentPosition(a)===d?a===b||Q(pa,a)?-1:c===b||Q(pa,c)?1:U?Ga.call(U,a)-Ga.call(U,c):0:d&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0;d=a.parentNode;var f=c.parentNode,g=[a],u=[c];if(a===c)return Z=!0,0;if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:U?Ga.call(U,a)-Ga.call(U,c):0;if(d===f)return h(a,c);for(d=a;d=d.parentNode;)g.unshift(d);for(d=c;d=d.parentNode;)u.unshift(d);for(;g[e]===u[e];)e++;return e?h(g[e],u[e]):
g[e]===pa?-1:u[e]===pa?1:0};return b};c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){(a.ownerDocument||a)!==x&&D(a);b=b.replace(da,"='$1']");if(!(!A.matchesSelector||!P||Da&&Da.test(b)||O&&O.test(b)))try{var d=z.call(a,b);if(d||A.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(tc){}return 0<c(b,x,null,[a]).length};c.contains=function(a,b){(a.ownerDocument||a)!==x&&D(a);return Q(a,b)};c.attr=function(a,c){(a.ownerDocument||a)!==x&&D(a);var d=
y.attrHandle[c.toLowerCase()],d=d&&K.call(y.attrHandle,c.toLowerCase())?d(a,c,!P):b;return d===b?A.attributes||!P?a.getAttribute(c):(d=a.getAttributeNode(c))&&d.specified?d.value:null:d};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var b,c=[],d=0,e=0;Z=!A.detectDuplicates;U=!A.sortStable&&a.slice(0);a.sort(Qa);if(Z){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a};Y=c.getText=function(a){var b,c="",d=0;b=a.nodeType;
if(!b)for(;b=a[d];d++)c+=Y(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Y(a)}else if(3===b||4===b)return a.nodeValue;return c};y=c.selectors={cacheLength:50,createPseudo:e,match:Ia,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ba,W);a[3]=(a[4]||a[5]||"").replace(ba,
W);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]);return a},PSEUDO:function(a){var c,d=!a[5]&&a[2];if(Ia.CHILD.test(a[0]))return null;a[3]&&a[4]!==b?a[2]=a[4]:d&&Ta.test(d)&&(c=n(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c));return a.slice(0,3)}},filter:{TAG:function(a){var b=
a.replace(ba,W).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=H[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),H(a,function(a){return b.test("string"===typeof a.className&&a.className||typeof a.getAttribute!==B&&a.getAttribute("class")||"")}))},ATTR:function(a,b,d){return function(e){e=c.attr(e,a);if(null==e)return"!="===b;if(!b)return!0;e+="";return"="===b?e===d:"!="===
b?e!==d:"^="===b?d&&0===e.indexOf(d):"*="===b?d&&-1<e.indexOf(d):"$="===b?d&&e.slice(-d.length)===d:"~="===b?-1<(" "+e+" ").indexOf(d):"|="===b?e===d||e.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,u){var m,l,k,I,n;c=f!==g?"nextSibling":"previousSibling";var ma=b.parentNode,w=h&&b.nodeName.toLowerCase();u=!u&&!h;if(ma){if(f){for(;c;){for(l=b;l=l[c];)if(h?
l.nodeName.toLowerCase()===w:1===l.nodeType)return!1;n=c="only"===a&&!n&&"nextSibling"}return!0}n=[g?ma.firstChild:ma.lastChild];if(g&&u)for(u=ma[F]||(ma[F]={}),m=u[a]||[],I=m[0]===xa&&m[1],k=m[0]===xa&&m[2],l=I&&ma.childNodes[I];l=++I&&l&&l[c]||(k=I=0)||n.pop();){if(1===l.nodeType&&++k&&l===b){u[a]=[xa,I,k];break}}else if(u&&(m=(b[F]||(b[F]={}))[a])&&m[0]===xa)k=m[1];else for(;(l=++I&&l&&l[c]||(k=I=0)||n.pop())&&((h?l.nodeName.toLowerCase()!==w:1!==l.nodeType)||!++k||(u&&((l[F]||(l[F]={}))[a]=[xa,
k]),l!==b)););k-=e;return k===d||0===k%d&&0<=k/d}}},PSEUDO:function(a,b){var d,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[F]?f(b):1<f.length?(d=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=Ga.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=R(a.replace(Ua,"$1"));return d[F]?e(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(c=
e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:e(function(a){return function(b){return 0<c(a,b).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||Y(b)).indexOf(a)}}),lang:e(function(a){aa.test(a||"")||c.error("unsupported lang: "+a);a=a.replace(ba,W).toLowerCase();return function(b){var c;do if(c=P?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&
1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===ca},focus:function(a){return a===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;
return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return V.test(a.nodeName)},input:function(a){return ea.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||
b.toLowerCase()===a.type)},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};y.pseudos.nth=y.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[S]=u(S);for(S in{submit:!0,
reset:!0})y.pseudos[S]=m(S);I.prototype=y.filters=y.pseudos;y.setFilters=new I;R=c.compile=function(a,b){var c,d=[],e=[],f=db[a+" "];if(!f){b||(b=n(a));for(c=b.length;c--;)f=sa(b[c]),f[F]?d.push(f):e.push(f);f=db(a,t(e,d))}return f};A.sortStable=F.split("").sort(Qa).join("")===F;A.detectDuplicates=Z;D();A.sortDetached=f(function(a){return a.compareDocumentPosition(x.createElement("div"))&1});f(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",
function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});A.attributes&&f(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});f(function(a){return null==a.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,
b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&d.specified?d.value:!0===a[b]?b.toLowerCase():null});k.find=c;k.expr=c.selectors;k.expr[":"]=k.expr.pseudos;k.unique=c.uniqueSort;k.text=c.getText;k.isXMLDoc=c.isXML;k.contains=c.contains})(a);var S={};k.Callbacks=function(a){a="string"===typeof a?S[a]||d(a):k.extend({},a);var c,e,f,g,h,u,m=[],l=!a.once&&[],n=function(b){e=a.memory&&b;f=!0;h=u||0;u=0;g=m.length;for(c=!0;m&&h<g;h++)if(!1===m[h].apply(b[0],b[1])&&a.stopOnFalse){e=!1;break}c=!1;m&&(l?
l.length&&n(l.shift()):e?m=[]:w.disable())},w={add:function(){if(m){var b=m.length;(function cb(b){k.each(b,function(b,c){var d=k.type(c);"function"===d?a.unique&&w.has(c)||m.push(c):c&&c.length&&"string"!==d&&cb(c)})})(arguments);c?g=m.length:e&&(u=b,n(e))}return this},remove:function(){m&&k.each(arguments,function(a,b){for(var d;-1<(d=k.inArray(b,m,d));)m.splice(d,1),c&&(d<=g&&g--,d<=h&&h--)});return this},has:function(a){return a?-1<k.inArray(a,m):!(!m||!m.length)},empty:function(){m=[];g=0;return this},
disable:function(){m=l=e=b;return this},disabled:function(){return!m},lock:function(){l=b;e||w.disable();return this},locked:function(){return!l},fireWith:function(a,b){!m||f&&!l||(b=b||[],b=[a,b.slice?b.slice():b],c?l.push(b):n(b));return this},fire:function(){w.fireWith(this,arguments);return this},fired:function(){return!!f}};return w};k.extend({Deferred:function(a){var b=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify",
"progress",k.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return k.Deferred(function(c){k.each(b,function(b,f){var g=f[0],h=k.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);if(a&&k.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=
a?k.extend(a,d):d}},e={};d.pipe=d.then;k.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);e[f[0]]=function(){e[f[0]+"With"](this===e?d:this,arguments);return this};e[f[0]+"With"]=g.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=oa.call(arguments),d=c.length,e=1!==d||a&&k.isFunction(a.promise)?d:0,f=1===e?a:k.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?oa.call(arguments):
d;c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,u,m;if(1<d)for(h=Array(d),u=Array(d),m=Array(d);b<d;b++)c[b]&&k.isFunction(c[b].promise)?c[b].promise().done(g(b,m,c)).fail(f.reject).progress(g(b,u,h)):--e;e||f.resolveWith(m,c);return f.promise()}});k.support=function(b){var c,d,e,f,g,h,u=B.createElement("div");u.setAttribute("className","t");u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=u.getElementsByTagName("*")||[];d=u.getElementsByTagName("a")[0];if(!d||
!d.style||!c.length)return b;e=B.createElement("select");f=e.appendChild(B.createElement("option"));c=u.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";b.getSetAttribute="t"!==u.className;b.leadingWhitespace=3===u.firstChild.nodeType;b.tbody=!u.getElementsByTagName("tbody").length;b.htmlSerialize=!!u.getElementsByTagName("link").length;b.style=/top/.test(d.getAttribute("style"));b.hrefNormalized="/a"===d.getAttribute("href");b.opacity=/^0.5/.test(d.style.opacity);
b.cssFloat=!!d.style.cssFloat;b.checkOn=!!c.value;b.optSelected=f.selected;b.enctype=!!B.createElement("form").enctype;b.html5Clone="<:nav></:nav>"!==B.createElement("nav").cloneNode(!0).outerHTML;b.inlineBlockNeedsLayout=!1;b.shrinkWrapBlocks=!1;b.pixelPosition=!1;b.deleteExpando=!0;b.noCloneEvent=!0;b.reliableMarginRight=!0;b.boxSizingReliable=!0;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete u.test}catch(oc){b.deleteExpando=!1}c=B.createElement("input");
c.setAttribute("value","");b.input=""===c.getAttribute("value");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","t");c.setAttribute("name","t");d=B.createDocumentFragment();d.appendChild(c);b.appendChecked=c.checked;b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;u.attachEvent&&(u.attachEvent("onclick",function(){b.noCloneEvent=!1}),u.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})u.setAttribute(d="on"+h,"t"),b[h+"Bubbles"]=
d in a||!1===u.attributes[d].expando;u.style.backgroundClip="content-box";u.cloneNode(!0).style.backgroundClip="";b.clearCloneStyle="content-box"===u.style.backgroundClip;for(h in k(b))break;b.ownLast="0"!==h;k(function(){var c,d,e=B.getElementsByTagName("body")[0];e&&(c=B.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(c).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d=u.getElementsByTagName("td"),
d[0].style.cssText="padding:0;margin:0;border:0;display:none",g=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",b.reliableHiddenOffsets=g&&0===d[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",k.swap(e,null!=e.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===u.offsetWidth}),a.getComputedStyle&&(b.pixelPosition=
"1%"!==(a.getComputedStyle(u,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(u,null)||{width:"4px"}).width,d=u.appendChild(B.createElement("div")),d.style.cssText=u.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",d.style.marginRight=d.style.width="0",u.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof u.style.zoom!==M&&(u.innerHTML="",
u.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==u.offsetWidth,b.inlineBlockNeedsLayout&&(e.style.zoom=1)),e.removeChild(c),c=u=d=d=null)});c=e=d=f=d=c=null;return b}({});var R=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ca=/([A-Z])/g;
k.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?k.cache[a[k.expando]]:a[k.expando];return!!a&&!h(a)},data:function(a,b,c){return f(a,b,c)},removeData:function(a,b){return e(a,b)},_data:function(a,b,c){return f(a,b,c,!0)},_removeData:function(a,b){return e(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&k.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===
b}});k.fn.extend({data:function(a,c){var d,e,f=null,h=0,u=this[0];if(a===b){if(this.length&&(f=k.data(u),1===u.nodeType&&!k._data(u,"parsedAttrs"))){for(d=u.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=k.camelCase(e.slice(5)),g(u,e,f[e]));k._data(u,"parsedAttrs",!0)}return f}return"object"===typeof a?this.each(function(){k.data(this,a)}):1<arguments.length?this.each(function(){k.data(this,a,c)}):u?g(u,a,k.data(u,a)):null},removeData:function(a){return this.each(function(){k.removeData(this,
a)})}});k.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=k._data(a,b),c&&(!d||k.isArray(c)?d=k._data(a,b,k.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=k.queue(a,b),d=c.length,e=c.shift(),f=k._queueHooks(a,b),g=function(){k.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return k._data(a,c)||k._data(a,c,{empty:k.Callbacks("once memory").add(function(){k._removeData(a,
b+"queue");k._removeData(a,c)})})}});k.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?k.queue(this[0],a):c===b?this:this.each(function(){var b=k.queue(this,a,c);k._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&k.dequeue(this,a)})},dequeue:function(a){return this.each(function(){k.dequeue(this,a)})},delay:function(a,b){a=k.fx?k.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=k.Deferred(),g=this,h=this.length,u=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";h--;)(d=k._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(u));u();return f.promise(c)}});var pa,Da,Qa=/[\t\r\n\f]/g,db=/\r/g,Ya=/^(?:input|select|textarea|button|object)$/i,Ga=/^(?:a|area)$/i,Za=/^(?:checked|selected)$/i,Ea=k.support.getSetAttribute,Ta=k.support.input;k.fn.extend({attr:function(a,
b){return k.access(this,k.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){k.removeAttr(this,a)})},prop:function(a,b){return k.access(this,k.prop,a,b,1<arguments.length)},removeProp:function(a){a=k.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(I){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length;b="string"===typeof a&&a;if(k.isFunction(a))return this.each(function(b){k(this).addClass(a.call(this,b,this.className))});if(b)for(b=
(a||"").match(qa)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Qa," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=k.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length;b=0===arguments.length||"string"===typeof a&&a;if(k.isFunction(a))return this.each(function(b){k(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(qa)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+
" ").replace(Qa," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");c.className=a?k.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):k.isFunction(a)?this.each(function(c){k(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=k(this),f=a.match(qa)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else if(c===
M||"boolean"===c)this.className&&k._data(this,"__className__",this.className),this.className=this.className||!1===a?"":k._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Qa," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=k.isFunction(a),this.each(function(c){1===this.nodeType&&(c=e?a.call(this,c,k(this).val()):a,null==c?c="":"number"===
typeof c?c+="":k.isArray(c)&&(c=k.map(c,function(a){return null==a?"":a+""})),d=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,c,"value")!==b||(this.value=c))});if(f){if((d=k.valHooks[f.type]||k.valHooks[f.nodeName.toLowerCase()])&&"get"in d&&(c=d.get(f,"value"))!==b)return c;c=f.value;return"string"===typeof c?c.replace(db,""):null==c?"":c}}});k.extend({valHooks:{option:{get:function(a){var b=k.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,
c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?null:[],f=a?d+1:c.length,g=0>d?f:a?d:0;g<f;g++)if(b=c[g],!(!b.selected&&g!==d||(k.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&k.nodeName(b.parentNode,"optgroup"))){b=k(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){for(var c,d,e=a.options,f=k.makeArray(b),g=e.length;g--;)if(d=e[g],d.selected=0<=k.inArray(k(d).val(),f))c=!0;c||(a.selectedIndex=-1);return f}}},attr:function(a,c,
d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(typeof a.getAttribute===M)return k.prop(a,c,d);1===g&&k.isXMLDoc(a)||(c=c.toLowerCase(),e=k.attrHooks[c]||(k.expr.match.bool.test(c)?Da:pa));if(d!==b)if(null===d)k.removeAttr(a,c);else{if(e&&"set"in e&&(f=e.set(a,d,c))!==b)return f;a.setAttribute(c,d+"");return d}else{if(e&&"get"in e&&null!==(f=e.get(a,c)))return f;f=k.find.attr(a,c);return null==f?b:f}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(qa);if(f&&1===a.nodeType)for(;c=f[e++];)d=
k.propFix[c]||c,k.expr.match.bool.test(c)?Ta&&Ea||!Za.test(c)?a[d]=!1:a[k.camelCase("default-"+c)]=a[d]=!1:k.attr(a,c,""),a.removeAttribute(Ea?c:d)},attrHooks:{type:{set:function(a,b){if(!k.support.radioValue&&"radio"===b&&k.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return 1===g&&k.isXMLDoc(a)||(c=k.propFix[c]||c,f=k.propHooks[c]),d!==b?f&&
"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=k.find.attr(a,"tabindex");return b?parseInt(b,10):Ya.test(a.nodeName)||Ga.test(a.nodeName)&&a.href?0:-1}}}});Da={set:function(a,b,c){!1===b?k.removeAttr(a,c):Ta&&Ea||!Za.test(c)?a.setAttribute(!Ea&&k.propFix[c]||c,c):a[k.camelCase("default-"+c)]=a[c]=!0;return c}};k.each(k.expr.match.bool.source.match(/\w+/g),function(a,c){var d=k.expr.attrHandle[c]||k.find.attr;k.expr.attrHandle[c]=
Ta&&Ea||!Za.test(c)?function(a,c,e){var f=k.expr.attrHandle[c];a=e?b:(k.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;k.expr.attrHandle[c]=f;return a}:function(a,c,d){return d?b:a[k.camelCase("default-"+c)]?c.toLowerCase():null}});Ta&&Ea||(k.attrHooks.value={set:function(a,b,c){if(k.nodeName(a,"input"))a.defaultValue=b;else return pa&&pa.set(a,b,c)}});Ea||(pa={set:function(a,c,d){var e=a.getAttributeNode(d);e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d));e.value=c+="";return"value"===
d||c===a.getAttribute(d)?c:b}},k.expr.attrHandle.id=k.expr.attrHandle.name=k.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},k.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:pa.set},k.attrHooks.contenteditable={set:function(a,b,c){pa.set(a,""===b?!1:b,c)}},k.each(["width","height"],function(a,b){k.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}}));k.support.hrefNormalized||
k.each(["href","src"],function(a,b){k.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});k.support.style||(k.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}});k.support.optSelected||(k.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}});k.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){k.propFix[this.toLowerCase()]=this});k.support.enctype||(k.propFix.enctype="encoding");k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(a,b){if(k.isArray(b))return a.checked=0<=k.inArray(k(a).val(),b)}};k.support.checkOn||(k.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Ia=/^(?:input|select|textarea)$/i,ib=/^key/,Ua=/^(?:mouse|contextmenu)|click/,ub=/^(?:focusinfocus|focusoutblur)$/,vb=/^([^.]*)(?:\.(.+)|)$/;k.event={global:{},
add:function(a,c,d,e,f){var g,h,m,l,u,n,w,p,I;if(m=k._data(a)){d.handler&&(l=d,d=l.handler,f=l.selector);d.guid||(d.guid=k.guid++);(h=m.events)||(h=m.events={});(u=m.handle)||(u=m.handle=function(a){return typeof k===M||a&&k.event.triggered===a.type?b:k.event.dispatch.apply(u.elem,arguments)},u.elem=a);c=(c||"").match(qa)||[""];for(m=c.length;m--;)g=vb.exec(c[m])||[],p=n=g[1],I=(g[2]||"").split(".").sort(),p&&(g=k.event.special[p]||{},p=(f?g.delegateType:g.bindType)||p,g=k.event.special[p]||{},n=
k.extend({type:p,origType:n,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&k.expr.match.needsContext.test(f),namespace:I.join(".")},l),(w=h[p])||(w=h[p]=[],w.delegateCount=0,g.setup&&!1!==g.setup.call(a,e,I,u)||(a.addEventListener?a.addEventListener(p,u,!1):a.attachEvent&&a.attachEvent("on"+p,u))),g.add&&(g.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?w.splice(w.delegateCount++,0,n):w.push(n),k.event.global[p]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,m,l,u,n,w,p,I,q,
r=k.hasData(a)&&k._data(a);if(r&&(u=r.events)){b=(b||"").match(qa)||[""];for(l=b.length;l--;)if(h=vb.exec(b[l])||[],p=q=h[1],I=(h[2]||"").split(".").sort(),p){n=k.event.special[p]||{};p=(d?n.delegateType:n.bindType)||p;w=u[p]||[];h=h[2]&&new RegExp("(^|\\.)"+I.join("\\.(?:.*\\.|)")+"(\\.|$)");for(m=f=w.length;f--;)g=w[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(w.splice(f,1),g.selector&&w.delegateCount--,n.remove&&n.remove.call(a,
g));m&&!w.length&&(n.teardown&&!1!==n.teardown.call(a,I,r.handle)||k.removeEvent(a,p,r.handle),delete u[p])}else for(p in u)k.event.remove(a,p+b[l],c,d,!0);k.isEmptyObject(u)&&(delete r.handle,k._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,m,l,u,n,w=[e||B],p=X.call(c,"type")?c.type:c;u=X.call(c,"namespace")?c.namespace.split("."):[];m=g=e=e||B;if(3!==e.nodeType&&8!==e.nodeType&&!ub.test(p+k.event.triggered)&&(0<=p.indexOf(".")&&(u=p.split("."),p=u.shift(),u.sort()),h=0>p.indexOf(":")&&
"on"+p,c=c[k.expando]?c:new k.Event(p,"object"===typeof c&&c),c.isTrigger=f?2:3,c.namespace=u.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:k.makeArray(d,[c]),u=k.event.special[p]||{},f||!u.trigger||!1!==u.trigger.apply(e,d))){if(!f&&!u.noBubble&&!k.isWindow(e)){l=u.delegateType||p;ub.test(l+p)||(m=m.parentNode);for(;m;m=m.parentNode)w.push(m),g=m;g===(e.ownerDocument||B)&&w.push(g.defaultView||g.parentWindow||
a)}for(n=0;(m=w[n++])&&!c.isPropagationStopped();)c.type=1<n?l:u.bindType||p,(g=(k._data(m,"events")||{})[c.type]&&k._data(m,"handle"))&&g.apply(m,d),(g=h&&m[h])&&k.acceptData(m)&&g.apply&&!1===g.apply(m,d)&&c.preventDefault();c.type=p;if(!(f||c.isDefaultPrevented()||u._default&&!1!==u._default.apply(w.pop(),d))&&k.acceptData(e)&&h&&e[p]&&!k.isWindow(e)){(g=e[h])&&(e[h]=null);k.event.triggered=p;try{e[p]()}catch(qc){}k.event.triggered=b;g&&(e[h]=g)}return c.result}},dispatch:function(a){a=k.event.fix(a);
var c,d,e,f,g,h=oa.call(arguments);c=(k._data(this,"events")||{})[a.type]||[];var m=k.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!m.preDispatch||!1!==m.preDispatch.call(this,a)){g=k.event.handlers.call(this,a,c);for(c=0;(e=g[c++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=d,a.data=d.data,d=((k.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,
h),d!==b&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());m.postDispatch&&m.postDispatch.call(this,a);return a.result}},handlers:function(a,c){var d,e,f,g,h=[],m=c.delegateCount,l=a.target;if(m&&l.nodeType&&(!a.button||"click"!==a.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==a.type)){f=[];for(g=0;g<m;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?0<=k(d,this).index(l):k.find(d,this,null,[l]).length),f[d]&&f.push(e);f.length&&h.push({elem:l,
handlers:f})}m<c.length&&h.push({elem:this,handlers:c.slice(m)});return h},fix:function(a){if(a[k.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=Ua.test(b)?this.mouseHooks:ib.test(b)?this.keyHooks:{});d=f.props?this.props.concat(f.props):this.props;a=new k.Event(e);for(b=d.length;b--;)c=d[b],a[c]=e[c];a.target||(a.target=e.srcElement||B);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,e):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f=c.button,g=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||B,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||
d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?c.toElement:g);a.which||f===b||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==n()&&this.focus)try{return this.focus(),!1}catch(u){}},delegateType:"focusin"},blur:{trigger:function(){if(this===n()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(k.nodeName(this,
"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return k.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=k.extend(new k.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?k.event.trigger(a,null,b):k.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};k.removeEvent=B.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===M&&(a[b]=null),a.detachEvent(b,c))};k.Event=function(a,b){if(!(this instanceof k.Event))return new k.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?l:m):this.type=a;b&&k.extend(this,b);this.timeStamp=a&&a.timeStamp||k.now();this[k.expando]=!0};k.Event.prototype={isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=l;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=l;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l;this.stopPropagation()}};k.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){k.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!k.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});k.support.submitBubbles||(k.event.special.submit={setup:function(){if(k.nodeName(this,"form"))return!1;k.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=k.nodeName(a,"input")||k.nodeName(a,"button")?a.form:b)&&!k._data(a,"submitBubbles")&&(k.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),k._data(a,"submitBubbles",!0))})},
postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&k.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(k.nodeName(this,"form"))return!1;k.event.remove(this,"._submit")}});k.support.changeBubbles||(k.event.special.change={setup:function(){if(Ia.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)k.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),
k.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);k.event.simulate("change",this,a,!0)});return!1}k.event.add(this,"beforeactivate._change",function(a){a=a.target;Ia.test(a.nodeName)&&!k._data(a,"changeBubbles")&&(k.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||k.event.simulate("change",this.parentNode,a,!0)}),k._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){k.event.remove(this,"._change");return!Ia.test(this.nodeName)}});k.support.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){k.event.simulate(b,a.target,k.event.fix(a),!0)};k.event.special[b]={setup:function(){0===c++&&B.addEventListener(a,d,!0)},teardown:function(){0===--c&&B.removeEventListener(a,d,!0)}}});k.fn.extend({on:function(a,
c,d,e,f){var g,h;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=m;else if(!e)return this;1===f&&(h=e,e=function(a){k().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=k.guid++));return this.each(function(){k.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=
a.handleObj,k(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=m);return this.each(function(){k.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){k.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return k.event.trigger(a,b,c,!0)}});var Mb=/^.[^:#\[\.,]*$/,Rb=/^(?:parents|prev(?:Until|All))/,
wb=k.expr.match.needsContext,Sb={children:!0,contents:!0,next:!0,prev:!0};k.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!==typeof a)return this.pushStack(k(a).filter(function(){for(b=0;b<e;b++)if(k.contains(d[b],this))return!0}));for(b=0;b<e;b++)k.find(a,d[b],c);c=this.pushStack(1<e?k.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},has:function(a){var b,c=k(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(k.contains(this,c[b]))return!0})},
not:function(a){return this.pushStack(r(this,a||[],!0))},filter:function(a){return this.pushStack(r(this,a||[],!1))},is:function(a){return!!r(this,"string"===typeof a&&wb.test(a)?k(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=wb.test(a)||"string"!==typeof a?k(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&k.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?k.unique(f):
f)},index:function(a){return a?"string"===typeof a?k.inArray(this[0],k(a)):k.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"===typeof a?k(a,b):k.makeArray(a&&a.nodeType?[a]:a),c=k.merge(this.get(),c);return this.pushStack(k.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});k.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return k.dir(a,
"parentNode")},parentsUntil:function(a,b,c){return k.dir(a,"parentNode",c)},next:function(a){return p(a,"nextSibling")},prev:function(a){return p(a,"previousSibling")},nextAll:function(a){return k.dir(a,"nextSibling")},prevAll:function(a){return k.dir(a,"previousSibling")},nextUntil:function(a,b,c){return k.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return k.dir(a,"previousSibling",c)},siblings:function(a){return k.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return k.sibling(a.firstChild)},
contents:function(a){return k.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:k.merge([],a.childNodes)}},function(a,b){k.fn[a]=function(c,d){var e=k.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(e=k.filter(d,e));1<this.length&&(Sb[a]||(e=k.unique(e)),Rb.test(a)&&(e=e.reverse()));return this.pushStack(e)}});k.extend({filter:function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?k.find.matchesSelector(d,a)?[d]:[]:k.find.matches(a,k.grep(b,
function(a){return 1===a.nodeType}))},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!k(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var qb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Tb=/ jQuery\d+="(?:null|\d+)"/g,xb=new RegExp("<(?:"+qb+")[\\s/>]",
"i"),jb=/^\s+/,yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zb=/<([\w:]+)/,Ab=/<tbody/i,Ub=/<|&#?\w+;/,Vb=/<(?:script|style|link)/i,gb=/^(?:checkbox|radio)$/i,Wb=/checked\s*(?:[^=]|=\s*.checked.)/i,Bb=/^$|\/(?:java|ecma)script/i,Nb=/^true\/(.*)/,Xb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ya={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},kb=q(B).appendChild(B.createElement("div"));ya.optgroup=ya.option;ya.tbody=ya.tfoot=ya.colgroup=ya.caption=ya.thead;ya.th=ya.td;k.fn.extend({text:function(a){return k.access(this,function(a){return a===b?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||B).createTextNode(a))},
null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||t(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=t(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?k.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||k.cleanData(x(c)),c.parentNode&&(b&&k.contains(c.ownerDocument,c)&&O(x(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&k.cleanData(x(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&k.nodeName(a,"select")&&(a.options.length=0)}return this},
clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return k.clone(this,a,b)})},html:function(a){return k.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Tb,""):b;if(!("string"!==typeof a||Vb.test(a)||!k.support.htmlSerialize&&xb.test(a)||!k.support.leadingWhitespace&&jb.test(a)||ya[(zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(yb,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(k.cleanData(x(c,
!1)),c.innerHTML=a);c=0}catch(mc){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=k.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),k(this).remove(),e.insertBefore(c,d))},!0);return b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=Na.apply([],a);var d,e,f,g,h=0,m=this.length,l=this,n=m-1,u=a[0],p=k.isFunction(u);
if(p||!(1>=m||"string"!==typeof u||k.support.checkClone)&&Wb.test(u))return this.each(function(d){var e=l.eq(d);p&&(a[0]=u.call(this,d,e.html()));e.domManip(a,b,c)});if(m&&(g=k.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=g.firstChild,1===g.childNodes.length&&(g=d),d)){f=k.map(x(g,"script"),v);for(e=f.length;h<m;h++)d=g,h!==n&&(d=k.clone(d,!0,!0),e&&k.merge(f,x(d,"script"))),b.call(this[h],d,h);if(e)for(g=f[f.length-1].ownerDocument,k.map(f,J),h=0;h<e;h++)d=f[h],Bb.test(d.type||"")&&!k._data(d,
"globalEval")&&k.contains(g,d)&&(d.src?k._evalUrl(d.src):k.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Xb,"")));g=d=null}return this}});k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){k.fn[a]=function(a){for(var c=0,d=[],e=k(a),f=e.length-1;c<=f;c++)a=c===f?this:this.clone(!0),k(e[c])[b](a),va.apply(d,a.get());return this.pushStack(d)}});k.extend({clone:function(a,b,c){var d,e,f,g,h,m=k.contains(a.ownerDocument,
a);k.support.html5Clone||k.isXMLDoc(a)||!xb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(kb.innerHTML=a.outerHTML,kb.removeChild(f=kb.firstChild));if(!(k.support.noCloneEvent&&k.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||k.isXMLDoc(a)))for(d=x(f),h=x(a),g=0;null!=(e=h[g]);++g)if(d[g]){var l=d[g],n,u=void 0,p;if(1===l.nodeType){n=l.nodeName.toLowerCase();if(!k.support.noCloneEvent&&l[k.expando]){p=k._data(l);for(u in p.events)k.removeEvent(l,u,p.handle);l.removeAttribute(k.expando)}if("script"===
n&&l.text!==e.text)v(l).text=e.text,J(l);else if("object"===n)l.parentNode&&(l.outerHTML=e.outerHTML),k.support.html5Clone&&e.innerHTML&&!k.trim(l.innerHTML)&&(l.innerHTML=e.innerHTML);else if("input"===n&&gb.test(e.type))l.defaultChecked=l.checked=e.checked,l.value!==e.value&&(l.value=e.value);else if("option"===n)l.defaultSelected=l.selected=e.defaultSelected;else if("input"===n||"textarea"===n)l.defaultValue=e.defaultValue}}if(b)if(c)for(h=h||x(a),d=d||x(f),g=0;null!=(e=h[g]);g++)F(e,d[g]);else F(a,
f);d=x(f,"script");0<d.length&&O(d,!m&&x(a,"script"));return f},buildFragment:function(a,b,c,d){for(var e,f,g,h,m,l,n=a.length,u=q(b),p=[],w=0;w<n;w++)if((f=a[w])||0===f)if("object"===k.type(f))k.merge(p,f.nodeType?[f]:f);else if(Ub.test(f)){g=g||u.appendChild(b.createElement("div"));h=(zb.exec(f)||["",""])[1].toLowerCase();l=ya[h]||ya._default;g.innerHTML=l[1]+f.replace(yb,"<$1></$2>")+l[2];for(e=l[0];e--;)g=g.lastChild;!k.support.leadingWhitespace&&jb.test(f)&&p.push(b.createTextNode(jb.exec(f)[0]));
if(!k.support.tbody)for(e=(f="table"!==h||Ab.test(f)?"<table>"!==l[1]||Ab.test(f)?0:g:g.firstChild)&&f.childNodes.length;e--;)k.nodeName(m=f.childNodes[e],"tbody")&&!m.childNodes.length&&f.removeChild(m);k.merge(p,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=u.lastChild}else p.push(b.createTextNode(f));g&&u.removeChild(g);k.support.appendChecked||k.grep(x(p,"input"),H);for(w=0;f=p[w++];)if(!d||-1===k.inArray(f,d))if(a=k.contains(f.ownerDocument,f),g=x(u.appendChild(f),
"script"),a&&O(g),c)for(e=0;f=g[e++];)Bb.test(f.type||"")&&c.push(f);return u},cleanData:function(a,b){for(var c,d,e,f,g=0,h=k.expando,m=k.cache,l=k.support.deleteExpando,n=k.event.special;null!=(c=a[g]);g++)if(b||k.acceptData(c))if(f=(e=c[h])&&m[e]){if(f.events)for(d in f.events)n[d]?k.event.remove(c,d):k.removeEvent(c,d,f.handle);m[e]&&(delete m[e],l?delete c[h]:typeof c.removeAttribute!==M?c.removeAttribute(h):c[h]=null,ea.push(e))}},_evalUrl:function(a){return k.ajax({url:a,type:"GET",dataType:"script",
async:!1,global:!1,"throws":!0})}});k.fn.extend({wrapAll:function(a){if(k.isFunction(a))return this.each(function(b){k(this).wrapAll(a.call(this,b))});if(this[0]){var b=k(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return k.isFunction(a)?this.each(function(b){k(this).wrapInner(a.call(this,b))}):this.each(function(){var b=
k(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=k.isFunction(a);return this.each(function(c){k(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()}});var Wa,La,Ma,lb=/alpha\([^)]*\)/i,Yb=/opacity\s*=\s*([^)]*)/,Zb=/^(top|right|bottom|left)$/,$b=/^(none|table(?!-c[ea]).+)/,Cb=/^margin/,Ob=new RegExp("^("+za+")(.*)$","i"),ab=new RegExp("^("+za+")(?!px)[a-z%]+$",
"i"),ac=new RegExp("^([+-])=("+za+")","i"),sb={BODY:"block"},bc={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Ka=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"];k.fn.extend({css:function(a,c){return k.access(this,function(a,c,d){var e,f={},g=0;if(k.isArray(c)){e=La(a);for(d=c.length;g<d;g++)f[c[g]]=k.css(a,c[g],!1,e);return f}return d!==b?k.style(a,c,d):k.css(a,c)},a,c,1<arguments.length)},show:function(){return G(this,!0)},hide:function(){return G(this)},
toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){C(this)?k(this).show():k(this).hide()})}});k.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ma(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,
g,h,m=k.camelCase(c),l=a.style;c=k.cssProps[m]||(k.cssProps[m]=K(l,m));h=k.cssHooks[c]||k.cssHooks[m];if(d!==b){if(g=typeof d,"string"===g&&(f=ac.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(k.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||k.cssNumber[m]||(d+="px"),k.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(l[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{l[c]=d}catch(pc){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:l[c]}},css:function(a,c,d,
e){var f,g;g=k.camelCase(c);c=k.cssProps[g]||(k.cssProps[g]=K(a.style,g));(g=k.cssHooks[c]||k.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,d));f===b&&(f=Ma(a,c,e));"normal"===f&&c in Db&&(f=Db[c]);return""===d||d?(a=parseFloat(f),!0===d||k.isNumeric(a)?a||0:f):f}});a.getComputedStyle?(La=function(b){return a.getComputedStyle(b,null)},Ma=function(a,c,d){var e,f=(d=d||La(a))?d.getPropertyValue(c)||d[c]:b,g=a.style;d&&(""!==f||k.contains(a.ownerDocument,a)||(f=k.style(a,c)),ab.test(f)&&Cb.test(c)&&(a=g.width,
c=g.minWidth,e=g.maxWidth,g.minWidth=g.maxWidth=g.width=f,f=d.width,g.width=a,g.minWidth=c,g.maxWidth=e));return f}):B.documentElement.currentStyle&&(La=function(a){return a.currentStyle},Ma=function(a,c,d){var e,f,g=(d=d||La(a))?d[c]:b,h=a.style;null==g&&h&&h[c]&&(g=h[c]);if(ab.test(g)&&!Zb.test(c)){d=h.left;if(f=(e=a.runtimeStyle)&&e.left)e.left=a.currentStyle.left;h.left="fontSize"===c?"1em":g;g=h.pixelLeft+"px";h.left=d;f&&(e.left=f)}return""===g?"auto":g});k.each(["height","width"],function(a,
b){k.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&$b.test(k.css(a,"display"))?k.swap(a,bc,function(){return ra(a,b,d)}):ra(a,b,d)},set:function(a,c,d){var e=d&&La(a);return na(a,c,d?V(a,b,d,k.support.boxSizing&&"border-box"===k.css(a,"boxSizing",!1,e),e):0)}}});k.support.opacity||(k.cssHooks.opacity={get:function(a,b){return Yb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,
e=k.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===k.trim(f.replace(lb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter))return;c.filter=lb.test(f)?f.replace(lb,e):f+" "+e}});k(function(){k.support.reliableMarginRight||(k.cssHooks.marginRight={get:function(a,b){if(b)return k.swap(a,{display:"inline-block"},Ma,[a,"marginRight"])}});!k.support.pixelPosition&&k.fn.position&&k.each(["top","left"],function(a,b){k.cssHooks[b]=
{get:function(a,c){if(c)return c=Ma(a,b),ab.test(c)?k(a).position()[b]+"px":c}}})});k.expr&&k.expr.filters&&(k.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!k.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||k.css(a,"display"))},k.expr.filters.visible=function(a){return!k.expr.filters.hidden(a)});k.each({margin:"",padding:"",border:"Width"},function(a,b){k.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)e[a+
Ka[d]+b]=c[d]||c[d-2]||c[0];return e}};Cb.test(a)||(k.cssHooks[a+b].set=na)});var cc=/%20/g,Pb=/\[\]$/,Eb=/\r?\n/g,dc=/^(?:submit|button|image|reset|file)$/i,ec=/^(?:input|select|textarea|keygen)/i;k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=k.prop(this,"elements");return a?k.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!k(this).is(":disabled")&&ec.test(this.nodeName)&&!dc.test(a)&&(this.checked||
!gb.test(a))}).map(function(a,b){var c=k(this).val();return null==c?null:k.isArray(c)?k.map(c,function(a){return{name:b.name,value:a.replace(Eb,"\r\n")}}):{name:b.name,value:c.replace(Eb,"\r\n")}}).get()}});k.param=function(a,c){var d,e=[],f=function(a,b){b=k.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=k.ajaxSettings&&k.ajaxSettings.traditional);if(k.isArray(a)||a.jquery&&!k.isPlainObject(a))k.each(a,function(){f(this.name,this.value)});else for(d in a)la(d,
a[d],c,f);return e.join("&").replace(cc,"+")};k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){k.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});k.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,
b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ra,Ja,mb=k.now(),nb=/\?/,fc=/#.*$/,Fb=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,hc=/^(?:GET|HEAD)$/,ic=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hb=k.fn.load,Ib={},hb={},Jb="*/".concat("*");try{Ja=ta.href}catch(u){Ja=B.createElement("a"),Ja.href="",Ja=Ja.href}Ra=Gb.exec(Ja.toLowerCase())||[];k.fn.load=
function(a,c,d){if("string"!==typeof a&&Hb)return Hb.apply(this,arguments);var e,f,g,h=this,m=a.indexOf(" ");0<=m&&(e=a.slice(m,a.length),a=a.slice(0,m));k.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(g="POST");0<h.length&&k.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments;h.html(e?k("<div>").append(k.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])});return this};k.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){k.fn[b]=function(a){return this.on(b,a)}});k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ja,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ra[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",
text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?E(E(a,k.ajaxSettings),b):E(k.ajaxSettings,a)},ajaxPrefilter:T(Ib),ajaxTransport:T(hb),ajax:function(a,c){function d(a,c,d,e){var f,p,t,A;A=c;if(2!==S){S=2;m&&clearTimeout(m);n=b;h=e||"";y.readyState=0<a?4:0;e=200<=a&&300>a||304===a;if(d){t=w;for(var v=y,Y,E,I,R,U=t.contents,J=t.dataTypes;"*"===J[0];)J.shift(),
E===b&&(E=t.mimeType||v.getResponseHeader("Content-Type"));if(E)for(R in U)if(U[R]&&U[R].test(E)){J.unshift(R);break}if(J[0]in d)I=J[0];else{for(R in d){if(!J[0]||t.converters[R+" "+J[0]]){I=R;break}Y||(Y=R)}I=I||Y}I?(I!==J[0]&&J.unshift(I),t=d[I]):t=void 0}a:{d=w;Y=t;E=y;I=e;var D,x,ca,v={},U=d.dataTypes.slice();if(U[1])for(x in d.converters)v[x.toLowerCase()]=d.converters[x];for(R=U.shift();R;)if(d.responseFields[R]&&(E[d.responseFields[R]]=Y),!ca&&I&&d.dataFilter&&(Y=d.dataFilter(Y,d.dataType)),
ca=R,R=U.shift())if("*"===R)R=ca;else if("*"!==ca&&ca!==R){x=v[ca+" "+R]||v["* "+R];if(!x)for(D in v)if(t=D.split(" "),t[1]===R&&(x=v[ca+" "+t[0]]||v["* "+t[0]])){!0===x?x=v[D]:!0!==v[D]&&(R=t[0],U.unshift(t[1]));break}if(!0!==x)if(x&&d["throws"])Y=x(Y);else try{Y=x(Y)}catch(Qb){t={state:"parsererror",error:x?Qb:"No conversion from "+ca+" to "+R};break a}}t={state:"success",data:Y}}if(e)w.ifModified&&((A=y.getResponseHeader("Last-Modified"))&&(k.lastModified[g]=A),(A=y.getResponseHeader("etag"))&&
(k.etag[g]=A)),204===a||"HEAD"===w.type?A="nocontent":304===a?A="notmodified":(A=t.state,f=t.data,p=t.error,e=!p);else if(p=A,a||!A)A="error",0>a&&(a=0);y.status=a;y.statusText=(c||A)+"";e?r.resolveWith(q,[f,A,y]):r.rejectWith(q,[y,A,p]);y.statusCode(sa);sa=b;l&&u.trigger(e?"ajaxSuccess":"ajaxError",[y,w,e?f:p]);L.fireWith(q,[y,A]);l&&(u.trigger("ajaxComplete",[y,w]),--k.active||k.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);c=c||{};var e,f,g,h,m,l,n,p,w=k.ajaxSetup({},c),q=w.context||
w,u=w.context&&(q.nodeType||q.jquery)?k(q):k.event,r=k.Deferred(),L=k.Callbacks("once memory"),sa=w.statusCode||{},t={},A={},S=0,v="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(2===S){if(!p)for(p={};b=gc.exec(h);)p[b[1].toLowerCase()]=b[2];b=p[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===S?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();S||(a=A[c]=A[c]||a,t[a]=b);return this},overrideMimeType:function(a){S||(w.mimeType=a);return this},
statusCode:function(a){var b;if(a)if(2>S)for(b in a)sa[b]=[sa[b],a[b]];else y.always(a[y.status]);return this},abort:function(a){a=a||v;n&&n.abort(a);d(0,a);return this}};r.promise(y).complete=L.add;y.success=y.done;y.error=y.fail;w.url=((a||w.url||Ja)+"").replace(fc,"").replace(ic,Ra[1]+"//");w.type=c.method||c.type||w.method||w.type;w.dataTypes=k.trim(w.dataType||"*").toLowerCase().match(qa)||[""];null==w.crossDomain&&(e=Gb.exec(w.url.toLowerCase()),w.crossDomain=!(!e||e[1]===Ra[1]&&e[2]===Ra[2]&&
(e[3]||("http:"===e[1]?"80":"443"))===(Ra[3]||("http:"===Ra[1]?"80":"443"))));w.data&&w.processData&&"string"!==typeof w.data&&(w.data=k.param(w.data,w.traditional));N(Ib,w,c,y);if(2===S)return y;(l=w.global)&&0===k.active++&&k.event.trigger("ajaxStart");w.type=w.type.toUpperCase();w.hasContent=!hc.test(w.type);g=w.url;w.hasContent||(w.data&&(g=w.url+=(nb.test(g)?"&":"?")+w.data,delete w.data),!1===w.cache&&(w.url=Fb.test(g)?g.replace(Fb,"$1_="+mb++):g+(nb.test(g)?"&":"?")+"_="+mb++));w.ifModified&&
(k.lastModified[g]&&y.setRequestHeader("If-Modified-Since",k.lastModified[g]),k.etag[g]&&y.setRequestHeader("If-None-Match",k.etag[g]));(w.data&&w.hasContent&&!1!==w.contentType||c.contentType)&&y.setRequestHeader("Content-Type",w.contentType);y.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+Jb+"; q=0.01":""):w.accepts["*"]);for(f in w.headers)y.setRequestHeader(f,w.headers[f]);if(w.beforeSend&&(!1===w.beforeSend.call(q,y,w)||
2===S))return y.abort();v="abort";for(f in{success:1,error:1,complete:1})y[f](w[f]);if(n=N(hb,w,c,y)){y.readyState=1;l&&u.trigger("ajaxSend",[y,w]);w.async&&0<w.timeout&&(m=setTimeout(function(){y.abort("timeout")},w.timeout));try{S=1,n.send(t,d)}catch(tb){if(2>S)d(-1,tb);else throw tb;}}else d(-1,"No Transport");return y},getJSON:function(a,b,c){return k.get(a,b,c,"json")},getScript:function(a,c){return k.get(a,b,c,"script")}});k.each(["get","post"],function(a,c){k[c]=function(a,d,e,f){k.isFunction(d)&&
(f=f||e,e=d,d=b);return k.ajax({url:a,type:c,dataType:f,data:d,success:e})}});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){k.globalEval(a);return a}}});k.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});k.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=B.head||k("head")[0]||B.documentElement;
return{send:function(b,e){c=B.createElement("script");c.async=!0;a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,b){if(b||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(b,!0)}}}});var Kb=[],ob=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kb.pop()||
k.expando+"_"+mb++;this[a]=!0;return a}});k.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,m=!1!==c.jsonp&&(ob.test(c.url)?"url":"string"===typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&ob.test(c.data)&&"data");if(m||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=k.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,m?c[m]=c[m].replace(ob,"$1"+f):!1!==c.jsonp&&(c.url+=(nb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){h||
k.error(f+" was not called");return h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g;c[f]&&(c.jsonpCallback=d.jsonpCallback,Kb.push(f));h&&k.isFunction(g)&&g(h[0]);h=g=b}),"script"});var Va,$a,jc=0,pb=a.ActiveXObject&&function(){for(var a in Va)Va[a](b,!0)};k.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&P()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(I){}b=void 0}return b}:P;$a=k.ajaxSettings.xhr();k.support.cors=
!!$a&&"withCredentials"in $a;($a=k.support.ajax=!!$a)&&k.ajaxTransport(function(c){if(!c.crossDomain||k.support.cors){var d;return{send:function(e,f){var g,h,m=c.xhr();c.username?m.open(c.type,c.url,c.async,c.username,c.password):m.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)m[h]=c.xhrFields[h];c.mimeType&&m.overrideMimeType&&m.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)m.setRequestHeader(h,e[h])}catch(nc){}m.send(c.hasContent&&
c.data||null);d=function(a,e){var h,l,n,w;try{if(d&&(e||4===m.readyState))if(d=b,g&&(m.onreadystatechange=k.noop,pb&&delete Va[g]),e)4!==m.readyState&&m.abort();else{w={};h=m.status;l=m.getAllResponseHeaders();"string"===typeof m.responseText&&(w.text=m.responseText);try{n=m.statusText}catch(cb){n=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=w.text?200:404}}catch(cb){e||f(-1,cb)}w&&f(h,n,w,l)};c.async?4===m.readyState?setTimeout(d):(g=++jc,pb&&(Va||(Va={},k(a).unload(pb)),Va[g]=d),m.onreadystatechange=
d):d()},abort:function(){d&&d(b,!0)}}}});var Sa,eb,kc=/^(?:toggle|show|hide)$/,Lb=new RegExp("^(?:([+-])=|)("+za+")([a-z%]*)$","i"),lc=/queueHooks$/,bb=[function(a,b,c){var d,e,f,g,h,m=this,l={},n=a.style,w=a.nodeType&&C(a),p=k._data(a,"fxshow");c.queue||(g=k._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--;k.queue(a,"fx").length||g.empty.fire()})}));1===a.nodeType&&("height"in
b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===k.css(a,"display")&&"none"===k.css(a,"float")&&(k.support.inlineBlockNeedsLayout&&"inline"!==ka(a.nodeName)?n.zoom=1:n.display="inline-block"));c.overflow&&(n.overflow="hidden",k.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0];n.overflowX=c.overflow[1];n.overflowY=c.overflow[2]}));for(d in b)e=b[d],kc.exec(e)&&(delete b[d],f=f||"toggle"===e,e!==(w?"hide":"show")&&(l[d]=p&&p[d]||k.style(a,d)));if(!k.isEmptyObject(l))for(d in p?
"hidden"in p&&(w=p.hidden):p=k._data(a,"fxshow",{}),f&&(p.hidden=!w),w?k(a).show():m.done(function(){k(a).hide()}),m.done(function(){var b;k._removeData(a,"fxshow");for(b in l)k.style(a,b,l[b])}),l)b=z(w?p[d]:0,d,m),d in p||(p[d]=b.start,w&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],Xa={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Lb.exec(b),f=e&&e[3]||(k.cssNumber[a]?"":"px"),g=(k.cssNumber[a]||"px"!==f&&+d)&&Lb.exec(k.css(c.elem,a)),h=1,m=20;if(g&&g[3]!==f){f=f||g[3];
e=e||[];g=+d||1;do h=h||".5",g/=h,k.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--m)}e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]);return c}]};k.Animation=k.extend(y,{tweener:function(a,b){k.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],Xa[c]=Xa[c]||[],Xa[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}});k.Tween=D;D.prototype={constructor:D,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";
this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(k.cssNumber[c]?"":"px")},cur:function(){var a=D.propHooks[this.prop];return a&&a.get?a.get(this):D.propHooks._default.get(this)},run:function(a){var b,c=D.propHooks[this.prop];this.pos=this.options.duration?b=k.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):D.propHooks._default.set(this);
return this}};D.prototype.init.prototype=D.prototype;D.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=k.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(k.fx.step[a.prop])k.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[k.cssProps[a.prop]]||k.cssHooks[a.prop])?k.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&
(a.elem[a.prop]=a.now)}};k.each(["toggle","show","hide"],function(a,b){var c=k.fn[b];k.fn[b]=function(a,d,e){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(fa(b,!0),a,d,e)}});k.fn.extend({fadeTo:function(a,b,c,d){return this.filter(C).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=k.isEmptyObject(a),f=k.speed(b,c,d);b=function(){var b=y(this,k.extend({},a),f);(e||k._data(this,"finish"))&&b.stop(!0)};b.finish=b;return e||!1===f.queue?
this.each(b):this.queue(f.queue,b)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=k.timers,g=k._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&lc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||k.dequeue(this,a)})},finish:function(a){!1!==
a&&(a=a||"fx");return this.each(function(){var b,c=k._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=k.timers,f=d?d.length:0;c.finish=!0;k.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;b<f;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});k.each({slideDown:fa("show"),slideUp:fa("hide"),slideToggle:fa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,b){k.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});k.speed=function(a,b,c){var d=a&&"object"===typeof a?k.extend({},a):{complete:c||!c&&b||k.isFunction(a)&&a,duration:a,easing:c&&b||b&&!k.isFunction(b)&&b};d.duration=k.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in k.fx.speeds?k.fx.speeds[d.duration]:k.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){k.isFunction(d.old)&&d.old.call(this);d.queue&&k.dequeue(this,
d.queue)};return d};k.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};k.timers=[];k.fx=D.prototype.init;k.fx.tick=function(){var a,c=k.timers,d=0;for(Sa=k.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||k.fx.stop();Sa=b};k.fx.timer=function(a){a()&&k.timers.push(a)&&k.fx.start()};k.fx.interval=13;k.fx.start=function(){eb||(eb=setInterval(k.fx.tick,k.fx.interval))};k.fx.stop=function(){clearInterval(eb);eb=null};k.fx.speeds={slow:600,fast:200,
_default:400};k.fx.step={};k.expr&&k.expr.filters&&(k.expr.filters.animated=function(a){return k.grep(k.timers,function(b){return a===b.elem}).length});k.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){k.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=(d=this[0])&&d.ownerDocument;if(f){c=f.documentElement;if(!k.contains(c,d))return e;typeof d.getBoundingClientRect!==M&&(e=d.getBoundingClientRect());d=Z(f);return{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||
0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}}};k.offset={setOffset:function(a,b,c){var d=k.css(a,"position");"static"===d&&(a.style.position="relative");var e=k(a),f=e.offset(),g=k.css(a,"top"),h=k.css(a,"left"),m={};("absolute"===d||"fixed"===d)&&-1<k.inArray("auto",[g,h])?(h=e.position(),d=h.top,h=h.left):(d=parseFloat(g)||0,h=parseFloat(h)||0);k.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(m.top=b.top-f.top+d);null!=b.left&&(m.left=b.left-f.left+h);"using"in b?b.using.call(a,
m):e.css(m)}};k.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];"fixed"===k.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),k.nodeName(a[0],"html")||(c=a.offset()),c.top+=k.css(a[0],"borderTopWidth",!0),c.left+=k.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-k.css(d,"marginTop",!0),left:b.left-c.left-k.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||aa;a&&!k.nodeName(a,
"html")&&"static"===k.css(a,"position");)a=a.offsetParent;return a||aa})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);k.fn[a]=function(e){return k.access(this,function(a,e,f){var g=Z(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?k(g).scrollLeft():f,d?f:k(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});k.each({Height:"height",Width:"width"},function(a,c){k.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,
e){k.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),h=d||(!0===e||!0===f?"margin":"border");return k.access(this,function(c,d,e){return k.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===b?k.css(c,d,h):k.style(c,d,e,h)},c,g?e:b,g,null)}})});k.fn.size=function(){return this.length};k.fn.andSelf=k.fn.addBack;"object"===typeof module&&module&&"object"===
typeof module.exports?module.exports=k:(a.jQuery=a.$=k,"function"===typeof define&&define.amd&&define("jquery",[],function(){return k}))})(window);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&"object"===typeof module.exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){var b=a.keyboard=function(c,d){var f,e=this;e.version="1.26.6";e.$el=a(c);e.el=c;e.$el.data("keyboard",e);e.init=function(){var c,h=b.css,l=b.events;e.settings=d||{};d&&d.position&&(c=a.extend({},d.position),d.position=null);e.options=f=a.extend(!0,{},b.defaultOptions,d);c&&(f.position=c,d.position=c);e.el.active=
!0;e.namespace=".keyboard"+Math.random().toString(16).slice(2);e.extensionNamespace=[];e.shiftActive=e.altActive=e.metaActive=e.sets=e.capsLock=!1;e.rows=["","-shift","-alt","-alt-shift"];e.inPlaceholder=e.$el.attr("placeholder")||"";e.watermark=b.watermark&&""!==e.inPlaceholder;e.repeatTime=1E3/(f.repeatRate||20);f.preventDoubleEventTime=f.preventDoubleEventTime||100;e.isOpen=!1;e.wheel=a.isFunction(a.fn.mousewheel);e.escapeRegex=/[-\/\\^$*+?.()|[\]{}]/g;c=b.keyCodes;e.alwaysAllowed=[c.capsLock,
c.pageUp,c.pageDown,c.end,c.home,c.left,c.up,c.right,c.down,c.insert,c["delete"]];e.$keyboard=[];e.enabled=!0;a.isEmptyObject(f.position)||(f.position.orig_at=f.position.at);e.checkCaret=f.lockInput||b.checkCaretSupport();e.last={start:0,end:0,key:"",val:"",preVal:"",layout:"",virtual:!0,keyset:[!1,!1,!1],wheel_$Keys:null,wheelIndex:0,wheelLayers:[]};e.temp=["",0,0];a.each([l.kbInit,l.kbBeforeVisible,l.kbVisible,l.kbHidden,l.inputCanceled,l.inputAccepted,l.kbBeforeClose,l.inputRestricted],function(b,
c){a.isFunction(f[c])&&e.$el.bind(c+e.namespace+"callbacks",f[c])});f.alwaysOpen&&(f.stayOpen=!0);c=a(document);e.el.ownerDocument!==document&&(c=c.add(e.el.ownerDocument));var m="keyup checkkeyboard mousedown touchstart ";f.closeByClickEvent&&(m+="click ");c.bind(m.split(" ").join(e.namespace+" "),e.checkClose);e.$el.addClass(h.input+" "+f.css.input).attr({"aria-haspopup":"true",role:"textbox"});if(f.lockInput||e.el.readOnly)f.lockInput=!0,e.$el.addClass(h.locked).attr({readonly:"readonly"});(e.$el.is(":disabled")||
e.$el.attr("readonly")&&!e.$el.hasClass(h.locked))&&e.$el.addClass(h.noKeyboard);f.openOn&&e.bindFocus();e.watermark||""!==e.$el.val()||""===e.inPlaceholder||""===e.$el.attr("placeholder")||e.$el.addClass(h.placeholder).val(e.inPlaceholder);e.$el.trigger(l.kbInit,[e,e.el]);f.alwaysOpen&&e.reveal()};e.toggle=function(){var a=e.$keyboard.find("."+b.css.keyToggle),c=!e.enabled;e.$preview.prop("readonly",c||e.options.lockInput);e.$keyboard.toggleClass(b.css.keyDisabled,c).find("."+b.css.keyButton).not(a).prop("disabled",
c).attr("aria-disabled",c);a.toggleClass(b.css.keyDisabled,c);c&&e.typing_options&&(e.typing_options.text="")};e.setCurrent=function(){var c=b.css,d=a("."+c.isCurrent),f=d.data("keyboard");a.isEmptyObject(f)||f.el===e.el||f.close(f.options.autoAccept?"true":!1);d.removeClass(c.isCurrent);a("."+c.hasFocus).removeClass(c.hasFocus);e.$el.addClass(c.isCurrent);e.$keyboard.addClass(c.hasFocus);e.isCurrent(!0);e.isOpen=!0};e.isCurrent=function(a){var c=b.currentKeyboard||!1;a?c=b.currentKeyboard=e.el:!1===
a&&c===e.el&&(c=b.currentKeyboard="");return c===e.el};e.isVisible=function(){return e.$keyboard&&e.$keyboard.length?e.$keyboard.is(":visible"):!1};e.focusOn=function(){!e&&e.el.active||e.isVisible()||(clearTimeout(e.timer),e.reveal())};e.redraw=function(){e.$keyboard.length&&(e.last.preVal=""+e.last.val,e.last.val=e.$preview&&e.$preview.val()||e.$el.val(),e.$el.val(e.last.val),e.removeKeyboard(),e.shiftActive=e.altActive=e.metaActive=!1);e.isOpen=f.alwaysOpen;e.reveal(!0)};e.reveal=function(c){var d=
e.isOpen,g=b.css;e.opening=!d;a("."+g.keyboard).not("."+g.alwaysOpen).each(function(){var b=a(this).data("keyboard");a.isEmptyObject(b)||b.close(b.options.autoAccept&&b.options.autoAcceptOnEsc?"true":!1)});if(e.$el.is(":disabled")||e.$el.attr("readonly")&&!e.$el.hasClass(g.locked))e.$el.addClass(g.noKeyboard);else{e.$el.removeClass(g.noKeyboard);f.openOn&&e.$el.unbind(a.trim((f.openOn+" ").split(/\s+/).join(e.namespace+" ")));e.$keyboard&&(!e.$keyboard||e.$keyboard.length&&!a.contains(document.body,
e.$keyboard[0]))||e.startup();e.watermark||e.el.value!==e.inPlaceholder||e.$el.removeClass(g.placeholder).val("");e.originalContent=e.$el.val();e.$preview.val(e.originalContent);f.acceptValid&&e.checkValid();f.resetDefault&&(e.shiftActive=e.altActive=e.metaActive=!1);e.showSet();e.isVisible()||e.$el.trigger(b.events.kbBeforeVisible,[e,e.el]);e.setCurrent();e.toggle();e.$keyboard.show();f.usePreview&&b.msie&&("undefined"===typeof e.width&&(e.$preview.hide(),e.width=Math.ceil(e.$keyboard.width()),e.$preview.show()),
e.$preview.width(e.width));e.position=a.isEmptyObject(f.position)?!1:f.position;a.ui&&a.ui.position&&e.position&&(e.position.of=e.position.of||e.$el.data("keyboardPosition")||e.$el,e.position.collision=e.position.collision||"flipfit flipfit",f.position.at=f.usePreview?f.position.orig_at:f.position.at2,e.$keyboard.position(e.position));e.checkDecimal();e.lineHeight=parseInt(e.$preview.css("lineHeight"),10)||parseInt(e.$preview.css("font-size"),10)+4;f.caretToEnd&&e.saveCaret(e.originalContent.length,
e.originalContent.length);b.allie&&(0===e.last.end&&0<e.last.start&&(e.last.end=e.last.start),0>e.last.start&&(e.last.start=e.last.end=e.originalContent.length));if(d||c)return b.caret(e.$preview,e.last),e;e.timer2=setTimeout(function(){e.opening=!1;/(number|email)/i.test(e.el.type)||f.caretToEnd||e.saveCaret(void 0,void 0,e.$el);f.initialFocus&&b.caret(e.$preview,e.last);e.last.eventTime=(new Date).getTime();e.$el.trigger(b.events.kbVisible,[e,e.el]);e.timer=setTimeout(function(){e&&e.saveCaret()},
200)},10);return e}};e.updateLanguage=function(){var c=b.layouts,d=f.language||c[f.layout]&&c[f.layout].lang&&c[f.layout].lang||[f.language||"en"],l=b.language,d=(a.isArray(d)?d[0]:d).split("-")[0];f.display=a.extend(!0,{},l.en.display,l[d]&&l[d].display||{},e.settings.display);f.combos=a.extend(!0,{},l.en.combos,l[d]&&l[d].combos||{},e.settings.combos);f.wheelMessage=l[d]&&l[d].wheelMessage||l.en.wheelMessage;f.rtl=c[f.layout]&&c[f.layout].rtl||l[d]&&l[d].rtl||!1;e.regex=l[d]&&l[d].comboRegex||b.comboRegex;
e.decimal=/^\./.test(f.display.dec);e.$el.toggleClass("rtl",f.rtl).css("direction",f.rtl?"rtl":"")};e.startup=function(){var c=b.css;(f.alwaysOpen||f.userClosed)&&e.$preview||e.makePreview();e.$keyboard&&e.$keyboard.length||("custom"===f.layout&&(f.layoutHash="custom"+e.customHash()),e.layout="custom"===f.layout?f.layoutHash:f.layout,e.last.layout=e.layout,e.updateLanguage(),"undefined"===typeof b.builtLayouts[e.layout]&&(a.isFunction(f.create)?e.$keyboard=f.create(e):e.$keyboard.length||e.buildKeyboard(e.layout,
!0)),e.$keyboard=b.builtLayouts[e.layout].$keyboard.clone(),e.$keyboard.data("keyboard",e),""!==(e.el.id||"")&&e.$keyboard.attr("id",e.el.id+b.css.idSuffix),e.makePreview(),f.usePreview?a.isEmptyObject(f.position)||(f.position.at=f.position.orig_at):a.isEmptyObject(f.position)||(f.position.at=f.position.at2));e.$decBtn=e.$keyboard.find("."+c.keyPrefix+"dec");(f.enterNavigation||"TEXTAREA"===e.el.nodeName)&&e.alwaysAllowed.push(13);e.bindKeyboard();e.$keyboard.appendTo(f.appendLocally?e.$el.parent():
f.appendTo||"body");e.bindKeys();f.reposition&&a.ui&&a.ui.position&&"body"==f.appendTo&&a(window).bind("resize"+e.namespace,function(){e.position&&e.isVisible()&&e.$keyboard.position(e.position)})};e.makePreview=function(){if(f.usePreview){var c,d,l,m,n=b.css;e.$preview=e.$el.clone(!1).data("keyboard",e).removeClass(n.placeholder+" "+n.input).addClass(n.preview+" "+f.css.input).attr("tabindex","-1").show();e.preview=e.$preview[0];"number"===e.preview.type&&(e.preview.type="text");m=/^(data-|id|aria-haspopup)/i;
d=e.$preview.get(0).attributes;for(c=d.length-1;0<=c;c--)l=d[c]&&d[c].name,m.test(l)&&e.preview.removeAttribute(l);a("<div />").addClass(n.wrapper).append(e.$preview).prependTo(e.$keyboard)}else e.$preview=e.$el,e.preview=e.el};e.saveCaret=function(a,c,d){d=b.caret(d||e.$preview,a,c);e.last.start="undefined"===typeof a?d.start:a;e.last.end="undefined"===typeof c?d.end:c};e.setScroll=function(){if(e.last.virtual){var a,c,d,m;a="TEXTAREA"===e.preview.nodeName;c=e.last.val.substring(0,Math.max(e.last.start,
e.last.end));e.$previewCopy||(e.$previewCopy=e.$preview.clone().removeAttr("id").css({position:"absolute",left:0,zIndex:-10,visibility:"hidden"}).addClass(b.css.inputClone),a||e.$previewCopy.css({"white-space":"pre",width:0}),f.usePreview?e.$preview.after(e.$previewCopy):e.$keyboard.prepend(e.$previewCopy));a?(e.$previewCopy.height(e.lineHeight).val(c),e.preview.scrollTop=e.lineHeight*(Math.floor(e.$previewCopy[0].scrollHeight/e.lineHeight)-1)):(e.$previewCopy.val(c.replace(/\s/g," ")),d=/c/i.test(f.scrollAdjustment)?
e.preview.clientWidth/2:f.scrollAdjustment,a=e.$previewCopy[0].scrollWidth-1,"undefined"===typeof e.last.scrollWidth&&(e.last.scrollWidth=a,e.last.direction=!0),m=e.last.scrollWidth===a?e.last.direction:e.last.scrollWidth<a,c=e.preview.clientWidth-d,e.preview.scrollLeft=m?a<c?0:a-c:a>=e.preview.scrollWidth-c?e.preview.scrollWidth-d:0<a-d?a-d:0,e.last.scrollWidth=a,e.last.direction=m)}};e.bindFocus=function(){f.openOn&&e&&e.el.active&&(e.$el.bind(f.openOn+e.namespace,function(){e.focusOn()}),a(":focus")[0]===
e.el&&e.$el.blur())};e.bindKeyboard=function(){var c,d=b.keyCodes,l=b.builtLayouts[e.layout];e.$preview.unbind(e.namespace).bind("click"+e.namespace+" touchstart"+e.namespace,function(){f.alwaysOpen&&!e.isCurrent()&&e.reveal();e.timer2=setTimeout(function(){e&&e.saveCaret()},150)}).bind("keypress"+e.namespace,function(g){if(f.lockInput)return!1;if(e.isCurrent()){var h=g.charCode||g.which,m=h>=d.A&&h<=d.Z,r=h>=d.a&&h<=d.z,q=e.last.key=String.fromCharCode(h);e.last.virtual=!1;e.last.event=g;e.last.$key=
[];e.checkCaret&&e.saveCaret();h!==d.capsLock&&(m||r)&&(e.capsLock=m&&!g.shiftKey||r&&g.shiftKey,e.capsLock&&!e.shiftActive&&(e.shiftActive=!0,e.showSet()));if(f.restrictInput){if((g.which===d.backSpace||0===g.which)&&a.inArray(g.keyCode,e.alwaysAllowed))return;-1===a.inArray(q,l.acceptedKeys)&&(g.preventDefault(),c=a.extend({},g),c.type=b.events.inputRestricted,e.$el.trigger(c,[e,e.el]))}else if((g.ctrlKey||g.metaKey)&&(g.which===d.A||g.which===d.C||g.which===d.V||g.which>=d.X&&g.which<=d.Z))return;
l.hasMappedKeys&&l.mappedKeys.hasOwnProperty(q)&&(e.last.key=l.mappedKeys[q],e.insertText(e.last.key),g.preventDefault());"function"===typeof f.beforeInsert&&(e.insertText(e.last.key),g.preventDefault());e.checkMaxLength()}}).bind("keyup"+e.namespace,function(c){if(e.isCurrent()){e.last.virtual=!1;switch(c.which){case d.tab:if(e.tab&&f.tabNavigation&&!f.lockInput){e.shiftActive=c.shiftKey;var g=b.keyaction.tab(e);e.tab=!1;if(!g)return!1}else c.preventDefault();break;case d.escape:return f.ignoreEsc||
e.close(f.autoAccept&&f.autoAcceptOnEsc?"true":!1),!1}clearTimeout(e.throttled);e.throttled=setTimeout(function(){e&&e.isVisible()&&e.checkCombos()},100);e.checkMaxLength();e.last.preVal=""+e.last.val;e.last.val=e.$preview.val();c.type=b.events.kbChange;c.action=e.last.key;e.$el.trigger(c,[e,e.el]);if(a.isFunction(f.change))return c.type=b.events.inputChange,f.change(c,e,e.el),!1;f.acceptValid&&f.autoAcceptOnValid&&a.isFunction(f.validate)&&f.validate(e,e.$preview.val())&&(e.$preview.blur(),e.accept())}}).bind("keydown"+
e.namespace,function(a){f.alwaysOpen&&!e.isCurrent()&&e.reveal();if(a.which===d.tab)return e.tab=!0,!1;if(f.lockInput)return!1;e.last.virtual=!1;switch(a.which){case d.backSpace:b.keyaction.bksp(e,null,a);a.preventDefault();break;case d.enter:b.keyaction.enter(e,null,a);break;case d.capsLock:e.shiftActive=e.capsLock=!e.capsLock;e.showSet();break;case d.V:if(a.ctrlKey||a.metaKey)f.preventPaste?a.preventDefault():e.checkCombos()}}).bind(["mouseup","touchend",""].join(e.namespace+" "),function(){e.last.virtual=
!0;e.saveCaret()});e.$keyboard.bind(["mousedown","click","touchstart",""].join(e.namespace+" "),function(b){b.stopPropagation();e.isCurrent()||(e.reveal(),a(document).trigger("checkkeyboard"+e.namespace));!f.noFocus&&e.$preview&&e.$preview.focus()});f.preventPaste&&(e.$preview.bind("contextmenu"+e.namespace,function(a){a.preventDefault()}),e.$el.bind("contextmenu"+e.namespace,function(a){a.preventDefault()}))};e.bindKeys=function(){var c=b.css;e.$allKeys=e.$keyboard.find("button."+c.keyButton).unbind(e.namespace+
" "+e.namespace+"kb").bind(["mouseenter","mouseleave","touchstart",""].join(e.namespace+" "),function(c){!f.alwaysOpen&&!f.userClosed||"mouseleave"===c.type||e.isCurrent()||(e.reveal(),e.$preview.focus(),b.caret(e.$preview,e.last));if(e.isCurrent()){var d,g=e.last,h=a(this),p=c.type;f.useWheel&&e.wheel&&(c=e.getLayers(h),d=(c.length?c.map(function(){return a(this).attr("data-value")||""}).get():"")||[h.text()],g.wheel_$Keys=c,g.wheelLayers=d,g.wheelIndex=a.inArray(h.attr("data-value"),d));"mouseenter"!==
p&&"touchstart"!==p||"password"===e.el.type||h.hasClass(f.css.buttonDisabled)||(h.addClass(f.css.buttonHover),f.useWheel&&e.wheel&&h.attr("title",function(a,b){return e.wheel&&""===b&&e.sets&&1<d.length&&"touchstart"!==p?f.wheelMessage:b}));"mouseleave"===p&&(h.removeClass("password"===e.el.type?"":f.css.buttonHover),f.useWheel&&e.wheel&&(g.wheelIndex=0,g.wheelLayers=[],g.wheel_$Keys=null,h.attr("title",function(a,b){return b===f.wheelMessage?"":b}).html(h.attr("data-html"))))}}).bind(f.keyBinding.split(" ").join(e.namespace+
" ")+e.namespace+" "+b.events.kbRepeater,function(d){d.preventDefault();if(!e.$keyboard.is(":visible"))return!1;var g,h=e.last,n=a(this),p=(new Date).getTime();f.useWheel&&e.wheel&&(n=(g=h.wheel_$Keys)&&-1<h.wheelIndex?g.eq(h.wheelIndex):n);g=n.attr("data-action");if(!(p-(h.eventTime||0)<f.preventDoubleEventTime)){h.eventTime=p;h.event=d;h.virtual=!0;f.noFocus||e.$preview.focus();h.$key=n;h.key=n.attr("data-value");e.checkCaret&&b.caret(e.$preview,h);g.match("meta")&&(g="meta");if(g===h.key&&"string"===
typeof b.keyaction[g])h.key=g=b.keyaction[g];else if(g in b.keyaction&&a.isFunction(b.keyaction[g])){if(!1===b.keyaction[g](e,this,d))return!1;g=null}"undefined"!==typeof g&&null!==g&&(h.key=a(this).hasClass(c.keyAction)?g:h.key,e.insertText(h.key),e.capsLock||f.stickyShift||d.shiftKey||(e.shiftActive=!1,e.showSet(n.attr("data-name"))));b.caret(e.$preview,h);e.checkCombos();d.type=b.events.kbChange;d.action=h.key;e.$el.trigger(d,[e,e.el]);h.preVal=""+h.val;h.val=e.$preview.val();if(a.isFunction(f.change))return d.type=
b.events.inputChange,f.change(d,e,e.el),!1}}).bind("mouseup"+e.namespace+" "+["mouseleave","touchend","touchmove","touchcancel",""].join(e.namespace+"kb "),function(c){e.last.virtual=!0;var d,g=a(this);if("touchmove"===c.type){if(d=g.offset(),d.right=d.left+g.outerWidth(),d.bottom=d.top+g.outerHeight(),c.originalEvent.touches[0].pageX>=d.left&&c.originalEvent.touches[0].pageX<d.right&&c.originalEvent.touches[0].pageY>=d.top&&c.originalEvent.touches[0].pageY<d.bottom)return!0}else/(mouseleave|touchend|touchcancel)/i.test(c.type)?
g.removeClass(f.css.buttonHover):(!f.noFocus&&e.isCurrent()&&e.isVisible()&&e.$preview.focus(),e.checkCaret&&b.caret(e.$preview,e.last));e.mouseRepeat=[!1,""];clearTimeout(e.repeater);f.acceptValid&&f.autoAcceptOnValid&&a.isFunction(f.validate)&&f.validate(e,e.$preview.val())&&(e.$preview.blur(),e.accept());return!1}).bind("click"+e.namespace,function(){return!1}).not("."+c.keyAction).bind("mousewheel"+e.namespace,function(b,c){if(f.useWheel&&e.wheel){c=c||b.deltaY;var d,g=e.last.wheelLayers||[];
1<g.length?(d=e.last.wheelIndex+(0<c?-1:1),d>g.length-1&&(d=0),0>d&&(d=g.length-1)):d=0;e.last.wheelIndex=d;a(this).html(g[d]);return!1}}).add("."+c.keyPrefix+["tab","bksp","space","enter"].join(",."+c.keyPrefix),e.$keyboard).bind(["mousedown","touchstart",""].join(e.namespace+"kb "),function(){if(0!==f.repeatRate){var b=a(this);e.mouseRepeat=[!0,b];setTimeout(function(){e&&e.mouseRepeat[0]&&e.mouseRepeat[1]===b&&!b[0].disabled&&e.repeatKey(b)},f.repeatDelay)}return!1})};e.insertText=function(a){"function"===
typeof f.beforeInsert&&(a=f.beforeInsert(e.last.event,e,e.el,a));if("undefined"===typeof a||!1===a)e.last.key="";else{var c,d="\b"===a,g=e.$preview.val(),n=b.caret(e.$preview);c=g.length;n.end<n.start&&(n.end=n.start);n.start>c&&(n.end=n.start=c);"TEXTAREA"===e.preview.nodeName&&b.msie&&"\n"===g.substr(n.start,1)&&(n.start+=1,n.end+=1);"{d}"===a&&(a="",n.end+=1);c=d&&n.start===n.end;a=d?"":a;g=g.substr(0,n.start-(c?1:0))+a+g.substr(n.end);a=n.start+(c?-1:a.length);e.$preview.val(g);e.saveCaret(a,
a);e.setScroll()}};e.checkMaxLength=function(){if(e.isCurrent()){var a,c,d=e.$preview.val();!1!==f.maxLength&&d.length>f.maxLength&&(a=b.caret(e.$preview).start,c=Math.min(a,f.maxLength),f.maxInsert||(d=e.last.val,c=a-1),e.$preview.val(d.substring(0,f.maxLength)),e.saveCaret(c,c));e.$decBtn.length&&e.checkDecimal()}};e.repeatKey=function(a){a.trigger(b.events.kbRepeater);e.mouseRepeat[0]&&(e.repeater=setTimeout(function(){e&&e.repeatKey(a)},e.repeatTime))};e.showKeySet=function(a){"string"===typeof a?
(e.last.keyset=[e.shiftActive,e.altActive,e.metaActive],e.shiftActive=/shift/i.test(a),e.altActive=/alt/i.test(a),/meta/.test(a)?(e.metaActive=!0,e.showSet(a.match(/meta\d+/i)[0])):(e.metaActive=!1,e.showSet())):e.showSet(a)};e.showSet=function(a){f=e.options;var c=b.css,d="."+c.keyPrefix,g=f.css.buttonActive,n="",p=(e.shiftActive?1:0)+(e.altActive?2:0);e.shiftActive||(e.capsLock=!1);if(e.metaActive){if(n=/meta/i.test(a)?a:"",""===n?n=!0===e.metaActive?"":e.metaActive:e.metaActive=n,!f.stickyShift&&
e.last.keyset[2]!==e.metaActive||(e.shiftActive||e.altActive)&&!e.$keyboard.find("."+c.keySet+"-"+n+e.rows[p]).length)e.shiftActive=e.altActive=!1}else!f.stickyShift&&e.last.keyset[2]!==e.metaActive&&e.shiftActive&&(e.shiftActive=e.altActive=!1);p=(e.shiftActive?1:0)+(e.altActive?2:0);n=0!==p||e.metaActive?""===n?"":"-"+n:"-normal";e.$keyboard.find("."+c.keySet+n+e.rows[p]).length?(e.$keyboard.find(d+"alt,"+d+"shift,."+c.keyAction+"[class*=meta]").removeClass(g).end().find(d+"alt").toggleClass(g,
e.altActive).end().find(d+"shift").toggleClass(g,e.shiftActive).end().find(d+"lock").toggleClass(g,e.capsLock).end().find("."+c.keySet).hide().end().find("."+c.keyAction+d+n).addClass(g),e.$keyboard.find("."+c.keySet+n+e.rows[p])[0].style.display="inline-block",e.metaActive&&e.$keyboard.find(d+e.metaActive).toggleClass(g,!1!==e.metaActive),e.last.keyset=[e.shiftActive,e.altActive,e.metaActive],e.$el.trigger(b.events.kbKeysetChange,[e,e.el])):(e.shiftActive=e.last.keyset[0],e.altActive=e.last.keyset[1],
e.metaActive=e.last.keyset[2])};e.checkCombos=function(){if(!e.isVisible()&&!e.$keyboard.hasClass(b.css.hasFocus))return e.$preview.val();var c,d=e.$preview.val(),l=b.caret(e.$preview),m=b.builtLayouts[e.layout],n=d.length;if(""===d)return f.acceptValid&&e.checkValid(),d;l.end<l.start&&(l.end=l.start);l.start>n&&(l.end=l.start=n);b.msie&&"\n"===d.substr(l.start,1)&&(l.start+=1,l.end+=1);f.useCombos&&(b.msie?d=d.replace(e.regex,function(a,b,c){return f.combos.hasOwnProperty(b)?f.combos[b][c]||a:a}):
e.$preview.length&&(c=l.start-(0<=l.start-2?2:0),b.caret(e.$preview,c,l.end),c=(b.caret(e.$preview).text||"").replace(e.regex,function(a,b,c){return f.combos.hasOwnProperty(b)?f.combos[b][c]||a:a}),b.caret(e.$preview).replaceStr&&e.$preview.val(b.caret(e.$preview).replaceStr(c)),d=e.$preview.val()));f.restrictInput&&""!==d&&(c=m.acceptedKeys.length,c=m.acceptedKeysRegex,c||(c=a.map(m.acceptedKeys,function(a){return a.replace(e.escapeRegex,"\\$&")}),c=m.acceptedKeysRegex=new RegExp("("+c.join("|")+
")","g")),(c=d.match(c))?d=c.join(""):(d="",n=0));l.start+=d.length-n;l.end+=d.length-n;e.$preview.val(d);e.saveCaret(l.start,l.end);e.setScroll();e.checkMaxLength();f.acceptValid&&e.checkValid();return d};e.checkValid=function(){var c=b.css,d=e.$keyboard.find("."+c.keyPrefix+"accept"),l=!0;a.isFunction(f.validate)&&(l=f.validate(e,e.$preview.val(),!1));d.toggleClass(c.inputInvalid,!l).toggleClass(c.inputValid,l).attr("title",d.attr("data-title")+" ("+f.display[l?"valid":"invalid"]+")")};e.checkDecimal=
function(){e.decimal&&/\./g.test(e.preview.value)||!e.decimal&&/\,/g.test(e.preview.value)?e.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(f.css.buttonHover).addClass(f.css.buttonDisabled):e.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(f.css.buttonDefault).removeClass(f.css.buttonDisabled)};e.getLayers=function(c){var d=b.css,e=c.attr("data-pos");return c.closest("."+d.keyboard).find('button[data-pos="'+e+'"]').filter(function(){return""!==a(this).find("."+
d.keyText).text()}).add(c)};e.switchInput=function(b,c){if(a.isFunction(f.switchInput))f.switchInput(e,b,c);else{e.$keyboard.length&&e.$keyboard.hide();var d;d=!1;var g=a("button, input, select, textarea, a").filter(":visible").not(":disabled"),h=g.index(e.$el)+(b?1:-1);e.$keyboard.length&&e.$keyboard.show();h>g.length-1&&(d=f.stopAtEnd,h=0);0>h&&(d=f.stopAtEnd,h=g.length-1);if(!d){c=e.close(c);if(!c)return;(d=g.eq(h).data("keyboard"))&&d.options.openOn.length?d.focusOn():g.eq(h).focus()}}return!1};
e.close=function(c){if(e.isOpen&&e.$keyboard.length){clearTimeout(e.throttled);var d=b.css,g=b.events,m=c?e.checkCombos():e.originalContent;if(c&&a.isFunction(f.validate)&&!f.validate(e,m,!0)&&(m=e.originalContent,c=!1,f.cancelClose))return;e.isCurrent(!1);e.isOpen=f.alwaysOpen||f.userClosed;e.$preview.val(m);e.$el.removeClass(d.isCurrent+" "+d.inputAutoAccepted).addClass(c?!0===c?"":d.inputAutoAccepted:"").val(m).trigger(g.inputChange);f.alwaysOpen||e.$el.trigger(g.kbBeforeClose,[e,e.el,c||!1]);
b.caret(e.$preview,e.last);e.$el.trigger(c?g.inputAccepted:g.inputCanceled,[e,e.el]).trigger(f.alwaysOpen?g.kbInactive:g.kbHidden,[e,e.el]).blur();e&&(e.last.eventTime=(new Date).getTime(),f.alwaysOpen||f.userClosed&&"true"===c||!e.$keyboard.length||(e.removeKeyboard(),e.timer=setTimeout(function(){e&&e.bindFocus()},500)),e.watermark||""!==e.el.value||""===e.inPlaceholder||e.$el.addClass(d.placeholder).val(e.inPlaceholder))}return!!c};e.accept=function(){return e.close(!0)};e.checkClose=function(b){if(!e.opening){e.escClose(b);
var c=a.keyboard.css,d=a(b.target);d.hasClass(c.input)&&(d=d.data("keyboard"),d!==e||d.$el.hasClass(c.isCurrent)||b.type!==d.options.openOn||d.focusOn())}};e.escClose=function(c){if(c&&"keyup"===c.type)return c.which!==b.keyCodes.escape||f.ignoreEsc?"":e.close(f.autoAccept&&f.autoAcceptOnEsc?"true":!1);if(e.isOpen&&(!e.isCurrent()&&e.isOpen||e.isOpen&&c.target!==e.el)&&(!f.stayOpen&&!f.userClosed||a(c.target).hasClass(b.css.input)))if(b.allie&&c.preventDefault(),f.closeByClickEvent){var d=c.target.nodeName.toLowerCase();
"input"!==d&&"textarea"!==d&&"click"!==c.type||e.close(f.autoAccept?"true":!1)}else e.close(f.autoAccept?"true":!1)};e.keyBtn=a("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(b.css.keyButton);e.processName=function(a){var b,c;b=(a||"").replace(/[^a-z0-9-_]/gi,"");var d=b.length,e=[];if(1<d&&a===b)return a;if(d=a.length){for(b=0;b<d;b++)c=a[b],e.push(/[a-z0-9-_]/i.test(c)?/[-_]/.test(c)&&0!==b?"":c:(0===b?"":"-")+c.charCodeAt(0));return e.join("")}return a};
e.processKeys=function(b){var c,d=b.split(":"),e={name:null,map:"",title:""};/\(.+\)/.test(d[0])||/^:\(.+\)/.test(b)||/\([(:)]\)/.test(b)?/\([(:)]\)/.test(b)?(c=d[0].match(/([^(]+)\((.+)\)/))&&c.length?(e.name=c[1],e.map=c[2],e.title=1<d.length?d.slice(1).join(":"):""):(e.name=b.match(/([^(]+)/)[0],":"===e.name&&(d=d.slice(1)),null===c&&(e.map=":",d=d.slice(2)),e.title=d.length?d.join(":"):""):(e.map=b.match(/\(([^()]+?)\)/)[1],b=b.replace(/\(([^()]+)\)/,""),c=b.split(":"),""===c[0]?(e.name=":",d=
d.slice(1)):e.name=c[0],e.title=1<d.length?d.slice(1).join(":"):""):(""!==b&&""===d[0]?(e.name=":",d=d.slice(1)):e.name=d[0],e.title=1<d.length?d.slice(1).join(":"):"");e.title=a.trim(e.title).replace(/_/g," ");return e};e.addKey=function(a,c,d){var g={},h=e.processKeys(d?a:c),l=b.css;!d&&f.display[h.name]?(c=e.processKeys(f.display[h.name]),c.action=e.processKeys(a).name):(c=h,c.action=h.name);g.name=e.processName(h.name);""!==c.map?(b.builtLayouts[e.layout].mappedKeys[c.map]=c.name,b.builtLayouts[e.layout].acceptedKeys.push(c.name)):
d&&b.builtLayouts[e.layout].acceptedKeys.push(c.name);a=d?""===g.name?"":l.keyPrefix+g.name:l.keyAction+" "+l.keyPrefix+c.action;a+=(2<c.name.length?" "+l.keyWide:"")+" "+f.css.buttonDefault;g.html='<span class="'+l.keyText+'">'+c.name.replace(/[\u00A0-\u9999]/gim,function(a){return"&#"+a.charCodeAt(0)+";"})+"</span>";g.$key=e.keyBtn.clone().attr({"data-value":d?c.name:c.action,"data-name":c.action,"data-pos":e.temp[1]+","+e.temp[2],"data-action":c.action,"data-html":g.html}).addClass(a).html(g.html).appendTo(e.temp[0]);
c.map&&g.$key.attr("data-mapped",c.map);(c.title||h.title)&&g.$key.attr({"data-title":h.title||c.title,title:h.title||c.title});"function"===typeof f.buildKey&&(g=f.buildKey(e,g),d=g.$key.html(),g.$key.attr("data-html",d));return g.$key};e.customHash=function(a){var b,c,d;c=[];var e=[];a="undefined"===typeof a?f.customLayout:a;for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);e=e.concat.apply(e,c).join(" ");b=0;d=e.length;if(0===d)return b;for(a=0;a<d;a++)c=e.charCodeAt(a),b=(b<<5)-b+c,b&=b;return b};
e.buildKeyboard=function(c,d){a.isEmptyObject(f.display)&&e.updateLanguage();var g,h,n,p=b.css,r=0,q=b.builtLayouts[c||e.layout||f.layout]={mappedKeys:{},acceptedKeys:[]},t=q.acceptedKeys=f.restrictInclude?(""+f.restrictInclude).split(/\s+/)||[]:[],v=p.keyboard+" "+f.css.popup+" "+f.css.container+(f.alwaysOpen||f.userClosed?" "+p.alwaysOpen:""),J=a("<div />").addClass(v).attr({role:"textbox"}).hide();d&&"custom"===f.layout||!b.layouts.hasOwnProperty(f.layout)?(f.layout="custom",v=b.layouts.custom=
f.customLayout||{normal:["{cancel}"]}):v=b.layouts[d?f.layout:c||e.layout||f.layout];a.each(v,function(b,c){if(""!==b&&!/^(name|lang|rtl)$/i.test(b))for("default"===b&&(b="normal"),r++,h=a("<div />").attr("name",b).addClass(p.keySet+" "+p.keySet+"-"+b).appendTo(J).toggle("normal"===b),g=0;g<c.length;g++)n=a.trim(c[g]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),e.buildRow(h,g,n.split(/\s+/),t),h.find("."+p.keyButton+",."+p.keySpacer).filter(":last").after('<br class="'+p.endRow+'"/>')});1<r&&
(e.sets=!0);q.hasMappedKeys=!a.isEmptyObject(q.mappedKeys);return q.$keyboard=J};e.buildRow=function(c,d,l,m){var g,h,r,q,t=b.css;for(r=0;r<l.length;r++)if(e.temp=[c,d,r],g=!1,0!==l[r].length)if(/^\{\S+\}$/.test(l[r]))if(q=l[r].match(/^\{(\S+)\}$/)[1],/\!\!/.test(q)&&(q=q.replace("!!",""),g=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(q)&&(h=parseFloat(q.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0),a('<span class="'+t.keyText+'"></span>').width(q.match(/px/i)?h+"px":2*h+"em").addClass(t.keySpacer).appendTo(c)),
/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(q))h=/:/.test(q)?parseFloat(q.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",e.addKey(""," ",!0).addClass(f.css.buttonDisabled+" "+f.css.buttonEmpty).attr("aria-disabled",!0).width(h?q.match("px")?h+"px":2*h+"em":"");else if(/^meta\d+\:?(\w+)?/i.test(q))e.addKey(q.split(":")[0],q).addClass(t.keyHasActive);else switch(h=q.split(":"),h[0].toLowerCase()){case "a":case "accept":e.addKey("accept",q).addClass(f.css.buttonAction+
" "+t.keyAction);break;case "alt":case "altgr":e.addKey("alt",q).addClass(t.keyHasActive);break;case "b":case "bksp":e.addKey("bksp",q);break;case "c":case "cancel":e.addKey("cancel",q).addClass(f.css.buttonAction+" "+t.keyAction);break;case "combo":e.addKey("combo",q).addClass(t.keyHasActive).attr("title",function(a,b){return b+" "+f.display[f.useCombos?"active":"disabled"]}).toggleClass(f.css.buttonActive,f.useCombos);break;case "dec":m.push(e.decimal?".":",");e.addKey("dec",q);break;case "e":case "enter":e.addKey("enter",
q).addClass(f.css.buttonAction+" "+t.keyAction);break;case "lock":e.addKey("lock",q).addClass(t.keyHasActive);break;case "s":case "shift":e.addKey("shift",q).addClass(t.keyHasActive);break;case "sign":m.push("-");e.addKey("sign",q);break;case "space":m.push(" ");e.addKey("space",q);break;case "t":case "tab":e.addKey("tab",q);break;default:b.keyaction.hasOwnProperty(h[0])&&e.addKey(h[0],q).toggleClass(f.css.buttonAction+" "+t.keyAction,g)}else g=l[r],e.addKey(g,g,!0)};e.removeBindings=function(b){a(document).unbind(b);
e.el.ownerDocument!==document&&a(e.el.ownerDocument).unbind(b);a(window).unbind(b);e.$el.unbind(b)};e.removeKeyboard=function(){e.$allKeys=null;e.$decBtn=null;f.usePreview&&e.$preview.removeData("keyboard");e.preview=null;e.$preview=null;e.$previewCopy=null;e.$keyboard.removeData("keyboard");e.$keyboard.remove();e.$keyboard=[];e.isOpen=!1;e.isCurrent(!1)};e.destroy=function(a){var c;c=b.css;var d=e.extensionNamespace.length,g=[c.input,c.locked,c.placeholder,c.noKeyboard,c.alwaysOpen,f.css.input,c.isCurrent].join(" ");
clearTimeout(e.timer);clearTimeout(e.timer2);e.$keyboard.length&&e.removeKeyboard();e.removeBindings(e.namespace);e.removeBindings(e.namespace+"callbacks");for(c=0;c<d;c++)e.removeBindings(e.extensionNamespace[c]);e.el.active=!1;e.$el.removeClass(g).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard");e=null;"function"===typeof a&&a()};e.init()};b.keyCodes={backSpace:8,tab:9,enter:13,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,
insert:45,"delete":46,A:65,Z:90,V:86,C:67,X:88,a:97,z:122};b.css={idSuffix:"_keyboard",input:"ui-keyboard-input",inputClone:"ui-keyboard-preview-clone",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",
keyDisabled:"ui-keyboard-disabled",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"};b.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",
kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"};b.keyaction={accept:function(a){a.close(!0);return!1},alt:function(a){a.altActive=!a.altActive;a.showSet()},bksp:function(a){a.insertText("\b")},cancel:function(a){a.close();return!1},clear:function(a){a.$preview.val("");a.$decBtn.length&&a.checkDecimal()},combo:function(a){var c=
a.options,f=!c.useCombos,e=a.$keyboard.find("."+b.css.keyPrefix+"combo");c.useCombos=f;e.toggleClass(c.css.buttonActive,f).attr("title",e.attr("data-title")+" ("+c.display[f?"active":"disabled"]+")");f&&a.checkCombos();return!1},dec:function(a){a.insertText(a.decimal?".":",")},del:function(a){a.insertText("{d}")},"default":function(a){a.shiftActive=a.altActive=a.metaActive=!1;a.showSet()},enter:function(c,d,f){d=c.el.nodeName;var e=c.options;if(f.shiftKey)return e.enterNavigation?c.switchInput(!f[e.enterMod],
!0):c.close(!0);if(e.enterNavigation&&("TEXTAREA"!==d||f[e.enterMod]))return c.switchInput(!f[e.enterMod],e.autoAccept?"true":!1);"TEXTAREA"===d&&a(f.target).closest("button").length&&c.insertText((b.msie?" ":"")+"\n")},lock:function(a){a.last.keyset[0]=a.shiftActive=a.capsLock=!a.capsLock;a.showSet()},left:function(a){var c=b.caret(a.$preview);0<=c.start-1&&(a.last.start=a.last.end=c.start-1,b.caret(a.$preview,a.last),a.setScroll())},meta:function(b,d){var c=a(d);b.metaActive=!c.hasClass(b.options.css.buttonActive);
b.showSet(c.attr("data-name"))},next:function(a){a.switchInput(!0,a.options.autoAccept);return!1},normal:function(a){a.shiftActive=a.altActive=a.metaActive=!1;a.showSet()},prev:function(a){a.switchInput(!1,a.options.autoAccept);return!1},right:function(a){var c=b.caret(a.$preview);c.start+1<=a.$preview.val().length&&(a.last.start=a.last.end=c.start+1,b.caret(a.$preview,a.last),a.setScroll())},shift:function(a){a.last.keyset[0]=a.shiftActive=!a.shiftActive;a.showSet()},sign:function(a){/^\-?\d*\.?\d*$/.test(a.$preview.val())&&
a.$preview.val(-1*a.$preview.val())},space:function(a){a.insertText(" ")},tab:function(a){var b=a.options;if("INPUT"===a.el.nodeName)return b.tabNavigation?a.switchInput(!a.shiftActive,!0):!1;a.insertText("\t")},toggle:function(a){a.enabled=!a.enabled;a.toggle()},NBSP:" ",ZWSP:"​",ZWNJ:"‌",ZWJ:"‍",LRM:"‎",RLM:"‏"};b.builtLayouts={};b.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],
shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",
"{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}",
"{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}",
"{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},
num:{normal:"= ( ) {b};{clear} / * -;7 8 9 +;4 5 6 {sign};1 2 3 %;0 {dec} {a} {c}".split(";")}};b.language={en:{display:{a:"✔:Accept (Shift+Enter)",accept:"Accept:Accept (Shift+Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Backspace",bksp:"Bksp:Backspace",c:"✖:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",
space:" :Space",t:"⇥:Tab",tab:"⇥ Tab:Tab",toggle:" ",valid:"valid",invalid:"invalid",active:"active",disabled:"disabled"},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`\'~\^\"ao])([a-z])/mig,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",
u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}}}};b.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,closeByClickEvent:!1,css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",
popup:"",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!1,autoAcceptOnValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,
maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!0,openOn:"focus",keyBinding:"mousedown touchstart",useWheel:!0,useCombos:!0,validate:function(a,b,f){return!0}};b.comboRegex=/([`\'~\^\"ao])([a-z])/mig;b.currentKeyboard="";a('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");\x3c/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");\x3c/script><![endif]--\x3e').appendTo("body").remove();b.msie=a("body").hasClass("oldie");b.allie=a("body").hasClass("ie");
b.watermark="undefined"!==typeof document.createElement("input").placeholder;b.checkCaretSupport=function(){if("boolean"!==typeof b.checkCaret){var c=a('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");b.caret(c.find("input"),3,3);b.checkCaret=3!==b.caret(c.find("input").hide().show()).start;c.remove()}return b.checkCaret};b.caret=function(a,b,f){if(!a||!a.length||a.is(":hidden")||"hidden"===a.css("visibility"))return{};
var c,d,h,l=a.data("keyboard");(l=l&&l.options.noFocus)||a.focus();if("undefined"!==typeof b)return"object"===typeof b&&"start"in b&&"end"in b?(c=b.start,d=b.end):"undefined"===typeof f&&(f=b),"number"===typeof b&&"number"===typeof f?(c=b,d=f):"start"===b?c=d=0:"string"===typeof b&&(c=d=a.val().length),a.caret(c,d,l);b=a.caret();c=b.start;d=b.end;h=a[0].value||a.text()||"";return{start:c,end:d,text:h.substring(c,d),replaceStr:function(a){return h.substring(0,c)+a+h.substring(d,h.length)}}};a.fn.keyboard=
function(b){return this.each(function(){a(this).data("keyboard")||new a.keyboard(this,b)})};a.fn.getkeyboard=function(){return this.data("keyboard")};a.fn.caret=function(a,b,f){if("undefined"===typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var c,d,h;c=document.selection;var l=this[0];h=l.scrollTop;var m=!1,n=!0;try{m="selectionStart"in l}catch(p){n=!1}if(n&&"undefined"!==typeof a)return/(email|number)/i.test(l.type)||(m?(l.selectionStart=a,l.selectionEnd=b):(c=
l.createTextRange(),c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b-a),c.select())),f||!this.is(":visible")&&"hidden"===this.css("visibility")||l.focus(),l.scrollTop=h,this;/(email|number)/i.test(l.type)?a=b=this.val().length:m?(a=l.selectionStart,b=l.selectionEnd):c?"TEXTAREA"===l.nodeName?(h=this.val(),f=c.createRange(),c=f.duplicate(),c.moveToElementText(l),c.setEndPoint("EndToEnd",f),a=c.text.replace(/\r/g,"\n").length,b=a+f.text.replace(/\r/g,"\n").length):(h=this.val().replace(/\r/g,
"\n"),f=c.createRange().duplicate(),f.moveEnd("character",h.length),a=""===f.text?h.length:h.lastIndexOf(f.text),f=c.createRange().duplicate(),f.moveStart("character",-h.length),b=f.text.length):a=b=(l.value||"").length;d=l.value||"";return{start:a,end:b,text:d.substring(a,b),replace:function(c){return d.substring(0,a)+c+d.substring(b,d.length)}}};return b});
(function(a,b){a.version="0.9.6";a.protocol=1;a.transports=[];a.j=[];a.sockets={};a.connect=function(c,d){var f=a.util.parseUri(c),e,g;b&&b.location&&(f.protocol=f.protocol||b.location.protocol.slice(0,-1),f.host=f.host||(b.document?b.document.domain:b.location.hostname),f.port=f.port||b.location.port);e=a.util.uniqueUri(f);var h={host:f.host,secure:"https"==f.protocol,port:f.port||("https"==f.protocol?443:80),query:f.query||""};a.util.merge(h,d);if(h["force new connection"]||!a.sockets[e])g=new a.Socket(h);
!h["force new connection"]&&g&&(a.sockets[e]=g);g=g||a.sockets[e];return g.of(1<f.path.length?f.path:"")}})("object"===typeof module?module.exports:this.io={},this);
(function(a,b){var c=a.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");c.parseUri=function(a){a=d.exec(a||"");for(var b={},c=14;c--;)b[f[c]]=a[c]||"";return b};c.uniqueUri=function(a){var c=a.protocol,d=a.host;a=a.port;"document"in
b?(d=d||document.domain,a=a||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",a||"https"!=c||(a=443));return(c||"http")+"://"+d+":"+(a||80)};c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""};c.chunkQuery=function(a){var b={};a=a.split("&");for(var c=0,d=a.length,e;c<d;++c)e=a[c].split("="),e[0]&&(b[e[0]]=e[1]);return b};var e=
!1;c.load=function(a){if("document"in b&&"complete"===document.readyState||e)return a();c.on(b,"load",a,!1)};c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)};c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(h){}return null};
"undefined"!=typeof window&&c.load(function(){e=!0});c.defer=function(a){if(!c.ua.webkit||"undefined"!=typeof importScripts)return a();c.load(function(){setTimeout(a,100)})};c.merge=function(a,b,d,e){e=e||[];d="undefined"==typeof d?2:d;for(var f in b)b.hasOwnProperty(f)&&0>c.indexOf(e,f)&&("object"===typeof a[f]&&d?c.merge(a[f],b[f],d-1,e):(a[f]=b[f],e.push(b[f])));return a};c.mixin=function(a,b){c.merge(a.prototype,b.prototype)};c.inherit=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=
new c};c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=0,h=f.length;g<h;g++)~c.indexOf(e,f[g])&&d.push(f[g]);return d};c.indexOf=function(a,b,c){var d=a.length;for(c=0>c?0>c+d?0:c+d:c||0;c<d&&a[c]!==b;c++);return d<=c?-1:c};c.toArray=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b};c.ua={};c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=
new XMLHttpRequest}catch(h){return!1}return void 0!=a.withCredentials}();c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);
(function(a,b){function c(){}a.EventEmitter=c;c.prototype.on=function(a,c){this.$events||(this.$events={});this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c;return this};c.prototype.addListener=c.prototype.on;c.prototype.once=function(a,b){function c(){d.removeListener(a,c);b.apply(this,arguments)}var d=this;c.listener=b;this.on(a,c);return this};c.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=
this.$events[a];if(b.util.isArray(d)){for(var f=-1,h=0,l=d.length;h<l;h++)if(d[h]===c||d[h].listener&&d[h].listener===c){f=h;break}if(0>f)return this;d.splice(f,1);d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this};c.prototype.removeAllListeners=function(a){this.$events&&this.$events[a]&&(this.$events[a]=null);return this};c.prototype.listeners=function(a){this.$events||(this.$events={});this.$events[a]||(this.$events[a]=[]);b.util.isArray(this.$events[a])||
(this.$events[a]=[this.$events[a]]);return this.$events[a]};c.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else if(b.util.isArray(c))for(var c=c.slice(),g=0,h=c.length;g<h;g++)c[g].apply(this,d);else return!1;return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b){function c(a){return 10>a?"0"+a:a}function d(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a,b){var e,g,h,n,q=l,r,H=b[a];H instanceof Date&&(H=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z":null);"function"===typeof p&&(H=p.call(b,a,
H));switch(typeof H){case "string":return d(H);case "number":return isFinite(H)?String(H):"null";case "boolean":case "null":return String(H);case "object":if(!H)return"null";l+=m;r=[];if("[object Array]"===Object.prototype.toString.apply(H)){n=H.length;for(e=0;e<n;e+=1)r[e]=f(e,H)||"null";h=0===r.length?"[]":l?"[\n"+l+r.join(",\n"+l)+"\n"+q+"]":"["+r.join(",")+"]";l=q;return h}if(p&&"object"===typeof p)for(n=p.length,e=0;e<n;e+=1)"string"===typeof p[e]&&(g=p[e],(h=f(g,H))&&r.push(d(g)+(l?": ":":")+
h));else for(g in H)Object.prototype.hasOwnProperty.call(H,g)&&(h=f(g,H))&&r.push(d(g)+(l?": ":":")+h);h=0===r.length?"{}":l?"{\n"+l+r.join(",\n"+l)+"\n"+q+"}":"{"+r.join(",")+"}";l=q;return h}}if(b&&b.parse)return a.JSON={parse:b.parse,stringify:b.stringify};var e=a.JSON={},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
l,m,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;e.stringify=function(a,b,c){var d;m=l="";if("number"===typeof c)for(d=0;d<c;d+=1)m+=" ";else"string"===typeof c&&(m=c);if((p=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return f("",{"":a})};e.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:
delete g[e]);return b.call(a,d,g)}var d;a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,
"undefined"!==typeof JSON?JSON:void 0);
(function(a,b){var c=a.parser={},d=c.packets="disconnect connect heartbeat message json event ack error noop".split(" "),f=c.reasons=["transport not supported","client not handshaken","unauthorized"],e=c.advice=["reconnect"],g=b.JSON,h=b.util.indexOf;c.encodePacket=function(a){var b=h(d,a.type),c=a.id||"",m=a.endpoint||"",l=a.ack,t=null;switch(a.type){case "error":var v=a.reason?h(f,a.reason):"";a=a.advice?h(e,a.advice):"";if(""!==v||""!==a)t=v+(""!==a?"+"+a:"");break;case "message":""!==a.data&&
(t=a.data);break;case "event":t={name:a.name};a.args&&a.args.length&&(t.args=a.args);t=g.stringify(t);break;case "json":t=g.stringify(a.data);break;case "connect":a.qs&&(t=a.qs);break;case "ack":t=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}b=[b,c+("data"==l?"+":""),m];null!==t&&void 0!==t&&b.push(t);return b.join(":")};c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;c<d;c++)b+="�"+a[c].length+"�"+a[c];return b};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
c.decodePacket=function(a){var b=a.match(l);if(!b)return{};var c=b[2]||"";a=b[5]||"";var h={type:d[b[1]],endpoint:b[4]||""};c&&(h.id=c,h.ack=b[3]?"data":!0);switch(h.type){case "error":b=a.split("+");h.reason=f[b[0]]||"";h.advice=e[b[1]]||"";break;case "message":h.data=a||"";break;case "event":try{var m=g.parse(a);h.name=m.name;h.args=m.args}catch(t){}h.args=h.args||[];break;case "json":try{h.data=g.parse(a)}catch(t){}break;case "connect":h.qs=a||"";break;case "ack":if(b=a.match(/^([0-9]+)(\+)?(.*)/))if(h.ackId=
b[1],h.args=[],b[3])try{h.args=b[3]?g.parse(b[3]):[]}catch(t){}}return h};c.decodePayload=function(a){if("�"==a.charAt(0)){for(var b=[],d=1,e="";d<a.length;d++)"�"==a.charAt(d)?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}return[c.decodePacket(a)]}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b){function c(a,b){this.socket=a;this.sessid=b}a.Transport=c;b.util.mixin(c,b.EventEmitter);c.prototype.onData=function(a){this.clearCloseTimeout();(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(""!==a&&(a=b.parser.decodePayload(a))&&a.length)for(var c=0,d=a.length;c<d;c++)this.onPacket(a[c]);return this};c.prototype.onPacket=function(a){this.socket.setHeartbeatTimeout();if("heartbeat"==a.type)return this.onHeartbeat();if("connect"==
a.type&&""==a.endpoint)this.onConnect();"error"==a.type&&"reconnect"==a.advice&&(this.open=!1);this.socket.onPacket(a);return this};c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};c.prototype.onDisconnect=function(){this.close&&this.open&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};c.prototype.onConnect=function(){this.socket.onConnect();return this};c.prototype.clearCloseTimeout=
function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)};c.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};c.prototype.packet=function(a){this.send(b.parser.encodePacket(a))};c.prototype.onHeartbeat=function(a){this.packet({type:"heartbeat"})};c.prototype.onOpen=function(){this.open=!0;this.clearCloseTimeout();this.socket.onOpen()};c.prototype.onClose=function(){this.open=!1;this.socket.onClose();this.onDisconnect()};
c.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid};c.prototype.ready=function(a,b){b.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(a){this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843};b.util.merge(this.options,a);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=
[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(c,"unload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function f(){}a.Socket=d;b.util.mixin(d,b.EventEmitter);d.prototype.of=function(a){this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"}));return this.namespaces[a]};d.prototype.publish=function(){this.emit.apply(this,
arguments);var a,b;for(b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))};d.prototype.handshake=function(a){function c(b){if(b instanceof Error)d.onError(b.message);else a.apply(null,b.split(":"))}var d=this,e=this.options,e=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var m=document.getElementsByTagName("script")[0],n=document.createElement("script");
n.src=e+"&jsonp="+b.j.length;m.parentNode.insertBefore(n,m);b.j.push(function(a){c(a);n.parentNode.removeChild(n)})}else{var p=b.util.request();p.open("GET",e,!0);p.withCredentials=!0;p.onreadystatechange=function(){4==p.readyState&&(p.onreadystatechange=f,200==p.status?c(p.responseText):!d.reconnecting&&d.onError(p.responseText))};p.send(null)}};d.prototype.getTransport=function(a){a=a||this.transports;for(var c=0,d;d=a[c];c++)if(b.Transport[d]&&b.Transport[d].check(this)&&(!this.isXDomain()||b.Transport[d].xdomainCheck()))return new b.Transport[d](this,
this.sessionid);return null};d.prototype.connect=function(a){if(this.connecting)return this;var c=this;this.handshake(function(d,e,f,g){function h(a){if(!c.connecting&&!c.connected){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&
(c.connecting=!1,c.options["try multiple transports"])){c.remainingTransports||(c.remainingTransports=c.transports.slice(0));for(var a=c.remainingTransports;0<a.length&&a.splice(0,1)[0]!=c.transport.name;);a.length?h(a):c.publish("connect_failed")}},c.options["connect timeout"]))})}}c.sessionid=d;c.closeTimeout=1E3*f;c.heartbeatTimeout=1E3*e;c.transports=g?b.util.intersect(g.split(","),c.options.transports):c.options.transports;c.setHeartbeatTimeout();h(c.transports);c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);
a&&"function"==typeof a&&a()})});return this};d.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)};d.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a);return this};d.prototype.setBuffer=function(a){this.doBuffer=a;!a&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])};
d.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this};d.prototype.disconnectSync=function(){b.util.request().open("GET",this.resource+"/"+b.protocol+"/"+this.sessionid,!0);this.onDisconnect("booted")};d.prototype.isXDomain=function(){var a=c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a};d.prototype.onConnect=function(){this.connected||
(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))};d.prototype.onOpen=function(){this.open=!0};d.prototype.onClose=function(){this.open=!1;clearTimeout(this.heartbeatTimeoutTimer)};d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};d.prototype.onError=function(a){a&&a.advice&&"reconnect"===a.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect());this.publish("error",a&&a.reason?a.reason:a)};
d.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.open=this.connecting=this.connected=!1;if(b||c)this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect())};d.prototype.reconnect=function(){function a(){if(c.connected){for(var a in c.namespaces)c.namespaces.hasOwnProperty(a)&&""!==a&&c.namespaces[a].packet({type:"connect"});c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer);
c.removeListener("connect_failed",b);c.removeListener("connect",b);c.reconnecting=!1;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=f}function b(){if(c.reconnecting){if(c.connected)return a();if(c.connecting&&c.reconnecting)return c.reconnectionTimer=setTimeout(b,1E3);c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),a()):(c.on("connect_failed",b),c.options["try multiple transports"]=
!0,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<n&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],f=this.options["try multiple transports"],n=this.options["reconnection limit"];this.options["try multiple transports"]=
!1;this.reconnectionTimer=setTimeout(b,this.reconnectionDelay);this.on("connect",b)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(a,b){this.socket=a;this.name=b||"";this.flags={};this.json=new d(this,"json");this.ackPackets=0;this.acks={}}function d(a,b){this.namespace=a;this.name=b}a.SocketNamespace=c;b.util.mixin(c,b.EventEmitter);c.prototype.$emit=b.EventEmitter.prototype.emit;c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};c.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};c.prototype.send=function(a,b){var c={type:this.flags.json?
"json":"message",data:a};"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b);return this.packet(c)};c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1));d.args=b;return this.packet(d)};c.prototype.disconnect=function(){""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));
return this};c.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var d=this;switch(a.type){case "connect":this.$emit("connect");break;case "disconnect":if(""===this.name)this.socket.onDisconnect(a.reason||"booted");else this.$emit("disconnect",a.reason);break;case "message":case "json":var f=["message",a.data];"data"==a.ack?f.push(c):a.ack&&this.packet({type:"ack",ackId:a.id});this.$emit.apply(this,f);break;case "event":f=[a.name].concat(a.args);
"data"==a.ack&&f.push(c);this.$emit.apply(this,f);break;case "ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case "error":if(a.advice)this.socket.onError(a);else"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}};d.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};d.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,
arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(a){b.Transport.apply(this,arguments)}a.websocket=d;b.util.inherit(d,b.Transport);d.prototype.name="websocket";d.prototype.open=function(){var a=b.util.query(this.socket.options.query),d=this,g;g||(g=c.MozWebSocket||c.WebSocket);this.websocket=new g(this.prepareUrl()+a);this.websocket.onopen=function(){d.onOpen();d.socket.setBuffer(!1)};this.websocket.onmessage=function(a){d.onData(a.data)};this.websocket.onclose=function(){d.onClose();d.socket.setBuffer(!0)};this.websocket.onerror=
function(a){d.onError(a)};return this};d.prototype.send=function(a){this.websocket.send(a);return this};d.prototype.payload=function(a){for(var b=0,c=a.length;b<c;b++)this.packet(a[b]);return this};d.prototype.close=function(){this.websocket.close();return this};d.prototype.onError=function(a){this.socket.onError(a)};d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c};d.xdomainCheck=function(){return!0};
b.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(){b.Transport.websocket.apply(this,arguments)}a.flashsocket=c;b.util.inherit(c,b.Transport.websocket);c.prototype.name="flashsocket";c.prototype.open=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,c)});return this};c.prototype.send=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)});return this};c.prototype.close=function(){WebSocket.__tasks.length=
0;b.Transport.websocket.prototype.close.call(this);return this};c.prototype.ready=function(a,f){function d(){var b=a.options,d=b["flash policy port"],e=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];c.loaded||("undefined"===typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=e.join("/")),843!==d&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+d),WebSocket.__initialize(),c.loaded=!0);f.call(g)}var g=
this;if(document.body)return d();b.util.load(d)};c.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?10<=swfobject.getFlashPlayerVersion().major:!1};c.xdomainCheck=function(){return!0};"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);b.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
if("undefined"!=typeof window)var swfobject=function(){function a(){if(!T){try{var a=x.getElementsByTagName("body")[0].appendChild(x.createElement("span"));a.parentNode.removeChild(a)}catch(D){return}T=!0;for(var a=C.length,b=0;b<a;b++)C[b]()}}function b(a){T?a():C[C.length]=a}function c(a){if("undefined"!=typeof F.addEventListener)F.addEventListener("load",a,!1);else if("undefined"!=typeof x.addEventListener)x.addEventListener("load",a,!1);else if("undefined"!=typeof F.attachEvent)q(F,"onload",a);
else if("function"==typeof F.onload){var b=F.onload;F.onload=function(){b();a()}}else F.onload=a}function d(){var a=x.getElementsByTagName("body")[0],b=x.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),z.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);
c=null;f()})()}else f()}function f(){var a=G.length;if(0<a)for(var b=0;b<a;b++){var c=G[b].id,d=G[b].callbackFn,f={success:!1,id:c};if(0<z.pv[0]){var m=r(c);if(m)if(!t(G[b].swfVersion)||z.wk&&312>z.wk)if(G[b].expressInstall&&g()){f={};f.data=G[b].expressInstall;f.width=m.getAttribute("width")||"0";f.height=m.getAttribute("height")||"0";m.getAttribute("class")&&(f.styleclass=m.getAttribute("class"));m.getAttribute("align")&&(f.align=m.getAttribute("align"));for(var n={},m=m.getElementsByTagName("param"),
p=m.length,q=0;q<p;q++)"movie"!=m[q].getAttribute("name").toLowerCase()&&(n[m[q].getAttribute("name")]=m[q].getAttribute("value"));h(f,n,c,d)}else l(m),d&&d(f);else J(c,!0),d&&(f.success=!0,f.ref=e(c),d(f))}else J(c,!0),d&&((c=e(c))&&"undefined"!=typeof c.SetVariable&&(f.success=!0,f.ref=c),d(f))}}function e(a){var b=null;(a=r(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function g(){return!N&&t("6.0.65")&&(z.win||z.mac)&&
!(z.wk&&312>z.wk)}function h(a,b,c,d){N=!0;ga=d||null;la={success:!1,id:c};var e=r(c);if(e){"OBJECT"==e.nodeName?(ra=m(e),ka=null):(ra=e,ka=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";x.title=x.title.slice(0,47)+" - Flash Player Installation";d=z.ie&&z.win?["Active"].concat("").join("X"):"PlugIn";d="MMredirectURL="+F.location.toString().replace(/&/g,
"%26")+"&MMplayerType="+d+"&MMdoctitle="+x.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;z.ie&&z.win&&4!=e.readyState&&(d=x.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());n(a,b,c)}}function l(a){if(z.ie&&z.win&&4!=a.readyState){var b=x.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(m(a),
b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(m(a),a)}function m(a){var b=x.createElement("div");if(z.win&&z.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function n(a,b,c){var d,e=r(c);if(z.wk&&312>z.wk)return d;if(e)if("undefined"==
typeof a.id&&(a.id=c),z.ie&&z.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";na[na.length]=a.id;d=r(a.id)}else{h=x.createElement("object");h.setAttribute("type",
"application/x-shockwave-flash");for(var m in a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?h.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&h.setAttribute(m,a[m]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,m=b[f],c=x.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",m),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function p(a){var b=r(a);b&&"OBJECT"==b.nodeName&&(z.ie&&z.win?(b.style.display="none",function(){if(4==
b.readyState){var c=r(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function r(a){var b=null;try{b=x.getElementById(a)}catch(D){}return b}function q(a,b,c){a.attachEvent(b,c);V[V.length]=[a,b,c]}function t(a){var b=z.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:
!1}function v(a,b,c,d){if(!z.ie||!z.mac){var e=x.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(P=E=null),E&&P==c||(d=x.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),E=e.appendChild(d),z.ie&&z.win&&"undefined"!=typeof x.styleSheets&&0<x.styleSheets.length&&(E=x.styleSheets[x.styleSheets.length-1]),P=c),z.ie&&z.win?E&&"object"==typeof E.addRule&&E.addRule(a,b):E&&"undefined"!=typeof x.createTextNode&&E.appendChild(x.createTextNode(a+
" {"+b+"}")))}}function J(a,b){if(Q){var c=b?"visible":"hidden";T&&r(a)?r(a).style.visibility=c:v("#"+a,"visibility:"+c)}}function O(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var F=window,x=document,H=navigator,K=!1,C=[function(){K?d():f()}],G=[],na=[],V=[],ra,ka,ga,la,T=!1,N=!1,E,P,Q=!0,z=function(){var a="undefined"!=typeof x.getElementById&&"undefined"!=typeof x.getElementsByTagName&&"undefined"!=typeof x.createElement,b=H.userAgent.toLowerCase(),
c=H.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof H.plugins&&"object"==typeof H.plugins["Shockwave Flash"])!(g=H.plugins["Shockwave Flash"].description)||"undefined"!=typeof H.mimeTypes&&H.mimeTypes["application/x-shockwave-flash"]&&!H.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(K=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,
"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof F[["Active"].concat("Object").join("X")])try{if(g=(new (window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(M){}return{w3:a,pv:f,wk:b,ie:e,win:d,
mac:c}}();(function(){z.w3&&(("undefined"!=typeof x.readyState&&"complete"==x.readyState||"undefined"==typeof x.readyState&&(x.getElementsByTagName("body")[0]||x.body))&&a(),T||("undefined"!=typeof x.addEventListener&&x.addEventListener("DOMContentLoaded",a,!1),z.ie&&z.win&&(x.attachEvent("onreadystatechange",function(){"complete"==x.readyState&&(x.detachEvent("onreadystatechange",arguments.callee),a())}),F==top&&function(){if(!T){try{x.documentElement.doScroll("left")}catch(y){setTimeout(arguments.callee,
0);return}a()}}()),z.wk&&function(){T||(/loaded|complete/.test(x.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){z.ie&&z.win&&window.attachEvent("onunload",function(){for(var a=V.length,b=0;b<a;b++)V[b][0].detachEvent(V[b][1],V[b][2]);a=na.length;for(b=0;b<a;b++)p(na[b]);for(var c in z)z[c]=null;z=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(z.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;G[G.length]=e;J(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(z.w3)return e(a)},embedSWF:function(a,c,d,e,f,m,l,p,q,r){var v={success:!1,id:c};z.w3&&!(z.wk&&312>z.wk)&&a&&c&&d&&e&&f?(J(c,!1),b(function(){d+="";e+="";var b={};if(q&&"object"===typeof q)for(var E in q)b[E]=q[E];b.data=a;b.width=d;b.height=e;E={};if(p&&"object"===typeof p)for(var x in p)E[x]=p[x];if(l&&"object"===typeof l)for(var y in l)E.flashvars="undefined"!=typeof E.flashvars?E.flashvars+("&"+y+"="+l[y]):y+"="+
l[y];if(t(f))x=n(b,E,c),b.id==c&&J(c,!0),v.success=!0,v.ref=x;else{if(m&&g()){b.data=m;h(b,E,c,r);return}J(c,!0)}r&&r(v)})):r&&r(v)},switchOffAutoHideShow:function(){Q=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){if(z.w3)return n(a,b,c)},showExpressInstall:function(a,b,c,d){z.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){z.w3&&p(a)},createCSS:function(a,b,c,d){z.w3&&v(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,
getQueryParamValue:function(a){var b=x.location.search||x.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return O(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return O(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(N){var a=r("SWFObjectExprInst");a&&ra&&(a.parentNode.replaceChild(ra,a),ka&&(J(ka,!0),z.ie&&z.win&&(ra.style.display="block")),ga&&ga(la));N=!1}}}}();
(function(){if("undefined"!=typeof window&&!window.WebSocket){var a=window.console;a&&a.log&&a.error||(a={log:function(){},error:function(){}});swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,c,d,f,e){var b=this;b.__id=WebSocket.__nextId++;WebSocket.__instances[b.__id]=b;b.readyState=WebSocket.CONNECTING;
b.bufferedAmount=0;b.__events={};c?"string"==typeof c&&(c=[c]):c=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(b.__id,a,c,d||null,f||0,e||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));if(0>a)return!0;this.bufferedAmount+=a;return!1},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&
this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,c,d){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},WebSocket.prototype.removeEventListener=function(a,c,d){if(a in this.__events)for(a=this.__events[a],d=a.length-1;0<=d;--d)if(a[d]===c){a.splice(d,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],d=0;d<b.length;++d)b[d](a);(b=this["on"+
a.type])&&b(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState);"protocol"in a&&(this.protocol=a.protocol);if("open"==a.type||"error"==a.type)a=this.__createSimpleEvent(a.type);else if("close"==a.type)a=this.__createSimpleEvent("close");else if("message"==a.type)a=decodeURIComponent(a.message),a=this.__createMessageEvent("message",a);else throw"unknown event type: "+a.type;this.dispatchEvent(a)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&
window.Event){var b=document.createEvent("Event");b.initEvent(a,!1,!1);return b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var b=document.createEvent("MessageEvent");b.initMessageEvent("message",!1,!1,c,null,null,window,null);return b}return{type:a,data:c,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances=
{},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left=
"-100px",b.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";b.appendChild(c);document.body.appendChild(b);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}else a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=
document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0);return!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},
WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename?a.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",
function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):a.error("Flash Player >= 10.0.0 is required.")}})();
(function(a,b,c){function d(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function f(){}a.XHR=d;b.util.inherit(d,b.Transport);d.prototype.open=function(){this.socket.setBuffer(!1);this.onOpen();this.get();this.setCloseTimeout();return this};d.prototype.payload=function(a){for(var c=[],d=0,e=a.length;d<e;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))};d.prototype.send=function(a){this.post(a);return this};d.prototype.post=function(a){function b(){if(4==
this.readyState)if(this.onreadystatechange=f,e.posting=!1,200==this.status)e.socket.setBuffer(!1);else e.onClose()}function d(){this.onload=f;e.socket.setBuffer(!1)}var e=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=b;this.sendXHR.send(a)};d.prototype.close=function(){this.onClose();return this};d.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),
d=b.util.query(this.socket.options.query,"t="+ +new Date);c.open(a||"GET",this.prepareUrl()+d,!0);if("POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(l){}return c};d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};d.check=function(a,d){try{var e=b.util.request(d),f=c.XDomainRequest&&e instanceof XDomainRequest,g=(a&&a.options&&a.options.secure?"https:":"http:")!=c.location.protocol;if(e&&(!f||
!g))return!0}catch(n){}return!1};d.xdomainCheck=function(){return d.check(null,!0)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(a){b.Transport.XHR.apply(this,arguments)}a.htmlfile=c;b.util.inherit(c,b.Transport.XHR);c.prototype.name="htmlfile";c.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio";this.doc.body.appendChild(a);this.iframe=this.doc.createElement("iframe");a.appendChild(this.iframe);var c=
this,a=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;b.util.on(window,"unload",function(){c.destroy()})};c.prototype._=function(a,b){this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(g){}};c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(d){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};c.prototype.close=function(){this.destroy();
return b.Transport.XHR.prototype.close.call(this)};c.check=function(){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new (window[["Active"].concat("Object").join("X")])("htmlfile"),b.Transport.XHR.check()}catch(d){}return!1};c.xdomainCheck=function(){return!1};b.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(){b.Transport.XHR.apply(this,arguments)}function f(){}a["xhr-polling"]=d;b.util.inherit(d,b.Transport.XHR);b.util.merge(d,b.Transport.XHR);d.prototype.name="xhr-polling";d.prototype.open=function(){b.Transport.XHR.prototype.open.call(this);return!1};d.prototype.get=function(){function a(){if(4==this.readyState)if(this.onreadystatechange=f,200==this.status)l.onData(this.responseText),l.get();else l.onClose()}function b(){this.onerror=this.onload=f;l.onData(this.responseText);
l.get()}function d(){l.onClose()}if(this.open){var l=this;this.xhr=this.request();c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=d):this.xhr.onreadystatechange=a;this.xhr.send(null)}};d.prototype.onClose=function(){b.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=f;try{this.xhr.abort()}catch(e){}this.xhr=null}};d.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})};
b.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b,c){function d(a){b.Transport["xhr-polling"].apply(this,arguments);this.index=b.j.length;var c=this;b.j.push(function(a){c._(a)})}var f=c.document&&"MozAppearance"in c.document.documentElement.style;a["jsonp-polling"]=d;b.util.inherit(d,b.Transport["xhr-polling"]);d.prototype.name="jsonp-polling";d.prototype.post=function(a){function c(){d();e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{q=document.createElement('<iframe name="'+e.iframeId+'">')}catch(t){q=
document.createElement("iframe"),q.name=e.iframeId}q.id=e.iframeId;e.form.appendChild(q);e.iframe=q}var e=this,f=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var n=document.createElement("form"),p=document.createElement("textarea"),r=this.iframeId="socketio_iframe_"+this.index,q;n.className="socketio";n.style.position="absolute";n.style.top="0px";n.style.left="0px";n.style.display="none";n.target=r;n.method="POST";n.setAttribute("accept-charset","utf-8");
p.name="d";n.appendChild(p);document.body.appendChild(n);this.form=n;this.area=p}this.form.action=this.prepareUrl()+f;d();this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(t){}this.iframe.attachEvent?q.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c;this.socket.setBuffer(!0)};d.prototype.get=function(){var a=this,c=document.createElement("script"),d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);c.async=!0;c.src=this.prepareUrl()+d;c.onerror=function(){a.onClose()};d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;f&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};d.prototype._=function(a){this.onData(a);this.open&&this.get();return this};d.prototype.ready=function(a,c){var d=this;if(!f)return c.call(this);b.util.load(function(){c.call(d)})};d.check=function(){return"document"in
c};d.xdomainCheck=function(){return!0};b.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
var Prototype={Version:"1.7.3",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:-1<a.indexOf("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!==
typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;a.__proto__&&a.__proto__!==b.__proto__&&(c=!0);return c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Class=function(){function a(){}var b=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function b(){this.initialize.apply(this,arguments)}var d=null,f=$A(arguments);Object.isFunction(f[0])&&(d=f.shift());Object.extend(b,Class.Methods);b.superclass=d;b.subclasses=[];d&&(a.prototype=d.prototype,b.prototype=new a,d.subclasses.push(b));for(var d=0,e=f.length;d<e;d++)b.addMethods(f[d]);b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction);
return b.prototype.constructor=b},Methods:{addMethods:function(a){var c=this.superclass&&this.superclass.prototype,f=Object.keys(a);b&&(a.toString!=Object.prototype.toString&&f.push("toString"),a.valueOf!=Object.prototype.valueOf&&f.push("valueOf"));for(var e=0,g=f.length;e<g;e++){var h=f[e],l=a[h];if(c&&Object.isFunction(l)&&"$super"==l.argumentNames()[0]){var m=l,l=function(a){return function(){return c[a].apply(this,arguments)}}(h).wrap(m);l.valueOf=function(a){return function(){return a.valueOf.call(a)}}(m);
l.toString=function(a){return function(){return a.toString.call(a)}}(m)}this.prototype[h]=l}return this}}}}();
(function(){function a(a){switch(a){case null:return"Null";case void 0:return"Undefined"}switch(typeof a){case "boolean":return"Boolean";case "number":return"Number";case "string":return"String"}return"Object"}function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return d("",{"":a},[])}function d(b,c,e){c=c[b];"Object"===a(c)&&"function"===typeof c.toJSON&&(c=c.toJSON(b));b=l.call(c);switch(b){case "[object Number]":case "[object Boolean]":case "[object String]":c=c.valueOf()}switch(c){case null:return"null";
case !0:return"true";case !1:return"false"}switch(typeof c){case "string":return c.inspect(!0);case "number":return isFinite(c)?String(c):"null";case "object":for(var f=0,g=e.length;f<g;f++)if(e[f]===c)throw new TypeError("Cyclic reference to '"+c+"' in object");e.push(c);var h=[];if("[object Array]"===b){f=0;for(g=c.length;f<g;f++){var m=d(f,c,e);h.push("undefined"===typeof m?"null":m)}h="["+h.join(",")+"]"}else{for(var n=Object.keys(c),f=0,g=n.length;f<g;f++)b=n[f],m=d(b,c,e),"undefined"!==typeof m&&
h.push(b.inspect(!0)+":"+m);h="{"+h.join(",")+"}"}e.pop();return h}}function f(a){return JSON.stringify(a)}function e(b){if("Object"!==a(b))throw new TypeError;var c=[],d;for(d in b)m.call(b,d)&&c.push(d);if(r)for(var e=0;d=p[e];e++)m.call(b,d)&&c.push(d);return c}function g(a){return"[object Array]"===l.call(a)}function h(a){return"undefined"===typeof a}var l=Object.prototype.toString,m=Object.prototype.hasOwnProperty,n=window.JSON&&"function"===typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"===
typeof JSON.stringify(Prototype.K),p="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),r=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(g=Array.isArray);b(Object,{extend:b,inspect:function(a){try{return h(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(t){if(t instanceof RangeError)return"...";throw t;}},toJSON:n?f:c,toQueryString:function(a){return $H(a).toQueryString()},
toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:Object.keys||e,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},clone:function(a){return b({},a)},isElement:function(a){return!(!a||1!=a.nodeType)},isArray:g,isHash:function(a){return a instanceof Hash},isFunction:function(a){return"[object Function]"===l.call(a)},isString:function(a){return"[object String]"===l.call(a)},isNumber:function(a){return"[object Number]"===l.call(a)},isDate:function(a){return"[object Date]"===
l.call(a)},isUndefined:h})})();
Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(b,c){b=d.call(b,0);return a(b,c)}function c(a){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");var c=function(){},e=this,f=d.call(arguments,1),m=function(){var c=b(f,arguments);return e.apply(this instanceof m?this:a,c)};c.prototype=this.prototype;m.prototype=new c;return m}
var d=Array.prototype.slice,f={argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]},bindAsEventListener:function(b){var c=this,e=d.call(arguments,1);return function(d){d=a([d||window.event],e);return c.apply(b,d)}},curry:function(){if(!arguments.length)return this;var a=this,c=d.call(arguments,0);return function(){var d=b(c,arguments);return a.apply(this,
d)}},delay:function(a){var b=this,c=d.call(arguments,1);return window.setTimeout(function(){return b.apply(b,c)},1E3*a)},defer:function(){var b=a([.01],arguments);return this.delay.apply(this,b)},wrap:function(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}},methodize:function(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}};Function.prototype.bind||(f.bind=c);return f}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b);a.toJSON||(a.toJSON=c)})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1E3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=
!1,a;}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return b?b[1].split(a||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift()),d=1<b.length?b.join("="):b[0];void 0!=d&&(d=d.gsub("+"," "),d=decodeURIComponent(d));c in a?(Object.isArray(a[c])||(a[c]=
[a[c]]),a[c].push(d)):a[c]=d}return a}):{}}function d(a){var b=this.unfilterJSON(),c=/[\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff\u0000]/g;c.test(b)&&(b=b.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!a||b.isJSON())return eval("("+b+")")}catch(p){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function f(){var a=this.unfilterJSON();return JSON.parse(a)}function e(a,b){b=Object.isNumber(b)?
b:0;return this.lastIndexOf(a,b)===b}function g(a,b){a=String(a);b=Object.isNumber(b)?b:this.length;0>b&&(b=0);b>this.length&&(b=this.length);var c=b-a.length;return 0<=c&&this.indexOf(a,c)===c}var h=window.JSON&&"function"===typeof JSON.parse&&JSON.parse('{"test": true}').test;return{gsub:function(b,c){var d="",e=this,f;c=a(c);Object.isString(b)&&(b=RegExp.escape(b));if(!(b.length||b.source&&"(?:)"!==b.source))return c=c(""),c+e.split("").join(c)+c;for(;0<e.length;)(f=e.match(b))&&0<f[0].length?
(d+=e.slice(0,f.index),d+=String.interpret(c(f)),e=e.slice(f.index+f[0].length)):(d+=e,e="");return d},sub:function(b,c,d){c=a(c);d=Object.isUndefined(d)?1:d;return this.gsub(b,function(a){return 0>--d?a[0]:c(a)})},scan:function(a,b){this.gsub(a,b);return String(this)},truncate:function(a,b){a=a||30;b=Object.isUndefined(b)?"...":b;return this.length>a?this.slice(0,a-b.length)+b:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,
"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=new RegExp(Prototype.ScriptFragment,"im");return(this.match(new RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(b){return(b.match(a)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>a?"":Array(a+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"},unfilterJSON:function(a){return this.replace(a||Prototype.JSONFilter,"$1")},isJSON:function(){var a=
this;if(a.blank())return!1;a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},evalJSON:h?f:d,include:function(a){return-1<this.indexOf(a)},startsWith:String.prototype.startsWith||e,endsWith:String.prototype.endsWith||g,empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,b){return(new Template(this,
b)).evaluate(a)}}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,f=b[3],e=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=e.exec(f);if(null==b)return c;for(;null!=b;){var g=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1],d=d[g];if(null==
d||""==b[3])break;f=f.substring("["==b[3]?b[1].length:b[0].length);b=e.exec(f)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(a,b){a=a||Prototype.K;var c=!0;this.each(function(d,e){c=c&&!!a.call(b,d,e,this);if(!c)throw $break;},this);return c}function b(a,b){a=a||Prototype.K;var c=!1;this.each(function(d,e){if(c=!!a.call(b,d,e,this))throw $break;},this);return c}function c(a,b){a=a||Prototype.K;var c=[];this.each(function(d,e){c.push(a.call(b,d,e,this))},this);return c}function d(a,b){var c;this.each(function(d,e){if(a.call(b,d,e,this))throw c=d,$break;},this);return c}function f(a,
b){var c=[];this.each(function(d,e){a.call(b,d,e,this)&&c.push(d)},this);return c}function e(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;this.each(function(c){if(c==a)throw b=!0,$break;});return b}function g(){return this.map()}return{each:function(a,b){try{this._each(a,b)}catch(m){if(m!=$break)throw m;}return this},eachSlice:function(a,b,c){var d=-a,e=[],f=this.toArray();if(1>a)return f;for(;(d+=a)<f.length;)e.push(f.slice(d,d+a));return e.collect(b,c)},all:a,every:a,
any:b,some:b,collect:c,map:c,detect:d,findAll:f,select:f,filter:f,grep:function(a,b,c){b=b||Prototype.K;var d=[];Object.isString(a)&&(a=new RegExp(RegExp.escape(a)));this.each(function(e,f){a.match(e)&&d.push(b.call(c,e,f,this))},this);return d},include:e,member:e,inGroupsOf:function(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(c){for(;c.length<a;)c.push(b);return c})},inject:function(a,b,c){this.each(function(d,e){a=b.call(c,a,d,e,this)},this);return a},invoke:function(a){var b=
$A(arguments).slice(1);return this.map(function(c){return c[a].apply(c,b)})},max:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d>=c)c=d},this);return c},min:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d<c)c=d},this);return c},partition:function(a,b){a=a||Prototype.K;var c=[],d=[];this.each(function(e,f){(a.call(b,e,f,this)?c:d).push(e)},this);return[c,d]},pluck:function(a){var b=[];this.each(function(c){b.push(c[a])});
return b},reject:function(a,b){var c=[];this.each(function(d,e){a.call(b,d,e,this)||c.push(d)},this);return c},sortBy:function(a,b){return this.map(function(c,d){return{value:c,criteria:a.call(b,c,d,this)}},this).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}).pluck("value")},toArray:g,entries:g,zip:function(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var c=[this].concat(b).map($A);return this.map(function(b,d){return a(c.pluck(d))})},size:function(){return this.toArray().length},
inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:d}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function $w(a){return Object.isString(a)?(a=a.strip())?a.split(/\s+/):[]:[]}Array.from=$A;
(function(){function a(a,b){for(var c=0,d=this.length>>>0;c<d;c++)c in this&&a.call(b,this[c],c,this)}function b(){return p.call(this,0)}function c(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=Number(b);isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b)));if(b>d)return-1;for(var e=0<=b?b:Math.max(d-Math.abs(b),0);e<d;e++)if(e in c&&c[e]===a)return e;return-1}function d(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>
0;if(0===d)return-1;Object.isUndefined(b)?b=d:(b=Number(b),isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b))));for(d=0<=b?Math.min(b,d-1):d-Math.abs(b);0<=d;d--)if(d in c&&c[d]===a)return d;return-1}function f(a){var b=[],c=p.call(arguments,0),d,e=0;c.unshift(this);for(var f=0,g=c.length;f<g;f++)if(d=c[f],!Object.isArray(d)||"callee"in d)b[e++]=d;else for(var h=0,m=d.length;h<m;h++)h in d&&(b[e]=d[h]),e++;b.length=e;return b}function e(a){return function(){if(0===arguments.length)return a.call(this,
Prototype.K);if(void 0===arguments[0]){var b=p.call(arguments,1);b.unshift(Prototype.K);return a.apply(this,b)}return a.apply(this,arguments)}}function g(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=[],e=0,f=0,g=c.length>>>0;f<g;f++)f in c&&(d[e]=a.call(b,c[f],f,c)),e++;d.length=e;return d}function h(a,b){if(null==this||!Object.isFunction(a))throw new TypeError;for(var c=Object(this),d=[],e,f=0,g=c.length>>>0;f<g;f++)f in c&&(e=c[f],a.call(b,e,f,c)&&d.push(e));
return d}function l(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&a.call(b,c[d],d,c))return!0;return!1}function m(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&!a.call(b,c[d],d,c))return!1;return!0}var n=Array.prototype,p=n.slice,r=n.forEach;r||(r=a);n.map&&(g=e(Array.prototype.map));n.filter&&(h=Array.prototype.filter);n.some&&(l=e(Array.prototype.some));n.every&&
(m=e(Array.prototype.every));Object.extend(n,Enumerable);n.entries===Enumerable.entries&&delete n.entries;n._reverse||(n._reverse=n.reverse);Object.extend(n,{_each:r,map:g,collect:g,select:h,filter:h,findAll:h,some:l,any:l,every:m,all:m,clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},flatten:function(){return this.inject([],function(a,b){if(Object.isArray(b))return a.concat(b.flatten());
a.push(b);return a})},without:function(){var a=p.call(arguments,0);return this.select(function(b){return!a.include(b)})},reverse:function(a){return(!1===a?this.toArray():this)._reverse()},uniq:function(a){return this.inject([],function(b,c,d){0!=d&&(a?b.last()==c:b.include(c))||b.push(c);return b})},intersect:function(a){return this.uniq().findAll(function(b){return-1!==a.indexOf(b)})},clone:b,toArray:b,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+
"]"}});(function(){return 1!==[].concat(arguments)[0][0]})(1,2)&&(n.concat=f);n.indexOf||(n.indexOf=c);n.lastIndexOf||(n.lastIndexOf=d)})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(){return Object.clone(this._object)}function b(a,b){if(Object.isUndefined(b))return a;b=String.interpret(b);b=b.gsub(/(\r)?\n/,"\r\n");b=encodeURIComponent(b);b=b.gsub(/%20/,"+");return a+"="+b}return{initialize:function(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)},_each:function(a,b){var c=0,d;for(d in this._object){var g=this._object[d],h=[d,g];h.key=d;h.value=g;a.call(b,h,c);c++}},set:function(a,b){return this._object[a]=
b},get:function(a){if(this._object[a]!==Object.prototype[a])return this._object[a]},unset:function(a){var b=this._object[a];delete this._object[a];return b},toObject:a,toTemplateReplacements:a,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(a){var b=this.detect(function(b){return b.value===a});return b&&b.key},merge:function(a){return this.clone().update(a)},update:function(a){return(new Hash(a)).inject(this,function(a,b){a.set(b.key,b.value);
return a})},toQueryString:function(){return this.inject([],function(a,d){var c=encodeURIComponent(d.key),e=d.value;if(e&&"object"==typeof e){if(Object.isArray(e)){for(var g=[],h=0,l=e.length,m;h<l;h++)m=e[h],g.push(b(c,m));return a.concat(g)}}else a.push(b(c,e));return a}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:a,clone:function(){return new Hash(this)}}}());Hash.from=$H;
Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a,b){$R(0,this,!0).each(a,b);return this},toPaddedString:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(a,b,c){this.start=a;this.end=b;this.exclusive=c},_each:function(a,b){var c=this.start,d;for(d=0;this.include(c);d++)a.call(b,c,d),c=c.succ()},include:function(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}}}()),Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(f){}}return a}},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,Responders:{responders:[],_each:function(a,b){this.responders._each(a,b)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(f){if(Object.isFunction(f[a]))try{f[a].apply(f,[b,c,d])}catch(e){}})}}};Object.extend(Ajax.Responders,Enumerable);
Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}});
Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(a+=(a?"&":"")+"_method="+this.method,this.method="post");a&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+a);this.parameters=
a.toQueryParams();try{var b=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||a:null;this.transport.send(this.body);if(!this.options.asynchronous&&
this.transport.overrideMimeType)this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;1<a&&(4!=a||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};"post"==this.method&&(a["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+
this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(a.Connection="close"));if("object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;c<d;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var f in a)null!=a[f]&&this.transport.setRequestHeader(f,a[f])},success:function(){var a=this.getStatus();return!a||200<=a&&300>a||304==a},getStatus:function(){try{return 1223===
this.transport.status?204:this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if("Complete"==a){try{this._complete=!0,(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var c=b.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&c&&c.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&
this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(b,b.headerJSON),Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(d){this.dispatchException(d)}"Complete"==a&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(2<b&&!Prototype.Browser.IE||4==b)this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(a.responseText),this.headerJSON=this._getHeaderJSON();4==b&&(a=a.responseXML,this.responseXML=Object.isUndefined(a)?null:a,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||
""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},
_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,d){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};d=Object.clone(d);var f=d.onComplete;d.onComplete=function(b,c){this.updateContent(b.responseText);Object.isFunction(f)&&f(b,c)}.bind(this);$super(c,d)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d=
{};d[c.insertion]=a;b.insert(d)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
(function(a){function b(a){if(1<arguments.length){for(var d=0,e=[],f=arguments.length;d<f;d++)e.push(b(arguments[d]));return e}Object.isString(a)&&(a=document.getElementById(a));return c.extend(a)}function c(a,b){b=b||{};a=a.toLowerCase();if(B&&b.name)return a="<"+a+' name="'+b.name+'">',delete b.name,c.writeAttribute(document.createElement(a),b);ta[a]||(ta[a]=c.extend(document.createElement(a)));var d="select"===a||"type"in b?document.createElement(a):ta[a].cloneNode(!1);return c.writeAttribute(d,
b)}function d(a,c){a=b(a);if(c&&c.toElement)c=c.toElement();else if(!Object.isElement(c)){c=Object.toHTML(c);var d=a.ownerDocument.createRange();d.selectNode(a);c.evalScripts.bind(c).defer();c=d.createContextualFragment(c.stripScripts())}a.parentNode.replaceChild(c,a);return a}function f(a,d){a=b(a);d&&d.toElement&&(d=d.toElement());if(Object.isElement(d))return a.parentNode.replaceChild(d,a),a;d=Object.toHTML(d);var f=a.parentNode,g=f.tagName.toUpperCase();if(g in oa.tags){var h=c.next(a),g=e(g,
d.stripScripts());f.removeChild(a);g.each(h?function(a){f.insertBefore(a,h)}:function(a){f.appendChild(a)})}else a.outerHTML=d.stripScripts();d.evalScripts.bind(d).defer();return a}function e(a,b,c){var d=oa.tags[a];a=M;var e=!!d;!e&&c&&(e=!0,d=["","",0]);if(e)for(a.innerHTML="&#160;"+d[0]+b+d[1],a.removeChild(a.firstChild),b=d[2];b--;)a=a.firstChild;else a.innerHTML=b;return $A(a.childNodes)}function g(a){var b=N(a);b&&(c.stopObserving(a),qa||(a._prototypeUID=ha),delete c.Storage[b])}function h(a,
d,e){a=b(a);e=e||-1;for(var f=[];(a=a[d])&&(a.nodeType===Node.ELEMENT_NODE&&f.push(c.extend(a)),f.length!==e););return f}function l(a){for(a=b(a).firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return b(a)}function m(a){var d=[];for(a=b(a).firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&d.push(c.extend(a)),a=a.nextSibling;return d}function n(a){return h(a,"previousSibling")}function p(a){return h(a,"nextSibling")}function r(a,d,e,f){a=b(a);e=e||0;f=f||0;Object.isNumber(e)&&(f=e,e=null);
for(;a=a[d];)if(1===a.nodeType&&!(e&&!Prototype.Selector.match(a,e)||0<=--f))return c.extend(a)}function q(a){a=b(a);var c=Ba.call(arguments,1).join(", ");return Prototype.Selector.select(c,a)}function t(a,c){a=b(a);c=b(c);if(!a||!c)return!1;for(;a=a.parentNode;)if(a===c)return!0;return!1}function v(a,c){a=b(a);c=b(c);return a&&c?c.contains?c.contains(a)&&c!==a:t(a,c):!1}function J(a,c){a=b(a);c=b(c);return a&&c?8===(a.compareDocumentPosition(c)&8):!1}function O(a,c){return b(a).getAttribute(c)}function F(a,
c){a=b(a);var d=X.read;if(d.values[c])return d.values[c](a,c);d.names[c]&&(c=d.names[c]);return c.include(":")?a.attributes&&a.attributes[c]?a.attributes[c].value:null:a.getAttribute(c)}function x(a,b){return"title"===b?a.title:a.getAttribute(b)}function H(a,c){c=X.has[c]||c;var d=b(a).getAttributeNode(c);return!(!d||!d.specified)}function K(a,b){return"checked"===b?a.checked:H(a,b)}function C(a){if(Fa[a])return Fa[a];var b=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return Fa[a]=b}function G(a,c){if(a=b(a)){var d=
a.className;return 0===d.length?!1:d===c?!0:C(c).test(d)}}function na(a,b){return a.getAttribute(b,2)}function V(a,c){return b(a).hasAttribute(c)?c:null}function ra(a,d){a=b(a);d="float"===d||"cssFloat"===d?"styleFloat":d.camelize();var e=a.style[d];!e&&a.currentStyle&&(e=a.currentStyle[d]);return"opacity"===d?za?e?parseFloat(e):1:T(a):"auto"===e?"width"!==d&&"height"!==d||!c.visible(a)?null:c.measure(a,d)+"px":e}function ka(a,c){a=b(a);1==c||""===c?c="":1E-5>c&&(c=0);a.style.opacity=c;return a}function ga(a,
d){if(za)return ka(a,d);var e=b(a);e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1);a=e;var e=c.getStyle(a,"filter"),f=a.style;if(1==d||""===d)return(e=(e||"").replace(/alpha\([^\)]*\)/gi,""))?f.filter=e:f.removeAttribute("filter"),a;1E-5>d&&(d=0);f.filter=(e||"").replace(/alpha\([^\)]*\)/gi,"")+" alpha(opacity="+100*d+")";return a}function la(a){return c.getStyle(a,"opacity")}function T(a){if(za)return la(a);a=c.getStyle(a,"filter");return 0===a.length?1:(a=(a||"").match(/alpha\(opacity=(.*)\)/i))&&
a[1]?parseFloat(a[1])/100:1}function N(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=c.Storage.UID++);return a._prototypeUID}function E(a){return a===window?0:a==document?1:a.uniqueID}function P(a){if(a=b(a))return a=N(a),c.Storage[a]||(c.Storage[a]=$H()),c.Storage[a]}function Q(a,b){for(var c in b){var d=b[c];!Object.isFunction(d)||c in a||(a[c]=d.methodize())}}function z(a){if(!a||N(a)in Ha||a.nodeType!==Node.ELEMENT_NODE||a==window)return a;var b=Object.clone(Pa),
c=a.tagName.toUpperCase();wa[c]&&Object.extend(b,wa[c]);Q(a,b);Ha[N(a)]=!0;return a}function y(a){if(!a||N(a)in Ha)return a;var b=a.tagName;b&&/^(?:object|applet|embed)$/i.test(b)&&(Q(a,c.Methods),Q(a,c.Methods.Simulated),Q(a,c.Methods.ByTag[b.toUpperCase()]));return a}function U(a,b){a=a.toUpperCase();wa[a]||(wa[a]={});Object.extend(wa[a],b)}function D(a,b,c){Object.isUndefined(c)&&(c=!1);for(var d in b){var e=b[d];Object.isFunction(e)&&(c&&d in a||(a[d]=e.methodize()))}}function fa(a){var b,c={OPTGROUP:"OptGroup",
TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};c[a]&&(b="HTML"+c[a]+"Element");if(window[b])return window[b];b="HTML"+
a+"Element";if(window[b])return window[b];b="HTML"+a.capitalize()+"Element";if(window[b])return window[b];a=document.createElement(a);return a.__proto__||a.constructor.prototype}function Z(){ta=M=null}var ha,Ba=Array.prototype.slice,M=document.createElement("div");a.$=b;a.Node||(a.Node={});a.Node.ELEMENT_NODE||Object.extend(a.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,
DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var ta={},B=function(){try{var a=document.createElement('<input name="x">');return"input"===a.tagName.toLowerCase()&&"x"===a.name}catch(sa){return!1}}(),aa=a.Element;a.Element=c;Object.extend(a.Element,aa||{});aa&&(a.Element.prototype=aa.prototype);c.Methods={ByTag:{},Simulated:{}};var aa={},ba={id:"id",className:"class"};aa.inspect=function(a){a=b(a);var c="<"+a.tagName.toLowerCase(),d,e,f;for(f in ba)d=ba[f],(e=(a[f]||"").toString())&&(c+=" "+d+"="+e.inspect(!0));
return c+">"};Object.extend(aa,{visible:function(a){return"none"!==b(a).getStyle("display")},toggle:function(a,d){a=b(a);"boolean"!==typeof d&&(d=!c.visible(a));c[d?"show":"hide"](a);return a},hide:function(a){a=b(a);a.style.display="none";return a},show:function(a){a=b(a);a.style.display="";return a}});var da=function(){var a=document.createElement("select"),b=!0;a.innerHTML='<option value="test">test</option>';a.options&&a.options[0]&&(b="OPTION"!==a.options[0].nodeName.toUpperCase());return b}(),
W=function(){try{var a=document.createElement("table");if(a&&a.tBodies)return a.innerHTML="<tbody><tr><td>test</td></tr></tbody>","undefined"==typeof a.tBodies[0]}catch(sa){return!0}}(),ea=function(){try{var a=document.createElement("div");a.innerHTML="<link />";return 0===a.childNodes.length}catch(sa){return!0}}(),Na=da||W||ea,va=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(Y){b=
!0}return b}(),oa={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},da=oa.tags;Object.extend(da,{THEAD:da.TBODY,
TFOOT:da.TBODY,TH:da.TD});"outerHTML"in document.documentElement&&(d=f);Object.extend(aa,{remove:function(a){a=b(a);a.parentNode.removeChild(a);return a},update:function(a,c){a=b(a);for(var d=a.getElementsByTagName("*"),f=d.length;f--;)g(d[f]);c&&c.toElement&&(c=c.toElement());if(Object.isElement(c))return a.update().insert(c);c=Object.toHTML(c);f=a.tagName.toUpperCase();if("SCRIPT"===f&&va)return a.text=c,a;if(Na)if(f in oa.tags){for(;a.firstChild;)a.removeChild(a.firstChild);for(var d=e(f,c.stripScripts()),
f=0,h;h=d[f];f++)a.appendChild(h)}else if(ea&&Object.isString(c)&&-1<c.indexOf("<link")){for(;a.firstChild;)a.removeChild(a.firstChild);d=e(f,c.stripScripts(),!0);for(f=0;h=d[f];f++)a.appendChild(h)}else a.innerHTML=c.stripScripts();else a.innerHTML=c.stripScripts();c.evalScripts.bind(c).defer();return a},replace:d,insert:function(a,c){a=b(a);var d=c;(Object.isUndefined(d)||null===d?0:Object.isString(d)||Object.isNumber(d)||Object.isElement(d)||d.toElement||d.toHTML)&&(c={bottom:c});for(var f in c){var d=
a,g=c[f],h=f,h=h.toLowerCase(),k=oa[h];g&&g.toElement&&(g=g.toElement());if(Object.isElement(g))k(d,g);else{var g=Object.toHTML(g),m=("before"===h||"after"===h?d.parentNode:d).tagName.toUpperCase(),m=e(m,g.stripScripts());"top"!==h&&"after"!==h||m.reverse();for(var h=0,l;l=m[h];h++)k(d,l);g.evalScripts.bind(g).defer()}}return a},wrap:function(a,d,e){a=b(a);Object.isElement(d)?b(d).writeAttribute(e||{}):d=Object.isString(d)?new c(d,e):new c("div",d);a.parentNode&&a.parentNode.replaceChild(d,a);d.appendChild(a);
return d},cleanWhitespace:function(a){a=b(a);for(var c=a.firstChild;c;){var d=c.nextSibling;c.nodeType!==Node.TEXT_NODE||/\S/.test(c.nodeValue)||a.removeChild(c);c=d}return a},empty:function(a){return b(a).innerHTML.blank()},clone:function(a,d){if(a=b(a)){var e=a.cloneNode(d);if(!qa&&(e._prototypeUID=ha,d))for(var f=c.select(e,"*"),g=f.length;g--;)f[g]._prototypeUID=ha;return c.extend(e)}},purge:function(a){if(a=b(a)){g(a);a=a.getElementsByTagName("*");for(var c=a.length;c--;)g(a[c]);return null}}});
Object.extend(aa,{recursivelyCollect:h,ancestors:function(a){return h(a,"parentNode")},descendants:function(a){return c.select(a,"*")},firstDescendant:l,immediateDescendants:m,previousSiblings:n,nextSiblings:p,siblings:function(a){a=b(a);var c=n(a);a=p(a);return c.reverse().concat(a)},match:function(a,c){a=b(a);return Object.isString(c)?Prototype.Selector.match(a,c):c.match(a)},up:function(a,c,d){a=b(a);return 1===arguments.length?b(a.parentNode):r(a,"parentNode",c,d)},down:function(a,d,e){if(1===
arguments.length)return l(a);a=b(a);d=d||0;e=e||0;Object.isNumber(d)&&(e=d,d="*");var f=Prototype.Selector.select(d,a)[e];return c.extend(f)},previous:function(a,b,c){return r(a,"previousSibling",b,c)},next:function(a,b,c){return r(a,"nextSibling",b,c)},select:q,adjacent:function(a){a=b(a);for(var d=Ba.call(arguments,1).join(", "),e=c.siblings(a),f=[],g=0,h;h=e[g];g++)Prototype.Selector.match(h,d)&&f.push(h);return f},descendantOf:M.compareDocumentPosition?J:M.contains?v:t,getElementsBySelector:q,
childElements:m});var Oa=1;(function(){M.setAttribute("onclick",[]);var a=M.getAttribute("onclick"),a=Object.isArray(a);M.removeAttribute("onclick");return a})()?O=F:Prototype.Browser.Opera&&(O=x);da=function(){if(!B)return!1;var a=document.createElement('<input type="checkbox">');a.checked=!0;a=a.getAttributeNode("checked");return!a||!a.specified}();a.Element.Methods.Simulated.hasAttribute=da?K:H;var Fa={},X={},da="className",W="for";M.setAttribute(da,"x");"x"!==M.className&&(M.setAttribute("class",
"x"),"x"===M.className&&(da="class"));var ia=document.createElement("label");ia.setAttribute(W,"x");"x"!==ia.htmlFor&&(ia.setAttribute("htmlFor","x"),"x"===ia.htmlFor&&(W="htmlFor"));ia=null;M.onclick=Prototype.emptyFunction;var ia=M.getAttribute("onclick"),k;-1<String(ia).indexOf("{")?k=function(a,b){var c=a.getAttribute(b);if(!c)return null;c=c.toString();c=c.split("{")[1];c=c.split("}")[0];return c.strip()}:""===ia&&(k=function(a,b){var c=a.getAttribute(b);return c?c.strip():null});X.read={names:{"class":da,
className:da,"for":W,htmlFor:W},values:{style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}};X.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(a,b){b=!!b;return(a.checked=b)?"checked":null},style:function(a,b){a.style.cssText=b?b:""}}};X.has={names:{}};Object.extend(X.write.names,X.read.names);da=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");
for(W=0;ia=da[W];W++)X.write.names[ia.toLowerCase()]=ia,X.has.names[ia.toLowerCase()]=ia;Object.extend(X.read.values,{href:na,src:na,type:function(a,b){return a.getAttribute(b)},action:function(a,b){var c=a.getAttributeNode(b);return c?c.value:""},disabled:V,checked:V,readonly:V,multiple:V,onload:k,onunload:k,onclick:k,ondblclick:k,onmousedown:k,onmouseup:k,onmouseover:k,onmousemove:k,onmouseout:k,onfocus:k,onblur:k,onkeypress:k,onkeydown:k,onkeyup:k,onsubmit:k,onreset:k,onselect:k,onchange:k});Object.extend(aa,
{identify:function(a){a=b(a);var d=c.readAttribute(a,"id");if(d)return d;do d="anonymous_element_"+Oa++;while(b(d));c.writeAttribute(a,"id",d);return d},readAttribute:O,writeAttribute:function(a,c,d){a=b(a);var e={},f=X.write;"object"===typeof c?e=c:e[c]=Object.isUndefined(d)?!0:d;for(var g in e){c=f.names[g]||g;d=e[g];if(f.values[g]&&(d=f.values[g](a,d),Object.isUndefined(d)))continue;!1===d||null===d?a.removeAttribute(c):!0===d?a.setAttribute(c,c):a.setAttribute(c,d)}return a},classNames:function(a){return new c.ClassNames(a)},
hasClassName:G,addClassName:function(a,c){if(a=b(a))return G(a,c)||(a.className+=(a.className?" ":"")+c),a},removeClassName:function(a,c){if(a=b(a))return a.className=a.className.replace(C(c)," ").strip(),a},toggleClassName:function(a,d,e){if(a=b(a))return Object.isUndefined(e)&&(e=!G(a,d)),(0,c[e?"addClassName":"removeClassName"])(a,d)}});var za;M.style.cssText="opacity:.55";za=/^0.55/.test(M.style.opacity);Object.extend(aa,{setStyle:function(a,d){a=b(a);var e=a.style;if(Object.isString(d))return e.cssText+=
";"+d,d.include("opacity")&&(e=d.match(/opacity:\s*(\d?\.?\d*)/)[1],c.setOpacity(a,e)),a;for(var f in d)if("opacity"===f)c.setOpacity(a,d[f]);else{var g=d[f];if("float"===f||"cssFloat"===f)f=Object.isUndefined(e.styleFloat)?"cssFloat":"styleFloat";e[f]=g}return a},getStyle:function(a,c){a=b(a);c="float"===c||"styleFloat"===c?"cssFloat":c.camelize();var d=a.style[c];d&&"auto"!==d||(d=(d=document.defaultView.getComputedStyle(a,null))?d[c]:null);return"opacity"===c?d?parseFloat(d):1:"auto"===d?null:
d},setOpacity:ka,getOpacity:la});"styleFloat"in M.style&&(aa.getStyle=ra,aa.setOpacity=ga,aa.getOpacity=T);a.Element.Storage={UID:1};var qa="uniqueID"in M;qa&&(N=E);Object.extend(aa,{getStorage:P,store:function(a,c,d){if(a=b(a)){var e=P(a);2===arguments.length?e.update(c):e.set(c,d);return a}},retrieve:function(a,c,d){if(a=b(a)){a=P(a);var e=a.get(c);Object.isUndefined(e)&&(a.set(c,d),e=d);return e}}});var Pa={},wa=c.Methods.ByTag,Ca=Prototype.BrowserFeatures;!Ca.ElementExtensions&&"__proto__"in M&&
(a.HTMLElement={},a.HTMLElement.prototype=M.__proto__,Ca.ElementExtensions=!0);k=function(a){if("undefined"===typeof window.Element||!B)return!1;var b=window.Element.prototype;if(b){var c="_"+(Math.random()+"").slice(2);a=document.createElement(a);b[c]="x";a="x"!==a[c];delete b[c];return a}return!1}("object");var Ha={};Ca.SpecificElementExtensions&&(z=k?y:Prototype.K);Object.extend(a.Element,{extend:z,addMethods:function(a){0===arguments.length&&(Object.extend(Form,Form.Methods),Object.extend(Form.Element,
Form.Element.Methods),Object.extend(c.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)}));if(2===arguments.length){var b=a;a=arguments[1]}if(b)if(Object.isArray(b))for(var d=0,e;e=b[d];d++)U(e,a);else U(b,a);else Object.extend(c.Methods,a||{});b=window.HTMLElement?HTMLElement.prototype:c.prototype;Ca.ElementExtensions&&(D(b,c.Methods),
D(b,c.Methods.Simulated,!0));if(Ca.SpecificElementExtensions)for(e in c.Methods.ByTag)b=fa(e),Object.isUndefined(b)||D(b.prototype,wa[e]);Object.extend(c,c.Methods);Object.extend(c,c.Methods.Simulated);delete c.ByTag;delete c.Simulated;c.extend.refresh();ta={}}});a.Element.extend.refresh=z===Prototype.K?Prototype.emptyFunction:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(Pa,c.Methods),Object.extend(Pa,c.Methods.Simulated),Ha={})};c.addMethods(aa);window.attachEvent&&window.attachEvent("onunload",
Z)})(this);
(function(){function a(a,b){a=$(a);var c=a.style[b];c&&"auto"!==c||(c=(c=document.defaultView.getComputedStyle(a,null))?c[b]:null);return"opacity"===b?c?parseFloat(c):1:"auto"===c?null:c}function b(a,b){var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return c}function c(a,b){var c=a.offsetWidth,e=d(a,"borderLeftWidth",b)||0,f=d(a,"borderRightWidth",b)||0,g=d(a,"paddingLeft",b)||0,h=d(a,"paddingRight",b)||0;return c-e-f-g-h}function d(b,c,d){var e=null;Object.isElement(b)&&(e=b,b=a(e,c));
if(null===b||Object.isUndefined(b))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(b))return window.parseFloat(b);var f=b.include("%"),g=d===document.viewport;return!(/\d/.test(b)&&e&&e.runtimeStyle)||f&&g?e&&f?(d=d||e.parentNode,b=(b=b.match(/^(\d+)%?$/i))?Number(b[1])/100:null,e=null,f=c.include("left")||c.include("right")||c.include("width"),c=c.include("top")||c.include("bottom")||c.include("height"),d===document.viewport?f?e=document.viewport.getWidth():c&&(e=document.viewport.getHeight()):f?
e=$(d).measure("width"):c&&(e=$(d).measure("height")),null===e?0:e*b):0:(d=e.style.left,c=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=b||0,b=e.style.pixelLeft,e.style.left=d,e.runtimeStyle.left=c,b)}function f(a){function b(a){return"HTML"===a.nodeName.toUpperCase()?$(document.body):$(a)}a=$(a);if(a.nodeType===Node.DOCUMENT_NODE||h(a)||"BODY"===a.nodeName.toUpperCase()||"HTML"===a.nodeName.toUpperCase())return $(document.body);if("inline"!==Element.getStyle(a,"display")&&
a.offsetParent)return b(a.offsetParent);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==Element.getStyle(a,"position"))return b(a);return $(document.body)}function e(a){a=$(a);var b=0,c=0;if(a.parentNode){do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a)}return new Element.Offset(c,b)}function g(a){a=$(a);var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if("BODY"===a.nodeName.toUpperCase())break;if("static"!==Element.getStyle(a,"position"))break}while(a);
d-=b.get("margin-left");c-=b.get("margin-top");return new Element.Offset(d,c)}function h(a){return a!==document.body&&!Element.descendantOf(a,document.body)}Object.isUndefined(document.documentElement.currentStyle)||Prototype.Browser.Opera||(a=b);var l=Prototype.K;"currentStyle"in document.documentElement&&(l=function(a){a.currentStyle.hasLayout||(a.style.zoom=1);return a});Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(a){this._set(a,
null)},this);b&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only.";},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._isPrepared()){var b=this.element,d;a:{for(d=b;d&&d.parentNode;){if("none"===d.getStyle("display")){d=!1;break a}d=$(d.parentNode)}d=
!0}if(!d){b.store("prototype_original_styles",{position:b.style.position||"",width:b.style.width||"",visibility:b.style.visibility||"",display:b.style.display||""});d=a(b,"position");var e=b.offsetWidth;if(0===e||null===e)b.style.display="block",e=b.offsetWidth;var f="fixed"===d?document.viewport:b.parentNode,g={visibility:"hidden",display:"block"};"fixed"!==d&&(g.position="absolute");b.setStyle(g);g=b.offsetWidth;d=e&&g===e?c(b,f):"absolute"===d||"fixed"===d?c(b,f):$(b.parentNode).getLayout().get("width")-
this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");b.setStyle({width:d+"px"})}this._setPrepared(!0)}},_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._setPrepared(!1)},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},
_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",!1)},_setPrepared:function(a){return this.element.store("prototype_element_layout_prepared",a)},toObject:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)){var c=this.get(a);null!=c&&(b[a]=c)}},this);return b},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=
$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)&&!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var c=this.get(a);null!=c&&(a.include("border")&&(a+="-width"),a=a.camelize(),b[a]=c+"px")}},this);return b},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(a){this._preComputing||this._begin();a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),e=this.get("padding-bottom");this._preComputing||this._end();return a-b-c-d-e},width:function(a){this._preComputing||this._begin();a=this.get("border-box-width");
if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=this.get("padding-left"),e=this.get("padding-right");this._preComputing||this._end();return a-b-c-d-e},"padding-box-height":function(a){a=this.get("height");var b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(a){a=this.get("width");var b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||
this._begin();a=a.offsetHeight;this._preComputing||this._end();return a},"border-box-width":function(a){this._preComputing||this._begin();a=a.offsetWidth;this._preComputing||this._end();return a},"margin-box-height":function(a){a=this.get("border-box-height");var b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(a){a=this.get("border-box-width");var b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){return a.positionedOffset().top},
bottom:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("height");var c=this.get("border-box-height");return a-c-b.top},left:function(a){return a.positionedOffset().left},right:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("width");var c=this.get("border-box-width");return a-c-b.left},"padding-top":function(a){return d(a,"paddingTop")},"padding-bottom":function(a){return d(a,"paddingBottom")},"padding-left":function(a){return d(a,"paddingLeft")},"padding-right":function(a){return d(a,
"paddingRight")},"border-top":function(a){return d(a,"borderTopWidth")},"border-bottom":function(a){return d(a,"borderBottomWidth")},"border-left":function(a){return d(a,"borderLeftWidth")},"border-right":function(a){return d(a,"borderRightWidth")},"margin-top":function(a){return d(a,"marginTop")},"margin-bottom":function(a){return d(a,"marginBottom")},"margin-left":function(a){return d(a,"marginLeft")},"margin-right":function(a){return d(a,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&
Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=l(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().right-a.right).round()},bottom:function(a){var b=l(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().bottom-a.bottom).round()}});Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,
this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});Prototype.Browser.IE?(f=f.wrap(function(a,b){b=$(b);if(b.nodeType===Node.DOCUMENT_NODE||h(b)||"BODY"===b.nodeName.toUpperCase()||"HTML"===b.nodeName.toUpperCase())return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});var d=
a(b);b.setStyle({position:c});return d}),g=g.wrap(function(a,b){b=$(b);if(!b.parentNode)return new Element.Offset(0,0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&l(d);b.setStyle({position:"relative"});d=a(b);b.setStyle({position:c});return d})):Prototype.Browser.Webkit&&(e=function(a){a=$(a);var b=0,c=0;do{b+=a.offsetTop||0;c+=a.offsetLeft||0;if(a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;
a=a.offsetParent}while(a);return new Element.Offset(c,b)});Element.addMethods({getLayout:function(a,b){return new Element.Layout(a,b)},measure:function(a,b){return $(a).getLayout().get(b)},getWidth:function(a){return Element.getDimensions(a).width},getHeight:function(a){return Element.getDimensions(a).height},getDimensions:function(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,b={visibility:b.visibility,position:b.position,
display:b.display},c={visibility:"hidden",display:"block"};"fixed"!==b.position&&(c.position="absolute");Element.setStyle(a,c);c={width:a.offsetWidth,height:a.offsetHeight};Element.setStyle(a,b);return c},getOffsetParent:f,cumulativeOffset:e,positionedOffset:g,cumulativeScrollOffset:function(a){var b=0,c=0;do if(a===document.body){a=document.documentElement||document.body.parentNode||document.body;b+=Object.isUndefined(window.pageYOffset)?a.scrollTop||0:window.pageYOffset;c+=Object.isUndefined(window.pageXOffset)?
a.scrollLeft||0:window.pageXOffset;break}else b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)},viewportOffset:function(a){var b=0,c=0,d=document.body,e=a=$(a);do if(b+=e.offsetTop||0,c+=e.offsetLeft||0,e.offsetParent==d&&"absolute"==Element.getStyle(e,"position"))break;while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return new Element.Offset(c,b)},absolutize:function(a){a=$(a);if("absolute"===Element.getStyle(a,
"position"))return a;var b=f(a),c=a.viewportOffset(),b=b.viewportOffset(),c=c.relativeTo(b),b=a.getLayout();a.store("prototype_absolutize_original_styles",{position:a.getStyle("position"),left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),height:a.getStyle("height")});a.setStyle({position:"absolute",top:c.top+"px",left:c.left+"px",width:b.get("width")+"px",height:b.get("height")+"px"});return a},relativize:function(a){a=$(a);if("relative"===Element.getStyle(a,"position"))return a;
var b=a.retrieve("prototype_absolutize_original_styles");b&&a.setStyle(b);return a},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b.left,b.top);return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position"),c={};"static"!==b&&b||(c.position="relative",Prototype.Browser.Opera&&(c.top=0,c.left=0),Element.setStyle(a,c),Element.store(a,"prototype_made_positioned",!0));return a},undoPositioned:function(a){a=$(a);var b=Element.getStorage(a);b.get("prototype_made_positioned")&&
(b.unset("prototype_made_positioned"),Element.setStyle(a,{position:"",top:"",bottom:"",left:"",right:""}));return a},makeClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)&&(c=Element.getStyle(a,"overflow"),b.set("prototype_made_clipping",c),"hidden"!==c&&(a.style.overflow="hidden"));return a},undoClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)||(b.unset("prototype_made_clipping"),
a.style.overflow=c||"");return a},clonePosition:function(a,b,c){var d,e;c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},c||{});d=document.documentElement;b=$(b);a=$(a);var f,g,h,l={};if(c.setLeft||c.setTop)f=Element.viewportOffset(b),g=[0,0],"absolute"===Element.getStyle(a,"position")&&(e=Element.getOffsetParent(a),e!==document.body&&(g=Element.viewportOffset(e)));var m=0;e=0;Object.isNumber(window.pageXOffset)?(m=window.pageXOffset,e=window.pageYOffset):document.body&&
(document.body.scrollLeft||document.body.scrollTop)?(m=document.body.scrollLeft,e=document.body.scrollTop):d&&(d.scrollLeft||d.scrollTop)&&(m=d.scrollLeft,e=d.scrollTop);d=m;if(c.setWidth||c.setHeight)h=Element.getLayout(b);c.setLeft&&(l.left=f[0]+d-g[0]+c.offsetLeft+"px");c.setTop&&(l.top=f[1]+e-g[1]+c.offsetTop+"px");a.getLayout();c.setWidth&&(l.width=h.get("width")+"px");c.setHeight&&(l.height=h.get("height")+"px");return Element.setStyle(a,l)}});"getBoundingClientRect"in document.documentElement&&
Element.addMethods({viewportOffset:function(a){a=$(a);if(h(a))return new Element.Offset(0,0);a=a.getBoundingClientRect();var b=document.documentElement;return new Element.Offset(a.left-b.clientLeft,a.top-b.clientTop)}})})();
(function(){function a(){return c?c:c=b?document.body:document.documentElement}var b=Prototype.Browser.Opera&&9.5>window.parseFloat(window.opera.version()),c=null;document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return a().clientWidth},getHeight:function(){return a().clientHeight},getScrollOffsets:function(){return new Element.Offset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop)}}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(a){for(var b=0,c=a.length;b<c;b++)Element.extend(a[b]);return a}var b=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.');},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.');},find:function(a,b,f){f=f||0;var c=Prototype.Selector.match,d=a.length,h=0,l;for(l=0;l<d;l++)if(c(a[l],b)&&f==h++)return Element.extend(a[l])},extendElements:Element.extend===b?b:a,extendElement:Element.extend}}();
Prototype._original_property=window.Sizzle;(function(){function a(a){Prototype._actual_sizzle=a()}a.amd=!0;"undefined"!==typeof define&&define.amd&&(Prototype._original_define=define,Prototype._actual_sizzle=null,window.define=a)})();
(function(a){function b(a,b,c,d){var e,f,g,h,k;(b?b.ownerDocument||b:fa)!==N&&T(b);b=b||N;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(P&&!d){if(e=sa.exec(a))if(g=e[1])if(9===h)if((f=b.getElementById(g))&&f.parentNode){if(f.id===g)return c.push(f),c}else return c;else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&U(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ea.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&K.getElementsByClassName&&
b.getElementsByClassName)return ea.apply(c,b.getElementsByClassName(g)),c}if(K.qsa&&(!Q||!Q.test(a))){f=e=D;g=b;k=9===h&&a;if(1===h&&"object"!==b.nodeName.toLowerCase()){h=r(a);(e=b.getAttribute("id"))?f=e.replace(xa,"\\$&"):b.setAttribute("id",f);f="[id='"+f+"'] ";for(g=h.length;g--;)h[g]=f+q(h[g]);g=Y.test(a)&&n(b.parentNode)||b;k=h.join(",")}if(k)try{return ea.apply(c,g.querySelectorAll(k)),c}catch(Ya){}finally{e||b.removeAttribute("id")}}}return ra(a.replace(X,"$1"),b,c,d)}function c(){function a(c,
d){b.push(c+" ")>C.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function d(a){a[D]=!0;return a}function f(a){var b=N.createElement("div");try{return!!a(b)}catch(S){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var c=a.split("|"),d=a.length;d--;)C.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;
return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function l(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function m(a){return d(function(b){b=+b;return d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function n(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function p(){}function r(a,c){var d,e,f,g,h,l,m;if(h=M[a+" "])return c?0:h.slice(0);
h=a;l=[];for(m=C.preFilter;h;){if(!d||(e=ia.exec(h)))e&&(h=h.slice(e[0].length)||h),l.push(f=[]);d=!1;if(e=k.exec(h))d=e.shift(),f.push({value:d,type:e[0].replace(X," ")}),h=h.slice(d.length);for(g in C.filter)!(e=wa[g].exec(h))||m[g]&&!(e=m[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):M(a,l).slice(0)}function q(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function t(a,b,c){var d=b.dir,e=c&&"parentNode"===
d,f=ha++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,k,l=[Z,f];if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){k=b[D]||(b[D]={});if((h=k[d])&&h[0]===Z&&h[1]===f)return l[2]=h[2];k[d]=l;if(l[2]=a(b,c,g))return!0}}}function v(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function J(a,b,c,d,e){for(var f,g=[],h=0,k=a.length,l=null!=b;h<
k;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),l&&b.push(h);return g}function O(a,c,e,f,g,h){f&&!f[D]&&(f=O(f));g&&!g[D]&&(g=O(g,h));return d(function(d,h,k,l){var m,p,n=[],r=[],q=h.length,L;if(!(L=d)){L=c||"*";for(var A=k.nodeType?[k]:k,S=[],t=0,E=A.length;t<E;t++)b(L,A[t],S);L=S}L=!a||!d&&c?L:J(L,n,a,k,l);A=e?g||(d?a:q||f)?[]:h:L;e&&e(L,A,k,l);if(f)for(m=J(A,r),f(m,[],k,l),k=m.length;k--;)if(p=m[k])A[r[k]]=!(L[r[k]]=p);if(d){if(g||a){if(g){m=[];for(k=A.length;k--;)(p=A[k])&&m.push(L[k]=p);g(null,A=[],
m,l)}for(k=A.length;k--;)(p=A[k])&&-1<(m=g?va.call(d,p):n[k])&&(d[m]=!(h[m]=p))}}else A=J(A===h?A.splice(q,A.length):A),g?g(null,h,A,l):ea.apply(h,A)})}function F(a){var b,c,d,e=a.length,f=C.relative[a[0].type];c=f||C.relative[" "];for(var g=f?1:0,h=t(function(a){return a===b},c,!0),k=t(function(a){return-1<va.call(b,a)},c,!0),l=[function(a,c,d){return!f&&(d||c!==ka)||((b=c).nodeType?h(a,c,d):k(a,c,d))}];g<e;g++)if(c=C.relative[a[g].type])l=[t(v(l),c)];else{c=C.filter[a[g].type].apply(null,a[g].matches);
if(c[D]){for(d=++g;d<e&&!C.relative[a[d].type];d++);return O(1<g&&v(l),1<g&&q(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(X,"$1"),c,g<d&&F(a.slice(g,d)),d<e&&F(a=a.slice(d)),d<e&&q(a))}l.push(c)}return v(l)}function x(a,c){var e=0<c.length,f=0<a.length,g=function(d,g,h,k,l){var m,p,n,r=0,q="0",L=d&&[],A=[],t=ka,S=d||f&&C.find.TAG("*",l),E=Z+=null==t?1:Math.random()||.1,v=S.length;for(l&&(ka=g!==N&&g);q!==v&&null!=(m=S[q]);q++){if(f&&m){for(p=0;n=a[p++];)if(n(m,g,h)){k.push(m);
break}l&&(Z=E)}e&&((m=!n&&m)&&r--,d&&L.push(m))}r+=q;if(e&&q!==r){for(p=0;n=c[p++];)n(L,A,g,h);if(d){if(0<r)for(;q--;)L[q]||A[q]||(A[q]=da.call(k));A=J(A)}ea.apply(k,A);l&&!d&&0<A.length&&1<r+c.length&&b.uniqueSort(k)}l&&(Z=E,ka=t);return L};return e?d(g):g}var H,K,C,G,na,V,ra,ka,ga,la,T,N,E,P,Q,z,y,U,D="sizzle"+-1*new Date,fa=a.document,Z=0,ha=0,Ba=c(),M=c(),ta=c(),B=function(a,b){a===b&&(la=!0);return 0},aa={}.hasOwnProperty,ba=[],da=ba.pop,W=ba.push,ea=ba.push,Na=ba.slice,va=ba.indexOf||function(a){for(var b=
0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},oa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Oa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+oa+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Fa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Oa.replace(3,8)+")*)|.*)\\)|)",X=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g"),ia=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,k=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,za=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),qa=new RegExp(Fa),Pa=new RegExp("^"+oa+"$"),wa={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Oa),PSEUDO:new RegExp("^"+Fa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Ca=/^(?:input|select|textarea|button)$/i,Ha=/^h\d$/i,w=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,xa=/'|\\/g,ja=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ua=function(a,
b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ea.apply(ba=Na.call(fa.childNodes),fa.childNodes),ba[fa.childNodes.length].nodeType}catch(L){ea={apply:ba.length?function(a,b){W.apply(a,Na.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}K=b.support={};na=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};T=b.setDocument=function(a){var b=a?a.ownerDocument||
a:fa;a=b.defaultView;if(b===N||9!==b.nodeType||!b.documentElement)return N;N=b;E=b.documentElement;P=!na(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){T()},!1):a.attachEvent&&a.attachEvent("onunload",function(){T()}));K.attributes=f(function(a){a.className="i";return!a.getAttribute("className")});K.getElementsByTagName=f(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});K.getElementsByClassName=w.test(b.getElementsByClassName)&&
f(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});K.getById=f(function(a){E.appendChild(a).id=D;return!b.getElementsByName||!b.getElementsByName(D).length});K.getById?(C.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&P){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},C.filter.ID=function(a){var b=a.replace(ja,ua);return function(a){return a.getAttribute("id")===b}}):(delete C.find.ID,
C.filter.ID=function(a){var b=a.replace(ja,ua);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});C.find.TAG=K.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f};C.find.CLASS=K.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&
P)return b.getElementsByClassName(a)};z=[];Q=[];if(K.qsa=w.test(b.querySelectorAll))f(function(a){a.innerHTML="<select t=''><option selected=''></option></select>";a.querySelectorAll("[t^='']").length&&Q.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||Q.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||Q.push(":checked")}),
f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&Q.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||Q.push(":enabled",":disabled");a.querySelectorAll("*,:x");Q.push(",.*:")});(K.matchesSelector=w.test(y=E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&f(function(a){K.disconnectedMatch=y.call(a,"div");y.call(a,"[s!='']:x");
z.push("!=",Fa)});Q=Q.length&&new RegExp(Q.join("|"));z=z.length&&new RegExp(z.join("|"));U=(a=w.test(E.compareDocumentPosition))||w.test(E.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};B=a?function(a,c){if(a===c)return la=!0,0;var d=!a.compareDocumentPosition-!c.compareDocumentPosition;
if(d)return d;d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return d&1||!K.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===fa&&U(fa,a)?-1:c===b||c.ownerDocument===fa&&U(fa,c)?1:ga?va.call(ga,a)-va.call(ga,c):0:d&4?-1:1}:function(a,c){if(a===c)return la=!0,0;var d,e=0;d=a.parentNode;var f=c.parentNode,h=[a],k=[c];if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:ga?va.call(ga,a)-va.call(ga,c):0;if(d===f)return g(a,c);for(d=a;d=d.parentNode;)h.unshift(d);
for(d=c;d=d.parentNode;)k.unshift(d);for(;h[e]===k[e];)e++;return e?g(h[e],k[e]):h[e]===fa?-1:k[e]===fa?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==N&&T(a);c=c.replace(za,"='$1']");if(!(!K.matchesSelector||!P||z&&z.test(c)||Q&&Q.test(c)))try{var d=y.call(a,c);if(d||K.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(R){}return 0<b(c,N,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==N&&
T(a);return U(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==N&&T(a);var c=C.attrHandle[b.toLowerCase()],c=c&&aa.call(C.attrHandle,b.toLowerCase())?c(a,b,!P):void 0;return void 0!==c?c:K.attributes||!P?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,e=0;la=!K.detectDuplicates;ga=!K.sortStable&&a.slice(0);a.sort(B);if(la){for(;b=a[e++];)b===a[e]&&(d=c.push(e));
for(;d--;)a.splice(c[d],1)}ga=null;return a};G=b.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d++];)c+=G(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=G(a)}else if(3===b||4===b)return a.nodeValue;return c};C=b.selectors={cacheLength:50,createPseudo:d,match:wa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(ja,ua);a[3]=(a[4]||a[5]||"").replace(ja,ua);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(wa.CHILD.test(a[0]))return null;a[3]&&void 0!==a[4]?a[2]=a[4]:c&&qa.test(c)&&(b=r(c,!0))&&(b=c.indexOf(")",
c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ja,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Ba[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),Ba(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},
ATTR:function(a,c,d){return function(e){e=b.attr(e,a);if(null==e)return"!="===c;if(!c)return!0;e+="";return"="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,k){var l,m,p,n,q;c=f!==g?"nextSibling":
"previousSibling";var r=b.parentNode,t=h&&b.nodeName.toLowerCase();k=!k&&!h;if(r){if(f){for(;c;){for(m=b;m=m[c];)if(h?m.nodeName.toLowerCase()===t:1===m.nodeType)return!1;q=c="only"===a&&!q&&"nextSibling"}return!0}q=[g?r.firstChild:r.lastChild];if(g&&k)for(k=r[D]||(r[D]={}),l=k[a]||[],n=l[0]===Z&&l[1],p=l[0]===Z&&l[2],m=n&&r.childNodes[n];m=++n&&m&&m[c]||(p=n=0)||q.pop();){if(1===m.nodeType&&++p&&m===b){k[a]=[Z,n,p];break}}else if(k&&(l=(b[D]||(b[D]={}))[a])&&l[0]===Z)p=l[1];else for(;(m=++n&&m&&
m[c]||(p=n=0)||q.pop())&&((h?m.nodeName.toLowerCase()!==t:1!==m.nodeType)||!++p||(k&&((m[D]||(m[D]={}))[a]=[Z,p]),m!==b)););p-=e;return p===d||0===p%d&&0<=p/d}}},PSEUDO:function(a,c){var e,f=C.pseudos[a]||C.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[D]?f(c):1<f.length?(e=[a,a,"",c],C.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=va.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=
[],c=[],e=V(a.replace(X,"$1"));return e[D]?d(function(a,b,c,d){d=e(a,null,d,[]);for(var f=a.length;f--;)if(c=d[f])a[f]=!(b[f]=c)}):function(a,d,f){b[0]=a;e(b,null,f,c);return!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||G(b)).indexOf(a)}}),lang:d(function(a){Pa.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ja,ua).toLowerCase();return function(b){var c;do if(c=P?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===E},focus:function(a){return a===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!C.pseudos.empty(a)},header:function(a){return Ha.test(a.nodeName)},input:function(a){return Ca.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&
"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[0>c?c+b:c]}),even:m(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:m(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:m(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:m(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};C.pseudos.nth=C.pseudos.eq;for(H in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})C.pseudos[H]=h(H);for(H in{submit:!0,reset:!0})C.pseudos[H]=l(H);p.prototype=C.filters=C.pseudos;C.setFilters=new p;V=b.compile=function(a,b){var c,d=[],e=[],f=ta[a+" "];if(!f){b||(b=r(a));for(c=b.length;c--;)f=F(b[c]),f[D]?d.push(f):e.push(f);f=ta(a,x(e,d));f.selector=a}return f};ra=b.select=function(a,b,c,d){var e,f,g,h,k="function"===typeof a&&a,l=!d&&r(a=k.selector||a);c=c||[];if(1===l.length){f=l[0]=l[0].slice(0);if(2<f.length&&"ID"===(g=f[0]).type&&K.getById&&9===
b.nodeType&&P&&C.relative[f[1].type]){b=(C.find.ID(g.matches[0].replace(ja,ua),b)||[])[0];if(!b)return c;k&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(e=wa.needsContext.test(a)?0:f.length;e--;){g=f[e];if(C.relative[h=g.type])break;if(h=C.find[h])if(d=h(g.matches[0].replace(ja,ua),Y.test(f[0].type)&&n(b.parentNode)||b)){f.splice(e,1);a=d.length&&q(f);if(!a)return ea.apply(c,d),c;break}}}(k||V(a,l))(d,b,!P,c,Y.test(a)&&n(b.parentNode)||b);return c};K.sortStable=D.split("").sort(B).join("")===
D;K.detectDuplicates=!!la;T();K.sortDetached=f(function(a){return a.compareDocumentPosition(N.createElement("div"))&1});f(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});K.attributes&&f(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||e("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});
f(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:a.Sizzle=b})(window);
(function(){"undefined"===typeof Sizzle&&("undefined"!==typeof define&&define.amd?(window.Sizzle=Prototype._actual_sizzle,window.define=Prototype._original_define,delete Prototype._actual_sizzle,delete Prototype._original_define):"undefined"!==typeof module&&module.exports&&(window.Sizzle=module.exports,module.exports={}))})();
(function(a){var b=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=function(c,d){return b(a(c,d||document))};Prototype.Selector.match=function(b,d){return 1==a.matches(d,[b]).length}})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,f=!1,e=b.submit,g,h;b.hash?(h={},g=function(a,b,c){b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b]=a[b].concat(c)):a[b]=c;return a}):(h="",g=function(a,b,c){Object.isArray(c)||(c=[c]);if(!c.length)return a;var d=encodeURIComponent(b).gsub(/%20/,"+");return a+(a?"&":"")+c.map(function(a){a=a.gsub(/(\r)?\n/,"\r\n");a=encodeURIComponent(a);
a=a.gsub(/%20/,"+");return d+"="+a}).join("&")});return a.inject(h,function(a,b){!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null==d||"file"==b.type||"submit"==b.type&&(f||!1===e||e&&c!=e||!(f=!0))||(a=g(a,c,d)));return a})},Methods:{serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],d=Form.Element.Serializers,f=0;b=a[f];f++)d[b.tagName.toLowerCase()]&&c.push(Element.extend(b));return c},getInputs:function(a,
b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var d=0,f=[],e=a.length;d<e;d++){var g=a[d];b&&g.type!=b||c&&g.name!=c||f.push(Element.extend(g))}return f},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var b=a.findAll(function(a){return a.hasAttribute("tabIndex")&&
0<=a.tabIndex}).sortBy(function(a){return a.tabIndex}).first();return b?b:a.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();b&&b.activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";d.blank()&&(d=window.location.href);b.parameters=a.serialize(!0);c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c));a.hasAttribute("method")&&
!b.method&&(b.method=a.method);return new Ajax.Request(d,b)}},Element:{focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),!a.select||
"input"==a.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(a.type)||a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=!0;return a},enable:function(a){a=$(a);a.disabled=!1;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function a(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;a.checked=!!b}function b(a,b){if(Object.isUndefined(b))return a.value;a.value=b}function c(a){var b=a.selectedIndex;return 0<=b?f(a.options[b]):null}function d(a){var b,c=a.length;if(!c)return null;var d=0;for(b=[];d<c;d++){var e=a.options[d];e.selected&&b.push(f(e))}return b}function f(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:function(c,d){switch(c.type.toLowerCase()){case "checkbox":case "radio":return a(c,
d);default:return b(c,d)}},inputSelector:a,textarea:b,select:function(a,b){if(Object.isUndefined(b))return("select-one"===a.type?c:d)(a);for(var e,f,g=!Object.isArray(b),n=0,p=a.length;n<p;n++)if(e=a.options[n],f=this.optionValue(e),g){if(f==b){e.selected=!0;break}}else e.selected=b.include(f)},selectOne:c,selectMany:d,optionValue:f,button:b}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,d){$super(d,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))this.callback(this.element,a),this.lastValue=a}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(a){function b(a,b){return a.which?a.which===b+1:a.button===b}function c(a,b){return a.button===ra[b]}function d(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 2==a.which||1==a.which&&a.metaKey;case 2:return 3==a.which;default:return!1}}function f(a){a=G.extend(a);var b=a.target,c=a.type;(a=a.currentTarget)&&a.tagName&&("load"===c||"error"===c||"click"===c&&"input"===a.tagName.toLowerCase()&&"radio"===a.type)&&(b=a);return b.nodeType==Node.TEXT_NODE?b.parentNode:b}function e(a){var b=
document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function g(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function h(a){return T[a]||a}function l(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++);return a._prototypeUID}function m(a){return a===window?0:a==document?1:a.uniqueID}
function n(a){return a.include(":")}function p(b,c){var d=a.Event.cache;Object.isUndefined(c)&&(c=l(b));d[c]||(d[c]={element:b});return d[c]}function r(b,c){Object.isUndefined(c)&&(c=l(b));delete a.Event.cache[c]}function q(b,c,d){b=$(b);a:{var e=b,f=p(e);f[c]||(f[c]=[]);for(var f=f[c],g=f.length;g--;)if(f[g].handler===d){d=null;break a}e=l(e);d={responder:a.Event._createResponder(e,c,d),handler:d};f.push(d)}if(null===d)return b;d=d.responder;n(c)?(c=b,c.addEventListener?c.addEventListener("dataavailable",
d,!1):(c.attachEvent("ondataavailable",d),c.attachEvent("onlosecapture",d))):(f=b,c=h(c),f.addEventListener?f.addEventListener(c,d,!1):f.attachEvent("on"+c,d));return b}function t(b,c,d){b=$(b);var e=!Object.isUndefined(d);if(Object.isUndefined(c)&&!e){c=b;d=l(c);var f=a.Event.cache[d];if(f){r(c,d);var g,h;for(h in f)if("element"!==h)for(d=f[h],g=d.length;g--;)v(c,h,d[g].responder)}return b}if(!e){a:{h=b;f=p(h);(d=f[c])&&delete f[c];d=d||[];for(e=d.length;e--;)v(h,c,d[e].responder);for(g in f)if("element"!==
g)break a;r(h)}return b}h=b;g=p(h);for(var e=g[c]||[],m=e.length;m--;)if(e[m].handler===d){f=e[m];break}f&&(d=e.indexOf(f),e.splice(d,1));0===e.length&&(delete g[c],1===Object.keys(g).length&&"element"in g&&r(h));h=f;if(!h)return b;v(b,c,h.responder);return b}function v(a,b,c){n(b)?a.removeEventListener?a.removeEventListener("dataavailable",c,!1):(a.detachEvent("ondataavailable",c),a.detachEvent("onlosecapture",c)):(b=h(b),a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}
function J(a,b,c,d){a=$(a);a=a!==document?a:document.createEvent&&!a.dispatchEvent?document.documentElement:a;Object.isUndefined(d)&&(d=!0);c=c||{};b=N(a,b,c,d);return G.extend(b)}function O(a,b,c,d){var e=document.createEvent("HTMLEvents");e.initEvent("dataavailable",d,!0);e.eventName=b;e.memo=c;a.dispatchEvent(e);return e}function F(a,b,c,d){var e=document.createEventObject();e.eventType=d?"ondataavailable":"onlosecapture";e.eventName=b;e.memo=c;a.fireEvent(e.eventType,e);return e}function x(a,
b,c,d){a=$(a);Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null);return(new G.Handler(a,b,c,d)).start()}function H(){a.Event.cache=null}var K=document.createElement("div"),C=document.documentElement,C="onmouseenter"in C&&"onmouseleave"in C,G={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45},na=function(a){return!1};window.attachEvent&&(na=window.addEventListener?
function(a){return!(a instanceof window.Event)}:function(a){return!0});var V,ra={0:1,1:4,2:2};V=window.attachEvent?window.addEventListener?function(a,d){return na(a)?c(a,d):b(a,d)}:c:Prototype.Browser.WebKit?d:b;G.Methods={isLeftClick:function(a){return V(a,0)},isMiddleClick:function(a){return V(a,1)},isRightClick:function(a){return V(a,2)},element:function(a){return Element.extend(f(a))},findElement:function(a,b){var c=f(a),d=Prototype.Selector;if(!b)return Element.extend(c);for(;c;){if(Object.isElement(c)&&
d.match(c,b))return Element.extend(c);c=c.parentNode}},pointer:function(a){return{x:e(a),y:g(a)}},pointerX:e,pointerY:g,stop:function(a){G.extend(a);a.preventDefault();a.stopPropagation();a.stopped=!0}};var ka=Object.keys(G.Methods).inject({},function(a,b){a[b]=G.Methods[b].methodize();return a});if(window.attachEvent){var ga=function(a){switch(a.type){case "mouseover":case "mouseenter":a=a.fromElement;break;case "mouseout":case "mouseleave":a=a.toElement;break;default:return null}return Element.extend(a)},
la={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};G.extend=function(a,b){if(!a)return!1;if(!na(a)||a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=G.pointer(a);Object.extend(a,{target:a.srcElement||b,relatedTarget:ga(a),pageX:c.x,pageY:c.y});Object.extend(a,ka);Object.extend(a,la);return a}}else G.extend=Prototype.K;window.addEventListener&&(G.prototype=window.Event.prototype||
document.createEvent("HTMLEvents").__proto__,Object.extend(G.prototype,ka));var T={mouseenter:"mouseover",mouseleave:"mouseout"};C&&(h=Prototype.K);"uniqueID"in K&&(l=m);G._isCustomEvent=n;var N=document.createEvent?O:F;G.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a);this.eventName=b;this.selector=c;this.callback=d;this.handler=this.handleEvent.bind(this)},start:function(){G.observe(this.element,this.eventName,this.handler);return this},stop:function(){G.stopObserving(this.element,
this.eventName,this.handler);return this},handleEvent:function(a){var b=G.findElement(a,this.selector);b&&this.callback.call(this.element,a,b)}});Object.extend(G,G.Methods);Object.extend(G,{fire:J,observe:q,stopObserving:t,on:x});Element.addMethods({fire:J,observe:q,stopObserving:t,on:x});Object.extend(document,{fire:J.methodize(),observe:q.methodize(),stopObserving:t.methodize(),on:x.methodize(),loaded:!1});a.Event?Object.extend(window.Event,G):a.Event=G;a.Event.cache={};window.attachEvent&&window.attachEvent("onunload",
H);C=K=null})(this);
(function(a){function b(a,b,c){return function(d){var e=Event.cache[a],e=e&&e.element;if(Object.isUndefined(d.eventName)||d.eventName!==b)return!1;Event.extend(d,e);c.call(e,d)}}function c(a,b,c){return function(b){var d=Event.cache[a].element;Event.extend(b,d);for(var e=b.relatedTarget;e&&e!==d;)try{e=e.parentNode}catch(p){e=d}e!==d&&c.call(d,b)}}var d=document.documentElement,f="onmouseenter"in d&&"onmouseleave"in d;a.Event._createResponder=function(a,d,h){return Event._isCustomEvent(d)?b(a,d,h):
f||"mouseenter"!==d&&"mouseleave"!==d?function(b){if(Event.cache){var c=Event.cache[a].element;Event.extend(b,c);h.call(c,b)}}:c(a,d,h)};d=null})(this);
(function(a){function b(){document.loaded||(f&&window.clearTimeout(f),document.loaded=!0,document.fire("dom:loaded"))}function c(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c),b())}function d(){try{document.documentElement.doScroll("left")}catch(e){f=d.defer();return}b()}var f;"complete"===document.readyState?b():(document.addEventListener?document.addEventListener("DOMContentLoaded",b,!1):(document.attachEvent("onreadystatechange",c),window==top&&(f=d.defer())),
Event.observe(window,"load",b))})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.addMethods({childOf:Element.Methods.descendantOf});
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);this.xcomp=b+d[0]-this.deltaX;this.ycomp=c+d[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);return this.ycomp>=
this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if("vertical"==a)return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if("horizontal"==a)return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();
return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,d){d=d.toString().strip();var c=/\s/.test(d)?$w(d).map(b).join(""):b(d);return c?document._getElementsByXPath(".//*"+c,a):[]}:function(a,b){b=b.toString().strip();var c=[],d=/\s/.test(b)?$w(b):null;if(!d&&!b)return c;var g=$(a).getElementsByTagName("*");b=" "+b+" ";for(var h=
0,l,m;l=g[h];h++)l.className&&(m=" "+l.className+" ")&&(m.include(b)||d&&d.all(function(a){return!a.toString().blank()&&m.include(" "+a+" ")}))&&c.push(Element.extend(l));return c};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods));Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a,b){this.element.className.split(/\s+/).select(function(a){return 0<a.length})._each(a,b)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],f=0,e=a.length;f<e;f++){var g=a[f];c(g,b)&&d.push(Element.extend(g))}return d},
findElement:function(a,b,c){c=c||0;for(var d=0,f,e=0,g=a.length;e<g;e++)if(f=a[e],Prototype.Selector.match(f,b)&&c===d++)return Element.extend(f)},findChildElements:function(a,b){var c=b.toArray().join(", ");return Prototype.Selector.select(c,a||document)}})})();NO_DRAWTEXT=NO_DRAWIMAGES=USE_WEBGL=CHEETAH_TEXTURE=ENGLISH_ONLY=!1;CACHE_TECHNOLOGIES=!0;dbgWidgets=dbgNetwork=dbg=!1;fctx=ctx_orig=ctx=canvas=null;screenHeight=screenWidth=0;fps=60;isLocal=isSmall=isRetina=!1;widgets=[];mWidgets=[];
res={};resReadyNum=0;gScaleEvt=gScale=1;networkPollTick=null;window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1E3/60)}}());window.onload=function(){startLoading=1;init()};
window.onscroll=function(a){if(!isDefined(editContainer)||null==editBox||"none"==editContainer.style.display&&"none"==editBox.style.display)return a.preventDefault(),window.scrollTo(0,0),!1};resizeTimer=null;window.onresize=function(a){if(null!=editContainer&&null!=editBox&&("block"==editContainer.style.display||"block"==editBox.style.display))return a.preventDefault(),a.stopPropagation(),!1;clearTimeout(resizeTimer);resizeTimer=window.setTimeout(resize,40)};errorNum=0;
window.onerror=function(a,b,c){var d=!1;a.contains("'send'")&&(d=!0);a.contains("atomicFindClose")&&(d=!0);a.contains("a.transport.onClose")&&(d=!0);a.contains("DOM Exception 11")&&(d=!0,showPopupMsg("Connection issues..."));d?(console.warn("** IGNORED ERROR: "+b+":"+c),console.warn(a)):(window.prompt("ERROR:",b+":"+c+"; "+a),errorNum++)};startLoading=-1;stopLoading=!1;appCache=null;IGNORE_LOAD_IMG_ERRORS=!1;xmlhttp=null;noData=!1;var $j=null;function onChangeRadioButtons(){showPopupMsg("!")}
function init(){"undefined"!=typeof jQuery&&jQuery&&($j=jQuery.noConflict());window.scrollTo(0,0);log("=========================================================================================");log("gui core init()");canvas=$("mixer");configFunctions();settingsStorage.init();isLocal="127.0.0.1"==document.location.host||"#local"==document.location.hash;isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);isAndroid=/(Android)/g.test(navigator.userAgent);lang=Object.clone(langBase.en);(ENGLISH_ONLY=
IS_UI_24)&&"en"!=settings.lang&&(settings.lang="en");"en"!=settings.lang&&Object.extend(lang,langBase[settings.lang]);$("CON_MSG").innerHTML=isLocal?".&nbsp;&nbsp;.&nbsp;&nbsp;.":lang.CONNECTING;$("span_ms").innerHTML=lang.MS;$("span_mt").innerHTML=lang.METERS_UNIT;$("span_ft").innerHTML=lang.FT;$("span_smp").innerHTML=lang.SAMPLES;$("span_fps").innerHTML=lang.FRAMES;isLocal&&(canvas.style.imageRendering="pixelated");initEvents();initEditBox();initEditBox2();initConfBox();checkBrowser()?(createData(),
noData?showPopupMsg(lang.NO_CONNECTION,12E4):(initScreen(),drawLoadingScreen())):showPopupMsg(lang.BAD_BROWSER)}
function initEvents(){window.addEventListener("contextmenu",eventStop,!1);window.addEventListener("selectstart",eventStop,!1);window.addEventListener("offline",function(a){showPopupMsg(lang.OFFLINE,5E3)},!1);document.addEventListener("focusout",function(a){window.scrollTo(0,0)});window.addEventListener("keypress",hKbd,!1);window.addEventListener("keydown",hKbd,!1);window.addEventListener("keyup",hKbd,!1);canvas.addEventListener("mousedown",hMouse,!1);window.addEventListener("mouseup",hMouse,!1);window.addEventListener("mousemove",
hMouse,!1);"onwheel"in document.createElement("div")?window.addEventListener("wheel",hMouse,!1):void 0!==document.onmousewheel?window.addEventListener("mousewheel",hMouse,!1):window.addEventListener("DOMMouseScroll",hMouse,!1);canvas.addEventListener("touchstart",touchStart,!1);window.addEventListener("touchmove",touchMove,!1);window.addEventListener("touchend",touchEnd,!1);window.addEventListener("touchcancel",touchEnd,!1);window.addEventListener("touchleave",touchEnd,!1);window.navigator.msPointerEnabled&&
(canvas.addEventListener("MSPointerDown",touchStart,!1),window.addEventListener("MSPointerMove",touchMove,!1),window.addEventListener("MSPointerUp",touchEnd,!1),window.addEventListener("MSPointerCancel",touchEnd,!1))}
function initScreen(){ctx_orig=ctx=canvas.getContext("2d");fctx=document.createElement("canvas").getContext("2d");var a=Math.max(window.innerWidth,window.innerHeight),b=Math.min(window.innerWidth,window.innerHeight);isRetina=1.5<=window.devicePixelRatio;settings.disableRetina&&(isRetina=!1);isLocal&&(isRetina=!1);isLocal&&(fps=30);settings.disableScaling||isLocal||!(1E3>a||640>b)||(isSmall=!0);isRetina&&!isLocal?(drawImage=function(a,b,f){ctx.drawImage(a,b,f,a.width/2|0,a.height/2|0)},drawImageCtx=
function(a,b,f,e){e.drawImage(a,b,f,a.width/2|0,a.height/2|0)}):isLocal?(drawImage=function(a,b,f){"undefined"===typeof a.img?ctx.drawImage(a,b,f):ctx.drawImage(res[a.img],a.x,a.y,a.cw,a.ch,b+a.dx,f+a.dy,a.cw,a.ch)},drawImageCtx=function(a,b,f,e){"undefined"===typeof a.img?e.drawImage(a,b,f):e.drawImage(res[a.img],a.x,a.y,a.cw,a.ch,b+a.dx,f+a.dy,a.cw,a.ch)}):(drawImage=function(a,b,f){ctx.drawImage(a,b,f)},drawImageCtx=function(a,b,f,e){e.drawImage(a,b,f)});NO_DRAWIMAGES&&(drawImage=function(){},
drawImageCtx=function(){});NO_DRAWTEXT&&(ctx.fillText=function(){});resize()}function isZoomed(){var a=document.body.clientWidth;return!window.matchMedia("(max-width: "+a+"px) and (min-width: "+a+"px)").matches}
function resize(){window.scrollTo(0,0);null==canvas||(isIOS&&window.innerHeight!=document.body.clientHeight&&(document.body.style.height=window.innerHeight+"px"),null!=editBox&&"block"==editBox.style.display)||null!=editContainer&&"block"==editContainer.style.display||(screenWidth=canvas.width=window.innerWidth,screenHeight=canvas.height=window.innerHeight,gScaleEvt=gScale=1,ctx.setTransform(1,0,0,1,0,0),isSmall&&(gScale=Math.min(Math.max(screenWidth,screenHeight)/1024,Math.min(screenWidth,screenHeight)/
640),gScaleEvt=1/gScale,screenWidth*=1/gScale,screenHeight*=1/gScale,screenWidth|=0,screenHeight|=0),isRetina&&(gScale*=2,canvas.width=screenWidth*gScale,canvas.height=screenHeight*gScale),ctx.scale(gScale,gScale),ctx.imageSmoothingEnabled=!1,ctx.mozImageSmoothingEnabled=!1,onResize())}
function checkBrowser(){try{localStorage.setItem("TEST_TEST","TEST_TEST"),localStorage.removeItem("TEST_TEST")}catch(c){}var a="WebSocket"in window&&2===window.WebSocket.CLOSING||"MozWebSocket"in window,b=document.createElement("canvas"),b=!(!b.getContext||!b.getContext("2d"));return a&&b}function loadInitParams(){var a=document.createElement("script");a.preload=!0;a.src="initparams.js";a.onpreload=function(){document.body.appendChild(a)}}
function loadInitParamsJS(){var a=document.createElement("script");a.type="text/javascript";a.onerror=function(a){log("The script "+a.target.src+" is not accessible.");document.body.removeChild(a.target);startLoading=0};a.onload=function(){startLoading=1};document.body.appendChild(a);a.src="js/initparams.js"}
function checkConnection(){null==xmlhttp&&(xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"));xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&(200==xmlhttp.status?(log(xmlhttp.responseText),"NOT_OFFLINE"==xmlhttp.responseText&&(log("OK!"),startLoading=1)):400==xmlhttp.status?(startLoading=0,log("! OFFLINE 400 !")):(startLoading=0,log("! OFFLINE !")))};xmlhttp.open("GET","offline_check.txt",!0);xmlhttp.send()}
function checkFonts(){var a=[];fctx.font="20pt I_want_a_cookie";var b=fctx.measureText("abc123").width;a.push(b);fctx.font="20pt open_sansbold";b=fctx.measureText("abc123").width;a.push(b);fctx.font="20pt umixled";b=fctx.measureText("abc123").width;a.push(b);fctx.font="20pt open_sans_condensedbold";b=fctx.measureText("abc123").width;a.push(b);a.sort();for(var b=!0,c=0;c<a.length-1;c++)a[c]==a[c+1]&&(b=!1);b?(log("! FONTS OK !"),resLoaded()):setTimeout(function(){checkFonts()},100)}
function loadImg(a,b){var c=isRetina?"img2x/":"img1x/";switch(settings.lang){case "cn":c=isRetina?"img2x_chin/":"img1x_chin/"}if(CHEETAH_TEXTURE&&IMG_TABLE[a])return resLoaded(),(c=IMG_TABLE[a])||log(a),c.width=c.ow,c.height=c.oh,c.w=function(){return this.ow},c.h=function(){return this.oh},c;var d=new Image;d.onload=resLoaded;d.isFast=b||!1;d.onerror=function(a){log("ERROR LOADING IMG: "+this.src+" "+a.message);log(a.status);IGNORE_LOAD_IMG_ERRORS&&resLoaded()};d.src=c+a;return d}
function resLoaded(){resReadyNum++;var a=objSize(res);drawProgress(resReadyNum/a);a==resReadyNum&&(a=Date.now()-startLoadingTime,log("RESOURCES LOADING TIME: "+a+"ms"),1200>a?setTimeout(function(){startGUI()},1200-a):startGUI())}guiReady=!1;
function fastImages(){for(var a=Object.keys(res),b=0;b<a.length;b++){var c=a[b];if(!c.startsWith("_")){var d=res[c];if(d.isFast&&!isDefined(d.img)){var f=document.createElement("canvas"),e=f.getContext("2d"),g=d.height;f.width=d.width;f.height=g;e.drawImage(d,0,0);res[c].onload=null;res[c].src="img1x/png-transparent.png";res[c]=f}}}}
function startGUI(){(isRetina||isLocal)&&fastImages();initGUI();updateCacheAll();lastUpdateTime=Date.now();USE_WEBGL?requestAnimationFrame(updaterGL):requestAnimationFrame(updater)}updateLine=[];updateTime=0;function regUpdate(a){"undefined"!=typeof a&&null!=a&&(a.redrawParent&&null!=a.parent&&(a=a.parent,a.CACHED_DRAWING&&(a.NEED_UPDATE=!0)),a.enabled&&-1==fastIndexOf(updateLine,a)&&updateLine.push(a))}tickLine=[];
function regTick(a){"undefined"!=typeof a&&-1==fastIndexOf(tickLine,a)&&tickLine.push(a)}updaterLock=!1;uframe=lastUpdateTime=lastTick=0;
function updater(){requestAnimationFrame(updater);null!=networkPollTick&&networkPollTick();var a=Util.getTime(),b=(a-lastUpdateTime)/(1E3/fps);lastUpdateTime=a;for(a=tickLine.length;a--;)tickLine.shift().tick(b);b=settings.drawRate;isLocal&&2>b&&(b=2);if(!(uframe%b)){b=updateLine.length;for(a=0;a<b;a++)updateLine[a].update();updateLine.length=0;if(b)for(a=0;a<mWidgets.length;a++)mWidgets[a].update()}uframe++}
function updaterGL(){null!=networkPollTick&&networkPollTick();var a=Util.getTime(),b=(a-lastUpdateTime)/(1E3/fps);lastUpdateTime=a;for(a=tickLine.length;a--;)tickLine.shift().tick(b);if(!(uframe%settings.drawRate)){b=widgets.length;for(a=0;a<b;a++)widgets[a].update();b=mWidgets.length;for(a=0;a<b;a++)mWidgets[a].update()}uframe++;requestAnimationFrame(updaterGL)}
var Widget=Class.create({initialize:function(a){this.parent=null;this.isModal=!1;"undefined"==typeof a||null==a?widgets.push(this):-1==a?(this.isModal=!0,mWidgets.push(this)):(this.parent=a,a.widgets.push(this));this.widgetName="Widget";this.visible=this.enabled=!0;this.dsbld=!1;this.widgets=[];this.h=this.w=this.y=this.x=0;this.opaque=!0;this.needClip=this.ignoreEvents=this.needMoveEvt=this.redrawParent=!1;this.blockEvent=!0;this.offsetY=this.offsetXold=this.offsetX=0;this.pressPoint=[-1,-1];this.keyPart=
this.key=null;this.regKeys=[];this.updCount=0;this.lastClickTime=-1;this.CACHED_DRAWING=this.DYNAMIC_WIDGET=!1;this.NEED_UPDATE=!0;this.CACHED_PARAMS=[];this.CACHED_CANVAS_H=this.CACHED_CANVAS_W=this.CACHED_CANVAS_CTX=this.CACHED_CANVAS=null;this.anchors={centerX:!1,centerY:!1,left:null,right:null,top:null,bottom:null}},close:function(){this.isModal&&(this.hide(),clearModals())},getVal:function(){return null==this.key?(log("getVal: "+this.name+" no PARAM-KEY!"),0):getValue(this.key)},setVal:function(a){null!=
this.key?setValue(this.key,a):log("setVal: "+this.name+" no PARAM-KEY!")},setKey:function(a,b){this.key=a;b&&(this.unRegAllKeys(),this.regKey(a));regUpdate(this)},setKeyPrefix:function(a){null!=this.keyPart&&(this.key=a+this.keyPart)},regKey:function(a){this.regKeys.push(a);var b=keyWidgetHash.get(a);isDefined(b)?b.push(this):keyWidgetHash.set(a,[this])},unRegKey:function(a){a=keyWidgetHash.get(a);if(isDefined(a)){var b=a.indexOf(this);0<=b&&a.splice(b,1)}},unRegAllKeys:function(){for(var a=0;a<this.regKeys.length;a++){var b=
keyWidgetHash.get(this.regKeys[a]);if(isDefined(b)){var c=b.indexOf(this);0<=c&&b.splice(c,1)}}},setGeometry:function(a,b,c,d){var f=this.w!=c||this.h!=d,e=this.x!=a||this.y!=b;this.x=a;this.y=b;this.w=0>c?0:c;this.h=0>d?0:d;if(f)this.onResize();if(e)this.onResize()},setPos:function(a,b){this.setGeometry(a,b,this.w,this.h)},setSize:function(a,b){this.setGeometry(this.x,this.y,a,b)},onResize:function(){},setAnchors:function(a,b,c,d){this.anchors.left=isDefined(a)?a:null;this.anchors.right=isDefined(c)?
c:null;this.anchors.top=isDefined(b)?b:null;this.anchors.bottom=isDefined(d)?d:null},contains:function(a,b){return this.enabled&&this.visible?this.x<=a&&this.x+this.w>a&&this.y<=b&&this.y+this.h>b:!1},calcAnchors:function(){var a=this.anchors,b=this.parent,c=b?b.w:screenWidth,b=b?b.h:screenHeight,d=this.x,f=this.y,e=this.w,g=this.h;null!=a.left&&null!=a.right&&(e=c-a.left-a.right);null!=a.top&&null!=a.bottom&&(g=b-a.top-a.bottom);null!=a.left?d=(a.centerX?(c-e)/2|0:0)+a.left:null!=a.right&&(d=c-this.w-
a.right);null!=a.top?f=(a.centerY?(b-g)/2|0:0)+a.top:null!=a.bottom&&(f=b-this.h-a.bottom);this.setGeometry(d,f,e,g)},updateGeometry:function(){this.calcAnchors();var a=this.x,b=this.y,c=this.w,d=this.h;this.calcGeometry();if(a!=this.x||b!=this.y||c!=this.w||d!=this.h)this.onResize();a=0;for(b=this.widgets.length;a<b;a++)this.widgets[a].updateGeometry()},calcGeometry:function(){},globalX:function(){return null==this.parent?this.x:this.x-this.parent.offsetX+this.parent.globalX()},globalY:function(){return null==
this.parent?this.y:this.y-this.parent.offsetY+this.parent.globalY()},globalVisible:function(){return this.visible?null==this.parent?this.visible:this.parent.globalVisible():!1},globalEnabled:function(){return this.enabled?null==this.parent?this.enabled:this.parent.globalEnabled():!1},globalCACHED:function(){return this.CACHED_DRAWING?!0:this.parent?this.parent.globalCACHED():this.CACHED_DRAWING},globalWidgetName:function(){return null==this.parent?this.widgetName:this.parent.globalWidgetName()+"."+
this.widgetName},click:function(){this.getState&&this.getState();this.onDown(0,0,0);this.onUp(0)},onDown:function(a,b){dbg&&log(this.name+".onDown "+a+"x"+b)},onMove:function(a,b){dbg&&log(this.name+".onMove "+a+"x"+b)},onUp:function(){dbg&&log(this.name+".onUp");this.pressPoint=[-1,-1]},onDbClick:function(){dbg&&log(this.name+".onDbClick")},onWheel:function(a){dbg&&log(this.globalWidgetName()+" "+a)},tick:function(){},show:function(){this.enabled||(this.enabled=!0,this.onShow())},hide:function(){this.enabled&&
(this.enabled=!1,this.onHide())},onShow:function(){},onHide:function(){},DRAW_UPDATE_CHECK:function(){return!0},UPDATE_CACHE:function(){if(this.CACHED_CANVAS=createCacheCanvas(this.w,this.h)){this.CACHED_CANVAS_W=this.w;this.CACHED_CANVAS_H=this.h;ctx=this.CACHED_CANVAS_CTX=this.CACHED_CANVAS.getContext("2d");ctx.save();ctx.fastReset();ctx.translate(-this.offsetX,-this.offsetY);this.paint();for(var a=0,b=this.widgets.length;a<b;a++)this.widgets[a].update(!0,!0);ctx.restore();ctx=ctx_orig;this.NEED_UPDATE=
!1}},update:function(a,b){var c=a||!1;b=b||!1;var d=0,f=0;dbgWidgets&&(d=window.performance?window.performance.now():Date.now());if(!(0>=this.h||0>=this.w)){if(b){if(!this.enabled)return}else if(!this.globalEnabled())return;var f=this.globalX(),e=this.globalY();if(b||!(f>screenWidth||e>screenHeight||0>f+this.w||0>e+this.h||this.parent&&(this.x-this.parent.offsetX>this.parent.w||0>this.x+this.w-this.parent.offsetX||this.y-this.parent.offsetY>this.parent.h||0>this.y+this.h-this.parent.offsetY))){var g=
0,h=0;if(this.CACHED_DRAWING){this.CACHED_CANVAS&&this.CACHED_CANVAS_W==this.w&&this.CACHED_CANVAS_H==this.h||(this.CACHED_CANVAS=createCacheCanvas(this.w,this.h),this.CACHED_CANVAS_W=this.w,this.CACHED_CANVAS_H=this.h,this.CACHED_CANVAS_CTX=this.CACHED_CANVAS.getContext("2d"),this.NEED_UPDATE=!0);if(this.NEED_UPDATE||this.DRAW_UPDATE_CHECK()){ctx=this.CACHED_CANVAS_CTX;ctx.save();ctx.fastReset();ctx.translate(-this.offsetX,-this.offsetY);ctx.fillStyle="#000000";ctx.fillRect(0,0,this.w,this.h);this.paint();
for(var l=0,m=this.widgets.length;l<m;l++)this.widgets[l].DYNAMIC_WIDGET||this.widgets[l].update(!0,!0);ctx.restore();ctx=ctx_orig;this.NEED_UPDATE=!1}ctx.save();c?(ctx.translate(this.x|0,this.y|0),this.needClip&&(ctx.beginPath(),ctx.rect(this.offsetX,this.offsetY,this.w,this.h),ctx.clip())):(function p(a){null!=a&&(p(a.parent),g+=a.x-a.offsetX,h+=a.y-a.offsetY,a.needClip&&(ctx.beginPath(),ctx.rect(g+a.offsetX,h+a.offsetY,a.w,a.h),ctx.clip()))}(this),ctx.translate(f|0,e|0));drawImage(this.CACHED_CANVAS,
0,0);l=0;for(m=this.widgets.length;l<m;l++)this.widgets[l].DYNAMIC_WIDGET&&this.widgets[l].update(!0,!0);dbgWidgets&&(f=window.performance?window.performance.now():Date.now(),c=1E3*(f-d)|0,0<c&&(f=this.h-6,ctx.textAlign="left",ctx.font="9px arial",ctx.textBaseline="middle",ctx.fillStyle="#FF0",ctx.fillText(c,1,f)))}else{ctx.save();ctx.fastReset();isSmall&&(ctx.imageSmoothingEnabled=!0,ctx.mozImageSmoothingEnabled=!0);c?(ctx.translate(this.x-this.offsetX|0,this.y-this.offsetY|0),this.needClip&&(ctx.beginPath(),
ctx.rect(this.offsetX,this.offsetY,this.w,this.h),ctx.clip())):(function p(a){null!=a&&(p(a.parent),g+=a.x-a.offsetX,h+=a.y-a.offsetY,a.needClip&&(ctx.beginPath(),ctx.rect(g+a.offsetX,h+a.offsetY,a.w,a.h),ctx.clip()))}(this),ctx.translate(f-this.offsetX|0,e-this.offsetY|0));!this.opaque&&this.parent&&this.parent.paintRect(this.x,this.y,this.w,this.h);this.paint();l=0;for(m=this.widgets.length;l<m;l++)this.widgets[l].update(!0,!1);dbgWidgets&&(f=window.performance?window.performance.now():Date.now(),
c=1E3*(f-d)|0,0<c&&(ctx.textAlign="left",ctx.font="9px arial",ctx.textBaseline="middle",ctx.fillStyle="#FF0",d=this.offsetX+1,f=this.offsetY+this.h-6,ctx.fillText(c,d,f)))}ctx.restore()}}},paintRect:function(a,b,c,d){ctx.save();ctx.beginPath();ctx.rect(0,0,c,d);ctx.clip();ctx.translate(-a,-b);this.paint();ctx.restore()},paint:function(){ctx.fillStyle="black";ctx.fillRect(0,0,this.w,this.h)}});
function geomAll(){for(var a=0,b=widgets.length;a<b;a++)widgets[a].updateGeometry();a=0;for(b=mWidgets.length;a<b;a++)mWidgets[a].updateGeometry()}function drawAll(a){if(guiReady){ctx.fillStyle="#000000";ctx.fillRect(0,0,screenWidth,screenHeight);for(var b=Date.now(),c=0,d=widgets.length;c<d;c++)widgets[c].update();for(c=0;c<mWidgets.length;c++)mWidgets[c].update();c=Date.now();log("DRAW ALL: "+(a||"?")+" IN "+(c-b)+"ms")}}
function clearModals(){if(mWidgets.length){log("clearModals()");for(var a=!1;mWidgets.length;)a=mWidgets.pop(),a.enabled=!1,a.onDelete&&a.onDelete(),a.onClose&&a.onClose(),a=!0;mWidgets.clear();a&&drawAll("clearModals");return a}}mousePressed=!1;mouseTargets=[];tHash={};function eventStop(a){a.preventDefault();return!1}mouseID=123456;
function hMouse(a){function b(){for(var a=0;a<mWidgets.length;a++){var b=mWidgets[a];if(b.contains(f,e))return b.ignoreEvents||mouseTargets.push(b),f-=b.x,f+=b.offsetX,e-=b.y,e+=b.offsetY,c(b.widgets),!0}return!1}function c(a){for(var b=0,d=a.length;b<d;b++){var g=a[b];if(g.contains(f,e)){f-=g.x;f+=g.offsetX;e-=g.y;e+=g.offsetY;g.ignoreEvents||mouseTargets.push(g);c(g.widgets);break}}}function d(a,b,c,e){e=e||!1;for(var f=a.length-1;0<=f;f--){var g=a[f];if(g.contains(b,c,e)){b-=g.x;c-=g.y;b+=g.offsetX;
c+=g.offsetY;dbg&&log(" * On widget: "+g.widgetName+" ("+b+"x"+c+") BLOCK: "+g.blockEvent);if(d(a[f].widgets,b,c,e))return!0;g.ignoreEvents||mouseTargets.push(g);return!1}}return null}dbg&&mEvt(a);if(!a)return!1;var f=a.pageX,e=a.pageY,g=a.pageX,h=a.pageY;isSmall&&(f*=gScaleEvt,e*=gScaleEvt,g*=gScaleEvt,h*=gScaleEvt);switch(a.type){case "mousedown":if(1!=a.which)return!1;mWidgets.length?b()||clearModals():c(widgets);for(var l=0,m=mouseTargets.length;l<m;l++)mouseTargets[l].onDown(g,h,mouseID);mousePressed=
!0;break;case "mousemove":if(1!=a.which||!mousePressed)return!1;l=0;for(m=mouseTargets.length;l<m;l++)if(g=mouseTargets[l],g.needMoveEvt)g.onMove(f,e,mouseID);break;case "mouseup":if(1!=a.which)return!1;mousePressed=!1;l=0;for(m=mouseTargets.length;l<m;l++)mouseTargets[l].onUp(mouseID);for(;mouseTargets.length;)g=mouseTargets.pop();break;case "wheel":mWidgets.length?(d(mWidgets,f,e,!0),0==mouseTargets.length&&clearModals()):d(widgets,f,e,!0);for(;mouseTargets.length;)g=mouseTargets.pop(),l=-1.2*a.deltaY|
0,g.onWheel&&g.onWheel(l,f,e);break;case "mousewheel":case "DOMMouseScroll":for(0<mWidgets.length?(d(mWidgets,f,e,!0),0==mouseTargets.length&&clearModals()):d(widgets,f,e,!0);mouseTargets.length;)g=mouseTargets.pop(),l=a.detail?-40*a.detail:a.wheelDelta,g.onWheel&&g.onWheel(l,f,e)}if(a.preventDefault)a.preventDefault();else return!1}
E_KEYS={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,caps_lock:20,escape:27,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,del:46,left_window_key:91,right_window_key:92,select_key:93,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_mult:106,num_plus:107,num_minus:109,num_del:110,num_div:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,
num_lock:144,scroll_lock:145,semicolon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,back_slash:220,close_braket:221,single_quote:222};function hKbd(a){var b=a.which,c=String.fromCharCode(b);switch(a.type){case "keydown":handleKey(c,b,a)}}touchCount=0;
function touchStart(a){dbg&&tEvt(a);a||(a=event);a.preventDefault();a=isDefined(a.changedTouches)?a.changedTouches:[a];for(var b=0;b<a.length;b++){var c=function(a){for(var b=0,d=a.length;b<d;b++){var f=a[b];if(f.contains(e,h)){e-=f.x;e+=f.offsetX;h-=f.y;h+=f.offsetY;tHash[m].push(f);c(a[b].widgets);break}}},d=function(){for(var a=0;a<mWidgets.length;a++){var b=mWidgets[a];if(b.contains(e,h))return tHash[m].push(b),e-=b.x,e+=b.offsetX,h-=b.y,h+=b.offsetY,c(b.widgets),!0}return!1};touchCount++;var f=
a[b],e=f.pageX,g=f.pageX,h=f.pageY,l=f.pageY,m=isDefined(f.identifier)?f.identifier:isDefined(f.pointerId)?f.pointerId:mouseID;isSmall&&(e*=gScaleEvt,h*=gScaleEvt,g*=gScaleEvt,l*=gScaleEvt);if(!isDefined(tHash[m]))for(tHash[m]=[],0<mWidgets.length?d()||clearModals():c(widgets),d=0,f=tHash[m].length;d<f;d++)tHash[m][d].onDown(g,l,m)}}
function touchMove(a){dbg&&tEvt(a);a||(a=event);a.preventDefault();a=isDefined(a.changedTouches)?a.changedTouches:[a];for(var b=0;b<a.length;b++){var c=a[b],d=isDefined(c.identifier)?c.identifier:isDefined(c.pointerId)?c.pointerId:mouseID,f=c.pageX,c=c.pageY;isSmall&&(f*=gScaleEvt,c*=gScaleEvt);var e=tHash[d];if(isDefined(e))for(var g=0,h=e.length;g<h;g++){var l=e[g];if(l.needMoveEvt)l.onMove(f,c,d)}}}
function touchEnd(a){dbg&&tEvt(a);a=isDefined(a.changedTouches)?a.changedTouches:[a];for(var b=0;b<a.length;b++){var c=a[b],c=isDefined(c.identifier)?c.identifier:isDefined(c.pointerId)?c.pointerId:mouseID;if(isDefined(tHash[c])){for(var d=tHash[c],f=0,e=d.length;f<e;f++)d[f].onUp(c);for(;d.length;)d.pop();delete tHash[c]}touchCount--}}function isNear(a,b,c){return Math.abs(a-b)<(c||.001)}function quantize(a,b){return a-a%b}
function manualSlice(a,b,c){c-=b;for(var d=Array(c),f=0;f<c;++b,++f)d[f]=a[b];return d}function fastIndexOf(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return c;return-1}function checkBit(a,b){return 0>b||31<b?null:0!=(a&1<<b)}function copyObject(a){return isArray(a)?a.slice():isObject(a)?JSON.parse(JSON.stringify(a)):a}function isDefined(a){return"undefined"!=typeof a}function isObject(a){return"object"===typeof a}function isImage(a){return a instanceof HTMLImageElement}
function isArray(a){return Array.isArray(a)}function isString(a){return"string"===typeof a}function d2h(a){return(+a).toString(16).toUpperCase()}Array.prototype.contains=function(a){return-1!=this.indexOf(a)};Array.prototype.deleteItem=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};Array.prototype.avg=function(){for(var a=0,b=0,c=this.length;b<c;b++)a+=this[b];return a/this.length};
Array.prototype.equals=function(a){if(!a||this.length!=a.length)return!1;for(var b=0,c=this.length;b<c;b++)if(this[b]instanceof Array&&a[b]instanceof Array){if(!this[b].equals(a[b]))return!1}else if(this[b]!=a[b])return!1;return!0};Object.defineProperty(Array.prototype,"equals",{enumerable:!1});Object.defineProperty(Array.prototype,"deleteItem",{enumerable:!1});Object.defineProperty(Array.prototype,"avg",{enumerable:!1});Object.defineProperty(Array.prototype,"equals",{enumerable:!1});
String.prototype.contains=function(a){return-1!=this.indexOf(a)};String.prototype.format=function(){for(var a=this,b=0;b<arguments.length;b++)a=a.replace(new RegExp("\\{"+b+"\\}","gi"),arguments[b]);return a};String.prototype.replaceAt=function(a,b,c){var d=0;return this.replace(new RegExp(a,"g"),function(a){d++;return d===c?b:a})};Object.defineProperty(String.prototype,"contains",{enumerable:!1});Object.defineProperty(String.prototype,"format",{enumerable:!1});
Object.defineProperty(String.prototype,"replaceAt",{enumerable:!1});function randomOf(a){return bound(Math.floor(Math.random()*(a+1)),0,a)}function testRandom(a,b){for(var c=[],d=0;d<a+1;d++)c.push(0);for(d=0;d<b;d++)c[randomOf(a)]++;for(d=0;d<a+1;d++)log(d+": "+c[d])}function objSize(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}
function mEvt(a){a||(a=event);var b=a.pageX,c=a.pageY;ctx.clearRect(0,0,300,26);ctx.fillStyle="#880000";ctx.font="24px Arial";ctx.fillText(a.type+": "+b+"x"+c+" "+(1<<a.button),0,22)}
function tEvt(a){log(a.type+" "+(a.identifier||a.pointerId||"?"));log(a);ctx.clearRect(0,0,screenWidth-200,80);var b=isDefined(a.changedTouches)?a.changedTouches:[a];a=a.type+" ";a+=b.length+": ";for(var c=0;c<b.length;c++){var d=b[c],f=d.pageX,e=d.pageY,d=isDefined(d.identifier)?d.identifier:isDefined(d.pointerId)?d.pointerId:"XXX";a+="id:"+d+" x:"+precision(f,2)+" y:"+precision(e,2)+";  "}b="Touches: "+objSize(tHash);ctx.fillStyle="#000088";ctx.font="30px Arial";ctx.fillText(a,5,29);ctx.fillText(b,
5,68)}function logObject(a){log("==========================================================");for(var b in a)"function"==typeof a[b]?log(b+": function()"):log(b+": "+a[b]);log("==========================================================")}function log(a){WEBSITE_MODE||DEPLOY||console.log(a)}function bound(a,b,c){return a<b?b:a>c?c:a}function precision(a,b){if(0==b)return a|0;if(1==b)return(10*a|0)/10;if(2==b)return(100*a|0)/100;var c=Math.pow(10,b);return(a*c|0)/c}
function isInCircle(a,b,c,d,f){return Math.sqrt((a-d)*(a-d)+(b-f)*(b-f))<c}function isInRect(a,b,c,d,f,e){return a<=f&&a+c>f&&b<=e&&b+d>e}function padLeft(a,b,c){return Array(b-String(a).length+1).join(c||"0")+a}var Util={getTime:function(){return window.performance?window.performance.now():Date.now()},filledArray:function(a,b){var c=Array(a);b=b||0;for(var d=0;d<a;++d)c[d]=b;return c}},CANVASES_CREATED=0;
function createCacheCanvas(a,b){if(0>=a||0>=b)return null;CANVASES_CREATED++;var c=document.createElement("canvas"),d=c.getContext("2d");c.w=function(){return isRetina?this.width/2|0:this.width};c.h=function(){return isRetina?this.height/2|0:this.height};isRetina?(c.width=2*a,c.height=2*b,d.scale(2,2)):(c.width=a,c.height=b);return c}Element.prototype.w=function(){return isRetina?this.width/2|0:this.width};Element.prototype.h=function(){return isRetina?this.height/2|0:this.height};
drawImageCtx=drawImage=null;function formatButtonText(a,b,c){if(!a)return"";b=b||" ";if(10>a.length||!a.contains(b))return a;c=c||"\n";var d=(a.match(new RegExp(b,"g"))||[]).length;if(!d)return a;var f=Math.ceil(d/2);2==d&&4>a.indexOf(b)&&f++;return a.replaceAt(b,c,f)}function textWidth(a){return ctx.measureText(a).width}
function drawText(a,b,c,d){if(isDefined(a)&&null!=a&&0!=a.length){isDefined(d)&&(isDefined(d.color)&&(ctx.fillStyle=d.color),isDefined(d.font)&&(ctx.font=d.font),isDefined(d.align)&&(ctx.textAlign=d.align),isDefined(d.baseLine)&&(ctx.textBaseline=d.baseLine),isDefined(d.valign)&&(ctx.textBaseline=d.valign),isDefined(d.sColor)&&(ctx.shadowColor=d.sColor),isDefined(d.sBlur)&&(ctx.shadowBlur=0),isDefined(d.sX)&&(ctx.shadowOffsetX=d.sX),isDefined(d.sY)&&(ctx.shadowOffsetY=d.sY));a=a.split("<br>");var f=
isDefined(d)&&isDefined(d.max)?d.max:999999;d=isDefined(d)&&isDefined(d.dy)?d.dy:20;for(var e=0;e<a.length;e++){var g=a[e];g.startsWith("#")&&(ctx.fillStyle=g.slice(0,7),g=g.slice(7));ctx.fillText(g,b|0,c|0,f);c+=d}}}function drawImageScale(a,b,c,d){ctx.drawImage(a,b,c,a.w()*d|0,a.h()*d|0)}function drawImageScaleCtx(a,b,c,d,f){f.drawImage(a,b,c,a.w()*d|0,a.h()*d|0)}
function createPattern(a,b){if(NO_DRAWIMAGES)return"#0f0";if(isRetina||CHEETAH_TEXTURE){var c=document.createElement("canvas"),d=c.getContext("2d"),f=(a.w()|0)+1,e=a.h()|0;c.width=f;c.height=e;isDefined(a.img)?d.drawImage(res[a.img],a.x,a.y,a.cw,a.ch,a.dx,a.dy,a.cw,a.ch):d.drawImage(a,0,0,f,e);return ctx.createPattern(c,b)}return ctx.createPattern(a,b)}function fillVertPattern(a,b,c){for(var d=0,f=a.h();d<b;)drawImage(a,isDefined(c)?c:0,d),d+=f}
function fillVertPatternCtx(a,b,c){for(var d=0,f=a.h();d<b;)drawImageCtx(a,0,d,c),d+=f}function fillHorPattern(a,b){for(var c=0,d=a.w();c<b;)drawImage(a,c,0),c+=d}function fillHorPatternCtx(a,b,c){for(var d=0,f=a.w();d<b;)drawImageCtx(a,d,0,c),d+=f}
CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,d,f){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*f&&(f=c/2);d<2*f&&(f=d/2);this.beginPath();this.moveTo(a+f,b);this.arcTo(a+c,b,a+c,b+d,f);this.arcTo(a+c,b+d,a,b+d,f);this.arcTo(a,b+d,a,b,f);this.arcTo(a,b,a+c,b,f);this.closePath()};
CanvasRenderingContext2D.prototype.fillRoundRect=function(a,b,c,d,f){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*f&&(f=c/2);d<2*f&&(f=d/2);this.beginPath();this.moveTo(a+f,b);this.arcTo(a+c,b,a+c,b+d,f);this.arcTo(a+c,b+d,a,b+d,f);this.arcTo(a,b+d,a,b,f);this.arcTo(a,b,a+c,b,f);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.fillTopRoundRect=function(a,b,c,d,f){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*f&&(f=c/2);d<2*f&&(f=d/2);this.beginPath();this.moveTo(a+f,b);this.arcTo(a+c,b,a+c,b+d,f);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.arcTo(a,b,a+c,b,f);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.fillBotRoundRect=function(a,b,c,d,f){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*f&&(f=c/2);d<2*f&&(f=d/2);this.beginPath();this.moveTo(a,b);this.lineTo(a+c,b);this.arcTo(a+c,b+d,a,b+d,f);this.arcTo(a,b+d,a,b,f);this.closePath();this.fill()};CanvasRenderingContext2D.prototype.fillTriangle=function(a,b,c,d){this.beginPath();this.moveTo(a,b);this.lineTo(a+2*c,b);this.lineTo(a+c,b+d);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.fillTriangle2=function(a,b,c,d,f,e){this.beginPath();this.moveTo(a,b);this.lineTo(c,d);this.lineTo(f,e);this.closePath();this.fill()};CanvasRenderingContext2D.prototype.triangle2=function(a,b,c,d,f,e){this.moveTo(a,b);this.lineTo(c,d);this.lineTo(f,e);this.lineTo(a,b)};CanvasRenderingContext2D.prototype.circle=function(a,b,c){this.beginPath();this.arc(a,b,c,0,2*Math.PI,!1)};
CanvasRenderingContext2D.prototype.fillCircle=function(a,b,c){this.beginPath();this.arc(a,b,c,0,2*Math.PI,!1);this.fill()};CanvasRenderingContext2D.prototype.setShadow=function(a,b,c,d){this.shadowColor="rgba(0, 0, 0, 0)"};CanvasRenderingContext2D.prototype.dashedLine=function(a,b,c,d,f){void 0==f&&(f=2);this.moveTo(a,b);var e=c-a,g=d-b;f=Math.floor(Math.sqrt(e*e+g*g)/f);for(var e=e/f,g=g/f,h=0;h++<f;)a+=e,b+=g,this[0==h%2?"moveTo":"lineTo"](a,b);this[0==h%2?"moveTo":"lineTo"](c,d)};
CanvasRenderingContext2D.prototype.resetSettings=function(){this.globalAlpha=1;this.shadowColor="rgba(0, 0, 0, 0)";this.textBaseline="alphabetic"};CanvasRenderingContext2D.prototype.fastReset=function(){1!=this.globalAlpha&&(this.globalAlpha=1);"rgba(0, 0, 0, 0)"!=this.shadowColor&&(this.shadowColor="rgba(0, 0, 0, 0)");"alphabetic"!=this.textBaseline&&(this.textBaseline="alphabetic")};
CanvasRenderingContext2D.prototype.drawText=function(a,b,c,d,f){if(a){a=""+a;var e=999999,g=18,h=null,l=0,m=0;f=f||"\n";isDefined(d)&&(isObject(d)?(d.color&&(this.fillStyle=d.color),d.font&&(this.font=d.font),d.align&&(this.textAlign=d.align),d.textBaseline&&(this.textBaseline=d.textBaseline),d.valign&&(this.textBaseline=d.valign),settings.disableShadows?(isDefined(d.sColor)&&(h=d.sColor),isDefined(d.sX)&&(l=d.sX),isDefined(d.sY)&&(m=d.sY)):(isDefined(d.sColor)&&(this.shadowColor=d.sColor),isDefined(d.sBlur)&&
(this.shadowBlur=d.sBlur),isDefined(d.sX)&&(this.shadowOffsetX=d.sX),isDefined(d.sY)&&(this.shadowOffsetY=d.sY)),d.shadow&&(h=d.shadow[0],l=d.shadow[2],m=d.shadow[3]),isDefined(d.max)&&(e=d.max),isDefined(d.dy)&&(g=d.dy)):e=d);if(a.contains(f))for(a=a.split(f),b|=0,c|=0,"middle"==this.textBaseline&&(c-=.5*(a.length-1)*g),f=0;f<a.length;f++){var n=a[f];n.startsWith("#")&&(this.fillStyle=n.slice(0,7),n=n.slice(7));h&&(d=this.fillStyle,this.fillStyle=h,this.fillText(n,b+l,c+m,e),this.fillStyle=d);this.fillText(n,
b,c,e);c+=g}else h&&(d=this.fillStyle,this.fillStyle=h,this.fillText(a,b+l,c+m,e),this.fillStyle=d),this.fillText(a,b,c,e)}};CanvasRenderingContext2D.prototype.drawLine=function(a,b,c,d){this.beginPath();this.lineWidth%2?(this.moveTo(a+.5,b+.5),this.lineTo(c+.5,d+.5)):(this.moveTo(a,b),this.lineTo(c,d));this.stroke()};
function hexToRGBA(a,b){if(!a||"#"!=a[0])return a;a=a.replace("#","");var c=bound(parseInt(a.substring(0,2),16),0,255),d=bound(parseInt(a.substring(2,4),16),0,255),f=bound(parseInt(a.substring(4,6),16),0,255),e=bound(b,0,1);return"rgba("+c+","+d+","+f+","+e+")"}function LightenDarkenColor(a,b){if(!a||"#"!=a[0])return a;b=b||0;a=a.substr(1);a=parseInt(a,16);return"#"+((a&255)+b|(a>>8&255)+b<<8|(a>>16)+b<<16).toString(16)}popupTimer=null;
function showPopupMsg(a,b,c){var d=$("MSG_BODY");d.innerHTML=a;d.style.fontSize=isDefined(c)?"{0}mm".format(c):"10mm";$("MSG_CONTAINER").style.opacity="1";clearTimeout(popupTimer);popupTimer=setTimeout(hidePopupMsg,b||2400)}function hidePopupMsg(){$("MSG_CONTAINER").style.opacity="0"}editBox=null;function initEditBox(){editBox=$("eb");editBox.valueFunc=function(){log("!EDITBOX EMPTY VALUE FUNC! "+editBox.value)}}
function showEditBox(a,b,c,d){isSmall?(editBox.style.left=(a/2|0)+"px",editBox.style.top=(b/2|0)+"px"):(editBox.style.left=(a|0)+"px",editBox.style.top=(b|0)+"px");editBox.placeholder="Ch. name";isDefined(c)?editBox.value=c:editBox.value="";isDefined(d)?editBox.maxLength=d:editBox.maxLength=20;editBox.onblur=function(){editBox.style.display="none";editBox.valueFunc()};editBox.onkeydown=function(a){13==a.keyCode&&(hideKeyboard(),editBox.style.display="none",editBox.valueFunc());27==a.keyCode&&(editBox.valueFunc=
function(){},hideKeyboard(),editBox.style.display="none");log(a.keyCode);log(a.ctrlKey);65==a.keyCode&&a.ctrlKey&&(log("!"),a.target.select())};editBox.style.display="block";editBox.focus();editBox.setSelectionRange(0,9999)}editBox2=editLabel=editContainer=dimBack=null;
function initEditBox2(){dimBack=$("DIM_CAPTURE");dimBack.onclick=hideAllBox;editContainer=$("EDIT_CONTAINER");editLabel=$("EDIT_LABEL");editBox2=$("eb2");editOk=$("EDIT_OK");editOk.valueFunc=function(){log(editBox2.value)};editOk.value=lang.OK;editCancel=$("EDIT_CANCEL");editCancel.valueFunc=function(){log("CANCEL")};editCancel.value=lang.CANCEL;editBox2.onkeydown=function(a){13==a.keyCode&&(keyboard&&keyboard.saveCaret(),ignoreClearModal=!0,editOk.onclick&&editOk.onclick(),editBox2.blur(),keyboard&&
keyboard.close());27==a.keyCode&&(editCancel.onclick(),editOk.valueFunc=function(){},hideEditBox2());65==a.keyCode&&a.ctrlKey&&a.target.select()}}
function showEditBox2(a,b){$("DELAY_TIME").hide();editLabel.innerHTML=a;editContainer.style.display="block";dimBack.style.display="block";isDefined(b)&&null!=b?editBox2.value=b:editBox2.value="";editOk.onclick=function(){keyboard&&keyboard.saveCaret();editOk.valueFunc();hideEditBox2();keyboard&&keyboard.close()};editCancel.onclick=function(){editCancel.valueFunc();hideEditBox2();keyboard&&keyboard.close()};editBox2.setSelectionRange(0,9999);editBox2.focus()}
function hideEditBox2(){hideKeyboard();"block"!=confContainer.style.display&&(dimBack.style.display="none");editContainer.style.display="none"}function hideAllBox(){hideKeyboard();dimBack.style.display="none";editContainer.style.display="none";confContainer.style.display="none"}function hideKeyboard(){document.activeElement.blur()}
function hideKeyboard2(){setTimeout(function(){var a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("style","position:absolute; top: 0px; opacity: 0; -webkit-user-modify: read-write-plaintext-only; left:0px;");document.body.appendChild(a);a.onfocus=function(){setTimeout(function(){a.setAttribute("style","display:none;");setTimeout(function(){document.body.removeChild(a);document.body.focus()},14)},200)};a.focus()},50)}confCancel=confOk=confLabel=confContainer=null;
function initConfBox(){confContainer=$("CONF_CONTAINER");confLabel=$("CONF_LABEL");confOk=$("CONF_OK");confOk.valueFunc=function(){log("OK")};confOk.value=lang.OK;confCancel=$("CONF_CANCEL");confCancel.valueFunc=function(){log("CANCEL")};confCancel.value=lang.CANCEL}
function showConfBox(a){dimBack.style.display="block";confLabel.innerHTML=a;confContainer.style.display="block";confOk.onclick=function(){confOk.valueFunc();hideConfBox()};confCancel.onclick=function(){confCancel.valueFunc();hideConfBox()}}function hideConfBox(){"block"!=editContainer.style.display&&(dimBack.style.display="none");confContainer.style.display="none"}
var md5=function(a){function b(a,b){var c,d,e,f,g;e=a&2147483648;f=b&2147483648;c=a&1073741824;d=b&1073741824;g=(a&1073741823)+(b&1073741823);return c&d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f}function c(a,c,d,e,f,g,h){a=b(a,b(b(c&d|~c&e,f),h));return b(a<<g|a>>>32-g,c)}function d(a,c,d,e,f,g,h){a=b(a,b(b(c&e|d&~e,f),h));return b(a<<g|a>>>32-g,c)}function f(a,c,d,e,f,g,h){a=b(a,b(b(c^d^e,f),h));return b(a<<g|a>>>32-g,c)}function e(a,c,d,e,f,g,h){a=b(a,b(b(d^(c|~e),
f),h));return b(a<<g|a>>>32-g,c)}function g(a){var b="",c,d;for(d=0;3>=d;d++)c=a>>>8*d&255,c="0"+c.toString(16),b+=c.substr(c.length-2,2);return b}var h=[],l,m,n,p,r,q,t,v;a=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a);h=function(a){var b,c=a.length;b=c+
8;for(var d=16*((b-b%64)/64+1),e=Array(d-1),f,g=0;g<c;)b=(g-g%4)/4,f=g%4*8,e[b]|=a.charCodeAt(g)<<f,g++;b=(g-g%4)/4;e[b]|=128<<g%4*8;e[d-2]=c<<3;e[d-1]=c>>>29;return e}(a);r=1732584193;q=4023233417;t=2562383102;v=271733878;for(a=0;a<h.length;a+=16)l=r,m=q,n=t,p=v,r=c(r,q,t,v,h[a+0],7,3614090360),v=c(v,r,q,t,h[a+1],12,3905402710),t=c(t,v,r,q,h[a+2],17,606105819),q=c(q,t,v,r,h[a+3],22,3250441966),r=c(r,q,t,v,h[a+4],7,4118548399),v=c(v,r,q,t,h[a+5],12,1200080426),t=c(t,v,r,q,h[a+6],17,2821735955),q=
c(q,t,v,r,h[a+7],22,4249261313),r=c(r,q,t,v,h[a+8],7,1770035416),v=c(v,r,q,t,h[a+9],12,2336552879),t=c(t,v,r,q,h[a+10],17,4294925233),q=c(q,t,v,r,h[a+11],22,2304563134),r=c(r,q,t,v,h[a+12],7,1804603682),v=c(v,r,q,t,h[a+13],12,4254626195),t=c(t,v,r,q,h[a+14],17,2792965006),q=c(q,t,v,r,h[a+15],22,1236535329),r=d(r,q,t,v,h[a+1],5,4129170786),v=d(v,r,q,t,h[a+6],9,3225465664),t=d(t,v,r,q,h[a+11],14,643717713),q=d(q,t,v,r,h[a+0],20,3921069994),r=d(r,q,t,v,h[a+5],5,3593408605),v=d(v,r,q,t,h[a+10],9,38016083),
t=d(t,v,r,q,h[a+15],14,3634488961),q=d(q,t,v,r,h[a+4],20,3889429448),r=d(r,q,t,v,h[a+9],5,568446438),v=d(v,r,q,t,h[a+14],9,3275163606),t=d(t,v,r,q,h[a+3],14,4107603335),q=d(q,t,v,r,h[a+8],20,1163531501),r=d(r,q,t,v,h[a+13],5,2850285829),v=d(v,r,q,t,h[a+2],9,4243563512),t=d(t,v,r,q,h[a+7],14,1735328473),q=d(q,t,v,r,h[a+12],20,2368359562),r=f(r,q,t,v,h[a+5],4,4294588738),v=f(v,r,q,t,h[a+8],11,2272392833),t=f(t,v,r,q,h[a+11],16,1839030562),q=f(q,t,v,r,h[a+14],23,4259657740),r=f(r,q,t,v,h[a+1],4,2763975236),
v=f(v,r,q,t,h[a+4],11,1272893353),t=f(t,v,r,q,h[a+7],16,4139469664),q=f(q,t,v,r,h[a+10],23,3200236656),r=f(r,q,t,v,h[a+13],4,681279174),v=f(v,r,q,t,h[a+0],11,3936430074),t=f(t,v,r,q,h[a+3],16,3572445317),q=f(q,t,v,r,h[a+6],23,76029189),r=f(r,q,t,v,h[a+9],4,3654602809),v=f(v,r,q,t,h[a+12],11,3873151461),t=f(t,v,r,q,h[a+15],16,530742520),q=f(q,t,v,r,h[a+2],23,3299628645),r=e(r,q,t,v,h[a+0],6,4096336452),v=e(v,r,q,t,h[a+7],10,1126891415),t=e(t,v,r,q,h[a+14],15,2878612391),q=e(q,t,v,r,h[a+5],21,4237533241),
r=e(r,q,t,v,h[a+12],6,1700485571),v=e(v,r,q,t,h[a+3],10,2399980690),t=e(t,v,r,q,h[a+10],15,4293915773),q=e(q,t,v,r,h[a+1],21,2240044497),r=e(r,q,t,v,h[a+8],6,1873313359),v=e(v,r,q,t,h[a+15],10,4264355552),t=e(t,v,r,q,h[a+6],15,2734768916),q=e(q,t,v,r,h[a+13],21,1309151649),r=e(r,q,t,v,h[a+4],6,4149444226),v=e(v,r,q,t,h[a+11],10,3174756917),t=e(t,v,r,q,h[a+2],15,718787259),q=e(q,t,v,r,h[a+9],21,3951481745),r=b(r,l),q=b(q,m),t=b(t,n),v=b(v,p);return(g(r)+g(q)+g(t)+g(v)).toLowerCase()};
function qsTr(a){return a}langBase={};
langBase.en={lang:"ENGLISH",APPLY:qsTr("APPLY"),ASSIGN_SUB_GROUP:qsTr("ASSIGN SUB GROUP {0}"),ATTACK:qsTr("ATTACK"),AUX:qsTr("AUX"),AUX_EQ:qsTr("AUX EQ"),AUX_MASTERS:qsTr("AUX MASTERS"),AUX_MASTER_LEVELS:qsTr("AUX MASTER LEVELS"),AUX_SENDS_FOR:qsTr("AUX SENDS: {0}"),BANKS:qsTr("BANKS"),BASS_GAIN:qsTr("BASS GAIN"),BYPASS:qsTr("BYPASS"),CH:qsTr("CH"),CHANNEL_SAFES:qsTr("CHANNEL SAFES"),FX_SENDS_X:qsTr("FX SENDS: {0}"),CHANNEL_PRESETS:qsTr("CHANNEL PRESETS"),CHORUS:qsTr("CHORUS"),CHORUS_FX_GLOBAL:qsTr("CHORUS FX (GLOBAL)"),
CLEAR_SOLO:qsTr("CLEAR SOLO"),CONFIG:qsTr("CONFIG"),CONFIGURATION:qsTr("CONFIGURATION"),CONNECTED_DEVICE_NAME:qsTr("CONNECTED DEVICE NAME"),COPY_SETTINGS:qsTr("COPY SETTINGS"),CURRENT_SHOW:qsTr("CURRENT SHOW"),DELAY:qsTr("DELAY"),DELAY_FX_GLOBAL:qsTr("DELAY FX (GLOBAL)"),DELAY_LENGTH:qsTr("DELAY LENGTH"),DELETE:qsTr("DELETE"),DISABLE_STEREO_LINK:qsTr("DISABLE STEREO LINK"),DOCUMENTATION:qsTr("DOCUMENTATION"),DYN:qsTr("DYN"),EDIT:qsTr("EDIT"),EQ:qsTr("EQ"),EXPORT:qsTr("EXPORT"),FAV_SHOW:qsTr("FAVOURITE SHOW"),
FEEDBACK:qsTr("FEEDBACK"),FEEDBACK_AMOUNT:qsTr("FEEDBACK AMOUNT"),FREQ:qsTr("FREQ"),FX:qsTr("FX"),FX_MODE_DEFAULT:qsTr("FX MODE DEFAULT"),FX_RETURNS:qsTr("FX RETURNS"),FX_RETURNS_TO_AUX:qsTr("FX RETURNS TO {0}"),GAIN:qsTr("GAIN"),GROUP:qsTr("GROUP"),HELP:qsTr("HELP"),HF_DAMPING:qsTr("HF DAMPING"),HIGHPASS_FILTER:qsTr("HIGHPASS FILTER"),IMPORT:qsTr("IMPORT"),INPUT:qsTr("INPUT"),LED:qsTr("LED"),LENGTH_SUBDIVISION:qsTr("LENGTH SUBDIVISION"),LOAD:qsTr("LOAD"),LOAD_PRESET:qsTr("LOAD PRESET"),LOCK:qsTr("LOCK"),
LOCKED:qsTr("LOCKED"),LOWPASS_FILTER:qsTr("LOWPASS FILTER"),MANUAL:qsTr("MANUAL"),MASTER:qsTr("MASTER"),MASTER_EQ:qsTr("MASTER EQ"),MEDIA:qsTr("MEDIA"),MEDIA_FADER_BEFORE_CH1:qsTr("MEDIA FADER BEFORE CH1"),MIX_GAIN:qsTr("MIX GAIN"),MUTE:qsTr("MUTE"),MUTE_ALL:qsTr("MUTE ALL"),MUTE_FX:qsTr("MUTE FX"),MUTE_GROUP_BUTTON_ASSIGN:qsTr("MUTE GROUP BUTTON ASSIGN"),MUTE_GROUPS:qsTr("MUTE GROUPS"),MUTES:qsTr("MUTES"),NETWORK:qsTr("NETWORK"),NEW:qsTr("NEW"),NEW_SNAPSHOT:qsTr("NEW SNAPSHOT"),NEXT_SNAPSHOT:qsTr("NEXT SNAPSHOT"),
NORM:qsTr("NORM"),OFF:qsTr("OFF"),ON:qsTr("ON"),ONLINE_SUPPORT:qsTr("ONLINE SUPPORT"),PASTE_SETTINGS:qsTr("PASTE SETTINGS"),PERMISSIONS:qsTr("PERMISSIONS"),PERMIT:qsTr("PERMIT"),PHANTOM:qsTr("PHANTOM"),PLAY:qsTr("PLAY"),PLAYER:qsTr("PLAYER"),PLAYLIST:qsTr("PLAYLIST"),PRESETS:qsTr("PRESETS"),RATIO:qsTr("RATIO"),RECORD:qsTr("RECORD"),RELEASE:qsTr("RELEASE"),RENAME:qsTr("RENAME"),RESET:qsTr("RESET"),RESET_CHANNEL:qsTr("RESET CHANNEL"),REVERB:qsTr("REVERB"),REVERB_TIME:qsTr("REVERB TIME"),REVERB_FX_GLOBAL:qsTr("REVERB FX (GLOBAL)"),
ROOM:qsTr("ROOM"),SAVE:qsTr("SAVE"),SAVE_AS:qsTr("SAVE AS"),SEND:qsTr("SEND"),SENDS:qsTr("SENDS"),SG:qsTr("SG"),SHOWS:qsTr("SHOWS"),SNAPSHOTS:qsTr("SNAPSHOTS"),SOCIAL:qsTr("SOCIAL"),SOLO:qsTr("SOLO"),SPEED:qsTr("SPEED"),STEREO_LINK:qsTr("STEREO LINK"),SUB_GROUP_FADER_ASSIGN:qsTr("SUB GROUP FADER ASSIGN"),SUB_GROUP_SPREAD:qsTr("SUB GROUP SPREAD"),SUB_GROUPS:qsTr("SUB GROUPS"),SUBS:qsTr("SUBS"),TAP_TEMPO:qsTr("TAP TEMPO"),THIN:qsTr("THIN"),TOTAL_VIEW:qsTr("TOTAL VIEW"),UNASSIGN_SUB_GROUP:qsTr("UNASSIGN SUB GROUP {0}"),
UPDATE_CURRENT_SNAPSHOT:qsTr("UPDATE CURRENT SNAPSHOT"),USB_MEDIA_FILES:qsTr("USB MEDIA FILES"),VIEW_GROUP_BUTTON_ASSIGN:qsTr("VIEW GROUP BUTTON ASSIGN"),VIEW_GROUPS:qsTr("VIEW GROUPS"),VIEWS:qsTr("VIEWS"),SHOW_ALL_CHANNELS:qsTr("SHOW ALL CHANNELS"),PLACE_AFTER_INPUTS:qsTr("PLACE AFTER INPUTS"),PLACE_BEFORE_INPUTS:qsTr("PLACE BEFORE INPUTS"),GATE:qsTr("GATE"),MUTE_FX_CANCEL:qsTr("MUTE FX CANCEL"),MUTE_ALL_CANCEL:qsTr("MUTE ALL CANCEL"),MUTEGROUP_1_ACTIVATED:qsTr("MUTE GROUP {0} ON"),MUTEGROUP_1_DEACTIVATED:qsTr("MUTE GROUP {0} OFF"),
NO_SNAPSHOT:qsTr("NO SNAPSHOT"),LOAD_NEXT_SNAPSHOT:qsTr("LOAD NEXT SNAPSHOT"),CHANNEL_EQ_PRESETS:qsTr("CHANNEL EQ PRESETS"),AUX_EQ_PRESETS:qsTr("AUX EQ PRESETS"),MASTER_EQ_PRESETS:qsTr("MASTER EQ PRESETS"),CHANNEL_DYN_PRESETS:qsTr("CHANNEL DYN PRESETS"),AUX_DYN_PRESETS:qsTr("AUX DYN PRESETS"),MASTER_DYN_PRESETS:qsTr("MASTER DYN PRESETS"),DELAY_FX_PRESETS:qsTr("DELAY FX PRESETS"),CHORUS_FX_PRESETS:qsTr("CHORUS FX PRESETS"),REVERB_FX_PRESETS:qsTr("REVERB FX PRESETS"),ROOM_PRESETS:qsTr("ROOM PRESETS"),
DIGITECH_PRESETS:qsTr("DIGITECH PRESETS"),UX_PRESETS:qsTr("OPTIONS PRESETS (LOCAL)"),FILES:qsTr("FILES"),CONNECTING:qsTr("Connecting..."),KEEP_TAPPING:qsTr("KEEP TAPPING..."),PLAYLISTS:qsTr("PLAYLISTS"),PRESET_LOADED:qsTr("PRESET<br>{0}<br>LOADED"),NO_PAN_ON_MONO_AUX:qsTr("NO PAN<br>ON MONO AUX"),PARAM_GLOBAL:qsTr("{0} PARAMETERS (GLOBAL)"),CLEAR_ALL_SOLOS:qsTr("CLEAR ALL SOLOS"),POST:qsTr("POST"),PRE:qsTr("PRE"),SET_ALL_CHANNELS_TO:qsTr('SET ALL CHANNELS TO "{0}" ?'),SAVED:qsTr("SAVED"),REPLACE_PRESET:qsTr('REPLACE PRESET "{0}"?'),
REPLACE_SNAPSHOT:qsTr('REPLACE SNAPSHOT "{0}"?'),FACTORY:qsTr("FACTORY"),USER:qsTr("USER"),DELETE_PRESET:qsTr('DELETE PRESET "{0}" ?'),BPM:qsTr("BPM"),OUT_OF_RANGE:qsTr("OUT OF RANGE"),ERROR:qsTr("ERROR"),ENTER_BPM:qsTr("ENTER BPM"),NO_ASSIGNED_SUBGROUP:qsTr("NO ASSIGNED CHANNELS IN<br>SUB GROUP {0}"),NO_ASSIGNED_VIEWGROUP:qsTr("NO ASSIGNED CHANNELS IN<br>VIEW GROUP {0}"),NO_ASSIGNED_MG:qsTr("NO ASSIGNED CHANNELS IN<br>MUTE GROUP {0}"),SAVE_TO_SHOW:qsTr("SAVE TO SHOW"),DASHBOARD:qsTr("DASHBOARD"),
INCOMPATIBLE_CHANNEL_TYPE:qsTr("INCOMPATIBLE CHANNEL TYPE"),MIXER_RESET:qsTr("MIXER RESET"),SAVE_SHOW_WITH_NAME:qsTr("SAVE SHOW WITH NAME:"),NEW_SHOW_NAME:qsTr("NEW SHOW NAME:"),SHOW_ALREADY_EXISTS:qsTr("SHOW ALREADY EXISTS"),DELETE_SHOW:qsTr('DELETE SHOW "{0}"?'),SAVE_SNAPSHOT_WITH_NAME:qsTr("SAVE SNAPSHOT WITH NAME:"),NEW_SNAPSHOT_NAME:qsTr("NEW SNAPSHOT NAME:"),DELETE_SNAPSHOT:qsTr('DELETE SNAPSHOT "{0}"?'),LOAD_THE_INITIAL_MIXER_STATE:qsTr("LOAD THE INITIAL MIXER STATE?"),ERR_DELETESHOW:qsTr("ERROR DELETING SHOW."),
ERR_CREATESHOW:qsTr("ERROR CREATING SHOW."),ERR_LOADSHOW:qsTr("ERROR LOADING SHOW."),ERR_SAVESHOW:qsTr("ERROR SAVING SHOW PARAMETERS."),ERR_RENAMESHOW:qsTr("ERROR RENAMING SHOW."),ERR_SAVEINIT:qsTr("CANNOT RESAVE * INIT * SNAPSHOT."),ERR_SAVESNAPSHOT:qsTr("ERROR SAVING SNAPSHOT."),ERR_LOADSNAPSHOT:qsTr("ERROR LOADING SNAPSHOT."),ERR_DELETESNAPSHOT:qsTr("ERROR DELETING SNAPSHOT."),ERR_RENAMEINIT:qsTr("CANNOT RENAME * INIT * SNAPSHOT."),ERR_RENAMESNAPSHOT:qsTr("ERROR RENAMING SNAPSHOT."),ERR_DELETEPRESET:qsTr("ERROR DELETING PRESET."),
ERR_WRITEPRESET:qsTr("ERROR WRITING PRESET."),ERR_RENAMEPRESET:qsTr("ERROR RENAMING PRESET."),SNAPLOAD:qsTr("{0}"),INITIAL_VALUES_LOADED:qsTr("INITIAL VALUES LOADED."),MIX:qsTr("MIX"),AUX_SENDS:qsTr("AUX SENDS"),AUX_SENDS_X:qsTr("AUX SENDS: {0}"),FX_SENDS:qsTr("FX SENDS"),FX_EDIT:qsTr("FX EDIT"),GROUPS:qsTr("GROUPS"),THRESHOLD:qsTr("THRESHOLD"),THRESH:qsTr("THRESH"),REVERB_SEND:qsTr("REVERB SEND"),CHORUS_SEND:qsTr("CHORUS SEND"),DELAY_SEND:qsTr("DELAY SEND"),ROOM_SEND:qsTr("ROOM SEND"),HPF_FREQ:qsTr("HPF FREQ"),
NOTCH_FREQ:qsTr("NOTCH FREQ"),METERS:qsTr("METERS"),OUT:qsTr("OUT"),IN:qsTr("IN"),ME:qsTr("ME"),BAND:qsTr("BAND"),SETTINGS:qsTr("SETTINGS"),MORE_ME:qsTr("MORE ME"),DEMO_VERSION:qsTr("DEMO VERSION"),LINE_IN:qsTr("LINE IN"),LINE:qsTr("LINE"),MODE:qsTr("MODE"),CHANNEL:qsTr("CHANNEL"),SUPPORT:qsTr("SUPPORT"),RENAME_CHANNEL:qsTr("RENAME CHANNEL ({0})"),CENTER:qsTr("CENTER"),SETUP:qsTr("SETUP"),JUMP_TO:qsTr("JUMP TO"),FUNCTIONS:qsTr("FUNCTIONS"),BACK:qsTr("BACK"),SAVE_PRESET_WITH_NAME:qsTr("SAVE PRESET WITH NAME:"),
RENAME_PRESET:qsTr("RENAME PRESET:"),NO_ACTIVE_SHOW:qsTr("NO ACTIVE SHOW"),RTA:qsTr("RTA"),DEESSER:qsTr("DE-ESSER"),INPUTS:qsTr("INPUTS"),ARE_YOU_SURE:qsTr("ARE YOU SURE?"),HI_Z:qsTr("HI-Z"),ABOUT:qsTr("ABOUT"),LIVE:qsTr("LIVE"),FIXED:qsTr("FIXED"),MUTE_GROUP_X:qsTr("MUTE GROUP {0}"),TAP_X_BPM:qsTr("TAP {0} BPM"),MOUNTCHANGED:qsTr("MOUNT CHANGED"),MOUNT:qsTr("USB INSERTED"),UNMOUNT:qsTr("USB REMOVED"),DISABLED:qsTr("DISABLED"),ENABLED:qsTr("ENABLED"),SINGLE:qsTr("SINGLE"),MULTIPLE:qsTr("MULTIPLE"),
LOCAL:qsTr("LOCAL"),GLOBAL:qsTr("GLOBAL"),LEVEL:qsTr("LEVEL"),TREBLE:qsTr("TREBLE"),MID:qsTr("MID"),BASS:qsTr("BASS"),DB:qsTr("dB"),MS:qsTr("ms"),HZ:qsTr("hz"),NO_CONTROLS_FOR_THIS_CHANNEL:qsTr("NO CONTROLS FOR THIS CHANNEL"),UNASSIGN_ME:qsTr("UNASSIGN ME"),ASSIGN_ME:qsTr("ASSIGN ME"),UNASSIGN_MY_OUT:qsTr("UNASSIGN 'MY OUT'"),ASSIGN_MY_OUT:qsTr("ASSIGN 'MY OUT'"),NO_SEND_LEVELS:qsTr("NO SEND LEVELS"),OK:qsTr("OK"),CANCEL:qsTr("CANCEL"),FULL:qsTr("FULL"),RELOAD_UI:qsTr("RELOAD UI FOR CHANGES TO TAKE EFFECT?"),
BAD_BROWSER:qsTr("THIS BROWSER DOESN'T SUPPORT WEBSOCKETS. PLEASE USE A DIFFERENT BROWSER."),AFS_FIXED_INFO:qsTr("Feedback measurement mode. Please ensure that<br>no other sounds are coming into the inputs except<br>the microphone-speaker feedback tone."),RECORDINGS:qsTr("Recordings"),READING:qsTr("Reading..."),FIRMWARE_FOUND:qsTr("A firmware update image was found on the plugged USB device.<br><br>Perform a mixer update?"),FIRMWARE_UPDATED:qsTr("Update succeeded.<br>Please turn the unit off for 10 seconds, power back on and reload this page.<br>Note, your device's wireless might need manual reconnection."),
MSGBTN_UPDATE:qsTr("Update"),MSGBTN_CANCEL:qsTr("Cancel"),MSGBTN_OK:qsTr("Ok"),UPDATE_ALREADY:qsTr("The update has been attempted once already.<br><br>Please reboot the device to resume / try again."),UPDATE_COMPLETED:qsTr("System updated. Please power cycle the device and reload this page for the update to take effect."),UPDATE_ERROR:qsTr("Error performing update. "),REC_ERRSEQ:qsTr("Recorder: Error writing sequential file to the USB stick (out of space?)."),REC_ERRWRITE:qsTr("Recorder: Error writing USB stick (out of space?)."),
REC_ERRNOSTICK:qsTr("Recorder: USB stick is not inserted to the RECORD slot."),REC_ERRNOACCESS:qsTr("Recorder: Unable to access USB stick for writing."),REC_ERRCREATE:qsTr("Recorder: Unable to create a file on the USB stick."),SHOWEXP_NOTFOUND:qsTr("Export/Import: Item not found"),SHOWEXP_USBNOTFOUND:qsTr("USB stick not found"),SHOWEXP_WRITEERR:qsTr("Export failed: Unable to access stick for writing"),SHOWEXP_INTREADERR:qsTr("Export failed: Error reading the source folder."),SHOWEXP_EXPFAILED:qsTr("Some files failed to export."),
SHOWEXP_SUCCESS:qsTr("EXPORT SUCCESSFUL"),SHOWIMP_FAILED:qsTr("Some files failed to import."),SHOWIMP_SUCCESS:qsTr("IMPORT SUCCESSFUL"),SHOWIMP_NOTFOUND:qsTr("IMPORT ERROR: SOURCE NOT FOUND"),SHOWIMP_FILNOTFOUND:qsTr("NO RELEVANT FILES FOUND ON THE USB"),IMPORT_SHOW_FROM_USB:qsTr("IMPORT SHOW FROM USB"),NO_SHOW_SELECTED:qsTr("NO SHOW SELECTED"),EXPORT_SHOW_TO_USB:qsTr("EXPORT SHOW TO USB: {0}"),IMPORT_SHOW:qsTr("IMPORT SHOW"),EXPORT_SHOW:qsTr("EXPORT SHOW"),LANGUAGE:qsTr("LANGUAGE"),NO_ME_CHANNELS:qsTr("NO 'ME' CHANNELS"),
NO_AUX_OUT:qsTr("NO AUX OUT"),PADS:qsTr("PADS"),CUE:qsTr("CUE"),AUTO:qsTr("AUTO"),FRAME_RATE:qsTr("FRAME RATE"),DISABLE_RETINA:qsTr("DISABLE RETINA"),DISABLE_RESCALING:qsTr("DISABLE RESCALING"),GUI_PERFORMANCE:qsTr("GUI PERFORMANCE"),HEADPHONES_OUT:qsTr("HEADPHONES OUT"),BUTTON_FUNCTION:qsTr("BUTTON FUNCTION"),KINETIC_SCROLL:qsTr("KINETIC SCROLL"),FADER_GLOW:qsTr("FADER GLOW"),DISABLE_LED_METERS:qsTr("DISABLE LED METERS"),MASTER_LOCK:qsTr("MASTER LOCK"),HIDE_COMP_GATE:qsTr("HIDE COMP/GATE"),HIDE_DB_MARKS:qsTr("HIDE DB MARKS"),
PIN_SO_FOR_AUX_FX_SENDS:qsTr("PIN SO FOR AUX/FX SENDS"),PIN_SLIDEOUT_IN_MIX_MODE:qsTr("PIN SLIDEOUT IN MIX MODE"),SOLO_MODE:qsTr("SOLO MODE"),SOLO_ROUTING:qsTr("SOLO ROUTING"),HEADPHONES:qsTr("HEADPHONES"),HP:qsTr("HP"),AUTOCLOSE_SLIDEOUT:qsTr("AUTOCLOSE SLIDEOUT"),METER_QUANTISATION:qsTr("METER QUANTISATION"),RECORD_MODE:qsTr("2CH RECORD FORMAT"),MULTITRACK_MODE:qsTr("MULTITRACK FORMAT"),MIXER_SCROLLING:qsTr("MIXER SCROLLING"),DIM_LED_METERS:qsTr("DIM LED METERS"),UTILITY:qsTr("UTILITY"),BIT_32:qsTr("32 bit"),
BIT_24:qsTr("24 bit"),BIT_16:qsTr("16 bit"),ONE_FINGER:qsTr("1 FINGER"),TWO_FINGERS:qsTr("2 FINGERS"),IMPORT_ALL_PRESETS:qsTr("IMPORT ALL PRESETS"),EXPORT_ALL_PRESETS:qsTr("EXPORT ALL PRESETS"),NO_CONNECTION_TO_MIXER:qsTr("NO CONNECTION TO MIXER"),OFFLINE:qsTr("OFFLINE"),VERSION:qsTr("VERSION"),COPY_TO_CLIPBOARD:qsTr("COPY TO CLIPBOARD"),COPYRIGHT_MSG:qsTr("All third party marks are the trademarks of their respective owners. These marks are used to identify<br>product sounds that were reviewed in the creation of this product and use of these marks do not im-<br>ply an affiliation, endorsement or association with Harman International Industries, Incorporated."),
FILTER:qsTr("FILTER"),DISPLAY:qsTr("DISPLAY"),SENSITIVITY:qsTr("SENSITIVITY"),CLEAR_FIXED:qsTr("CLEAR FIXED"),CLEAR_ALL:qsTr("CLEAR ALL"),CLEAR_LIVE:qsTr("CLEAR LIVE"),NAME_SSID:qsTr("NAME SSID"),SUBNET_MASK:qsTr("SUBNET MASK"),WIRELESS_NETWORK:qsTr("WIRELESS NETWORK"),SECURITY_OPTIONS:qsTr("SECURITY OPTIONS"),LAN_IP_ADDRESS:qsTr("LAN IP ADDRESS"),UP:qsTr("UP"),DOWN:qsTr("DOWN"),ETHERNET:qsTr("ETHERNET"),HOTSPOT:qsTr("HOTSPOT"),CLOSE:qsTr("CLOSE"),COPY_MIX:qsTr("COPY MIX"),NO_CONNECTION:qsTr("NO CONNECTION"),
NO_CURRENT_SNAPSHOT:qsTr("NO CURRENT SNAPSHOT"),PATTERNED_BACKGROUND:qsTr("PATTERNED BACKGROUND"),ROUTING:qsTr("ROUTING"),INPUT_SOURCE:qsTr("INPUT SOURCE"),HARDWARE:qsTr("HARDWARE"),USB:qsTr("USB"),MULTI_TRACK:qsTr("MULTI-TRACK"),OUTPUT_DESTINATION:qsTr("OUTPUT DESTINATION"),L:qsTr("L"),R:qsTr("R"),RECORDING_DROPOUT:qsTr("RECORDING DROPOUT"),USB_REC_TOO_SLOW:qsTr("USB REC. TOO SLOW"),USB_REC_BUFFER:qsTr("USB REC. BUFFER"),RECORDER_IS_BUSY:qsTr("RECORDER IS BUSY..."),IMPORT_USER_CONFIG:qsTr("IMPORT USER CONFIG"),
EXPORT_USER_CONFIG:qsTr("EXPORT USER CONFIG"),OVERVIEW:qsTr("OVERVIEW"),CHANNEL_SOURCE:qsTr("CHANNEL SOURCE"),CHANNEL_OUTPUT_DESTINATION:qsTr("CHANNEL OUTPUT DESTINATION"),MISC:qsTr("MISC"),DISABLE_VU_INPUT_LEVEL:qsTr("DISABLE VU INPUT LEVEL"),DISABLE_VU_PEAK:qsTr("DISABLE VU PEAK"),SOLO_TYPE:qsTr("SOLO TYPE"),AFL:qsTr("AFL"),PFL:qsTr("PFL"),WRONG_VALUE:qsTr("WRONG VALUE"),SYNTAX_FPS_ENTER:qsTr("SYNTAX: frames/fps"),INPUT_DELAY:qsTr("INPUT DELAY"),OUTPUT_DELAY:qsTr("OUTPUT DELAY"),PEDAL_FUNCTION:qsTr("PEDAL FUNCTION"),
CONFIG_WARNING:qsTr("Warning: only the visual/graphics settings specific to this device will be stored.<br>These settings do not affect the operation of the mixer."),SET_TO_ZERO_DB:qsTr("SET TO ZERO DB"),SET_OUTPUT_DELAY:qsTr("SET OUTPUT DELAY"),SET_OUTPUT_DELAY_LEFT:qsTr("LEFT DELAY"),SET_OUTPUT_DELAY_RIGHT:qsTr("RIGHT DELAY"),MASTER_PRESETS:qsTr("MASTER PRESETS"),LEFT:qsTr("LEFT"),RIGHT:qsTr("RIGHT"),SHORTCUTS:qsTr("SHORTCUTS"),SLAVE:qsTr("SLAVE"),SUB:qsTr("SUB"),METERS_UNIT:qsTr("meters"),SAMPLES:qsTr("samples"),
SMPL:qsTr("smpl"),FT:qsTr("ft"),FPS:qsTr("fps"),FRAMES:qsTr("frames"),EXCEEDS_MAXIMUM_DELAY:qsTr("EXCEEDS MAXIMUM DELAY"),TOGGLE_PLAY:qsTr("TOGGLE PLAY"),TOGGLE_REC:qsTr("TOGGLE REC"),NONE:qsTr("NONE"),ISOLATION:qsTr("ISOLATION"),MIC_GAIN:qsTr("MIC GAIN"),PHASE:qsTr("PHASE"),CHANNELS:qsTr("CHANNELS"),BUSSES:qsTr("BUSES"),MATRICES:qsTr("MATRICES"),MATRIX:qsTr("MATRIX"),HOLD:qsTr("HOLD"),COMP:qsTr("COMP"),DEPTH:qsTr("DEPTH"),ISOLATE:qsTr("ISOLATE"),PATCHING:qsTr("PATCHING"),DETUNE:qsTr("DETUNE"),DENSITY:qsTr("DENSITY"),
HPF:qsTr("HPF"),PANNING:qsTr("PANNING"),COMPRESSOR:qsTr("COMPRESSOR"),GEQ:qsTr("GEQ"),CASCADE:qsTr("CASCADE"),CASCADE_MASTER:qsTr("CASCADE MASTER"),SOUNDCHECK:qsTr("SOUNDCHECK"),SOUNDCHECK_ASSIGN:qsTr("SOUNDCHECK ASSIGN"),DIRECT_OUT:qsTr("DIRECT OUT"),IOSYS:qsTr("IOSYS"),LOCATE:qsTr("LOCATE"),ENABLE:qsTr("ENABLE"),DISABLE:qsTr("DISABLE"),NAME:qsTr("NAME"),EMPTY:qsTr("EMPTY"),SESSIONS:qsTr("SESSIONS"),MIXER_PATCH:qsTr("MIXER PATCH"),NO_PATCH:qsTr("NO PATCH"),SPACE_REMAINING:qsTr("SPACE REMAINING"),
SD:qsTr("SD"),EDIT_CHANNEL:qsTr("EDIT CHANNEL"),ETH:qsTr("ETH"),SD_MTK:qsTr("SD MTK"),RESET_ALL:qsTr("RESET ALL"),NOTCH_F:qsTr("NOTCH F."),DIRECT_OUTPUT:qsTr("DIRECT OUTPUT"),FADER_POSITION:qsTr("FADER POSITION"),MASTER_CHANNEL_RANGE:qsTr("MASTER CHANNEL RANGE"),IOSYS_PRESET_LOADING:qsTr("IOSYS PRESET LOADING"),HEADPHONE_SIGNAL_DIRECTION:qsTr("HP CHANNELS"),MTX:qsTr("MTX"),SWITCH_TO_MATRIX:qsTr("SWITCH TO MATRIX"),SWITCH_TO_AUX:qsTr("SWITCH TO AUX"),GATE_PRESETS:qsTr("GATE PRESETS"),AFS_PRESETS:qsTr("AFS 2 PRESETS"),
PRE_PROCESSING:qsTr("PRE PROCESSING"),POST_PROCESSING:qsTr("POST PROCESSING"),ADDITIONAL_CHANNEL_DESTINATION:qsTr("DIRECT OUTPUT"),NO_PAN_ON_MONO_MATRIX:qsTr("NO PAN<br>ON MONO MATRIX"),NO_USB_DEVICE_SELECTED:qsTr("NO USB DEVICE SELECTED"),GLOBAL_PRE_FADE_AUX_SEND_POINT:qsTr("GLOBAL AUX SEND POINT"),SHUFFLE:qsTr("SHUFFLE"),EZ_EQ:qsTr("EZ EQ"),MOREME_PORTRAIT_MODE:qsTr("MOREME PORTRAIT MODE"),RESET_LOCAL_SETTINGS:qsTr("RESET LOCAL SETTINGS"),SYNC_ID:qsTr("SYNC ID"),SYNC_SELECTED_CH:qsTr("SYNC SELECTED CHANNEL"),
ACCESS_LIMITING:qsTr("ACCESS LIMITING"),PASSWORD:qsTr("PASSWORD"),ACCESS:qsTr("ACCESS"),MONITOR_ACCESS_LIMIT:qsTr("ACCESS LIMIT (LOCAL)"),ALLOW_ACCESS_FOR:qsTr("ALLOW ACCESS FOR"),ALLOW_CLIENT_ACCESS_FOR:qsTr("ALLOW CLIENT ACCESS FOR"),LOCAL_AUX_CONTROL:qsTr("LOCAL AUX CONTROL (SOFT ACCESS ENABLER)"),MASTER_VOLUME:qsTr("MASTER VOLUME"),ACCOUNT:qsTr("ACCOUNT"),MASTER_PASSWORD_PROTECTION:qsTr("MASTER PASSWORD PROTECTION (GLOBAL)"),LOG_IN:qsTr("LOG IN"),LOG_OUT:qsTr("LOG OUT"),AUX_LEVELS:qsTr("AUX LEVELS"),
AUX_PROCESSING:qsTr("AUX PROCESSING"),MIX_LEVELS:qsTr("MIX LEVELS"),MIX_PROCESSING:qsTr("MIX PROCESSING"),MASTER_LEVEL:qsTr("MASTER LEVEL"),MASTER_PROCESSING:qsTr("MASTER PROCESSING"),GLOBAL_SETTINGS:qsTr("GLOBAL SETTINGS"),LOCAL_SETTINGS:qsTr("LOCAL SETTINGS"),SET_MASTER_PASS:qsTr("SET MASTER PASSWORD"),ENTER_PASS_TO_UNLOCK:qsTr("ENTER PASSWORD TO UNLOCK"),ENTER_PASS:qsTr("ENTER PASSWORD"),WRONG_PASSWORD:qsTr("WRONG PASSWORD"),UNLOCKED:qsTr("UNLOCKED"),LOGGED_IN:qsTr("LOGGED IN"),LOGGED_OUT:qsTr("LOGGED OUT"),
OVERRIDDEN_BY_WIFI:qsTr("OVERRIDDEN BY WIFI"),MTK_PLAY:qsTr("MTK PLAY"),MTK_RECORD:qsTr("MTK RECORD"),NEW_VALUE:qsTr("NEW VALUE"),USB_A:qsTr("USB-A"),USB_B:qsTr("USB-DAW"),M_USB_A:qsTr("M-USB-A"),M_USB_B:qsTr("M-USB-DAW"),S_USB_A:qsTr("S-USB-A"),S_USB_B:qsTr("S-USB-DAW"),M_LOCAL:qsTr("M-LOCAL"),S_LOCAL:qsTr("S-LOCAL"),SLOT:qsTr("SLOT"),INSERT_OPTION:qsTr("INSERT USB-DAW"),TWO_TRACK_USB:qsTr("2-TRACK USB"),MTK_USB_RECORD:qsTr("MTK USB RECORD"),MULTITRACK:qsTr("MULTITRACK"),MULTITRACK_CONFIG:qsTr("MULTITRK CONFIG"),
MTK_USB_PLAYBACK:qsTr("MTK USB PLAYBACK"),PREVIOUS_SNAPSHOT:qsTr("PREVIOUS SNAPSHOT"),AFS_SETTINGS:qsTr("AFS SETTINGS"),MATRIX_MASTER_PANNING:qsTr("MTX MASTER PANNING"),MATRIX_CONTRIB:qsTr("MTX CONTRIB."),AUX_CONTRIB:qsTr("AUX CONTRIB."),CONTRIB_PANNING:qsTr("CONTRIB. PANNING"),CONTRIB_BUS_POINTS:qsTr("CONTRIB. BUS POINTS"),DIGITECH:qsTr("DIGITECH"),FX_SEND_LEVELS:qsTr("FX SEND LEVELS"),AUX_MTX_SEND_LEVELS:qsTr("AUX/MTX SEND LEVELS"),BALANCE_PANNING:qsTr("BALANCE (PANNING)"),BALANCE:qsTr("BALANCE"),
VCA:qsTr("VCA"),SLOPE:qsTr("SLOPE"),ASSIGN_VCA:qsTr("ASSIGN VCA"),UNASSIGN_VCA:qsTr("UNASSIGN VCA"),AUX_SEND_SOURCE:qsTr("AUX SEND SOURCE"),HOLD_FADER_FOR_FINE_TUNING:qsTr("HOLD FADER FOR FINE TUNING"),AUX_SEND_MUTE_INHERITANCE:qsTr("AUX SEND MUTE INHERITANCE"),AUX_SEND_MUTE_INHERITANCE2:qsTr("AUX SEND MUTE INH"),MIXER_CHANNEL:qsTr("MIXER CHANNEL"),GROUP_NAME:qsTr("GROUP NAME"),PATCH_1_1:qsTr("PATCH 1:1"),ACTIVATE_SOUNDCHECK:qsTr("ACTIVATE SOUNDCHECK"),HP_VOLUME:qsTr("HEADPHONE {0} VOLUME"),SOLO_LEVEL:qsTr("SOLO LEVEL"),
CURRENT_VALUES_WILL_BE_LOST:qsTr("CURRENT VALUES WILL BE LOST, CONTINUE?"),VCA_GROUP_BUTTON_ASSIGN:qsTr("VCA GROUP BUTTON ASSIGN"),COPY_MIX_TO_AUX:qsTr("COPY MIX TO AUX"),MASTERS:qsTr("MASTERS"),FX_MASTERS:qsTr("FX MASTERS"),BIGGER_SLIDEOUT:qsTr("BIGGER SLIDEOUT"),LOGIN:qsTr("LOGIN"),DELETE_SESSION:qsTr("DELETE SESSION"),VCA_GROUP_SPREAD:qsTr("VCA GROUP SPREAD"),VCA_SPREAD:qsTr("VCA SPREAD"),RECORD_CHANNELS:qsTr("RECORD CHANNELS"),SELECT_ALL:qsTr("SELECT ALL"),MAXIMUM_NUMBER_OF_RECORD_SLOTS_USED:qsTr("MAXIMUM NUMBER OF RECORD SLOTS USED"),
RECORDING_CHANNEL_LIMIT_FULL:qsTr("RECORDING CHANNEL LIMIT FULL"),VCA_MASTERS:qsTr("VCA MASTERS"),VIEW_GROUP:qsTr("VIEW GROUP"),MUTE_GROUP:qsTr("MUTE GROUP"),MTK:qsTr("MTK"),DIM:qsTr("DIM"),TOGGLE_DIM:qsTr("TOGGLE DIM"),BUFFER:qsTr("BUFFER"),START:qsTr("START"),SPILL:qsTr("SPILL"),END:qsTr("END"),DEFAULT:qsTr("DEFAULT"),FOLLOW_SOURCE:qsTr("FOLLOW SOURCE"),RECORD_IS_ACTIVE:qsTr("RECORD IS ACTIVE"),FX_SEND:qsTr("FX SEND"),GB:qsTr("GB"),NOT_AVAILABLE:qsTr("NOT AVAILABLE"),NO_ASSIGNED_CHANNELS:qsTr("NO ASSIGNED CHANNELS"),
VCA_SPILL:qsTr("VCA SPILL"),MASTER_MTX_SEND_POINT:qsTr("MASTER MTX SEND POINT"),REC_ERRNOSELECT:qsTr("No MTK channels selected for recording"),REC_ERRDROPOUT:qsTr("Error: USB stick is not sufficiently fast to handle multitrack recording. Please reduce the number of channels recorded simultaneously or use a faster USB storage."),REC_ERRSESSNAME:qsTr("Invalid session name, using default."),REC_ERRPLAYING:qsTr("Cannot use Multitrack recorder while playing."),PLAY_ERRREC:qsTr("Cannot use Multitrack playback while recording."),
ERR_BUSYBUFFER:qsTr("Busy... Writing buffered data to the storage."),MATRIX_CONTRIB_PANNING:qsTr("MTX CONTR. PANNING"),LOCAL_SETTINGS_PRESETS:qsTr("LOCAL SETTINGS PRESETS")};
langBase.cn={lang:"中文",APPLY:"应用",ASSIGN_SUB_GROUP:"分配到编组 {0}",ATTACK:"启动",AUX:"辅助",AUX_EQ:"辅助EQ",AUX_MASTERS:"辅助主推子",AUX_MASTER_LEVELS:"辅助主推子电平",AUX_SENDS_FOR:"辅助发送: {0}",BANKS:"分页",BASS_GAIN:"低频增益",BYPASS:"旁通",CH:"通道",CHANNEL_SAFES:"通道安全",FX_SENDS_X:"效果发送: {0}",CHANNEL_PRESETS:"通道预置",CHORUS:"合唱",CHORUS_FX_GLOBAL:"合唱效果 (GLOBAL)",CLEAR_SOLO:"消除SOLO",CONFIG:"配置",CONFIGURATION:"配置",CONNECTED_DEVICE_NAME:"接入设备名称",COPY_SETTINGS:"复制设置",CURRENT_SHOW:"当前场景",DELAY:"延时",DELAY_FX_GLOBAL:"延时效果 (GLOBAL)",DELAY_LENGTH:"延时长短",
DELETE:"删除",DISABLE_STEREO_LINK:"关闭立体效果链接",DOCUMENTATION:"文件",DYN:"动态学",EDIT:"编辑",EQ:"均衡器",EXPORT:"导出",FAV_SHOW:"偏爱场景",FEEDBACK:"反馈",FEEDBACK_AMOUNT:"反馈总量",FREQ:" 频率",FX:"效果",FX_MODE_DEFAULT:"默认效果模式",FX_RETURNS:"效果返回",FX_RETURNS_TO_AUX:"效果返回到: {0}",GAIN:"增益",GROUP:"编组",HELP:"帮助",HF_DAMPING:"高频衰减",HIGHPASS_FILTER:"高通滤波",IMPORT:"导入",INPUT:"输入",LENGTH_SUBDIVISION:"长度细分",LOAD:"载入",LOAD_PRESET:"载入预设置",LOCK:"锁定",LOCKED:"鎖定的",LOWPASS_FILTER:"低通滤波",MANUAL:"手动",MASTER:"主控",MASTER_EQ:"总控EQ",MEDIA:"多媒体",MEDIA_FADER_BEFORE_CH1:"通道1前置多媒体推子",
MIX_GAIN:"调音增益",MUTE:"静音",MUTE_ALL:"全部静音",MUTE_FX:"FX效果静音",MUTE_GROUP_BUTTON_ASSIGN:"分组按钮分配静音",MUTE_GROUPS:"分组静音",MUTES:"静音",NETWORK:"网络",NEW:"新建",NEW_SNAPSHOT:"新记忆点",NEXT_SNAPSHOT:"下一个记忆点",NORM:"标准",OFF:"关",ON:"开",ONLINE_SUPPORT:"在线支持",PASTE_SETTINGS:"粘贴设置",PERMISSIONS:"权限",PERMIT:"权限",PHANTOM:"幻象供电",PLAY:"播放",PLAYER:"播放器",PLAYLIST:"播放列表",PRESETS:"预置",RATIO:"比例",RECORD:"录音",RELEASE:"释放",RENAME:"重命名",RESET:"重设",RESET_CHANNEL:"重设通道",REVERB:"混响器",REVERB_TIME:"混响时间",REVERB_FX_GLOBAL:"混响效果 (GLOBAL)",
ROOM:"房间模式",SAVE:"保存",SAVE_AS:"另存为",SEND:"发送",SENDS:"发送",SG:"编组",SHOWS:"场景",SNAPSHOTS:"记忆点",SOCIAL:"社交",SOLO:"独奏",SPEED:"速度",STEREO_LINK:"立体声关联",SUB_GROUP_FADER_ASSIGN:"编组推子分配",SUB_GROUP_SPREAD:"编组扩展",SUB_GROUPS:"编组",SUBS:"编组",TAP_TEMPO:"敲击节拍",THIN:"柔和效果",TOTAL_VIEW:"总视窗",UNASSIGN_SUB_GROUP:"解除编组 {0}",UPDATE_CURRENT_SNAPSHOT:"更新当前记忆点",USB_MEDIA_FILES:"USB多媒体文件",VIEW_GROUP_BUTTON_ASSIGN:"显示分组按钮分配",VIEW_GROUPS:"分组显示",VIEWS:"视窗",SHOW_ALL_CHANNELS:"显示所有通道",PLACE_AFTER_INPUTS:"置于输入后",PLACE_BEFORE_INPUTS:"置于输入前",
GATE:"门限",MUTE_FX_CANCEL:"取消FX静音效果",MUTE_ALL_CANCEL:"取消全部静音效果",MUTEGROUP_1_ACTIVATED:"激活编组 {0} 静音效果",MUTEGROUP_1_DEACTIVATED:"取消编组 {0} 静音效果",NO_SNAPSHOT:"无记忆点",LOAD_NEXT_SNAPSHOT:"载入下一个记忆点",CHANNEL_EQ_PRESETS:"通道EQ预置",AUX_EQ_PRESETS:"辅助EQ预置",MASTER_EQ_PRESETS:"主控EQ预置",CHANNEL_DYN_PRESETS:"通道动态预置",AUX_DYN_PRESETS:"辅助动态预置",MASTER_DYN_PRESETS:"主控动态预置",DELAY_FX_PRESETS:"FX延迟效果预置",CHORUS_FX_PRESETS:"FX合唱效果预置",REVERB_FX_PRESETS:"FX混响效果预置",ROOM_PRESETS:"房间模式预置",DIGITECH_PRESETS:"效果器预置",FILES:"文件",CONNECTING:"正在载入...",
KEEP_TAPPING:"保持点击...",PLAYLISTS:"播放列表",PRESET_LOADED:"预置<br>{0}<br>载入",NO_PAN_ON_MONO_AUX:"单声道辅<br>助无声像",PARAM_GLOBAL:"{0} 参数(GLOBAL)",CLEAR_ALL_SOLOS:"清除所有SOLO",POST:"后置",PRE:"前置",SET_ALL_CHANNELS_TO:'设置所有通道到 "{0}" ?',SAVED:"保存",REPLACE_PRESET:'替换预置 "{0}" ?',REPLACE_SNAPSHOT:'替换记忆点 "{0}" ?',FACTORY:"工厂设定",USER:"用户",DELETE_PRESET:'删除前置 "{0}" ?',BPM:"拍速",OUT_OF_RANGE:"超出范围",ERROR:"报错",NO_ASSIGNED_SUBGROUP:'在编组"{0}"不分配通道',NO_ASSIGNED_VIEWGROUP:'在显示编组"{0}"上不分配通道',NO_ASSIGNED_MG:'在静音编组"{0}"中不分配通道',SAVE_TO_SHOW:"保存到场景",
DASHBOARD:"报表",INCOMPATIBLE_CHANNEL_TYPE:"通道类型不匹配",MIXER_RESET:"调音台重置",SAVE_SHOW_WITH_NAME:"保存场景名称:",NEW_SHOW_NAME:"新场景名称:",SHOW_ALREADY_EXISTS:"显示已有",DELETE_SHOW:'删除场景 "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"保存记忆点名称:",NEW_SNAPSHOT_NAME:"新记忆点名称:",DELETE_SNAPSHOT:'删除记忆点 "{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"载入原始的调音台状态",ERR_DELETESHOW:"删除错误场景",ERR_CREATESHOW:"创建错误场景",ERR_LOADSHOW:"载入错误场景",ERR_SAVESHOW:"保存错误场景参数",ERR_RENAMESHOW:"重命名错误场景",ERR_SAVEINIT:"“初始”记忆点不能保存",ERR_SAVESNAPSHOT:"保存记忆点错误",ERR_LOADSNAPSHOT:"载入记忆点错误",
ERR_DELETESNAPSHOT:"删除记忆点错误",ERR_RENAMEINIT:"不能重命名“初始”记忆点",ERR_RENAMESNAPSHOT:"重命名记忆点错误",ERR_DELETEPRESET:"删除前置错误",ERR_WRITEPRESET:"写入前置错误",ERR_RENAMEPRESET:"重命名前置错误",INITIAL_VALUES_LOADED:"导入初始数值",MIX:"调音",AUX_SENDS:"辅助发送",AUX_SENDS_X:"辅助发送: {0}",FX_SENDS:"FX效果发送",FX_EDIT:"FX效果编辑",GROUPS:"编组",THRESHOLD:"阀值",REVERB_SEND:"发送混响",CHORUS_SEND:"合唱效果发送",DELAY_SEND:"延时发送",ROOM_SEND:"房间模式发送",HPF_FREQ:"高频",NOTCH_FREQ:"锯齿频率",METERS:"仪表",OUT:"输出",IN:"输入",ME:"ME ",BAND:"波段",SETTINGS:"设置",MORE_ME:"个人专属通道",DEMO_VERSION:"DEMO版本",
LINE_IN:"line输入",MODE:"模式",CHANNEL:"通道",SUPPORT:"支持",RENAME_CHANNEL:"重命名通道({0})",CENTER:"中心",SETUP:"设置",JUMP_TO:"跳跃到",FUNCTIONS:"功能",BACK:"返回",SAVE_PRESET_WITH_NAME:"保存前置命名",RENAME_PRESET:"前置重命名",NO_ACTIVE_SHOW:"无效场景",RTA:"RTA比例",DEESSER:"DE-ESSER模式",INPUTS:"输入",ARE_YOU_SURE:"确定？",ABOUT:"关于",LIVE:"实况",FIXED:"固定",MUTE_GROUP_X:"分组静音 {0}",TAP_X_BPM:"敲击节拍",MOUNTCHANGED:"更改总数",MOUNT:"插入USB",UNMOUNT:"拔掉USB",DISABLED:"禁用",ENABLED:"激活",SINGLE:"单一的",MULTIPLE:"多样的",LOCAL:"局部",GLOBAL:"总体",LEVEL:"电平",TREBLE:"高音",
MID:"中音",BASS:"低音",DB:"分贝",NO_CONTROLS_FOR_THIS_CHANNEL:"本通道不受控",UNASSIGN_ME:"没有定义ME",ASSIGN_ME:"定义ME",UNASSIGN_MY_OUT:"没有标示'MY OUT'",ASSIGN_MY_OUT:"标示‘MY OUT’",NO_SEND_LEVELS:"电平不发送",CANCEL:"取消",FULL:"全部",RELOAD_UI:"重载变更UI参数是否生效",AFS_FIXED_INFO:"测试模式反馈，确保<br>没有任何其他声音输入，麦克风-音箱反馈除外",RECORDINGS:"记录",READING:"正在读取",FIRMWARE_FOUND:"USB设备发现firmware更新现象，确定<br><br>执行更新？",MSGBTN_UPDATE:"更新",MSGBTN_CANCEL:"取消",MSGBTN_OK:"OK",UPDATE_ALREADY:"更新完毕.<br><br>重启设备/再重启",UPDATE_COMPLETED:"系统更新完毕.重启系统并重载这个界面.",UPDATE_ERROR:"更新错误报告",
REC_ERRSEQ:"报告：相关文件无法写入USB(内存不足？)",REC_ERRWRITE:"报告：无法写入USB(内存不足？)",REC_ERRNOSTICK:"报告：USB没有插入",REC_ERRNOACCESS:"报告：无法读写USB",REC_ERRCREATE:"报告：USB无法创建文件",SHOWEXP_NOTFOUND:"输入/输出:无相关文件",SHOWEXP_USBNOTFOUND:"USB不能识别",SHOWEXP_WRITEERR:"输出失效：失效标签，无法写入信息",SHOWEXP_INTREADERR:"输出失效:源文件无法读写",SHOWEXP_EXPFAILED:"部分文件无法导出",SHOWEXP_SUCCESS:"导出成功",SHOWIMP_FAILED:"部分文件无法载入",SHOWIMP_SUCCESS:"导入成功",SHOWIMP_NOTFOUND:"导入错误信息:找不到原文件",SHOWIMP_FILNOTFOUND:"USB没有相关的文件",IMPORT_SHOW_FROM_USB:"从USB导入SHOW",NO_SHOW_SELECTED:"没有选择SHOW",
EXPORT_SHOW_TO_USB:"导出SHOW到USB: {0}",IMPORT_SHOW:"导入SHOW",EXPORT_SHOW:"导出SHOW",LANGUAGE:"语言",CUE:"下一首",AUTO:"自动",FRAME_RATE:"帧数等级",DISABLE_RETINA:"RETINA禁用",DISABLE_RESCALING:"缩放禁用",GUI_PERFORMANCE:"执行GUI",HEADPHONES_OUT:"耳机输出",BUTTON_FUNCTION:"按钮功能",KINETIC_SCROLL:"触点滚动",FADER_GLOW:"推子显示",DISABLE_LED_METERS:"关闭LED",MASTER_LOCK:"主控锁定",HIDE_COMP_GATE:"隐藏压缩器/噪声门",HIDE_DB_MARKS:"隐藏DB标示",PIN_SO_FOR_AUX_FX_SENDS:"辅助/效果发送页面侧拉窗口展开模式",PIN_SLIDEOUT_IN_MIX_MODE:"调音页面侧拉窗口展开模式",SOLO_MODE:"SOLO模式",SOLO_ROUTING:"SOLO路径",
HEADPHONES:"耳机",HP:"耳机",AUTOCLOSE_SLIDEOUT:"自动关闭SLIDEOUT",METER_QUANTISATION:"仪表数量",RECORD_MODE:"记录模式",MIXER_SCROLLING:"调音台滚动模式",DIM_LED_METERS:"调暗LED电平显示",UTILITY:"功能",ONE_FINGER:"单指",TWO_FINGERS:"双指",IMPORT_ALL_PRESETS:"导入所以前置",EXPORT_ALL_PRESETS:"导出所有前置",NO_CONNECTION_TO_MIXER:"没有连接到调音台",OFFLINE:"离线",VERSION:"版本",COPY_TO_CLIPBOARD:"COPY到剪切板",COPYRIGHT_MSG:"所有的第三方标示均为他们固有的商标，用于定义<br>产品，评估此产品以及此标示，备注Harman公司，受法律保护.",FILTER:"滤波器",DISPLAY:"显示",SENSITIVITY:"敏感度",CLEAR_FIXED:"消除FIXED",CLEAR_ALL:"消除所有",
CLEAR_LIVE:"消除LIVE",NAME_SSID:"名称（SSID）",SUBNET_MASK:"子網掩碼",WIRELESS_NETWORK:"无线网络",SECURITY_OPTIONS:"安全设置",LAN_IP_ADDRESS:"局域網IP地址",UP:"向上",DOWN:"向下",ETHERNET:"以太网",HOTSPOT:"热点",COPY_MIX:"复制调音",NO_CONNECTION:"没有连接到调音台",PATTERNED_BACKGROUND:"背景纹理",MOREME_PORTRAIT_MODE:"个人专属通道纵向视图模式",RESET_LOCAL_SETTINGS:"重置局部设置",ACCESS_LIMITING:"访问权限",PASSWORD:"密码",ACCESS:"访问",ALLOW_ACCESS_FOR:"允许访问",MASTER_VOLUME:"主控数值",ACCOUNT:"总值",MASTER_PROCESSING:"主控处理中",GLOBAL_SETTINGS:"全部设置",LOCAL_SETTINGS_PRESETS:"局部设置预置",
TRANSLATIONS_END:"-----"};
langBase.de={lang:"GERMAN",ASSIGN_SUB_GROUP:"SUBGRUPPE {0} ZUWEISEN",AUX_SENDS_FOR:"{0}  AUX WEGE",CH:"KA",CONFIG:"KONFIG",COPY_SETTINGS:"EINSTELLUNGEN KOPIEREN",DELAY_LENGTH:"DELAY LÄNGE",DELETE:"LÖSCHEN",DISABLE_STEREO_LINK:"STEREO LINK DEAKTIVIEREN",FEEDBACK_AMOUNT:"FEEDBACK ANTEIL",FX_RETURNS:"FX RÜCKWEGE",GROUP:"GRUPPE",HF_DAMPING:"HF DÄMPFUNG",HIGHPASS_FILTER:"HOCHPASS FILTER",INPUT:"EINGANG",LENGTH_SUBDIVISION:"LÄNGE SUBDIVISION",LOAD:"LADEN",LOCK:"SPERREN",LOWPASS_FILTER:"TIEFPASS FILTER",MANUAL:"MANUELL",
MEDIA:"MEDIEN",MUTE_ALL:"MUTE ALLE",NETWORK:"NETZWERK",NEW:"NEU",OFF:"AUS",ON:"EIN",PLAYLIST:"WIEDERGABELISTE",RENAME:"UMBENENNEN",RESET:"ZURÜCKSETZEN",RESET_CHANNEL:"KANAL ZURÜCKSETZEN",REVERB:"HALL",REVERB_TIME:"HALLZEIT",ROOM:"RAUMHALL",SAVE:"SPEICHERN",SEND:"WEG",SENDS:"WEGE",SPEED:"GESCHWINDIGKEIT",UNASSIGN_SUB_GROUP:"SUBGRUPPE {0} ENTZIEHEN",VIEWS:"ANSICHTEN",PLACE_BEFORE_INPUTS:"VOR EINGÄNGEN EINFÜGEN",FILES:"DATEIEN",CONNECTING:"Anschluss...",PLAYLISTS:"WIEDERGABELISTEN",ERR_SAVEINIT:"Speichern * Init * fehlgeschlagen.",
ERR_RENAMEINIT:"Umbenennen * Init * snapshot fehlgeschlagen.",AUX_SENDS_X:"{0}  AUX WEGE",TREBLE:"HÖHEN",MID:"MITTEN",HEADPHONES:"KOPFHÖRER",SECURITY_OPTIONS:"SICHERHEITSOPTIONEN",ACCESS_LIMITING:"ZUGANGSBERECHTIGUNG",TRANSLATIONS_END:"-----"};
langBase.fr={lang:"FRENCH",APPLY:"APPLIQUER",ASSIGN_SUB_GROUP:"GROUPES ASSIGN SUB {0}",ATTACK:"ATTAQUE",AUX_MASTERS:"AUX GÉNÉRAUX",AUX_SENDS_FOR:"ENVOI AUX: {0}",BANKS:"BANQUES",BASS_GAIN:"GAIN DE BASSES",CHANNEL_SAFES:"CANAUX SAUVEGARDÉS",CHANNEL_PRESETS:"PRESETS CANAUX",CHORUS_FX_GLOBAL:"CHORUS FX (GÉNÉRAL)",CLEAR_SOLO:"EFFAC SOLO",CONNECTED_DEVICE_NAME:"NOM DE L’APPAREIL CONNECTÉ",COPY_SETTINGS:"COPIER RÉGLAGES",CURRENT_SHOW:"VISUEL ACTUEL",DELAY_LENGTH:"LONGUEUR DE DELAY",DELETE:"EFFACE",DISABLE_STEREO_LINK:"DESACTIVE LIEN STEREO",
EXPORT:"EXPORTATION",FEEDBACK:"RETOUR",FEEDBACK_AMOUNT:"SOMME DE RETOUR",FX_RETURNS:"RETOUR FX",GROUP:"GROUPE",HELP:"AIDE",HF_DAMPING:"AMORTISSEMENT HF",HIGHPASS_FILTER:"FILTRE PASSE BAS",IMPORT:"IMPORTATION",INPUT:"ENTRÉES",LENGTH_SUBDIVISION:"LONGUEUR DE SUBDIVISION",LOAD:"CHARGEMENT",LOAD_PRESET:"CHARGEMENT PRESET",LOCK:"FERMÉ",LOWPASS_FILTER:"FILTRE PASSE HAUT",MANUAL:"MANUEL",MASTER:"GÉNÉRAL",MASTER_EQ:"EQ MAÎTRE",MUTE_GROUP_BUTTON_ASSIGN:"BOUTON ASSIGN GROUPE MUTE",MUTE_GROUPS:"GROUPES MUTE",
NETWORK:"RÉSEAU",NEW:"NOUVEAU",NEW_SNAPSHOT:"NOUVEL INSTANTANÉ",NEXT_SNAPSHOT:"PROCHAIN INSTANTANÉ",OFF:"ARRÊT",ON:"MARCHE",ONLINE_SUPPORT:"Support en ligne",PASTE_SETTINGS:"COLLER RÉGLAGES",PERMIT:"PERMIS",PLAY:"LECTURE",PLAYER:"LECTEUR",PLAYLIST:"LISTE DE LECTURE",RECORD:"ENREGISTREMENT",RELEASE:"RELACHE",RENAME:"RENOMMER",RESET:"REINIT",RESET_CHANNEL:"REINIT CANAL",REVERB_TIME:"TEMPS DE REVERB",REVERB_FX_GLOBAL:"REVERB FX (GÉNÉRAL)",ROOM:"CHAMBRE",SAVE:"SAUVEGARDE",SHOWS:"VISUELS",SNAPSHOTS:"INSTANTANÉS",
SPEED:"VITESSE",STEREO_LINK:"LIEN STÉRÉO",SUB_GROUP_FADER_ASSIGN:"POTENTIOMÈTRE ASSIGN GROUPE SUB",SUB_GROUP_SPREAD:"PROPAG GROUPE",SUB_GROUPS:"GROUPES SUB",THIN:"FAIBLE",UPDATE_CURRENT_SNAPSHOT:"CHANGER L’INSTANTANÉ ACTUEL",VIEW_GROUP_BUTTON_ASSIGN:"BOUTON ASSIGN GROUPE VUE GROUP",VIEW_GROUPS:"GROUPES VISUEL",VIEWS:"VISUELS",PLACE_AFTER_INPUTS:"PLACE AVANT ENTRÉES",MUTE_FX_CANCEL:"ANNUL MUTE FX ",MUTE_ALL_CANCEL:"ANNUL MUTE ALL",MUTEGROUP_1_ACTIVATED:"MUTE GROUP {0} MARCHE",MUTEGROUP_1_DEACTIVATED:"MUTE GROUP {0} ARRÊT",
NO_SNAPSHOT:"PAS D’INSTANTANÉS",LOAD_NEXT_SNAPSHOT:"CHARGEMENT INSTANTANÉ SUIVANT",CHANNEL_EQ_PRESETS:"PRESETS D’EQ DE CANAL",AUX_EQ_PRESETS:"PRESETS D’EQ D’AUX",MASTER_EQ_PRESETS:"PRESETS D’EQ GÉNÉRAL",CHANNEL_DYN_PRESETS:"PRESETS D’EFFETS DYN DE CANAL",AUX_DYN_PRESETS:"PRESETS D’EFFETS DYN D’AUX",MASTER_DYN_PRESETS:"PRESETS D’EFFETS DYN GÉNÉRAL",DELAY_FX_PRESETS:"PRESETS D’EFFETS DELAY",CHORUS_FX_PRESETS:"PRESETS D’EFFETS CHORUS",REVERB_FX_PRESETS:"PRESETS D’EFFETS REVERB",ROOM_PRESETS:"PRESETS D’EFFETS CHAMBRE",
DIGITECH_PRESETS:"PRESETS DIGITECH",FILES:"FICHIERS",CONNECTING:"Connection...",KEEP_TAPPING:"CONTINUEZ À TAPER...",PLAYLISTS:"LISTES DE LECTURE",PRESET_LOADED:"PRESET<br>{0}<br>CHARGÉ",NO_PAN_ON_MONO_AUX:"PAS DE PAN <br> MARCHE MONO AUX",PARAM_GLOBAL:"{0} PARAMÈTRES (GÉNÉRAL)",CLEAR_ALL_SOLOS:"EFFAC SOLOS",POST:"APRÈS",PRE:"AVANT",SET_ALL_CHANNELS_TO:'REGLER TOUS CANAUX VERS "{0}" ?',SAVED:"SAUVEGARDÉ",REPLACE_PRESET:'REMPLACE PRESET "{0}"?',REPLACE_SNAPSHOT:'REMPLACE INSTANTANÉ "{0}"?',FACTORY:"USINE",
USER:"UTILISATEUR",DELETE_PRESET:'EFFACE PRESET "{0}" ?',OUT_OF_RANGE:"HORS DE PORTÉE",ERROR:"ERREUR",NO_ASSIGNED_SUBGROUP:"PAS DE CANAUX ASSIGNÉS EN <br>SOUS GROUPE {0}",NO_ASSIGNED_VIEWGROUP:"PAS DE CANAUX ASSIGNÉS EN GROUPES <br>DE VUES {0}",SAVE_TO_SHOW:"SAUVEGARDER VERS VISUELS",DASHBOARD:"TABLEAU DE BORD",INCOMPATIBLE_CHANNEL_TYPE:"TYPE DE CANAL INCOMPATIBLE",MIXER_RESET:"REINIT MIXER",SAVE_SHOW_WITH_NAME:"SAUVEGARDE VISUEL AVEC NOM:",NEW_SHOW_NAME:"NOUVEAU NOM DE VISUEL:",SHOW_ALREADY_EXISTS:"VISUEL DÉJÀ EXISTANT",
DELETE_SHOW:'EFFACER VISUEL "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"SAUVEGARDER INSTANTANÉ AVEC NOM:",NEW_SNAPSHOT_NAME:"NOUVEAU NOM D’INSTANTANÉ:",DELETE_SNAPSHOT:'EFFACER INSTANTANÉ "{0}"?',ERR_DELETESHOW:"Erreur d’effacement de visuel.",ERR_CREATESHOW:"Erreur de création de visuel.",ERR_LOADSHOW:"Erreur de chargement de visuel.",ERR_SAVESHOW:"Erreur de sauvegarde de paramètres de visuels.",ERR_RENAMESHOW:"Erreur pour renommer le visuel.",ERR_SAVEINIT:"Impossible de re sauvegarder  * Init * instantané. ",
ERR_SAVESNAPSHOT:"Erreur de sauvegarde d’instantané.",ERR_LOADSNAPSHOT:"Erreur de chargement d’instantané.",ERR_DELETESNAPSHOT:"Erreur d’effacement d’instantané.",ERR_RENAMEINIT:"Impossible de renommer l’instantané * Init *.",ERR_RENAMESNAPSHOT:"Erreur pour renommer l’instantané.",ERR_DELETEPRESET:"Erreur d’effacement de preset. ",ERR_WRITEPRESET:"Erreur d’écriture du preset.",ERR_RENAMEPRESET:"Erreur pour renommer le preset.",INITIAL_VALUES_LOADED:"Valeurs initiales chargées.",AUX_SENDS:"ENVOI AUX",
AUX_SENDS_X:"ENVOI AUX: {0}",FX_SENDS:"ENVOI FX",GROUPS:"GROUPES",THRESHOLD:"SEUIL",BUTTON_FUNCTION:"BOUTON FONCTION",KINETIC_SCROLL:"MENU DÉROULANT DYNAMIQUE",DISABLE_LED_METERS:"DESACTIVATION LED MÊTRE",PIN_SLIDEOUT_IN_MIX_MODE:"PIN SORTIE SLIDE EN MODE MIX",SOLO_MODE:"MODE SOLO",NAME_SSID:"NOM SSID",WIRELESS_NETWORK:"RÉSEAU SANS FIL",SECURITY_OPTIONS:"OPTIONS DE SÉCURITÉ",ACCESS_LIMITING:"LIMITATION D’ACCÈS",PASSWORD:"MOT DE PASSE",TRANSLATIONS_END:"-----"};
langBase.es={lang:"SPANISH",APPLY:"APLICAR",ASSIGN_SUB_GROUP:"ASIGNAR SUBGRUPO {0}",ATTACK:"ATAQUE",AUX_MASTER_LEVELS:"NIVELES AUX MASTERS",AUX_SENDS_FOR:"ENVIOS AUX PARA",BANKS:"BANCOS",BASS_GAIN:"GANANCIA DE GRAVES",CH:"CANAL",CHANNEL_SAFES:"PROTECCIÓN CANAL",FX_SENDS_X:"ENVIOS DE EFECTO DE {0}",CHANNEL_PRESETS:"PRESETS DE CANAL",CHORUS_FX_GLOBAL:"EFECTO DE CHORUS GENERAL",CLEAR_SOLO:"QUITAR SOLO",CONFIGURATION:"CONFIGURACIÓN",CONNECTED_DEVICE_NAME:"NOMBRE DEL EQUIPO CONECTADO",COPY_SETTINGS:"COPIAR AJUSTES",
CURRENT_SHOW:"SHOW ACTUAL",DELAY_FX_GLOBAL:"EFECTO DE DELAY GENERAL",DELAY_LENGTH:"LONGITUD DE DELAY",DELETE:"ELIMINAR",DISABLE_STEREO_LINK:"DESACTIVAR ENLACE EST REO",DOCUMENTATION:"DOCUMENTACION",DYN:"DIN MICA",EDIT:"EDITAR",EXPORT:"EXPORTAR",FAV_SHOW:"SHOW FAVORITO",FEEDBACK:"REALIMENTACIÓN",FEEDBACK_AMOUNT:"NIVEL DE REALIMENTACIÓN",FREQ:"FRECUENCIA",FX_MODE_DEFAULT:"MODO EFECTO POR DEFECTO",FX_RETURNS:"RETORNOS DE EFECTO",FX_RETURNS_TO_AUX:"RETORNOS DE EFECTO A {0}",GAIN:"GANANCIA",GROUP:"GRUPO",
HELP:"AYUDA",HF_DAMPING:"AMORTIGUAMIENTO DE AGUDOS",HIGHPASS_FILTER:"FILTRO PASO ALTO",IMPORT:"IMPORTAR",INPUT:"ENTRADA",LENGTH_SUBDIVISION:"LONGITUD DE SUBDIVISIÓN",LOAD:"CARGAR",LOAD_PRESET:"CARGAR PREAJUSTES",LOCK:"BLOQUEAR",LOCKED:"BLOQUEADO",LOWPASS_FILTER:"FILTRO PASO BAJO",MASTER_EQ:"ECUALIZACIÓN DE MASTER",MEDIA_FADER_BEFORE_CH1:"FADER DE MEDIA ANTES DEL CH1",MIX_GAIN:"GANANCIA DE MEZCLA",MUTE:"MUTEAR",MUTE_ALL:"MUTEAR TODO",MUTE_FX:"MUTEAR EFECTO",MUTE_GROUP_BUTTON_ASSIGN:"ASIGNACION DE BOTON DE MUTE DE GRUPO",
MUTE_GROUPS:"MUTEAR GRUPOS",NETWORK:"RED",NEW:"NUEVO",NEW_SNAPSHOT:"NUEVA ESCENA",NEXT_SNAPSHOT:"SIGUIENTE ESCENA",OFF:"APAGAR",ON:"ENCENDER",ONLINE_SUPPORT:"SOPORTE ON LINE",PASTE_SETTINGS:"PEGAR AJUSTES",PERMISSIONS:"PERMISOS",PERMIT:"PERMITIR",PLAY:"REPRODUCCIÓN",PLAYER:"REPRODUCTOR",PLAYLIST:"LISTA DE REPRODUCCIÓN",PRESETS:"PREAJUSTES",RECORD:"REGISTRO",RELEASE:"SOLTAR",RENAME:"RENOMBRAR",RESET:"REINICIAR",RESET_CHANNEL:"REINICIAR CANAL",REVERB:"REVERBERACIÓN",REVERB_TIME:"TIEMPO DE REVERBERACIÓN",
REVERB_FX_GLOBAL:"EFECTO REVERBERACIÓN GENERAL",ROOM:"R.HABITACIÓN",SAVE:"GUARDAR",SAVE_AS:"GUARDAR COMO",SEND:"ENVIAR",SENDS:"ENVIOS",SG:"SUBGRUPO",SNAPSHOTS:"CAPTURAS",SPEED:"VELOCIDAD",STEREO_LINK:"LINK EST REO",SUB_GROUP_FADER_ASSIGN:"ASIGNACIÓN DE FADER DE SUBGRUPO",SUB_GROUP_SPREAD:"PROPAGAR SUBGRUPO",SUB_GROUPS:"SUBGRUPOS",THIN:"FINO",TOTAL_VIEW:"VISION GLOBAL",UNASSIGN_SUB_GROUP:"DESASIGNAR SUBGRUPO",UPDATE_CURRENT_SNAPSHOT:"ACTUALIZAR ESCENA",USB_MEDIA_FILES:"ARCHIVOS USB MEDIA",VIEW_GROUP_BUTTON_ASSIGN:"VER ASIGNACIÓN DE BOTÓN DE GRUPO",
VIEW_GROUPS:"VER GRUPOS",VIEWS:"VISTAS",SHOW_ALL_CHANNELS:"MOSTRAR TODOS LOS CANALES",PLACE_AFTER_INPUTS:"SITUAR DESPU S DE ENTRADAS",PLACE_BEFORE_INPUTS:"SITUAR ANTES DE ENTRADAS",GATE:"PUERTA",MUTE_FX_CANCEL:"CANCELAR MUTE DE EFECTO",MUTE_ALL_CANCEL:"ANULAR TODOS LOS MUTEOS",MUTEGROUP_1_ACTIVATED:"MUTE GRUPO {0} ACTIVADO",MUTEGROUP_1_DEACTIVATED:"MUTE GRUPO {0} DESACTIVADO",NO_SNAPSHOT:"SIN ESCENA",LOAD_NEXT_SNAPSHOT:"CARGAR SIGUIENTE ESCENA",CHANNEL_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE CANAL",
AUX_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE AUXILIAR",MASTER_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE MASTER",CHANNEL_DYN_PRESETS:"PRESETS DE DIN MICA DE CANAL",AUX_DYN_PRESETS:"PRESETS DE DIN MICA DE AUXILIAR",MASTER_DYN_PRESETS:"PRESETS DE DIN MICA DE MASTER",DELAY_FX_PRESETS:"PRESETS DE EFECTO DE DELAY",CHORUS_FX_PRESETS:"PRESETS DE EFECTO DE CHORUS",REVERB_FX_PRESETS:"PRESETS DE EFECTO DE REVERB",FILES:"ARCHIVOS",CONNECTING:"Conectando...",KEEP_TAPPING:"CONTINUA PULSANDO...",PLAYLISTS:"LISTAS DE REPRODUCCIÓN",
PRESET_LOADED:"PRESET CARGADO",NO_PAN_ON_MONO_AUX:"SIN PANOR MICO EN AUXILIAR MONO",PARAM_GLOBAL:"PAR METROS GENERALES",CLEAR_ALL_SOLOS:"QUITAR TODOS LOS SOLOS",SET_ALL_CHANNELS_TO:'AJUSTAR TODOS LOS CANALES A "{0}" ?',SAVED:"GUARDADO",REPLACE_PRESET:'SUSTITUIR PRESET "{0}"?',REPLACE_SNAPSHOT:'SUSTITUIR ESCENA "{0}"?',FACTORY:"F BRICA",USER:"USUARIO",DELETE_PRESET:'ELIMINAR PRESET "{0}" ?',OUT_OF_RANGE:"FUERA DE RANGO",NO_ASSIGNED_SUBGROUP:"SUBGRUPO NO ASIGNADO",NO_ASSIGNED_VIEWGROUP:"VISTA DE GRUPO NO ASIGNADA",
NO_ASSIGNED_MG:"MUTE DE GRUPO NO ASIGNADO",SAVE_TO_SHOW:"GUARDAR EN SHOW",DASHBOARD:"PANEL DE INSTRUMENTOS",INCOMPATIBLE_CHANNEL_TYPE:"TIPO DE CANAL INCOMPATIBLE",MIXER_RESET:"RESETEAR MEZCLADOR",SAVE_SHOW_WITH_NAME:"GUARDAR SHOW CON NOMBRE:",NEW_SHOW_NAME:"NUEVO NOMBRE DE SHOW:",SHOW_ALREADY_EXISTS:"ESTE SHOW YA EXISTE",DELETE_SHOW:'ELIMINAR SHOW "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"GUARDAR ESCENA CON NOMBRE:",NEW_SNAPSHOT_NAME:"NUEVO NOMBRE DE ESCENA:",DELETE_SNAPSHOT:'ELIMINAR ESCENA "{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"CARGAR ESTADO INICIAL DEL MEZCLADOR?",
ERR_DELETESHOW:"ERROR AL ELIMINAR SHOW.",ERR_CREATESHOW:"ERROR AL CREAR SHOW.",ERR_LOADSHOW:"ERROR AL CARGAR SHOW.",ERR_SAVESHOW:"ERROR AL GUARDAR SHOW.",ERR_RENAMESHOW:"ERROR AL RENOMBRAR SHOW.",ERR_SAVEINIT:"ERROR AL GUARDAR ESTADO INICIAL.",ERR_SAVESNAPSHOT:"ERROR AL GUARDAR ESCENA.",ERR_LOADSNAPSHOT:"ERROR AL CARGAR ESCENA.",ERR_DELETESNAPSHOT:"ERROR AL ELIMINAR ESCENA.",ERR_RENAMEINIT:"ERROR AL RENOMBRAR ESTADO INICIAL.",ERR_RENAMESNAPSHOT:"ERROR AL RENOMBRAR ESCENA.",ERR_DELETEPRESET:"ERROR AL ELIMINAR EL PRESET.",
ERR_WRITEPRESET:"ERROR DE ESCRITURA DE PRESET.",ERR_RENAMEPRESET:"ERROR AL RENOMBRAR PRESET.",SNAPLOAD:"CARGA DE ESCENA",INITIAL_VALUES_LOADED:"AJUSTES DE FABRICA CARGADOS.",AUX_SENDS_X:"ENVIOS AUX PARA",THRESHOLD:"UMBRAL",BUTTON_FUNCTION:"FUNCION DE BOTÓN",KINETIC_SCROLL:"DESPLAZAMIENTO CIN TICO",DISABLE_LED_METERS:"DESACTIVAR INDICADORES LED",PIN_SLIDEOUT_IN_MIX_MODE:"PIN DESCENDIENTE EN MODO MEZCLA",SOLO_MODE:"MODO SOLO",SOLO_ROUTING:"RUTEO DE SOLO",HEADPHONES:"AURICULARES",HP:"AUR",VERSION:"VERSIÓN",
NAME_SSID:"NOMBRE SSID",WIRELESS_NETWORK:"RED INAL MBRICA",SECURITY_OPTIONS:"OPCIONES DE SEGURIDAD",ACCESS_LIMITING:"LIMITACI NÓDE ACCESO",PASSWORD:"CONTRASE A",TRANSLATIONS_END:"-----"};
langBase.ru={lang:"РУССКИЙ",APPLY:"ПРИМЕНИТЬ",ASSIGN_SUB_GROUP:"НАЗНАЧИТЬ ПОДГРУППУ {0}",ATTACK:"АТАКА",BANKS:"БАНКИ",BYPASS:"ОБХОД",CHANNEL_PRESETS:"ПРЕСЕТЫ КАНАЛОВ",CHORUS_FX_GLOBAL:"CHORUS FX (ГЛОБАЛЬНЫЕ)",CLEAR_SOLO:"ОЧИСТИТЬ SOLO",CONFIG:"КОНФИГ",CONFIGURATION:"КОНФИГУРАЦИЯ",CONNECTED_DEVICE_NAME:"ИМЯ УСТРОЙСТВА",COPY_SETTINGS:"КОПИРОВАТЬ НАСТРОЙКИ",CURRENT_SHOW:"ТЕКУЩЕЕ ШОУ",DELAY_LENGTH:"DELAY ДЛИНА",DELETE:"УДАЛИТЬ",DISABLE_STEREO_LINK:"ОТКЛЮЧИТЬ СТЕРЕО СВЯЗЬ",DOCUMENTATION:"ДОКУМЕНТАЦИЯ",
EXPORT:"ЭКСПОРТ",FAV_SHOW:"ЛЮБИМОЕ ШОУ",FEEDBACK:"ОТДАЧА",FEEDBACK_AMOUNT:"ВЕЛИЧИНА ОТДАЧИ",GROUP:"ГРУППА",HELP:"ПОМОЩЬ",HF_DAMPING:"ГАШЕНИЕ ВЧ",HIGHPASS_FILTER:"ФИЛЬТР ВЧ",IMPORT:"ИМПОРТ",INPUT:"ВХОД",LOAD:"ЗАГРУЗИТЬ",LOAD_PRESET:"ЗАГРУЗИТЬ ПРЕСЕТ",LOCK:"ЗАМОК",LOWPASS_FILTER:"ФИЛЬТР НЧ",MANUAL:"РУЧН.",MEDIA_FADER_BEFORE_CH1:"КАНАЛ ПЛЕЕРА ВНАЧАЛЕ",MUTE_GROUP_BUTTON_ASSIGN:"НАЗНАЧЕНИЕ MUTE ГРУПП",MUTE_GROUPS:"MUTE ГРУППЫ",MUTES:"MUTE'Ы",NETWORK:"СЕТЬ",NEW:"НОВЫЙ",NEW_SNAPSHOT:"НОВЫЙ SNAPSHOT",NEXT_SNAPSHOT:"СЛЕДУЮЩИЙ SNAPSHOT",
NORM:"НОРМ",OFF:"ВЫКЛ",ON:"ВКЛ",PASTE_SETTINGS:"ВСТАВИТЬ НАСТРОЙКИ",PERMISSIONS:"ДОСТУП",PERMIT:"ДОСТУП",PHANTOM:"УСИЛЕНИЕ",PLAY:"ИГРАТЬ",PLAYER:"ПЛЕЕР",PLAYLIST:"ПЛЕЙЛИСТ",PRESETS:"ПРЕСЕТЫ",RATIO:"КОЭФ.",RECORD:"ЗАПИСЬ",RENAME:"ПЕРЕИМЕНОВАТЬ",RESET:"СБРОС",RESET_CHANNEL:"СБРОСИТЬ КАНАЛ",ROOM:"ЭХО КОМНАТЫ",SAVE:"СОХРАНИТЬ",SAVE_AS:"СОХРАНИТЬ КАК",SHOWS:"ШОУ",SPEED:"СКОРОСТЬ",STEREO_LINK:"СТЕРЕО СВЯЗЬ",SUB_GROUP_FADER_ASSIGN:"НАЗНАЧИТЬ ПОДГРУППУ",SUB_GROUP_SPREAD:"ПОКАЗАТЬ ПОДГРУППУ",SUB_GROUPS:"ПОДГРУППЫ",
THIN:"ТОНК",UNASSIGN_SUB_GROUP:"УБРАТЬ ИЗ ПОДГРУППЫ {0}",UPDATE_CURRENT_SNAPSHOT:"ОБНОВИТЬ ТЕКУЩИЙ SNAPSHOT",USB_MEDIA_FILES:"ФАЙЛЫ USB",VIEW_GROUP_BUTTON_ASSIGN:"НАЗНАЧИТЬ ВИЗУАЛЬНУЮ ГРУППУ",VIEW_GROUPS:"ВИЗУАЛЬНАЯ ГРУППА",VIEWS:"ВИДЫ",SHOW_ALL_CHANNELS:"ПОКАЗАТЬ ВСЕ КАНАЛЫ",PLACE_AFTER_INPUTS:"ПОМЕСТИТЬ ПОСЛЕ ВХОДОВ",PLACE_BEFORE_INPUTS:"ПОМЕСТИТЬ В НАЧАЛО",MUTE_FX_CANCEL:"ОТМЕНИТЬ MUTE FX",MUTE_ALL_CANCEL:"ОТМЕНИТЬ MUTE ALL",NO_SNAPSHOT:"НЕТ SNAPSHOT",LOAD_NEXT_SNAPSHOT:"ЗАГРУЗИТЬ СЛЕДУЮЩИЙ SNAPSHOT",
CHANNEL_EQ_PRESETS:"ПРЕСЕТЫ EQ",AUX_EQ_PRESETS:"ПРЕСЕТЫ AUX EQ",MASTER_EQ_PRESETS:"ПРЕСЕТЫ MASTER EQ",CHANNEL_DYN_PRESETS:"ПРЕСЕТЫ DYN",AUX_DYN_PRESETS:"ПРЕСЕТЫ AUX DYN",MASTER_DYN_PRESETS:"ПРЕСЕТЫ MASTER DYN",DELAY_FX_PRESETS:"ПРЕСЕТЫ DELAY FX",CHORUS_FX_PRESETS:"ПРЕСЕТЫ CHORUS FX",REVERB_FX_PRESETS:"ПРЕСЕТЫ REVERB FX",FILES:"ФАЙЛЫ",CONNECTING:"СОЕДИНЕНИЕ...",KEEP_TAPPING:"ЖМИТЕ ДАЛЬШЕ...",PLAYLISTS:"ПЛЕЙЛИСТЫ",PRESET_LOADED:"ПРЕСЕТ<br>{0}<br>ЗАГРУЖЕН",NO_PAN_ON_MONO_AUX:"НЕТ БАЛАНСА<br>ДЛЯ МОНО AUX",
PARAM_GLOBAL:"{0} ПАРАМЕТРЫ (ГЛОБАЛЬНЫЕ)",CLEAR_ALL_SOLOS:"СБРОСИТЬ ВСЕ SOLO",SET_ALL_CHANNELS_TO:'УСТАНОВИТЬ ВСЕ КАНАЛЫ В "{0}" ?',SAVED:"СОХРАНЕНО",REPLACE_PRESET:'ЗАМЕНИТЬ ПРЕСЕТ "{0}"?',REPLACE_SNAPSHOT:'ЗАМЕНИТЬ SNAPSHOT "{0}"?',FACTORY:"ЗАВОД",USER:"ПОЛЬЗ",DELETE_PRESET:'УДАЛИТЬ ПРЕСЕТ "{0}" ?',BPM:"УВМ",OUT_OF_RANGE:"ВНЕ ПРЕДЕЛА",ERROR:"ОШИБКА",NO_ASSIGNED_SUBGROUP:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ПОДГРУППЕ {0}",NO_ASSIGNED_VIEWGROUP:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ВИЗУАЛЬНОЙ ГРУППЕ {0}",NO_ASSIGNED_MG:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>MUTE ГРУППЕ {0}",
SAVE_TO_SHOW:"СОХРАНИТЬ В SHOW",MIXER_RESET:"СБРОС МИКШЕРА",SAVE_SHOW_WITH_NAME:"СОХРАНИТЬ ШОУ С ИМЕНЕМ:",NEW_SHOW_NAME:"НОВОЕ ИМЯ ДЛЯ ШОУ:",SHOW_ALREADY_EXISTS:"ШОУ УЖЕ СУЩЕСТВУЕТ",DELETE_SHOW:'УДАЛИТЬ ШОУ "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"СОХРАНИТЬ SNAPSHOT С ИМЕНЕМ:",NEW_SNAPSHOT_NAME:"НОВОЕ ИМЯ ДЛЯ SNAPSHOT:",DELETE_SNAPSHOT:'УДАЛИТЬ SNAPSHOT "{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"ВЫПОЛНИТЬ СБРОС ПАРАМЕТРОВ МИКШЕРА?",INITIAL_VALUES_LOADED:"СБРОС ВЫПОЛНЕН",GROUPS:"ГРУППЫ",THRESHOLD:"ПОРОГ",OUT:"ВЫХОД",
IN:"ВХОД",SETTINGS:"НАСТРОЙКИ",DEMO_VERSION:"ДЕМО ВЕРСИЯ",CHANNEL:"КАНАЛ",SUPPORT:"ПОДДЕРЖКА",RENAME_CHANNEL:"ПЕРЕИМЕНОВАТЬ КАНАЛ ({0})",CENTER:"ЦЕНТР",SETUP:"НАСТРОЙКИ",JUMP_TO:"ПЕРЕЙТИ К",BACK:"НАЗАД",SAVE_PRESET_WITH_NAME:"СОХРАНИТЬ ПРЕСЕТ С ИМЕНЕМ:",RENAME_PRESET:"ПЕРЕИМЕНОВАТЬ ПРЕСЕТ:",NO_ACTIVE_SHOW:"НЕТ АКТИВНОГО ШОУ",ARE_YOU_SURE:"ВЫ УВЕРЕНЫ?",ABOUT:"ИНФО",MOUNTCHANGED:"USB НОСИТЕЛЬ СМЕНЁН",MOUNT:"ВСТАВЛЕН USB НАКОПИТЕЛЬ",UNMOUNT:"USB НАКОПИТЕЛЬ ИЗВЛЕЧЁН",SINGLE:"ОДИНОЧНЫЙ",MULTIPLE:"МНОЖЕСТВЕННЫЙ",
LOCAL:"ЛОКАЛЬНЫЕ",GLOBAL:"ГЛОБАЛЬНЫЕ",NO_CONTROLS_FOR_THIS_CHANNEL:"НЕТ НАСТРОЕК ДЛЯ ЭТОГО КАНАЛА",CANCEL:"ОТМЕНА",RELOAD_UI:"ПЕРЕЗАПУСТИТЬ ПРОГРАММУ, ЧТОБЫ ИЗМЕНЕНИЯ ВСТУПИЛИ В СИЛУ?",BAD_BROWSER:"ВАШ БРАУЗЕР НЕ ПОДДЕРЖИВАЕТ НЕОБХОДИМЫЕ ТЕХНОЛОГИИ. ПОЖАЛУЙСТА, ИСПОЛЬЗУЙТЕ ДРУГОЙ БРАУЗЕР.",RECORDINGS:"Записи",READING:"Чтение...",MSGBTN_UPDATE:"ОБНОВИТЬ",MSGBTN_CANCEL:"ОТМЕНА",SHOWIMP_SUCCESS:"ИМПОРТ ЗАВЕРШЕН",IMPORT_SHOW_FROM_USB:"ИМПОРТ ШОУ С USB",NO_SHOW_SELECTED:"НЕ ВЫБРАНО ШОУ",IMPORT_SHOW:"ИМПОРТ ШОУ",
LANGUAGE:"ЯЗЫК",CUE:"ОЧЕРЕДЬ",AUTO:"АВТО",FRAME_RATE:"ЧАСТОТА КАДРОВ",DISABLE_RESCALING:"ОТКЛЮЧИТЬ МАСШТАБИРОВАНИЕ",GUI_PERFORMANCE:"ПРОИЗВОДИТЕЛЬНОСТЬ",HEADPHONES_OUT:"ВЫХОД НАУШНИКОВ",BUTTON_FUNCTION:"ФУНКЦ. КНОПКИ",KINETIC_SCROLL:"ИНЕРЦИОННАЯ ПРОКРУТКА",FADER_GLOW:"ТОЛЩИНА ЛИНИЙ СЛАЙДЕРОВ",DISABLE_LED_METERS:"ОТКЛЮЧИТЬ ИНДИКАТОРЫ",MASTER_LOCK:"ЗАЩИТА MASTER КАНАЛА",HIDE_COMP_GATE:"СПРЯТАТЬ КОМПРЕССОР",HIDE_DB_MARKS:"СПРЯТАТЬ МАРКЕРЫ ДЕЦИБЕЛ",PIN_SO_FOR_AUX_FX_SENDS:"ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ ДЛЯ FX/AUX",
PIN_SLIDEOUT_IN_MIX_MODE:"ВСЕГДА ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ",SOLO_MODE:"РЕЖИМ SOLO",SOLO_ROUTING:"ПУТЬ SOLO",HEADPHONES:"НАУШНИКИ",AUTOCLOSE_SLIDEOUT:"АВТОЗАКРЫТИЕ БОКОВОЙ ПАНЕЛИ",METER_QUANTISATION:"СЕКЦИОННЫЕ ИНДИКАТОРЫ",RECORD_MODE:"РЕЖИМ ЗАПИСИ",MIXER_SCROLLING:"ПРОКРУТКА МИКШЕРА",DIM_LED_METERS:"МЕНЕЕ ЯРКИЕ ИНДИКАТОРЫ",UTILITY:"УТИЛИТЫ",FINGER:"ПАЛЕЦ",FINGERS:"ПАЛЬЦА",IMPORT_ALL_PRESETS:"ИМПОРТ ВСЕХ ПРЕСЕТОВ",EXPORT_ALL_PRESETS:"ЭКСПОРТ ВСЕХ ПРЕСЕТОВ",NO_CONNECTION_TO_MIXER:"НЕТ СОЕДИНЕНИЯ",VERSION:"ВЕРСИЯ",
COPY_TO_CLIPBOARD:"КОПИРОВАТЬ В БУФФЕР",SENSITIVITY:"ЧУВСТВИТЕЛЬНОСТЬ",CLEAR_FIXED:"ОЧИСТИТЬ FIXED",CLEAR_ALL:"ОЧИСТИТЬ ВСЕ",CLEAR_LIVE:"ОЧИСТИТЬ LIVE",NAME_SSID:"ИМЯ SSID",SUBNET_MASK:"МАСКА ПОДСЕТИ",WIRELESS_NETWORK:"БЕСПРОВОДНАЯ СЕТЬ",SECURITY_OPTIONS:"НАСТРОЙКИ БЕЗОПАСНОСТИ",LAN_IP_ADDRESS:"LAN IP АДРЕСС",ACCESS_LIMITING:"ОГРАНИЕЧНИЕ ДОСТУПА",PASSWORD:"ПАРОЛЬ",ACCESS:"ДОСТУП",ALLOW_ACCESS_FOR:"РАЗРЕШИТЬ ДОСТУП",MASTER_VOLUME:"ГРОМКОСТЬ MASTER",MASTER_PROCESSING:"ОБРАБОТКА MASTER",GLOBAL_SETTINGS:"ГЛОБАЛЬНЫЕ НАСТРОЙКИ",
TRANSLATIONS_END:"-----"};
langBase.pt={lang:"PORTUGUÊS",APPLY:"APLICAR",ASSIGN_SUB_GROUP:"ENDEREÇAR AO SUB GRUPO {0}",ATTACK:"ATAQUE",AUX_MASTER_LEVELS:"NIVEIS AUX MASTER",AUX_SENDS_FOR:"ENVIO AUX:{0}",BANKS:"BANCOS",BASS_GAIN:"GANHO DE GRAVES",CHANNEL_SAFES:"CANAIS SEGUROS",FX_SENDS_X:"ENVIO FX:{0}",CHANNEL_PRESETS:"PRESETS DE CANAL",CLEAR_SOLO:"LIMPAR SOLO",CONFIGURATION:"CONFIGURAÇÃO",CONNECTED_DEVICE_NAME:"Nome do dispositivo conectado",COPY_SETTINGS:"DEFINIÇÕES DE CÓPIA",CURRENT_SHOW:"MOSTRAR ATUAL",DELAY_LENGTH:"Duração do DELAY ",
DELETE:"EXCLUIR",DISABLE_STEREO_LINK:"Desabilitar o STEREO LINK",DOCUMENTATION:"DOCUMENTAÇÃO",EDIT:"EDITAR",EXPORT:"EXPORTAR",FAV_SHOW:"MOSTRA FAVORITO",FEEDBACK_AMOUNT:"FEEDBACK Imediato",FREQ:"FREQUENCIA",FX_MODE_DEFAULT:"FX  MODO PADRÃO",FX_RETURNS:"RETORNOS FX",FX_RETURNS_TO_AUX:"FX Retorna a",GAIN:"GANHO",GROUP:"GRUPO",HELP:"AJUDA",HF_DAMPING:"AMORTECIMENTO HF",HIGHPASS_FILTER:"FILTRO PASSA ALTA",IMPORT:"IMPORTAR",INPUT:"ENTRADA",LENGTH_SUBDIVISION:"SUBDIVISÃO LENGTH",LOCK:"BLOQUEIO",LOCKED:"BLOQUEADO",
LOWPASS_FILTER:"filtro passa-baixa",MEDIA_FADER_BEFORE_CH1:"FADER mídia antes de CH1",MIX_GAIN:"GANHO DA MIX",MUTE:"MUDO",MUTE_ALL:"SILENCIE TUDO",MUTE_FX:"MUDO FX",MUTE_GROUP_BUTTON_ASSIGN:"ENDEREÇAR BOTAO DE GRUPO DE MUTE",MUTE_GROUPS:"GRUPO DE MUTE",MUTES:"MUTE",NETWORK:"REDE",NEW:"NOVO",NEW_SNAPSHOT:"NOVA CENA",NEXT_SNAPSHOT:"PRÓXIMA CENA",NORM:"NORMA  ",OFF:"DESLIGADO",ON:"LIGADO",ONLINE_SUPPORT:"SUPORTE ONLINE",PASTE_SETTINGS:"Colar configurações",PERMISSIONS:"PERMISSÕES",PERMIT:"PERMITIR",
RECORD:"GRAVAR",RENAME:"RENOMEAR",RESET:"REINICIAR",RESET_CHANNEL:"REINICIAR CANAL",REVERB_TIME:"REVERB TEMPO",SAVE:"SALVAR",SAVE_AS:"SALVAR COMO",SNAPSHOTS:"CENAS",SPEED:"VELOCIDADE",SUB_GROUP_FADER_ASSIGN:"ENDEREÇAR FADER AO SUB GRUPO",SUB_GROUP_SPREAD:"SUB GRUPO SPREAD",SUB_GROUPS:"subgrupos",TOTAL_VIEW:"VISTA TOTAL",UNASSIGN_SUB_GROUP:"DESENDEREÇAR SUB GRUPO{0}",UPDATE_CURRENT_SNAPSHOT:"ATUALIZAÇÃO DA CENA",USB_MEDIA_FILES:"MÍDIA USB ARQUIVOS",VIEW_GROUP_BUTTON_ASSIGN:"ENDEREÇAR BOTAO GRUPO VIEW",
VIEW_GROUPS:"VER GRUPOS",VIEWS:"VISTAS",SHOW_ALL_CHANNELS:"MOSTRE TODOS OS CANAIS",PLACE_AFTER_INPUTS:"LUGAR DEPOIS ENTRADAS",PLACE_BEFORE_INPUTS:"LUGAR ANTES DE ENTRADAS",MUTE_FX_CANCEL:"CANCELAR FX MUTE",MUTE_ALL_CANCEL:"CANCELAR TODOS OS MUTEs",MUTEGROUP_1_ACTIVATED:"MUTE GRUPO {0} LIGADO",MUTEGROUP_1_DEACTIVATED:"MUTE GRUPO {0} DESLIGADO",NO_SNAPSHOT:"SEM CENA",LOAD_NEXT_SNAPSHOT:"CARREGA PRÓXIMA CENA",CHANNEL_EQ_PRESETS:"PRESETS DE EQ DO CANAL",AUX_EQ_PRESETS:"PRESETS DE EQ DO AUX",MASTER_EQ_PRESETS:"PRESETS DE EQ DO MASTER",
CHANNEL_DYN_PRESETS:"PRESETS DO CANAL DYN",AUX_DYN_PRESETS:"PRESETS DO AUX DYN",MASTER_DYN_PRESETS:"PRESTS DO MASTER DYN",DELAY_FX_PRESETS:"PRESETS DELAY FX",CHORUS_FX_PRESETS:"PRESETS CHORUS FX ",REVERB_FX_PRESETS:"PRESETS REVERB FX",ROOM_PRESETS:"PRESETS AMBIENCIA",DIGITECH_PRESETS:"PRESETS DIGITECH",UX_PRESETS:"OPÇÕES DE PRESETS (local)",FILES:"ARQUIVOS",CONNECTING:"Conectando ...",KEEP_TAPPING:"Continue a tocar ...",PRESET_LOADED:"PRESET<br>{0}<br>CARREGADO",NO_PAN_ON_MONO_AUX:"SEM PAN <br> no AUX mono ",
PARAM_GLOBAL:"{{0} PARAMETROS (globais)",CLEAR_ALL_SOLOS:"DASABILITAR TODOS OS SOLOS",PRE:"PRÉ",SET_ALL_CHANNELS_TO:'DEFINIR TODOS OS CANAIS PARA "{0} "?',SAVED:"SALVOU",REPLACE_PRESET:'SUBSTITUIR PRESET "{0} "?',REPLACE_SNAPSHOT:'SUBSTITUIR A CENA "{0} "?',FACTORY:"FÁBRICA",USER:"USUARIO",DELETE_PRESET:"EXCLUIR PRESET",OUT_OF_RANGE:"FORA DO RANGE",ERROR:"ERRO",NO_ASSIGNED_SUBGROUP:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br>SUB GRUPO {0}",NO_ASSIGNED_VIEWGROUP:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br>VIEW GRUPO {0}",
NO_ASSIGNED_MG:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br> GRUPO MUDO {0}",SAVE_TO_SHOW:"SALVAR NO SHOW",DASHBOARD:"PAINEL",INCOMPATIBLE_CHANNEL_TYPE:"TIPO DE CANAL INCOMPATIVEL",MIXER_RESET:"RESETAR MIXER",SAVE_SHOW_WITH_NAME:"SALVAR SHOW COM NOME:",NEW_SHOW_NAME:"NOME DO NOVO SHOW",SHOW_ALREADY_EXISTS:"SHOW JÁ EXISTE",DELETE_SHOW:'EXCLUIR SHOW "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"SALVAR SNAPSHOT COM NOME",NEW_SNAPSHOT_NAME:"NOVO NOME DO SNAPCHOT:",DELETE_SNAPSHOT:'APAGAR SNAPSHOT "{0} "?',LOAD_THE_INITIAL_MIXER_STATE:"CARREGAR ESTADO INICIAL DO MIXER",
ERR_DELETESHOW:"ERRO AO APAGAR SHOW",ERR_CREATESHOW:"ERRO AO CRIAR SHOW",ERR_LOADSHOW:"ERRO AO CARREGAR SHOW",ERR_SAVESHOW:"ERRO AO SALVAR PARAMETROS DO SHOW",ERR_RENAMESHOW:"ERRO AO RENOMEAR SHOW",ERR_SAVEINIT:"NÃO PODE salvar novamente * INIT * SNAPSHOT.",ERR_SAVESNAPSHOT:"ERRO AO SALVAR SNAPSHOT.",ERR_LOADSNAPSHOT:"ERRO AO CARREGAR SNAPSHOT.",ERR_DELETESNAPSHOT:"ERRO AO APAGAR SNAPSHOT.",ERR_RENAMEINIT:"Não é possível renomear * INIT * SNAPSHOT.",ERR_RENAMESNAPSHOT:"ERRO AO RENOMEAR SNAPSHOT.",
ERR_DELETEPRESET:"ERRO AO APAGAR PRESET",ERR_WRITEPRESET:"ERRO AO ESCREVER PRESET",ERR_RENAMEPRESET:"ERRO AO RENOMEAR PRESET",INITIAL_VALUES_LOADED:"VALORES INICIAIS CARREGADOS",FX_EDIT:"EDITAR FX",GROUPS:"GRUPOS",OUT:"SAIDA",IN:"ENTRADA",BAND:"BANDA",SETTINGS:"CONFIGURAÇÕES",DEMO_VERSION:"VERSÃO DEMO",LINE_IN:"ENTRADA DE LINHA",LINE:"LINHA",MODE:"MODO",CHANNEL:"CANAL",SUPPORT:"SUPORTE",RENAME_CHANNEL:"RENOMEAR CANAL",CENTER:"CENTRO",SETUP:"CONFIGURAÇÃO",JUMP_TO:"PULE PARA",FUNCTIONS:"FUNÇÕES",BACK:"VOLTA",
SAVE_PRESET_WITH_NAME:"SALVAR PRESET COM NOME:",RENAME_PRESET:"RENOMEAR PRESET",NO_ACTIVE_SHOW:"SHOW não selecionado",INPUTS:"ENTRADAS",ARE_YOU_SURE:"VOCÊ TEM CERTEZA?",ABOUT:"SOBRE",FIXED:"FIXO",MUTE_GROUP_X:"GRUPO DE MUTE {0}",MOUNTCHANGED:"MOLDURA ALTERADA",MOUNT:"USB INSERIDO",UNMOUNT:"USB REMOVIDO",DISABLED:"DESATIVADO",ENABLED:"HABILITADO",MULTIPLE:"MÚLTIPLO",LEVEL:"NÍVEL",TREBLE:"AGUDOS",MID:"MEDIOS",BASS:"GRAVES",NO_CONTROLS_FOR_THIS_CHANNEL:"SEM CONTROLES PARA ESTE CANAL",UNASSIGN_ME:"DESATRIBUIR ME",
ASSIGN_ME:"ATRIBUIR ME",UNASSIGN_MY_OUT:"MY OUT' DESENDEREÇAR",ASSIGN_MY_OUT:"MY OUT' ENDEREÇAR",NO_SEND_LEVELS:"SENDS SEM NIVEL",CANCEL:"CANCELAR",RELOAD_UI:"RECARREGAR UI para que as alterações tenham efeito?",BAD_BROWSER:"ESTE navegador não suporta WebSockets. Use um navegador diferente.",AFS_FIXED_INFO:"modo de medição de realimentação. Certifique-se que <br>não  há outros sons vindos para as entradas, exceto o tom de realimentação do  microfone/alto-falantes.",RECORDINGS:"gravações",READING:"Leitura...",
FIRMWARE_FOUND:"A imagem de atualização de firmware foi encontrado no dispositivo USB conectado. <br> Executar uma atualização do mixer?",FIRMWARE_UPDATED:"Atualização bem-sucedida. <br> Por favor, desligue a unidade por 10 segundos, religue novamente  e recarregue esta página. <br> Nota,  o seu dispositivo sem fio pode precisar de religação manual.",MSGBTN_UPDATE:"Atualizar",MSGBTN_CANCEL:"Cancelar",UPDATE_ALREADY:"A atualização foi tentada uma vez já. <br> Por favor, reinicie o dispositivo para retomar / tente novamente.",
UPDATE_COMPLETED:"Sistema atualizado. Por favor, desligue e ligue o aparelho e recarregue a página para que a atualização tenha efeito.",UPDATE_ERROR:"Erro ao executar atualização.",REC_ERRSEQ:"Recorder: Erro ao escrever arquivo seqüencial para o USB (sem espaço?).",REC_ERRWRITE:"Recorder: Erro de escrita USB (sem espaço?).",REC_ERRNOSTICK:"Recorder: stick USB não está inserido no slot RECORD.",REC_ERRNOACCESS:"Recorder: Não é possível acessar um dispositivo USB para a escrita.",REC_ERRCREATE:"Recorder: Não é possível criar um arquivo no pendrive.",
SHOWEXP_NOTFOUND:"Export / Import: Item não encontrado",SHOWEXP_USBNOTFOUND:"Dispositivo USB não encontrado",SHOWEXP_WRITEERR:"Exportação falhou: Não é possível acessar o dispositivo USB para a escrita",SHOWEXP_INTREADERR:"Exportação falhou: Erro ao ler a pasta de origem.",SHOWEXP_EXPFAILED:"Alguns arquivos não conseguiram ser exportados.",SHOWEXP_SUCCESS:"exportado com êxito",SHOWIMP_FAILED:"Alguns arquivos não conseguiram ser importados.",SHOWIMP_SUCCESS:"importação bem-sucedida",SHOWIMP_NOTFOUND:"Erro de importação: Fonte não encontrada",
SHOWIMP_FILNOTFOUND:"Arquivos irrelevantes encontrados no USB",IMPORT_SHOW_FROM_USB:"Importar SHOW do USB",NO_SHOW_SELECTED:"NENHUM SHOW SELECIONADO",EXPORT_SHOW_TO_USB:"Exportar SHOW para o USB: {0}",IMPORT_SHOW:"Importar SHOW",EXPORT_SHOW:"Exportar SHOW",LANGUAGE:"LÍNGUA",NO_ME_CHANNELS:"Sem canais ME",NO_AUX_OUT:"SEM SAIDA AUX",ACCESS_LIMITING:"LIMITAR ACESSO",PASSWORD:"SENHA",ACCESS:"ACESSO",MONITOR_ACCESS_LIMIT:"Limitar o acesso (LOCAL)",ALLOW_ACCESS_FOR:"Permitir o acesso para",GLOBAL_SETTINGS:"CONFIGURAÇÕES GLOBAIS",
MASTER_PROCESSING:"PROCESSAMENTO  DO MASTER",MASTER_VOLUME:"VOLUME DO MASTER",ACCOUNT:"CONTA",FRAME_RATE:"TAXA DE QUADROS",DISABLE_RETINA:"DESABILITAR RETINA",DISABLE_RESCALING:"DESABILITAR RESCALING",GUI_PERFORMANCE:"PERFORMANCE GRAFICA",HEADPHONES_OUT:"SAIDA DE FONES DE OUVIDO",BUTTON_FUNCTION:"BOTÃO DE FUNÇÃO",DISABLE_LED_METERS:"DESABILITAR VU DE LEDs",MASTER_LOCK:"TRAVAR MASTER",HIDE_COMP_GATE:"OCULTAR COMP/GATE",HIDE_DB_MARKS:"OCULTAR ESCALA DB",PIN_SO_FOR_AUX_FX_SENDS:"FIXAR SO PARA AUX/FX SENDS",
PIN_SLIDEOUT_IN_MIX_MODE:"FIXAR SLIDEOUT NO MODO MIX",SOLO_MODE:"MODO SOLO",SOLO_ROUTING:"ENCAMINHAMENTO SOLO",HEADPHONES:"FONES DE OUVIDO",AUTOCLOSE_SLIDEOUT:"AUTO-FECHAMENTO SLIDEOUT",METER_QUANTISATION:"METER quantização",RECORD_MODE:"modo de gravação",UTILITY:"UTILIDADE",FINGER:"DEDO",FINGERS:"DEDOS",IMPORT_ALL_PRESETS:"IMPORTAR TODOS OS PRESETS",EXPORT_ALL_PRESETS:"EXPORTAR TODOS OS PRESETS",NO_CONNECTION_TO_MIXER:"Sem conexão com MIXER",VERSION:"VERSÃO",COPY_TO_CLIPBOARD:"COPIAR PARA ÁREA DE TRANSFERÊNCIA",
COPYRIGHT_MSG:"Todas as marcas de terceiros são marcas comerciais de seus respectivos proprietários. Estas marcas são utilizados para identificar<br>sons de produtos que foram revisados na criação deste produto e uso dessas marcas não - <br>implica uma afiliação, endosso ou associação com Harman International Industries, Incorporated.",FILTER:"FILTRO",SENSITIVITY:"SENSIBILIDADE",CLEAR_FIXED:"LIMPAR FIXO",CLEAR_ALL:"LIMPAR TUDO",CLEAR_LIVE:"LIMPAR LIVE",NAME_SSID:"NOME SSID",SUBNET_MASK:"MÁSCARA SUBREDE",
SSID_BROADCAST:"TRANSMISSÃO DO SSID",WIRELESS_NETWORK:"REDE SEM FIO",SECURITY_OPTIONS:"OPÇÕES DE SEGURANÇA",LAN_IP_ADDRESS:"Endereço IP da LAN",UP:"ACIMA",DOWN:"ABAIXO",HOTSPOT:"PONTO DE ACESSO",CLOSE:"FECHAR",COPY_MIX:"COPIAR MIX",NO_CONNECTION:"SEM CONEXAO",NO_CURRENT_SNAPSHOT:"SEM SNAPSHOT ATUAL",PATTERNED_BACKGROUND:"PLANO DE FUNDO PATENTEADO",ROUTING:"ENDEREÇAMENTO",INPUT_SOURCE:"FONTE DE ENTRADA",OUTPUT_DESTINATION:"DESTINO DE SAIDA",R:"R",RECORDING_DROPOUT:"GRAVAÇÃO DROPOUT",USB_REC_TOO_SLOW:"REC USB. MUITO DEVAGAR",
RECORDER_IS_BUSY:"GRAVADOR ESTÁ OCUPADO",IMPORT_USER_CONFIG:"IPORTAR CONFIGURAÇÃO DE USUARIO",EXPORT_USER_CONFIG:"EXPORTAR CONFIGURAÇÃO DE USUARIO",OVERVIEW:"VISÃO GERAL",CHANNEL_SOURCE:"FONTE DO CANAL",CHANNEL_OUTPUT_DESTINATION:"DESTINO DE SAIDA DO CANAL",DISABLE_VU_INPUT_LEVEL:"DESABILITAR VU DA ENTRADA",DISABLE_VU_PEAK:"DESBILITAR PICO DO VU",SOLO_TYPE:"TIPO DE SOLO",WRONG_VALUE:"VALOR ERRADO",INPUT_DELAY:"DELAY DE ENTRADA",OUTPUT_DELAY:"DELAY DE SAIDA",PEDAL_FUNCTION:"função do pedal",CONFIG_WARNING:"Aviso:. Somente as configurações visuais / gráficas específicas para este dispositivo serão armazenados <br> Essas configurações não afetam a operação do mixer.",
SET_TO_ZERO_DB:"COLOCAR EM ZERO DB",SET_OUTPUT_DELAY:"COLOCAR DELAY DA SAÍDA",MASTER_PRESETS:"PRESETS DO MASTER",SLAVE:"ESCRAVO",EXCEEDS_MAXIMUM_DELAY:"ULTRAPASSA DELAY MÁXIMO",START_STOP_PLAYER:"START / STOP PLAYER",START_STOP_RECORDING:"START / Parar a gravação",NONE:"NENHUM",ISOLATION:"ISOLAMENTO",MIC_GAIN:"GANHO DO MIC",CHANNELS:"CANAIS",MATRICES:"MATRIZES",HOLD:"SEGURAR",ISOLATE:"ISOLAR",DENSITY:"DENSIDADE",CASCADE:"CASCATA",CASCADE_MASTER:"CASCATA MASTER",SOUNDCHECK:"CHECAGEM DE SOM",DIRECT_OUT:"SAIDA DIRETA",
LOCATE:"LOCALIZAR",ENABLE:"HABILITAR",NAME:"NOME",EMPTY:"VAZIO",SESSIONS:"SESSÕES",SPACE_REMAINING:"Espaço restante:",EDIT_CHANNEL:"EDITAR CANAL",RESET_ALL:"REINICIAR TUDO",DIRECT_OUTPUT:"SAIDA DIRETA",FADER_POSITION:"POSIÇÃO DO FADER",MASTER_CHANNEL_RANGE:"ALCANCE DO CANAL MASTER",IOSYS_PRESET_LOADING:"CARREGANDO PRESET IOSYS ",SWITCH_TO_MATRIX:"CHAVE PARA MATRIX",SWITCH_TO_AUX:"CHAVE PARA AUX",GATE_PRESETS:"PRESETS DO GATE  ",AFS_PRESETS:"PRESETS AFS 2",PRE_PROCESSING:"PROCESSAMENTO DO PRÉ",POST_PROCESSING:"PÓS-PROCESSAMENTO",
ADDITIONAL_CHANNEL_DESTINATION:"saída direta",NO_PAN_ON_MONO_MATRIX:"SEM PAN <br> no MATRIX mono ",NO_USB_DEVICE_SELECTED:"Nenhum dispositivo USB SELECIONADO",GLOBAL_PRE_FADE_AUX_SEND_POINT:"PONTO GLOBAL AUX SEND",MOREME_PORTRAIT_MODE:"MOREME modo retrato",RESET_LOCAL_SETTINGS:"Redefinir as configurações LOCAIS",SYNC_SELECTED_CH:"SYNC ID DO CANAL SELECIONADO",MASTER_PASSWORD_PROTECTION:"PROTEÇÃO POR SENHA DO MASTER (GLOBAL) ",LOG_IN:"ENTRAR",LOG_OUT:"SAIR"};langBase.de=null;langBase.fr=null;
langBase.es=null;langBase.ru=null;langBase.pt=null;lang=langBase.en;
function ru_trans(a){for(var b=a+"",c=a+"";;){a=a.toUpperCase();a=a.replace(/NCE/g,"НСЕ");a=a.replace(/PROCE/g,"ПРОЦЕ");a=a.replace(/THIR/g,"СЁР");a=a.replace(/ENDO/g,"ЭНДО");a=a.replace(/THE/g,"ЗЕ");a=a.replace(/IGH/g,"АЙ");a=a.replace(/GAI/g,"ГЕЙ");a=a.replace(/SUB/g,"САБ");a=a.replace(/DY/g,"ДИ");a=a.replace(/SY/g,"CИ");a=a.replace(/AY/g,"ЭЙ");a=a.replace(/AI/g,"АЙ");a=a.replace(/ROU/g,"РУ");a=a.replace(/OU/g,"АУ");a=a.replace(/CH/g,"Ч");a=a.replace(/SH/g,"Ш");a=a.replace(/YA/g,"Я");a=a.replace(/YE/g,
"E");a=a.replace(/YU/g,"Ю");a=a.replace(/OO/g,"У");a=a.replace(/AI/g,"ЭЙ");a=a.replace(/EQU/g,"ЭКВ");a=a.replace(/EQ/g,"ЭКВ");a=a.replace(/QU/g,"КВ");a=a.replace(/TY/g,"ТЫ");a=a.replace(/CC/g,"КЦ");a=a.replace(/TS/g,"Ц");a=a.replace(/DS/g,"ДЗ");a=a.replace(/ALL/g,"ОЛ");a=a.replace(/IDEN/g,"АЙДЕН");a=a.replace(/IDE/g,"АЙД");a=a.replace(/PH/g,"Ф");a=a.replace(/ISAT/g,"IZAT");a=a.replace(/TIONAL/g,"ЦИОНАЛ");a=a.replace(/TION/g,"ЦИЯ");a=a.replace(/CK/g,"К");a=a.replace(/OW/g,"ОУ");a=a.replace(/MIXE/g,
"МИКШЕ");a=a.replace(/THI/g,"СИ");a=a.replace(/TH/g,"T");a=a.replace(/USE/g,"ЮЗЕ");a=a.replace(/RY/g,"РИ");a=a.replace(/FY/g,"ФАЙ");a=a.replace(/PY/g,"ПИ");a=a.replace(/PLY/g,"ПЛАЙ");a=a.replace(/LY/g,"ЛИ");a=a.replace(/CIA/g,"ЦИА");a=a.replace(/A/g,"А");a=a.replace(/B/g,"Б");a=a.replace(/C/g,"К");a=a.replace(/D/g,"Д");a=a.replace(/E/g,"Е");a=a.replace(/F/g,"Ф");a=a.replace(/G/g,"Г");a=a.replace(/H/g,"Х");a=a.replace(/I/g,"И");a=a.replace(/J/g,"ДЖ");a=a.replace(/K/g,"К");a=a.replace(/L/g,"Л");a=a.replace(/M/g,
"М");a=a.replace(/N/g,"Н");a=a.replace(/O/g,"О");a=a.replace(/P/g,"П");a=a.replace(/Q/g,"КУ");a=a.replace(/R/g,"Р");a=a.replace(/S/g,"С");a=a.replace(/T/g,"Т");a=a.replace(/U/g,"У");a=a.replace(/V/g,"В");a=a.replace(/W/g,"В");a=a.replace(/X/g,"КС");a=a.replace(/Y/g,"Й");a=a.replace(/Z/g,"З");a=a.replace(/ТХ/g,"З");a=a.replace(/ДОУН/g,"ДАУН");a=a.replace(/ЛТ/g,"ЛЬТ");a=a.replace(/ЛД/g,"ЛЬД");a=a.replace(/ЛК/g,"ЛЬК");a=a.replace(/ЛС/g,"ЛЬС");if(a==b)break;b=a}for(b=a+"";;){a=a.replace("<БР>","<br>");
if(a==b)break;b=a}"E"==c.substr(0,1)&&"Е"==a.substr(0,1)&&(a="Э"+a.substr(1,a.length));return a}function encodedStr(a){a=a.replace(/&/g,"&amp;");a=a.replace(/\</g,"&lt;");a=a.replace(/\>/g,"&gt;");a=a.replace(/"/g,"&quot;");return a=a.replace(/'/g,"&apos;")}
function dumpTranslation(a){print('<?xml version="1.0" encoding="utf-8"?>');print("<!DOCTYPE TS>");print('<TS version="2.0" sourcelanguage="en_GB">');print("<context>");print("    <name>Mixer</name>");var b=langBase.en;a=langBase[a];for(key in b)b.hasOwnProperty(key)&&"lang"!=key&&(a.hasOwnProperty(key)?(print("    <message>"),print("        <source>"+encodedStr(b[key])+"</source>"),print("        <translation>"+encodedStr(a[key])+"</translation>")):(print("    <message>"),print("        <source>"+
encodedStr(b[key])+"</source>"),print('        <translation type="unfinished"></translation>')),print("    </message>"));print("</context>");print("</TS>")}
var E_CABS2={0:"Fender Tweed Champ 1x8 Edge",1:"Fender Tweed Deluxe 1x12",2:"Fender Tweed Bassman 4x10",3:"Fender Blonde Bassman 2x12",4:"Fender Blackface Deluxe 1x12",5:"Fender Blackface Twin 2x12",6:"Marshall 4x12",7:"Marshall Greenback 4x12",8:"Johnson V30 4x12",9:"Hiwatt Fane 4x12",10:"Vht V30 4x12",11:"Vox Ac15 1x12 Center",12:"Vox Ac30 2x12",13:"Gsp2101 Speaker Compensation",14:"Digitech Bright Cab",15:"Digitech Solo Cab",16:"Digitech Rock Cab",17:"Digitech Altrock Cab",18:"Digitech Metal Cab",
19:"Digitech Numetal Cab",20:"Acoustic Dreadnaught Cab",21:"Acoustic Jumbo Cab",22:"Direct Cab"},E_AMPS2={0:"Direct",32:"Digitech BlackBass",33:"Digitech Blues",34:"Digitech Brown Sound",36:"Digitech CleanTube",37:"Digitech Crunch",41:"Digitech GSP2101 CleanTube",42:"Digitech GSP2101 SaturatedTube",43:"Digitech HiGain",44:"Digitech Metal",45:"Digitech Monster",47:"Digitech Solo",49:"Digitech Stoner Rock",50:"Digitech Transistor",51:"Digitech TweedFace",1:"Carvin Legacy",2:"Matchless Cheiftain",3:"Fender BlackFace Deluxe",
4:"Fender Blackface Twin",5:"Fender Brownface Bassman",6:"Fender Tweed Bassman",7:"Fender Tweed Champ",8:"Fender Tweed Deluxe",9:"Gibson GA40",10:"Hiwatt Custom 100",11:"Laney Supergroup",12:"Marshall JCM2000",13:"Marshall JCM800",14:"Marshall JCM900",15:"Marshall JTM45",16:"Marshall Master Volume",17:"Marshall Plexi",18:"Marshall Plexi Jumped",19:"Matchless DC30",20:"Mesa Dual Rectifier",21:"Mesa Mark IIC",22:"Mesa Mark IV",23:"Mesa Triple Rectifier",24:"Orange OR120",25:"Peavey 5150 II",26:"Randall RG100",
27:"Roland Jazz Chorus",28:"Soldano SLO100",29:"Sunn 100S",30:"VOX AC15",31:"VOX AC30",52:"Acoustic Dreadnaught",53:"Acoustic Jumbo"};
IMG_TABLE={"ui_about.png":{img:"imga_1.png",x:1,y:1,cw:1024,ch:748,dx:0,dy:0,ow:1024,oh:748,rot:!1},"TOPNAV-L.png":{img:"imga_1.png",x:1,y:751,cw:601,ch:75,dx:0,dy:0,ow:601,oh:75,rot:!1},"SCLOGO_B.png":{img:"imga_1.png",x:1,y:828,cw:567,ch:153,dx:0,dy:0,ow:567,oh:155,rot:!1},"TOPNAV-R-S.png":{img:"imga_1.png",x:570,y:828,cw:430,ch:75,dx:0,dy:0,ow:430,oh:75,rot:!1},"TOPNAV-R.png":{img:"imga_1.png",x:570,y:905,cw:430,ch:75,dx:0,dy:0,ow:430,oh:75,rot:!1},"TOPNAV-T3.png":{img:"imga_1.png",x:604,y:751,
cw:400,ch:75,dx:0,dy:0,ow:400,oh:75,rot:!1},"DIGI_AM.png":{img:"imga_1.png",x:1,y:983,cw:293,ch:26,dx:0,dy:0,ow:293,oh:26,rot:!1},"dbx_logo.png":{img:"imga_1.png",x:296,y:983,cw:276,ch:40,dx:0,dy:0,ow:276,oh:40,rot:!1},"lex_cho.png":{img:"imga_1.png",x:574,y:982,cw:252,ch:36,dx:0,dy:0,ow:252,oh:36,rot:!1},"SO-TILE.png":{img:"imga_1.png",x:70,y:1011,cw:224,ch:10,dx:0,dy:0,ow:224,oh:10,rot:!1},"SO-L-BTN-OFF.png":{img:"imga_1.png",x:828,y:982,cw:192,ch:36,dx:0,dy:0,ow:192,oh:36,rot:!1},"M VU TILE2.png":{img:"imga_1.png",
x:1006,y:751,cw:10,ch:120,dx:0,dy:0,ow:10,oh:120,rot:!1},"TOPNAV-T.png":{img:"imga_1.png",x:1002,y:873,cw:10,ch:75,dx:0,dy:0,ow:10,oh:75,rot:!1},"PEAK-ON.png":{img:"imga_1.png",x:1002,y:950,cw:20,ch:18,dx:1,dy:1,ow:22,oh:20,rot:!1},"PEAK-OFF.png":{img:"imga_1.png",x:55,y:1011,cw:13,ch:11,dx:5,dy:5,ow:22,oh:20,rot:!1},"M VU TILEH.png":{img:"imga_1.png",x:42,y:1011,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"M VU TILE4.png":{img:"imga_1.png",x:29,y:1011,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"M VU TILE5.png":{img:"imga_1.png",
x:16,y:1011,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"M VU TILE.png":{img:"imga_1.png",x:4,y:1011,cw:10,ch:12,dx:0,dy:0,ow:10,oh:12,rot:!1},"uix.png":{img:"imga_2.png",x:1,y:1,cw:670,ch:560,dx:0,dy:0,ow:670,oh:560,rot:!1},"SO-TOP.png":{img:"imga_2.png",x:673,y:1,cw:224,ch:546,dx:0,dy:0,ow:224,oh:546,rot:!1},"UI_SPLASH_D.png":{img:"imga_2.png",x:1,y:563,cw:489,ch:459,dx:0,dy:0,ow:489,oh:516,rot:!1},"M VU TILE3.png":{img:"imga_2.png",x:899,y:1,cw:10,ch:480,dx:0,dy:0,ow:10,oh:480,rot:!1},"SPKR-GREY.png":{img:"imga_2.png",
x:492,y:563,cw:391,ch:412,dx:13,dy:0,ow:416,oh:442,rot:!1},"DYN-LED.png":{img:"imga_2.png",x:492,y:977,cw:314,ch:42,dx:0,dy:0,ow:314,oh:42,rot:!1},"BLANK-SC-TILE.png":{img:"imga_2.png",x:911,y:1,cw:112,ch:300,dx:0,dy:0,ow:112,oh:300,rot:!1},"BLANK-SC-TILE4.png":{img:"imga_2.png",x:911,y:303,cw:112,ch:300,dx:0,dy:0,ow:112,oh:300,rot:!1},"C-TILE.png":{img:"imga_2.png",x:885,y:605,cw:112,ch:264,dx:0,dy:0,ow:112,oh:264,rot:!1},"SO-L-BTN-TUR.png":{img:"imga_2.png",x:808,y:977,cw:192,ch:33,dx:0,dy:0,ow:192,
oh:36,rot:!1},"EQ-AUX-LED.png":{img:"imga_2.png",x:885,y:871,cw:133,ch:42,dx:0,dy:0,ow:133,oh:42,rot:!1},"M-BOTTOM.png":{img:"imga_2.png",x:885,y:915,cw:127,ch:59,dx:0,dy:0,ow:127,oh:59,rot:!1},"SO_TILE.png":{img:"imga_2.png",x:673,y:549,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"SO_TILE_.png":{img:"imga_2.png",x:787,y:549,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"SO-SC-TILE.png":{img:"imga_2.png",x:808,y:1012,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"PAN-SLIDER.png":{img:"imga_2.png",x:885,
y:561,cw:18,ch:39,dx:0,dy:0,ow:18,oh:40,rot:!1},"lock.png":{img:"imga_2.png",x:999,y:605,cw:16,ch:20,dx:11,dy:9,ow:38,oh:38,rot:!1},"lock_3.png":{img:"imga_2.png",x:999,y:627,cw:14,ch:16,dx:3,dy:2,ow:20,oh:20,rot:!1},"BOLT_ICON.png":{img:"imga_2.png",x:999,y:645,cw:12,ch:16,dx:2,dy:0,ow:16,oh:16,rot:!1},"BOLT_ICON_W.png":{img:"imga_2.png",x:999,y:663,cw:12,ch:16,dx:2,dy:0,ow:16,oh:16,rot:!1},"picto_gr.png":{img:"imga_2.png",x:999,y:681,cw:14,ch:14,dx:0,dy:0,ow:14,oh:14,rot:!1},"picto_gr2.png":{img:"imga_2.png",
x:999,y:681,cw:14,ch:14,dx:0,dy:0,ow:14,oh:14,rot:!1},"PEDAL-LIGHT-ON.png":{img:"imga_2.png",x:999,y:697,cw:11,ch:11,dx:0,dy:0,ow:11,oh:11,rot:!1},"lex_plate_clean.png":{img:"imga_3.png",x:1,y:1,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-REV.png":{img:"imga_3.png",x:403,y:1,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-RM.png":{img:"imga_3.png",x:1,y:93,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-DB.png":{img:"imga_3.png",x:403,y:93,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-DA.png":{img:"imga_3.png",
x:1,y:185,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-CH.png":{img:"imga_3.png",x:403,y:185,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"DIGICAB_A2.png":{img:"imga_3.png",x:1,y:277,cw:391,ch:150,dx:13,dy:0,ow:416,oh:150,rot:!1},"DIGIAMP_A.png":{img:"imga_3.png",x:394,y:277,cw:345,ch:139,dx:0,dy:0,ow:345,oh:139,rot:!1},"AMP-GREY.png":{img:"imga_3.png",x:678,y:418,cw:345,ch:139,dx:0,dy:0,ow:345,oh:139,rot:!1},"lex_logo.png":{img:"imga_3.png",x:741,y:277,cw:246,ch:36,dx:0,dy:0,ow:246,oh:36,rot:!1},
"lex_dly.png":{img:"imga_3.png",x:741,y:315,cw:238,ch:40,dx:0,dy:0,ow:238,oh:40,rot:!1},"lex_rmlogo.png":{img:"imga_3.png",x:741,y:357,cw:236,ch:36,dx:0,dy:0,ow:236,oh:36,rot:!1},"SO-BOTTOM.png":{img:"imga_3.png",x:452,y:418,cw:224,ch:142,dx:0,dy:0,ow:224,oh:142,rot:!1},"M-TOP-NCS.png":{img:"imga_3.png",x:805,y:1,cw:127,ch:202,dx:0,dy:0,ow:127,oh:202,rot:!1},"AUX-M-TOP2.png":{img:"imga_3.png",x:323,y:429,cw:127,ch:202,dx:0,dy:0,ow:127,oh:202,rot:!1},"C-AUX-TOP-UPD.png":{img:"imga_3.png",x:209,y:429,
cw:112,ch:202,dx:0,dy:0,ow:112,oh:202,rot:!1},"C-AUX-TOP.png":{img:"imga_3.png",x:95,y:429,cw:112,ch:202,dx:0,dy:0,ow:112,oh:202,rot:!1},"AUX-SC-TOP.png":{img:"imga_3.png",x:911,y:559,cw:112,ch:201,dx:0,dy:0,ow:112,oh:201,rot:!1},"C-TOP.png":{img:"imga_3.png",x:797,y:559,cw:112,ch:201,dx:0,dy:0,ow:112,oh:201,rot:!1},"TOPNAV-T2.png":{img:"imga_3.png",x:595,y:562,cw:200,ch:75,dx:0,dy:0,ow:200,oh:75,rot:!1},"SO-L-BTN-RED.png":{img:"imga_3.png",x:805,y:205,cw:192,ch:33,dx:0,dy:0,ow:192,oh:36,rot:!1},
"SO-SC-TOP.png":{img:"imga_3.png",x:481,y:562,cw:112,ch:190,dx:0,dy:0,ow:112,oh:190,rot:!1},"SC-TOP.png":{img:"imga_3.png",x:367,y:633,cw:112,ch:190,dx:0,dy:0,ow:112,oh:190,rot:!1},"EQ-CHN-LED.png":{img:"imga_3.png",x:175,y:633,cw:190,ch:42,dx:0,dy:0,ow:190,oh:42,rot:!1},"BLANK-SC-TOP2.png":{img:"imga_3.png",x:61,y:633,cw:112,ch:161,dx:0,dy:0,ow:112,oh:161,rot:!1},"TOPNAV-LED.png":{img:"imga_3.png",x:595,y:639,cw:157,ch:42,dx:2,dy:0,ow:160,oh:54,rot:!1},"LED-PRESET.png":{img:"imga_3.png",x:805,y:240,
cw:150,ch:24,dx:0,dy:0,ow:150,oh:24,rot:!1},"M-TILE.png":{img:"imga_3.png",x:175,y:677,cw:127,ch:42,dx:0,dy:0,ow:127,oh:42,rot:!1},"M-LABEL.png":{img:"imga_3.png",x:595,y:683,cw:127,ch:34,dx:0,dy:0,ow:127,oh:34,rot:!1},"SO-SC-BOTTOM.png":{img:"imga_3.png",x:253,y:721,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},"SC-BOTTOM.png":{img:"imga_3.png",x:595,y:719,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},"SO_SCUI_LOGO_.png":{img:"imga_3.png",x:481,y:754,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},
"MTA-OFF.png":{img:"imga_3.png",x:709,y:762,cw:119,ch:37,dx:0,dy:0,ow:119,oh:37,rot:!1},"CMIX-OFF.png":{img:"imga_3.png",x:830,y:762,cw:119,ch:37,dx:0,dy:0,ow:119,oh:37,rot:!1},"MTA-ON.png":{img:"imga_3.png",x:1,y:796,cw:119,ch:35,dx:0,dy:0,ow:119,oh:37,rot:!1},"CMIX-ON.png":{img:"imga_3.png",x:122,y:796,cw:119,ch:35,dx:0,dy:0,ow:119,oh:37,rot:!1},"LARGE-MUTE-OFF.png":{img:"imga_3.png",x:906,y:801,cw:117,ch:37,dx:0,dy:0,ow:117,oh:37,rot:!1},"LARGE-MUTE-ON.png":{img:"imga_3.png",x:787,y:801,cw:117,
ch:35,dx:0,dy:0,ow:117,oh:37,rot:!1},"AUX-SC-TILE.png":{img:"imga_3.png",x:367,y:825,cw:112,ch:100,dx:0,dy:0,ow:112,oh:100,rot:!1},"SO_BOTTOM.png":{img:"imga_3.png",x:1,y:833,cw:112,ch:78,dx:0,dy:0,ow:112,oh:78,rot:!1},"SO_SCA_LOGO_F.png":{img:"imga_3.png",x:115,y:833,cw:112,ch:64,dx:0,dy:0,ow:112,oh:64,rot:!1},"SO_SCB_LOGO.png":{img:"imga_3.png",x:709,y:838,cw:112,ch:64,dx:0,dy:0,ow:112,oh:64,rot:!1},"BLANK-SC-BOTTOM.png":{img:"imga_3.png",x:823,y:840,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},
"AUX-SC-BOTTOM.png":{img:"imga_3.png",x:229,y:848,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"BLANK-SC-TILE3.png":{img:"imga_3.png",x:823,y:840,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"C-BOT.png":{img:"imga_3.png",x:595,y:846,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"C-TILE_small.png":{img:"imga_3.png",x:481,y:881,cw:112,ch:42,dx:0,dy:0,ow:112,oh:42,rot:!1},"BLANK-SC-TILE2.png":{img:"imga_3.png",x:115,y:899,cw:112,ch:42,dx:0,dy:0,ow:112,oh:42,rot:!1},"BLANK-SC-LABEL.png":{img:"imga_3.png",
x:911,y:901,cw:112,ch:35,dx:0,dy:0,ow:112,oh:35,rot:!1},"C-LABEL.png":{img:"imga_3.png",x:797,y:904,cw:112,ch:34,dx:0,dy:0,ow:112,oh:34,rot:!1},"SC-TILE.png":{img:"imga_3.png",x:741,y:395,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"MUTE-L-BTN-OFF.png":{img:"imga_3.png",x:691,y:907,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},"HIZ-OFF.png":{img:"imga_3.png",x:229,y:909,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},"PHANTOM-OFF.png":{img:"imga_3.png",x:9,y:913,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},
"PHANTOM-ON.png":{img:"imga_3.png",x:585,y:925,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},"HIZ-ON.png":{img:"imga_3.png",x:335,y:927,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},"MUTE-L-BTN-ON.png":{img:"imga_3.png",x:441,y:927,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},"DIGITECH_LOGO.png":{img:"imga_3.png",x:855,y:395,cw:102,ch:18,dx:0,dy:0,ow:102,oh:18,rot:!1},"TAP-BLA-OFF.png":{img:"imga_3.png",x:922,y:938,cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-B-OFF.png":{img:"imga_3.png",x:819,y:940,
cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"MOME-OFF.png":{img:"imga_3.png",x:716,y:946,cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-B-ON2.png":{img:"imga_3.png",x:115,y:943,cw:101,ch:43,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-B-ON.png":{img:"imga_3.png",x:218,y:948,cw:101,ch:43,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-BLA-ON.png":{img:"imga_3.png",x:12,y:952,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-BLU-ON.png":{img:"imga_3.png",x:321,y:964,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"MOME-ON.png":{img:"imga_3.png",
x:424,y:964,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"VIEWGR-BTN-OFF.png":{img:"imga_3.png",x:527,y:964,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"TAPT-BTN-OFF.png":{img:"imga_3.png",x:922,y:985,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"SUBGR-BTN-OFF.png":{img:"imga_3.png",x:819,y:987,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEA-BTN-OFF.png":{img:"imga_3.png",x:115,y:988,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"mix_a.png":{img:"imga_3.png",x:1,y:429,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,
rot:!1},"EDT-ON_T.png":{img:"imga_3.png",x:1,y:475,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"EDT-ON.png":{img:"imga_3.png",x:1,y:521,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"mix_b2.png":{img:"imga_3.png",x:1,y:567,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"SO-B-BTN-OFF.png":{img:"imga_3.png",x:934,y:1,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-PNK.png":{img:"imga_3.png",x:934,y:59,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-BLU.png":{img:"imga_3.png",x:934,y:114,cw:88,ch:53,dx:0,
dy:0,ow:88,oh:56,rot:!1},"SO-M-BTN-BLU.png":{img:"imga_3.png",x:934,y:169,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SLIDER_YELLOW.png":{img:"imga_3.png",x:989,y:240,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_PINK.png":{img:"imga_3.png",x:981,y:327,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_GREEN.png":{img:"imga_3.png",x:28,y:613,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_BLUE.png":{img:"imga_3.png",x:754,y:639,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_RED.png":{img:"imga_3.png",
x:28,y:700,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"AUXS-LED.png":{img:"imga_3.png",x:709,y:726,cw:80,ch:29,dx:0,dy:0,ow:80,oh:29,rot:!1},"EQ-ON.png":{img:"imga_3.png",x:937,y:840,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"UMIX-ON3.png":{img:"imga_3.png",x:630,y:962,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"SLIDER_SILVER_H.png":{img:"imga_3.png",x:175,y:721,cw:72,ch:46,dx:0,dy:0,ow:72,oh:49,rot:!1},"AFS-OFF-B.png":{img:"imga_3.png",x:951,y:762,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"BYPASS-ON.png":{img:"imga_3.png",
x:709,y:801,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"FX-S-LED.png":{img:"imga_3.png",x:175,y:769,cw:70,ch:23,dx:0,dy:0,ow:70,oh:23,rot:!1},"lex.png":{img:"imga_3.png",x:218,y:993,cw:66,ch:21,dx:0,dy:0,ow:66,oh:21,rot:!1},"EQ-FADER-H-GRAY.png":{img:"imga_3.png",x:304,y:677,cw:61,ch:42,dx:0,dy:0,ow:61,oh:45,rot:!1},"AFS2LOGO.png":{img:"imga_3.png",x:778,y:993,cw:39,ch:23,dx:0,dy:0,ow:39,oh:23,rot:!1},"dbx.png":{img:"imga_3.png",x:547,y:925,cw:36,ch:21,dx:0,dy:0,ow:36,oh:21,rot:!1},"lex_load-btn-off.png":{img:"imga_3.png",
x:286,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"lex_load-btn-on.png":{img:"imga_3.png",x:745,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"lex_load-btn-off_b.png":{img:"imga_3.png",x:712,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"FXRET-BTN-OFF.png":{img:"imga_4.png",x:1,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"INPUTS-OFF.png":{img:"imga_4.png",x:104,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEGR-BTN-OFF.png":{img:"imga_4.png",x:207,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,
oh:35,rot:!1},"AUXM-BTN-OFF.png":{img:"imga_4.png",x:310,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEA-BTN-ON.png":{img:"imga_4.png",x:413,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEGR-BTN-ON.png":{img:"imga_4.png",x:516,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"INPUTS-ON.png":{img:"imga_4.png",x:619,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"SUBGR-BTN-ON.png":{img:"imga_4.png",x:722,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"TAPT-BTN-ON.png":{img:"imga_4.png",
x:825,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"VIEWGR-BTN-ON.png":{img:"imga_4.png",x:922,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"FXRET-BTN-ON.png":{img:"imga_4.png",x:819,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"AUXM-BTN-ON.png":{img:"imga_4.png",x:716,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"AUXM-BTN-ON2.png":{img:"imga_4.png",x:613,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"TAP-B-OFF_.png":{img:"imga_4.png",x:517,y:35,cw:94,ch:44,dx:0,dy:0,ow:94,oh:46,
rot:!1},"TAP-B-ON_.png":{img:"imga_4.png",x:421,y:35,cw:94,ch:44,dx:0,dy:0,ow:94,oh:46,rot:!1},"AUX-BTN_Y1.png":{img:"imga_4.png",x:327,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"FXS-ON.png":{img:"imga_4.png",x:233,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"MIX_B100.png":{img:"imga_4.png",x:139,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"AUXS-ON.png":{img:"imga_4.png",x:45,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"MIXG-ON.png":{img:"imga_4.png",x:931,y:69,cw:92,ch:43,dx:0,dy:0,
ow:92,oh:49,rot:!1},"MIXG-GAIN.png":{img:"imga_4.png",x:837,y:69,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"GAIN-ON.png":{img:"imga_4.png",x:743,y:69,cw:92,ch:40,dx:0,dy:3,ow:92,oh:49,rot:!1},"FXS-OFF.png":{img:"imga_4.png",x:651,y:69,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"GAIN-OFF.png":{img:"imga_4.png",x:559,y:81,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"MIXG-OFF.png":{img:"imga_4.png",x:467,y:81,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"AUXS-OFF.png":{img:"imga_4.png",x:375,y:83,cw:90,ch:45,
dx:1,dy:4,ow:92,oh:49,rot:!1},"EDT-OFF.png":{img:"imga_4.png",x:283,y:83,cw:90,ch:44,dx:1,dy:5,ow:92,oh:49,rot:!1},"TAPT-BTN_DLY-OFF.png":{img:"imga_4.png",x:191,y:83,cw:90,ch:35,dx:0,dy:0,ow:90,oh:35,rot:!1},"TAPT-BTN_DLY-ON.png":{img:"imga_4.png",x:928,y:1,cw:90,ch:32,dx:0,dy:0,ow:90,oh:35,rot:!1},"SO-B-BTN-YLW.png":{img:"imga_4.png",x:101,y:83,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-GRE.png":{img:"imga_4.png",x:11,y:83,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-M-BTN-OFF.png":{img:"imga_4.png",
x:743,y:111,cw:88,ch:36,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-PNK.png":{img:"imga_4.png",x:833,y:114,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-TUR.png":{img:"imga_4.png",x:923,y:114,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-RED.png":{img:"imga_4.png",x:653,y:116,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SLIDER_PEW.png":{img:"imga_4.png",x:191,y:120,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_PURPLE.png":{img:"imga_4.png",x:224,y:120,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},
"FADER_UI.png":{img:"imga_4.png",x:257,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_BLUE.png":{img:"imga_4.png",x:290,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI_A.png":{img:"imga_4.png",x:323,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_YELLOW.png":{img:"imga_4.png",x:356,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI_B.png":{img:"imga_4.png",x:389,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_PINK.png":{img:"imga_4.png",x:422,y:130,cw:31,ch:85,
dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI_BL.png":{img:"imga_4.png",x:455,y:130,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-ORANGE.png":{img:"imga_4.png",x:488,y:128,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-RED2.png":{img:"imga_4.png",x:521,y:128,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-SILVER2.png":{img:"imga_4.png",x:554,y:128,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"AUX-ON.png":{img:"imga_4.png",x:112,y:138,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"UMIX-ON.png":{img:"imga_4.png",
x:33,y:138,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"UMIX-ON2.png":{img:"imga_4.png",x:587,y:151,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"FX-ON.png":{img:"imga_4.png",x:666,y:151,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"DYN-ON.png":{img:"imga_4.png",x:745,y:149,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"PEDAL-GREY.png":{img:"imga_4.png",x:824,y:149,cw:62,ch:76,dx:0,dy:0,ow:62,oh:76,rot:!1},"EQ-FADER-RED.png":{img:"imga_4.png",x:1,y:138,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-YELLOW.png":{img:"imga_4.png",
x:888,y:149,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-PURPLE.png":{img:"imga_4.png",x:920,y:149,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-GREEN.png":{img:"imga_4.png",x:952,y:149,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-BLUE.png":{img:"imga_4.png",x:984,y:149,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"EQ-FADER-GREY.png":{img:"imga_4.png",x:33,y:185,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-ORANGE.png":{img:"imga_4.png",x:65,y:185,cw:30,ch:74,dx:0,dy:0,ow:30,
oh:75,rot:!1},"AFS-OFF.png":{img:"imga_4.png",x:97,y:185,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"RESET-OFF.png":{img:"imga_4.png",x:745,y:196,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"SOFT-KNEE-OFF.png":{img:"imga_4.png",x:671,y:198,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"SETUP-OFF.png":{img:"imga_4.png",x:597,y:198,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"HARD-KNEE-OFF.png":{img:"imga_4.png",x:171,y:207,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"FIXED-OFF.png":{img:"imga_4.png",x:523,y:215,
cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"LIVE-OFF.png":{img:"imga_4.png",x:245,y:217,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-BTN-OFF.png":{img:"imga_4.png",x:319,y:217,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"RTA_OFF.png":{img:"imga_4.png",x:393,y:217,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"OFF-OFF.png":{img:"imga_4.png",x:97,y:224,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"BYPASS-OFF.png":{img:"imga_4.png",x:951,y:225,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"NEXT-OFF.png":{img:"imga_4.png",
x:877,y:227,cw:72,ch:36,dx:0,dy:0,ow:72,oh:36,rot:!1},"OFF-ON.png":{img:"imga_4.png",x:803,y:235,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"LIVE-ON.png":{img:"imga_4.png",x:729,y:237,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"SOFT-KNEE-ON.png":{img:"imga_4.png",x:655,y:237,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"ON-ON.png":{img:"imga_4.png",x:171,y:246,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"BYPASS-ON2.png":{img:"imga_4.png",x:581,y:254,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"HARD-KNEE-ON.png":{img:"imga_4.png",
x:245,y:256,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"RTA_ON.png":{img:"imga_4.png",x:319,y:256,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-BTN-ON.png":{img:"imga_4.png",x:393,y:256,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-ON.png":{img:"imga_4.png",x:467,y:254,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"SETUP-ON.png":{img:"imga_4.png",x:97,y:263,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"DES-ON.png":{img:"imga_4.png",x:23,y:261,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"FIXED-ON.png":{img:"imga_4.png",
x:951,y:264,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"AFS-ON.png":{img:"imga_4.png",x:877,y:265,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"RESET-ON.png":{img:"imga_4.png",x:803,y:272,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"NEXT-ON.png":{img:"imga_4.png",x:729,y:274,cw:72,ch:33,dx:0,dy:0,ow:72,oh:36,rot:!1},"FX-OFF.png":{img:"imga_4.png",x:656,y:274,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"DYN-OFF.png":{img:"imga_4.png",x:171,y:283,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"AUX-OFF.png":{img:"imga_4.png",
x:244,y:293,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"UMIX-OFF.png":{img:"imga_4.png",x:317,y:293,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"EQ-OFF.png":{img:"imga_4.png",x:390,y:293,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"MEDIA-REC-OFF.png":{img:"imga_4.png",x:463,y:293,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-NEXT-OFF.png":{img:"imga_4.png",x:535,y:291,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PLAY.png":{img:"imga_4.png",x:99,y:300,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PREV-OFF.png":{img:"imga_4.png",
x:27,y:300,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-STOP-OFF.png":{img:"imga_4.png",x:953,y:301,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"FX-B-LED.png":{img:"imga_4.png",x:881,y:302,cw:70,ch:40,dx:0,dy:0,ow:70,oh:40,rot:!1},"MEDIA-STOP-ON.png":{img:"imga_4.png",x:809,y:309,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PAUSE.png":{img:"imga_4.png",x:737,y:309,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PREV-ON.png":{img:"imga_4.png",x:665,y:321,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},
"MEDIA-NEXT-ON.png":{img:"imga_4.png",x:171,y:330,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"DES-OFF.png":{img:"imga_4.png",x:243,y:340,cw:70,ch:36,dx:1,dy:1,ow:72,oh:37,rot:!1},"CHORUS-ON.png":{img:"imga_4.png",x:315,y:340,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"DELAY-GR-ON.png":{img:"imga_4.png",x:387,y:340,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"MEDIA-REC-ON2.png":{img:"imga_4.png",x:459,y:340,cw:70,ch:35,dx:0,dy:0,ow:70,oh:44,rot:!1},"FX_BTN_BLU.png":{img:"imga_4.png",x:531,y:339,cw:70,
ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"ROOM-GR-ON.png":{img:"imga_4.png",x:99,y:346,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"REVERB-ON.png":{img:"imga_4.png",x:27,y:346,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_OR.png":{img:"imga_4.png",x:881,y:344,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"DELAY-OR-ON.png":{img:"imga_4.png",x:953,y:347,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_GR.png":{img:"imga_4.png",x:809,y:350,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_PUR.png":{img:"imga_4.png",
x:737,y:350,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"ROOM-OFF.png":{img:"imga_4.png",x:665,y:362,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"REVERB-OFF.png":{img:"imga_4.png",x:171,y:371,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"DELAY-OFF.png":{img:"imga_4.png",x:243,y:378,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"CHORUS-OFF.png":{img:"imga_4.png",x:315,y:377,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"FX_BTN_OFF.png":{img:"imga_4.png",x:387,y:377,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"EQ-1x2-LED.png":{img:"imga_4.png",
x:459,y:377,cw:66,ch:42,dx:0,dy:0,ow:66,oh:42,rot:!1},"M-MUTE-OFF.png":{img:"imga_4.png",x:607,y:321,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PRV-SNP-OFF.png":{img:"imga_4.png",x:607,y:360,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"F1-OFF.png":{img:"imga_4.png",x:527,y:377,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-MUTE-OFF_F.png":{img:"imga_4.png",x:113,y:383,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAYS-OFF.png":{img:"imga_4.png",x:55,y:383,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"F2-OFF.png":{img:"imga_4.png",
x:881,y:381,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAY-BTN-OFF.png":{img:"imga_4.png",x:939,y:384,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"RECS-OFF.png":{img:"imga_4.png",x:823,y:387,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTRK-PLAY.png":{img:"imga_4.png",x:765,y:387,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"REC-BTN-OFF.png":{img:"imga_4.png",x:707,y:398,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MENU_BTN.png":{img:"imga_4.png",x:649,y:399,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-REC-OFF.png":{img:"imga_4.png",
x:591,y:399,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"NXT-SNP-OFF.png":{img:"imga_4.png",x:171,y:407,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-SOLO-OFF.png":{img:"imga_4.png",x:229,y:414,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"F2-ON.png":{img:"imga_4.png",x:287,y:414,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"SAVE-ON.png":{img:"imga_4.png",x:345,y:413,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAY-BTN-ON.png":{img:"imga_4.png",x:533,y:416,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"SAVEAS-ON.png":{img:"imga_4.png",
x:403,y:421,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAYS-STOP.png":{img:"imga_4.png",x:461,y:421,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"REC-BTN-ON.png":{img:"imga_4.png",x:113,y:422,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PRV-SNP-ON.png":{img:"imga_4.png",x:55,y:422,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"RECS-STOP.png":{img:"imga_4.png",x:881,y:420,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"F1-ON.png":{img:"imga_4.png",x:939,y:423,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-MUTE-ON.png":{img:"imga_4.png",
x:823,y:426,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-SOLO-ON.png":{img:"imga_4.png",x:765,y:426,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-REC-ON.png":{img:"imga_4.png",x:707,y:437,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-STOP.png":{img:"imga_4.png",x:649,y:438,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"NXT-SNP-ON.png":{img:"imga_4.png",x:591,y:438,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"SO-M-SLV.png":{img:"imga_4.png",x:171,y:446,cw:54,ch:37,dx:0,dy:0,ow:54,oh:37,rot:!1},"SAVEAS-OFF.png":{img:"imga_4.png",
x:535,y:453,cw:54,ch:36,dx:1,dy:1,ow:56,oh:37,rot:!1},"SAVE-OFF.png":{img:"imga_4.png",x:227,y:453,cw:54,ch:36,dx:1,dy:1,ow:56,oh:37,rot:!1},"SO-M-BLU.png":{img:"imga_4.png",x:467,y:217,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-RED.png":{img:"imga_4.png",x:283,y:453,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-YLW.png":{img:"imga_4.png",x:339,y:451,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-GRE.png":{img:"imga_4.png",x:395,y:458,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SETTINGS-ON.png":{img:"imga_4.png",
x:2,y:383,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"SCENE-ON.png":{img:"imga_4.png",x:2,y:430,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"TV-ON.png":{img:"imga_4.png",x:451,y:458,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"AUD-BTN-ON.png":{img:"imga_4.png",x:118,y:459,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"FADERB-FX2.png":{img:"imga_4.png",x:65,y:459,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADER-FX3.png":{img:"imga_4.png",x:881,y:457,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERP-FX2.png":{img:"imga_4.png",
x:934,y:460,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERO-FX2.png":{img:"imga_4.png",x:828,y:463,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERG-FX2.png":{img:"imga_4.png",x:775,y:463,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"PATTERN_DNS.png":{img:"imga_4.png",x:723,y:474,cw:50,ch:50,dx:0,dy:0,ow:50,oh:50,rot:!1},"SOLO-SC-OFF.png":{img:"imga_4.png",x:671,y:475,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-SC-OFF_OLD.png":{img:"imga_4.png",x:619,y:475,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},
"48V-OFF.png":{img:"imga_4.png",x:13,y:477,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PI-OFF.png":{img:"imga_4.png",x:171,y:485,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF_OLD.png":{img:"imga_4.png",x:567,y:491,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-OFF.png":{img:"imga_4.png",x:223,y:491,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF_F.png":{img:"imga_4.png",x:515,y:491,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"HIZ-OFF2.png":{img:"imga_4.png",x:275,y:491,cw:50,ch:37,dx:0,
dy:0,ow:50,oh:37,rot:!1},"CL_BTN_OFF.png":{img:"imga_4.png",x:327,y:489,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF.png":{img:"imga_4.png",x:379,y:494,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PREFX.png":{img:"imga_4.png",x:431,y:505,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE-OFF_y.png":{img:"imga_4.png",x:881,y:498,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE-OFF.png":{img:"imga_4.png",x:933,y:501,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE.png":{img:"imga_4.png",x:829,y:504,
cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE_PROC_OFF.png":{img:"imga_4.png",x:777,y:504,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-ONW.png":{img:"imga_4.png",x:65,y:500,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-ON.png":{img:"imga_4.png",x:117,y:506,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-SC-ON.png":{img:"imga_4.png",x:13,y:516,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-ON.png":{img:"imga_4.png",x:665,y:514,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"48V-ON.png":{img:"imga_4.png",
x:717,y:526,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"HIZ-ON2.png":{img:"imga_4.png",x:171,y:524,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"CL_BTN_ON.png":{img:"imga_4.png",x:613,y:530,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-ON.png":{img:"imga_4.png",x:223,y:530,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST_PROC_ON_W.png":{img:"imga_4.png",x:561,y:530,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST-ON_g.png":{img:"imga_4.png",x:275,y:530,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POSTFX.png":{img:"imga_4.png",
x:327,y:528,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST-ON.png":{img:"imga_4.png",x:509,y:530,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"PI-ON.png":{img:"imga_4.png",x:379,y:533,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST_PROC_ON_O.png":{img:"imga_4.png",x:431,y:544,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-ONO.png":{img:"imga_4.png",x:881,y:537,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SO-S-SLV.png":{img:"imga_4.png",x:769,y:543,cw:49,ch:37,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-YLW.png":{img:"imga_4.png",
x:820,y:543,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-BLU.png":{img:"imga_4.png",x:933,y:540,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-GRE.png":{img:"imga_4.png",x:65,y:537,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-RED.png":{img:"imga_4.png",x:116,y:543,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"AFSON-OFF.png":{img:"imga_4.png",x:16,y:553,cw:47,ch:37,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-OFF2.png":{img:"imga_4.png",x:665,y:551,cw:47,ch:37,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-ON.png":{img:"imga_4.png",
x:714,y:563,cw:47,ch:35,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-ON2.png":{img:"imga_4.png",x:171,y:561,cw:47,ch:35,dx:0,dy:0,ow:47,oh:37,rot:!1},"YOUTUBE-OFF.png":{img:"imga_4.png",x:618,y:567,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"RSS-ON.png":{img:"imga_4.png",x:220,y:567,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"YOUTUBE-ON.png":{img:"imga_4.png",x:571,y:567,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"RSS-OFF.png":{img:"imga_4.png",x:267,y:567,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"WWW-ON.png":{img:"imga_4.png",
x:524,y:567,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"SCENE-OFF.png":{img:"imga_4.png",x:314,y:567,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"WWW-OFF.png":{img:"imga_4.png",x:361,y:570,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FACEBOOK-OFF.png":{img:"imga_4.png",x:408,y:581,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"TV-OFF.png":{img:"imga_4.png",x:455,y:581,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"EMAIL-ON.png":{img:"imga_4.png",x:65,y:573,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"AUD-BTN-OFF.png":{img:"imga_4.png",
x:881,y:574,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"EMAIL-OFF.png":{img:"imga_4.png",x:928,y:576,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FACEBOOK-ON.png":{img:"imga_4.png",x:975,y:576,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"ADOBE-ON.png":{img:"imga_4.png",x:834,y:579,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FAQ-OFF.png":{img:"imga_4.png",x:112,y:579,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FORUM-ON.png":{img:"imga_4.png",x:787,y:582,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FAQ-ON.png":{img:"imga_4.png",
x:18,y:592,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FORUM-OFF.png":{img:"imga_4.png",x:665,y:590,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"ADOBE-OFF.png":{img:"imga_4.png",x:712,y:600,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"SETTINGS-OFF.png":{img:"imga_4.png",x:159,y:598,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"TV_OFF.png":{img:"imga_4.png",x:206,y:614,cw:45,ch:44,dx:3,dy:5,ow:51,oh:49,rot:!1},"CLEAR-SOLOS-OFF.png":{img:"imga_4.png",x:253,y:614,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-ALL-OFF.png":{img:"imga_4.png",
x:299,y:614,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-FX-OFF.png":{img:"imga_4.png",x:345,y:617,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"CLEAR-SOLOS-ON.png":{img:"imga_4.png",x:502,y:614,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-ALL-ON.png":{img:"imga_4.png",x:548,y:614,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-FX-ON.png":{img:"imga_4.png",x:594,y:614,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"LEX_TAP_OFF.png":{img:"imga_4.png",x:2,y:38,cw:41,ch:33,dx:0,dy:0,ow:41,oh:33,rot:!1},
"LEX_TAP_ON.png":{img:"imga_4.png",x:391,y:628,cw:41,ch:33,dx:0,dy:0,ow:41,oh:33,rot:!1},"nr/NR4-OFF.png":{img:"imga_4.png",x:434,y:628,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-OFF.png":{img:"imga_4.png",x:65,y:620,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-OFF.png":{img:"imga_4.png",x:881,y:621,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-OFF.png":{img:"imga_4.png",x:923,y:623,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-R-OFF.png":{img:"imga_4.png",x:965,y:623,cw:40,ch:35,
dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-OFF.png":{img:"imga_4.png",x:839,y:626,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-L-OFF.png":{img:"imga_4.png",x:107,y:626,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-OFF.png":{img:"imga_4.png",x:797,y:629,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-BEI-ON.png":{img:"imga_4.png",x:665,y:637,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-RED-ON.png":{img:"imga_4.png",x:1,y:639,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-BLUE-ON.png":{img:"imga_4.png",
x:707,y:647,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-RED-ON.png":{img:"imga_4.png",x:749,y:647,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-RED-ON.png":{img:"imga_4.png",x:159,y:645,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-BLUE-ON.png":{img:"imga_4.png",x:623,y:653,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-RED-ON.png":{img:"imga_4.png",x:581,y:653,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-BLUE-ON.png":{img:"imga_4.png",x:539,y:653,cw:40,ch:32,dx:0,dy:0,ow:40,
oh:35,rot:!1},"nr/NR3-BLUE-ON.png":{img:"imga_4.png",x:497,y:653,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-BEI-ON.png":{img:"imga_4.png",x:201,y:660,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-BLUE-ON.png":{img:"imga_4.png",x:243,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-RED-ON.png":{img:"imga_4.png",x:285,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-BEI-ON.png":{img:"imga_4.png",x:327,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-R-ON.png":{img:"imga_4.png",
x:369,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-BLUE-ON.png":{img:"imga_4.png",x:411,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-L-ON.png":{img:"imga_4.png",x:453,y:665,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-RED-ON.png":{img:"imga_4.png",x:65,y:657,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-BEI-ON.png":{img:"imga_4.png",x:881,y:658,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1}};MUTEALL_BIT_IDX=23;MUTEFX_BIT_IDX=22;
E_MODE={MIX:0,GAIN:1,EDIT:2,DYN:3,AUX:4,FXEDIT:5,FXSENDS:6,SETTINGS:7,MODALS:8,PLAYER:9,FULL_PEQ:14,FULL_GEQ:15,MOREME:20,NETWORK:30,PONG:777};E_STRIP_TYPE={IN:1,GAIN:100,FX:2,SUB:3,AUX:4,MEDIA:6,AUXSEND:7,FXSEND:8,MTXSEND:9,MASTER:10,LINEIN:12,VCA:20,HW:777};E_STRIP_MODE={MIX:1,GAIN:2,FX:4,AUX:5,SUB:8,MASTER:10,VCA:20};E_FX={REVERB:0,DELAY:1,CHORUS:2,ROOM:3};E_LINES={off:0,thin:1,norm:2};
E_COMMANDS={TOGGLE_REC:"RECTOGGLE",TOGGLE_MTK_REC:"MTK_REC_TOGGLE",MTK_PLAY:"MTK_PLAY",MTK_STOP:"MTK_STOP",MTK_PAUSE:"MTK_PAUSE",MTK_JUMP_TO:"MTK_JUMP_TO",MTK_SET_SESSION:"MTK_SELECT",MTK_DEL_SESSION:"MTK_DELETE",MTK_GET_SESSIONS:"MTK_GET_SESSIONS",MTK_GET_FILES:"MTK_GET_FILES",MTK_REC_PLAY:"MTK_REC",MTK_REC_STOP:"MTK_REC_STOP",MTK_REC_PAUSE:"MTK_REC_PAUSE",MTK_REC_JUMP_TO:"MTK_REC_JUMP_TO",MTK_REC_SET_SESSION:"MTK_REC_SET_SESSION",MEDIA_PLAY:"MEDIA_PLAY",MEDIA_JUMP_TO:"MEDIA_JUMP_TO",MEDIA_PAUSE:"MEDIA_PAUSE",
MEDIA_STOP:"MEDIA_STOP",MEDIA_PREV:"MEDIA_PREV",MEDIA_NEXT:"MEDIA_NEXT",MEDIA_SWITCH_PLIST:"MEDIA_SWITCH_PLIST",MEDIA_SWITCH_TRACK:"MEDIA_SWITCH_TRACK",MEDIA_GET_PLISTS:"MEDIA_GET_PLISTS",MEDIA_GET_PLIST_TRACKS:"MEDIA_GET_PLIST_TRACKS",SHOW_LIST:"SHOWLIST",SHOW_DEL:"DELETESHOW",SHOW_LOAD:"LOADSHOW",SHOW_CREATE:"CREATESHOW",SHOW_RENAME:"RENAMESHOW",SNAP_LIST:"SNAPSHOTLIST",SNAP_SAVE:"SAVESNAPSHOT",SNAP_LOAD:"LOADSNAPSHOT",SNAP_DEL:"DELETESNAPSHOT",SNAP_RENAME:"RENAMESNAPSHOT",PRESET_LIST:"PRESETLIST",
PRESET_DEL:"DELETEPRESET",PRESET_READ:"READPRESET",PRESET_WRITE:"WRITEPRESET",PRESET_RENAME:"RENAMEPRESET",SAVESHOW:"SAVESHOW",MIXER_RESET:"MIXER_RESET",UPDATE_SHOWS:"UPDATE_SHOWS",USB_LIST:"USBMOUNTS",EXPORT_SHOW:"EXPORTSHOW",IMPORT_SHOW:"IMPORTSHOW",IMPORT_LIST:"IMPORTSHOWLIST",IMPORT_PRESETS:"IMPORTPRESETS",EXPORT_PRESETS:"EXPORTPRESETS",IMPORT_CONFIG:"IMPORTCONFIG",EXPORT_CONFIG:"EXPORTCONFIG"};
E_FFUNC={NEWSNAP:0,UPDCURSNAP:1,PLAY:2,REC:3,MTK_PLAY:4,MTK_REC:5,NEXT_SNAP:6,PREV_SNAP:7,SWAP_USB:8,MUTE_ALL:9,DIM:10};E_MODAL_MODE={TOTALVIEW:0,MOREME:1,MUTES:2,VIEWS:3,SUBS:4,VCA:5};E_CH_SRC_TYPE={HARDWARE:0,USB_A:1,USB_B:2,USB_C:3,USB_D:4};E_VG={VG1:0,VG2:1,VG3:2,VG4:3,VG5:4,VG6:5,INPUTS:100,FXS:101,SUBS:102,AUXS:103,VCAS:104,SG1:200,SG2:201,SG3:202,SG4:203,SG5:204,SG6:205,VCA1:300,VCA2:301,VCA3:302,VCA4:303,VCA5:304,VCA6:305};
E_SRC_NAMES={none:"-","hw.0":"IN-1","hw.1":"IN-2","hw.2":"IN-3","hw.3":"IN-4","hw.4":"IN-5","hw.5":"IN-6","hw.6":"IN-7","hw.7":"IN-8","hw.8":"IN-9","hw.9":"IN-10","hw.10":"IN-11","hw.11":"IN-12","hw.12":"IN-13","hw.13":"IN-14","hw.14":"IN-15","hw.15":"IN-16","hw.16":"IN-17","hw.17":"IN-18","hw.18":"IN-19","hw.19":"IN-20","hw.20":"IN-21","hw.21":"IN-22","li.0":"LI-1","li.1":"LI-2","li.2":"LI-3","li.3":"LI-4","ua.0":"USB-1","ua.1":"USB-2","ua.2":"USB-3","ua.3":"USB-4","ua.4":"USB-5","ua.5":"USB-6",
"ua.6":"USB-7","ua.7":"USB-8","ua.8":"USB-9","ua.9":"USB-10","ua.10":"USB-11","ua.11":"USB-12","ua.12":"USB-13","ua.13":"USB-14","ua.14":"USB-15","ua.15":"USB-16","ua.16":"USB-17","ua.17":"USB-18","ua.18":"USB-19","ua.19":"USB-20","ua.20":"USB-21","ua.21":"USB-22","ub.0":"DAW-1","ub.1":"DAW-2","ub.2":"DAW-3","ub.3":"DAW-4","ub.4":"DAW-5","ub.5":"DAW-6","ub.6":"DAW-7","ub.7":"DAW-8","ub.8":"DAW-9","ub.9":"DAW-10","ub.10":"DAW-11","ub.11":"DAW-12","ub.12":"DAW-13","ub.13":"DAW-14","ub.14":"DAW-15",
"ub.15":"DAW-16","ub.16":"DAW-17","ub.17":"DAW-18","ub.18":"DAW-19","ub.19":"DAW-20","ub.20":"DAW-21","ub.21":"DAW-22","ub.22":"DAW-23","ub.23":"DAW-24","ub.24":"DAW-25","ub.25":"DAW-26","ub.26":"DAW-27","ub.27":"DAW-28","ub.28":"DAW-29","ub.29":"DAW-30","ub.30":"DAW-31","ub.31":"DAW-32"};dataValue={};
settingsStorage={ok:!1,raw:!1,prefix:"UI_",init:function(){log("STORAGE INIT...");if(isDefined(localStorage)){this.ok=!0;try{localStorage.setItem("TEST_STORAGE","TEST_STORAGE");if("TEST_STORAGE"!==localStorage.getItem("TEST_STORAGE"))throw"localStorage TEST: NOT PASSED";localStorage.removeItem("TEST_STORAGE")}catch(b){showPopupMsg("HTML5 localStorage is not available. Probably 'PRIVATE MODE' is ON.",5E3),this.ok=!1}if(this.ok)for(var a in settings)settings.hasOwnProperty(a)&&(null===this.get(a)?(WEBSITE_MODE&&
demoSettings.hasOwnProperty(a)&&(settings[a]=demoSettings[a]),this.set(a,settings[a])):settings[a]=this.get(a))}},get:function(a){isDefined(localStorage)&&null!==localStorage||(this.ok=!1);if(!this.ok)return isDefined(settings[a])?settings[a]:null;a=localStorage.getItem(a);return this.raw?a:JSON.parse(a)},set:function(a,b){settings[a]=b;if(isDefined(localStorage)&&null!==localStorage){var c=this.raw?b:JSON.stringify(b);localStorage.setItem(a,c)}else this.ok=!1},put:function(a,b){isDefined(localStorage)&&
null!==localStorage||(this.ok=!1);if(this.ok){var c=this.raw?b:JSON.stringify(b);localStorage.setItem(a,c)}},save:function(){if(this.ok)for(var a in settings)settings.hasOwnProperty(a)&&this.set(a,settings[a])}};
settings={drawRate:1,disableRetina:!1,disableScaling:!1,disableShadows:!1,disableVUghost:!1,disableVUpeak:!1,patterned:!1,lanes:E_LINES.norm,mediaFirst:!1,disableVUs:!1,disableVUs2:!1,bigSlideOut:!1,pinSlideOut:!1,pinSlideOutX:!1,kinetic:!1,oneFingerScroll:!0,dimVUs:!1,vuquantise:!0,currentViewGroup:-1,nudge:!1,lang:"en",sync:!1,sync_id:"SYNC_ID",master_pass:"",masterLock:!1,moremeportrait:!0,f1func:E_FFUNC.PLAY,f2func:E_FFUNC.REC,viewGroups:[[],[],[],[],[],[]],viewGroupsNames:"     ".split(" "),
me:[],meout:-1,perm_name:"noname",perm_lock:!1,perm_aux1:!1,perm_aux2:!1,perm_aux3:!1,perm_aux4:!1,perm_aux5:!1,perm_aux6:!1,perm_aux7:!1,perm_aux8:!1,perm_aux9:!1,perm_aux10:!1,perm_aux11:!1,perm_aux12:!1,perm_aux13:!1,perm_aux14:!1,perm_aux15:!1,perm_aux16:!1,perm_mvol:!1,perm_mfx:!1,perm_shows:!1,perm_media:!1,perm_patching:!1,perm_config:!1};
demoSettings={pinSlideOut:!0,bigSlideOut:!0,viewGroups:[[42,43,44,45,20,21,18,24],[16,17,18,15,26,25,24],[29,20,21,28,27,45,43],[],[],[]],viewGroupsNames:"Main VOX Custom   ".split(" "),me:[9,18],meout:1};function toBool(a){return.5<=a}function fromBool(a){return a?1:0}function initDataItem(a,b){isDefined(b)?dataValue[a]=b:dataValue[a]=null}function getValue(a){return a in dataValue?dataValue[a]:null}
function setValue(a,b){if(dataValue[a]!==b){if(dataValue["settings.block.pass"]&&dataValue["settings.block.pass"]!=settings.master_pass){var c=!0,d=a.split(".");if(dataValue["settings.block.mixlvl"]&&("mgmask"==d.last()&&(c=!1),"."==a[1]))switch(a[0]){case "i":case "f":case "s":case "l":case "p":if(!a.contains(".aux."))switch(d.last()){case "mix":case "mute":case "pan":case "forceunmute":c=!1}}if(dataValue["settings.block.mixproc"]&&"."==a[1])switch(a[0]){case "i":case "f":case "s":case "l":case "p":if(!a.contains(".aux."))switch(d.last()){case "mix":case "mute":case "forceunmute":case "pan":case "safe":case "mgmask":break;
default:c=!1}}dataValue["settings.block.player"]&&a.startsWith("p.")&&(c=!1);!dataValue["settings.block.mlvl"]||"m.mix"!=a&&"m.pan"!=a||(c=!1);dataValue["settings.block.mproc"]&&a.startsWith("m.")&&"m.mix"!=a&&"m.pan"!=a&&(c=!1);dataValue["settings.block.shows"]&&a.endsWith(".safe")&&(c=!1);dataValue["settings.block.auxlvl"]&&(a.startsWith("a.")&&(a.endsWith(".mix")||a.endsWith(".mute")||a.endsWith(".stereoIndex"))||a.contains(".aux."))&&(c=!1);dataValue["settings.block.auxproc"]&&a.startsWith("a.")&&
!a.endsWith(".mix")&&!a.endsWith(".mute")&&(c=!1);c||(settings.perm_aux1||!a.startsWith("a.0.")&&!a.contains(".aux.0.")||(c=!0),settings.perm_aux2||!a.startsWith("a.1.")&&!a.contains(".aux.1.")||(c=!0),settings.perm_aux3||!a.startsWith("a.2.")&&!a.contains(".aux.2.")||(c=!0),settings.perm_aux4||!a.startsWith("a.3.")&&!a.contains(".aux.3.")||(c=!0),settings.perm_aux5||!a.startsWith("a.4.")&&!a.contains(".aux.4.")||(c=!0),settings.perm_aux6||!a.startsWith("a.5.")&&!a.contains(".aux.5.")||(c=!0),settings.perm_aux7||
!a.startsWith("a.6.")&&!a.contains(".aux.6.")||(c=!0),settings.perm_aux8||!a.startsWith("a.7.")&&!a.contains(".aux.7.")||(c=!0));if(a.startsWith("var.")||a.startsWith("settings."))c=!1;switch(d.last()){case "solo":c=!0;break;case "gain":a.contains(".eq.")||(c=dataValue["settings.block.mixgain"]&&"i"==a[0]&&"."==a[1]?!1:!0);break;case "hiz":case "phantom":case "invert":c=dataValue["settings.block.mixgain"]&&"i"==a[0]&&"."==a[1]?!1:!0}if(c){showPopupMsg(lang.LOCKED,1E3);return}}setValueX(a,b);if("."==
a[1])switch(a[0]){case "m":d=a.split(".");c="";if("mtx"==d[1]){var f=parseInt(d[2],10);0==getValue("a."+f+".stereoIndex")?c=".mtx."+(f+1)+".":1==getValue("a."+f+".stereoIndex")&&(c=".mtx."+(f-1)+".");c.length&&(c=a.replace(".mtx."+f+".",c),setValueX(c,b),updateByKey(c))}a.endsWith(".pan");break;case "i":case "a":case "f":case "p":case "s":case "l":d=a.split(".");switch(d[2]){case "gain":case "phantom":case "stereo":case "invert":case "delay":case "src":case "scsrc":case "r":case "name":case "stereoIndex":case "mtkrec":return}c=
"";"aux"==d[2]&&(f=parseInt(d[3],10),0==getValue("a."+f+".stereoIndex")?c=".aux."+(f+1)+".":1==getValue("a."+f+".stereoIndex")&&(c=".aux."+(f-1)+"."),c.length&&(c=a.replace(".aux."+f+".",c),setValueX(c,b),updateByKey(c)));"mtx"==d[2]&&(f=parseInt(d[3],10),0==getValue("a."+f+".stereoIndex")?c=".mtx."+(f+1)+".":1==getValue("a."+f+".stereoIndex")&&(c=".mtx."+(f-1)+"."),c.length&&(c=a.replace(".mtx."+f+".",c),setValueX(c,b),updateByKey(c)));if(!a.endsWith(".pan")&&!a.endsWith(".src")&&!a.endsWith(".scsrc")){var f=
d[0]+"."+d[1]+".",e="",g=parseInt(d[1],10);0==getValue(f+"stereoIndex")?e=d[0]+"."+(g+1)+".":1==getValue(f+"stereoIndex")&&(e=d[0]+"."+(g-1)+".");e.length&&(d=a.replace(f,e),setValueX(d,b),c.length&&(c=c.replace(f,e),setValueX(c,b)),updateByKey(d))}}}}function isBlocked(a,b){var c=getValue("settings.block.pass"),c=c&&c!=settings.master_pass;if(!c)return!1;isDefined(a)&&(c=!dataValue["settings.block."+a]);return"auxlvl"!=a&&"auxproc"!=a||c||!isDefined(b)||null==b?c:!settings["perm_aux"+(b+1)]}
function setValueX(a,b){log("["+a+"] "+b);dataValue[a]=b;"string"==typeof b?sendMessage("SETS^"+a+"^"+b):sendMessage("SETD^"+a+"^"+b)}function putValue(a,b){dataValue[a]!==b&&(dataValue[a]=b,updateByKey(a,b))}prevMGMASK=-1;
function handle_mgmask(a){checkMutes();switch(mode){case E_MODE.MIX:case E_MODE.GAIN:regUpdate(mixerWidget);break;case E_MODE.EDIT:regUpdate(editStripWidget);editWidget.mode!=editWidget.E_MODE.fx&&editWidget.mode!=editWidget.E_MODE.aux||regUpdate(editWidget);break;case E_MODE.AUX:regUpdate(auxoutWidget);regUpdate(auxWidget);break;case E_MODE.FXSENDS:regUpdate(fxoutWidget);break;case E_MODE.PLAYER:regUpdate(playerStrips);regUpdate(playerWidget);break;case E_MODE.MODALS:regUpdate(modalsWidget)}slideOutWidget.enabled&&
regUpdate(slideOutWidget);var b=getValue("mgmask");if(-1!=prevMGMASK&&!a){a=b^prevMGMASK;a&1<<MUTEALL_BIT_IDX&&(b&1<<MUTEALL_BIT_IDX?showPopupMsg(lang.MUTE_ALL,1E3):showPopupMsg(lang.MUTE_ALL_CANCEL,1E3));a&1<<MUTEFX_BIT_IDX&&(b&1<<MUTEFX_BIT_IDX?showPopupMsg(lang.MUTE_FX,1E3):showPopupMsg(lang.MUTE_FX_CANCEL,1E3));for(var c=0;6>c;c++)a&1<<c&&(b&1<<c?showPopupMsg(lang.MUTEGROUP_1_ACTIVATED.format(c+1),1E3):showPopupMsg(lang.MUTEGROUP_1_DEACTIVATED.format(c+1),1E3))}prevMGMASK=b}keyWidgetHash=$H();
function updateByKey(a,b){var c=keyWidgetHash.get(a);isDefined(c)&&c.forEach(regUpdate);a.contains(".subgroup")&&(modalsWidget.enabled&&regUpdate(modalsWidget.pages[E_MODAL_MODE.SUBS]),-1!=activeSubGroup&&mixerWidget.showSG(activeSubGroup));mode==E_MODE.EDIT&&a.contains(".stereoIndex")&&(editWidget.upd(),regUpdate(editWidget));a.endsWith(".bpm")&&topWidget.led.setMsg(b+" "+lang.BPM);if("mgmask"==a)handle_mgmask(!0);else if(a.startsWith("v.")&&a.endsWith("mute"))handle_mgmask();else if(mode!=E_MODE.EDIT||
selectedStrip.type!=E_STRIP_TYPE.AUX&&selectedStrip.type!=E_STRIP_TYPE.MASTER||!a.contains("afs."))if(a.startsWith("var.")){"var.mtk.present"===a&&IS_UI_24&&mtkPlay&&mtkPlay.enabled&&(sendMessage(E_COMMANDS.MTK_GET_SESSIONS),sendMessage(E_COMMANDS.MTK_GET_FILES));"var.afsdata"==a&&afsPopup&&regUpdate(afsPopup);"var.currentShow"==a&&drawAll("curShow");"var.currentSnapshot"==a&&drawAll("curSnap");"var.unsaved.chsafes"==a&&regUpdate(chSafesPage);"var.unsaved.mutegroups"==a&&regUpdate(modalsWidget);"var.currentState"==
a&&(regUpdate(player2track),regUpdate(masterWidget));"var.currentPlaylist"==a&&regUpdate(player2track);mode==E_MODE.EDIT&&"var.rta"==a&&regUpdate(editWidget);"var.hpaux"==a&&syncHPAUX();if("var.currentTrack"==a){var c=dataValue["var.currentTrack"],d=c.length;15<d&&(c="..."+c.substr(d-15,15));topWidget.led.setMsg(c,"#ff0");dataValue["var.currentPlaylist"]==player2track.FLIST.plistName&&player2track.FLIST.selectByName(dataValue["var.currentTrack"])}if("var.isRecording"==a||"var.recBusy"==a)regUpdate(masterWidget),
regUpdate(player2track);"var.recBusy"==a&&regUpdate(topWidget)}else if(mode==E_MODE.SETTINGS&&a.startsWith("settings."))regUpdate(settingsWidget);else if(a.contains(".name")||a.endsWith(".fxtype"))regUpdate(bottomWidget),"a"===a[0]&&mode==E_MODE.AUX&&(regUpdate(auxWidget),regUpdate(auxoutWidget)),"f"===a[0]&&mode==E_MODE.FXSENDS&&(regUpdate(fxSendsWidget),regUpdate(fxoutWidget)),mode==E_MODE.EDIT&&a.contains(selectedStrip.name)&&(regUpdate(editStripWidget),regUpdate(editWidget));else if(mode==E_MODE.MOREME&&
-1!=settings.meout&&a.contains(".aux."+settings.meout)&&regUpdate(moremeWidget),mode==E_MODE.MODALS&&modalsWidget.mode==E_MODAL_MODE.MOREME&&-1!=settings.meout&&a.contains(".aux."+settings.meout)&&regUpdate(modalsWidget.pages[E_MODAL_MODE.MOREME]),mode==E_MODE.GAIN&&a.endsWith(".src")&&(gainMixer.onShow(),regUpdate(gainMixer)),mode==E_MODE.MODALS&&a.contains(".mgmask"))regUpdate(modalsWidget.pages[E_MODAL_MODE.MUTES]);else{if(mode==E_MODE.EDIT&&a.contains(selectedStrip.name)){regUpdate(editStripWidget);
selectedStrip.type==E_STRIP_TYPE.MASTER&&regUpdate(masterWidget);(a.contains(".afs.enabled")||a.contains(".deesser."))&&regUpdate(editWidget);switch(editWidget.mode){case editWidget.E_MODE.eqch:case editWidget.E_MODE.eqaux:case editWidget.E_MODE.eqm:if(!a.contains(".eq."))return;a.contains(".eq.easy")&&editWidget.pages[editWidget.mode].checkState();break;case editWidget.E_MODE.dyn:"m.dyn.linked"==a&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(c=editWidget.pages[editWidget.E_MODE.dyn],c.setLeft(!0),
c.syncSliders(),regUpdate(editWidget));if(!a.contains(".dyn.")&&!a.contains(".gate."))return;break;case editWidget.E_MODE.gate:if(!a.contains(".gate."))return;break;case editWidget.E_MODE.aux:if(!a.contains(".aux."))return}regUpdate(editWidget)}mode==E_MODE.MODALS&&(a.contains(".mute")||a.contains(".solo")||a.contains(".phantom")||a.contains(".invert"))&&regUpdate(modalsWidget.pages[E_MODAL_MODE.TOTALVIEW]);mode==E_MODE.AUX&&a.contains(".aux.")&&(c=a.split("."),d=parseInt(c[1],10),"l"==c[0]&&(d+=
curSetup.input),"p"==c[0]&&(d+=curSetup.input+curSetup.linein),"f"==c[0]&&(d+=curSetup.input+curSetup.linein+2),regUpdate(auxWidget.page.strips[d]));if(mode==E_MODE.AUX&&a.contains(".mtx."))c=a.split("."),d=parseInt(c[1],10),"s"==c[0]&&(d+=curSetup.aux),"m"==c[0]&&(regUpdate(auxWidget.page2.strips[auxWidget.page2.strips.length-1]),regUpdate(auxWidget.page2.strips[auxWidget.page2.strips.length-2])),regUpdate(auxWidget.page2.strips[d]);else if(mode==E_MODE.FXSENDS&&a.contains(".fx.")){var c=a.split("."),
d=parseInt(c[1],10),f=parseInt(c[3],10);"l"==c[0]&&(d+=curSetup.input);"p"==c[0]&&(d+=curSetup.input+curSetup.linein);"s"==c[0]&&(d+=curSetup.input+curSetup.linein+2);fxSendsWidget.mode==f&&regUpdate(fxSendsWidget.page.strips[d])}else if(mode==E_MODE.SETTINGS&&a.contains(".safe"))regUpdate(chSafesPage);else if(!(a.startsWith("iso.")||(c=a.split("."),2>c.length||"dyn"==c[1]||"eq"==c[1])))if(a.contains(".solo")&&checkSolos(),a.contains(".mute")&&checkMutes(),mode==E_MODE.SETTINGS&&a.endsWith("src")&&
regUpdate(settingsWidget),mode==E_MODE.MODALS&&a.contains(".forceunmute")&&regUpdate(tvWidget),"m"==c[0])regUpdate(masterWidget),"m.eq.linked"==a&&regUpdate(editWidget),"m.dyn.linked"==a&&regUpdate(editWidget);else if(d=c[1],isDefined(d))if(f=parseInt(d),isNaN(f))log("!2 "+a);else switch(mode==E_MODE.AUX&&auxWidget.page2&&(a.endsWith(".matrix")&&auxWidget.upd(),a.contains(".mute")||a.contains(".subgroup")||a.contains(".forceunmute"))&&(d=f,"l"==c[0]&&(d+=curSetup.input),"p"==c[0]&&(d+=curSetup.input+
curSetup.linein),"f"==c[0]&&(d+=curSetup.input+curSetup.linein+2),regUpdate(auxWidget.page2.strips[d])),c[0]){case "hw":"phantom"==c[2]&&blockGainBySrc(a.replace(".phantom",""));break;case "i":0<=f&&f<inStrips.length&&(regUpdate(inStrips[f]),"phantom"==c[2]&&(1==dataValue[a]?blockStrip(f,PHANTOM_ON_DELAY):blockStrip(f,PHANTOM_OFF_DELAY)));break;case "l":0<=f&&f<lineinStrips.length&&regUpdate(lineinStrips[f]);break;case "f":0<=f&&f<fxStrips.length&&(regUpdate(fxStrips[f]),mode==E_MODE.FXSENDS&&regUpdate(fxoutWidget),
mode==E_MODE.EDIT&&editWidget.mode==editWidget.E_MODE.fx&&regUpdate(editWidget.pages[editWidget.E_MODE.fx]));break;case "a":0<=f&&f<auxStrips.length&&(regUpdate(auxStrips[f]),mode!=E_MODE.AUX&&mode!=E_MODE.MOREME||regUpdate(auxoutWidget),mode==E_MODE.EDIT&&editWidget.mode==editWidget.E_MODE.aux&&regUpdate(editWidget.pages[editWidget.E_MODE.aux]));break;case "s":0<=f&&f<subStrips.length&&regUpdate(subStrips[f]);break;case "p":0<=f&&f<mediaStrips.length&&regUpdate(mediaStrips[f]);break;case "v":0<=
f&&f<subStrips.length&&regUpdate(vcaStrips[f])}else log("!1 "+a)}else regUpdate(editWidget)}function FREQtoV(a){return bound(Math.log(a/20)/Math.log(1102.5),0,1)}
function resetParEQ(a,b){setValue(a+".eq.bypass",0);setValue(a+".eq.prname","");setValue(a+".eq.prmod",0);isDefined(b)||setValue(a+".eq.easy",0);setValue(a+".eq.hpf.freq",0);IS_UI_24&&(setValue(a+".eq.hpf.slope",0),setValue(a+".eq.lpf.freq",1),setValue(a+".eq.lpf.slope",0));setValue(a+".eq.b1.freq",FREQtoV(200));setValue(a+".eq.b1.q",QtoV(1));setValue(a+".eq.b1.gain",.5);setValue(a+".eq.b2.freq",FREQtoV(1E3));setValue(a+".eq.b2.q",QtoV(1));setValue(a+".eq.b2.gain",.5);setValue(a+".eq.b3.freq",FREQtoV(4E3));
setValue(a+".eq.b3.q",QtoV(1));setValue(a+".eq.b3.gain",.5);setValue(a+".eq.b4.freq",FREQtoV(1E4));setValue(a+".eq.b4.q",QtoV(1));setValue(a+".eq.b4.gain",.5);setValue(a+".deesser.enabled",0);setValue(a+".deesser.freq",.773310034);setValue(a+".deesser.threshold",.46875);setValue(a+".deesser.ratio",.4)}
function resetGraphEQ(a){setValue(a+".eq.bypass",0);setValue(a+".eq.prname","");setValue(a+".eq.prmod",0);if("m"==a){setValue(a+".eq.linked",1);IS_UI_24&&(setValue(a+".eq.hpf.l",0),setValue(a+".eq.hpf.r",0),setValue(a+".eq.lpf.l",1),setValue(a+".eq.lpf.r",1));for(var b=0;31>b;b++)setValue(a+".eq.peak.l."+b,.5),setValue(a+".eq.peak.r."+b,.5)}else for(IS_UI_24&&(setValue(a+".eq.hpf",0),setValue(a+".eq.lpf",1)),b=0;31>b;b++)setValue(a+".eq.peak."+b,.5)}
function resetDyn(a,b){isDefined(b)||(b=!0);setValue(a+".dyn.bypass",0);setValue(a+".dyn.prname","");setValue(a+".dyn.prmod",0);var c="m"==a?{".dyn.linked":1,".dyn.l.threshold":.9375,".dyn.l.gain":.75,".dyn.l.ratio":0,".dyn.l.softknee":0,".dyn.l.attack":0,".dyn.l.hold":.158,".dyn.l.outgain":.3333333333333333,".dyn.l.release":.2490234375,".dyn.r.threshold":.9375,".dyn.r.gain":.75,".dyn.r.ratio":0,".dyn.r.softknee":0,".dyn.r.attack":0,".dyn.r.hold":.158,".dyn.r.outgain":.3333333333333333,".dyn.r.release":.2490234375}:
{".dyn.threshold":.875,".dyn.gain":.75,".dyn.ratio":1,".dyn.softknee":0,".dyn.attack":.34375,".dyn.outgain":.3333333333333333,".dyn.release":findV(VtoREL,500)};applyPreset(a,c,!0);b&&resetGate(a)}
function resetGate(a){setValue(a+".gate.enabled",1);setValue(a+".gate.bypass",0);setValue(a+".gate.prname","");setValue(a+".gate.prmod",0);setValue(a+".gate.thresh",0);setValue(a+".gate.attack",0);setValue(a+".gate.release",.3150737133956386);setValue(a+".gate.hold",.3042441765273541);setValue(a+".gate.depth",0)}function applyPreset(a,b,c){for(var d in b)b.hasOwnProperty(d)&&isDefined(dataValue[a+d])&&null!=b[d]&&(setValue(a+d,b[d]),updateByKey(a+d))}
function resetChannel(a){var b=a.split("."),c=b[0],b=parseInt(b[1]),d=IS_UI_24?.09523809523809523:.4;switch(c){case "v":setValue(a+".mute",0);setValue(a+".mix",zeroDbPos);setValue(a+".name","");return;case "i":setValue(a+".gain",0),setValue(a+".phantom",0),setValue(a+".invert",0),HAVE_LATENCY&&setValue(a+".delay",0),setValue(a+".hiz",0);case "l":if(HAVE_ROUTING&&"i"==c){setValue(a+".src","hw."+b);setValue(a+".scsrc",ROUTING_TEST_MODE?"ub."+b:"ua."+b);var f=a.replace("i.","hw.");setValue(f+".gain",
d);setValue(f+".phantom",0);setValue(f+".hiz",0)}HAVE_ROUTING&&"l"==c&&(setValue(a+".src","li."+b),setValue(a+".scsrc",ROUTING_TEST_MODE?"ub."+(20+b):"ua."+(20+b)));case "p":setValue(a+".pan",.5);"p"==c&&setValue(a+".pan",b);setValue(a+".mute",0);setValue(a+".solo",0);setValue(a+".subgroup",-1);setValue(a+".mix",0);IS_UI_24&&setValue(a+".vca",-1);resetParEQ(a);break;case "f":setValue(a+".span",.5),setValue(a+".smix",zeroDbPos);case "s":setValue(a+".pan",.5),resetParEQ(a);case "a":setValue(a+".mute",
0);setValue(a+".solo",0);setValue(a+".mix",zeroDbPos);"a"==c&&(HAVE_LATENCY&&setValue(a+".delay",0),resetGraphEQ(a));HAVE_MATRIX&&setValue(a+".matrix",0);break;case "m":setValue(a+".mix",zeroDbPos),HAVE_LATENCY&&(setValue(a+".delayL",0),setValue(a+".delayR",0)),resetGraphEQ(a)}setValue(a+".name","");resetDyn(a);resetGate(a);for(c=0;c<curSetup.aux;c++)setValue(a+".aux."+c+".value",0),setValue(a+".aux."+c+".pan",.5),setValue(a+".aux."+c+".mute",0),setValue(a+".aux."+c+".post",0),setValue(a+".aux."+
c+".postproc",1),HAVE_MATRIX&&(setValue(a+".mtx."+c+".value",0),setValue(a+".mtx."+c+".pan",.5),setValue(a+".mtx."+c+".mute",0));for(c=0;c<curSetup.fx;c++)setValue(a+".fx."+c+".value",0),setValue(a+".fx."+c+".mute",0)}
function resetFX(a){var b=getValue(a+".fxtype"),c=[[.5,.4,.5,1,0,0],[0,.5,.3,1,0,0],[.4,.5,1,0,0,0],[.5,.4,.5,1,0,0]];setValue(a+".prmod",0);setValue(a+".prname","");setValue(a+".par1",c[b][0]);setValue(a+".par2",c[b][1]);setValue(a+".par3",c[b][2]);setValue(a+".par4",c[b][3]);setValue(a+".par5",c[b][4]);setValue(a+".par6",c[b][5])}
function createData(){"undefined"==typeof curSetup?(curSetup={input:2,fx:1,aux:1,bankSize:8,sub:1,maxx:!0,rec:!0,phantom:1,linein:2},noData=!0):"undefined"!=typeof staticInitDataArray&&(staticInitDataArray(),staticInitDataArray=null)}function checkDataIngegrity(){for(var a=0;a<inStrips.length;a++){var b=inStrips[a];b.getNameValue("src")||b.setNameValue("src","hw."+b.subId)}}widgetReqPreset=widgetReqList=null;function deconvertVU(a){return.004167508166392142*a}
function deconvertVU_comp(a){a=(1-.004167508166392142*(a|a>>7&1))*COMP_ZOOM;.008>a?a=0:1<a&&(a=1);return a}
function parseCommand(a){if(a.startsWith("VU2^"))parseVUdata(a);else if(a.startsWith("RTA^"))parseRTAdata(a);else if(a.startsWith("BMSG^"))parseBMessage(a);else if(a.startsWith("INIT^"))a=a.substring(5),a=JSON.parse(a),Object.extend(dataValue,a),drawAll("INIT");else if(a.startsWith("MSG^")){a=a.split("^");var b="";if(a[1].startsWith("$")){if(b=a[1].substr(1),b in lang)for(var b=lang[b],c=2;c<a.length;c++)b=b.replace("{"+(c-2)+"}",a[c])}else b=a[1];showPopupMsg(b,3E3)}else a.startsWith("DLGSHOW^")?
(a=a.split("^"),3>a.length||(a.shift(),c=a.shift(),b=a.shift(),dlgShow(c,b,a))):a.startsWith("DLGHIDE^")?(a=a.split("^"),c=a[1],dlgHide(c)):a.startsWith("SHOWLIST^")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),showsPage&&showsPage.SHOWS.setItems(a),showsPopup&&showsPopup.SHOWS.setItems(a),null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("SNAPSHOTLIST^")?(a=a.split("^"),a.shift(),b=a.shift(),showsPage&&!showsPage.SNAPS.showName&&(showsPage.SNAPS.showName=
b),showsPopup&&!showsPopup.SNAPS.showName&&(showsPopup.SNAPS.showName=b),a=a.filter(function(a){return""!==a}),showsPage&&showsPage.SNAPS.showName==b&&showsPage.SNAPS.setItems(a),showsPopup&&showsPopup.SNAPS.showName==b&&showsPopup.SNAPS.setItems(a),b==getValue("var.currentShow")&&(CURRENT_SNAPS_LIST=a)):a.startsWith("PRESETLIST^")?(a=a.split("^"),a.shift(),a.shift(),a=a.filter(function(a){return""!==a}),null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("USBMOUNTS")?
(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),0==a.length?(widgetReqList=null,showPopupMsg(lang.SHOWEXP_USBNOTFOUND),clearModals()):null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("IMPORTSHOWLIST")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),0==a.length?(widgetReqList=null,showPopupMsg(lang.SHOWIMP_NOTFOUND),clearModals()):null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("READPRESET^")?(a=a.split("^"),
b=JSON.parse(a[3]),null!=widgetReqPreset&&(isDefined(widgetReqPreset.loadPreset)&&(a=a[2].substr(2),widgetReqPreset.loadPreset(b,a),showPopupMsg(a,800)),widgetReqPreset=null)):a.startsWith("PLISTS^")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),player2track.PLISTS&&player2track.PLISTS.setItems(a)):a.startsWith("PLIST_TRACKS^")?(a=a.split("^"),a.shift(),b=a.shift(),a=a.filter(function(a){return""!==a}),player2track.FLIST&&(player2track.FLIST.plistName=b),player2track.FLIST&&player2track.FLIST.setItems(a)):
a.startsWith("NETCONFIG^")?(a=a.substring(10),netConfig=JSON.parse(a),mode==E_MODE.SETTINGS&&0==settingsWidget.mode&&regUpdate(settingsWidget)):a.startsWith("MTK_GET_SESSIONS^")?mtkPlay&&(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),mtkPlay.sessions.setItems(a)):a.startsWith("MTK_GET_FILES^")?mtkPlay&&(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),mtkPlay.files.setItems(a)):"RELOAD"==a?(settingsStorage.save(),location.reload()):a.startsWith("SERIAL")?(a=a.split("^"),
a=a[1],null==globalSerial&&(globalSerial=a),globalSerial!=a&&(settingsStorage.save(),location.reload())):"UPDATE_PLAYLIST"==a?player2track.updateLists():"UPDATE_SHOWS"==a?(showsPage.updLists(),showsPopup&&showsPopup.refreshList()):log("Unknown command to parse: "+a)}var globalSerial=null;
function parseVUdata(a){if(!settings.disableVUs||!settings.disableVUs2){a=atob(a.slice(4));for(var b=mode==E_MODE.EDIT&&editWidget.mode==editWidget.E_MODE.dyn,c=HAVE_GATE&&mode==E_MODE.EDIT&&editWidget.mode==editWidget.E_MODE.gate,d=editWidget.pages[editWidget.E_MODE.dyn],f=editWidget.pages[editWidget.E_MODE.gate],e=8,g=0,h=a.charCodeAt(0);g<h&&!(g>=curSetup.input);g++){var l=e+6*g,m=deconvertVU(a.charCodeAt(l+0)),n=deconvertVU(a.charCodeAt(l+1)),p=deconvertVU(a.charCodeAt(l+2)),r=deconvertVU_comp((a.charCodeAt(l+
5)&127)<<1),q=0!=(a.charCodeAt(l+5)&128);inStrips[g].setVU(n,p,0,0,r,0,q,0);gainStrips[g].setVUPre(m);if(b&&selectedStrip.type==E_STRIP_TYPE.IN&&selectedStrip.subId==g){var t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4));d.vuIN.setValue(t);d.vuOUT.setValue(v);d.vuCOMP.setValue(r)}c&&selectedStrip.type==E_STRIP_TYPE.IN&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),f.vuIN.setValue(t),f.vuOUT.setValue(v))}l=e+=6*a.charCodeAt(0);n=deconvertVU(a.charCodeAt(l+
1));p=deconvertVU(a.charCodeAt(l+2));r=deconvertVU_comp((a.charCodeAt(l+5)&127)<<1);q=0!=(a.charCodeAt(l+5)&128);mediaStrips[0].setVU(n,p,0,0,r,0,q,0);b&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&0==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r));c&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&0==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),f.vuIN.setValue(t),f.vuOUT.setValue(v));
l=e+6;n=deconvertVU(a.charCodeAt(l+1));p=deconvertVU(a.charCodeAt(l+2));r=deconvertVU_comp((a.charCodeAt(l+5)&127)<<1);q=0!=(a.charCodeAt(l+5)&128);mediaStrips[1].setVU(n,p,0,0,r,0,q,0);b&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&1==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r));c&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&1==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+
4)),f.vuIN.setValue(t),f.vuOUT.setValue(v));e+=6*a.charCodeAt(1);for(g=0;g<a.charCodeAt(2)&&!(g>=curSetup.sub);g++)l=e+7*g,n=deconvertVU(a.charCodeAt(l+0)),p=deconvertVU(a.charCodeAt(l+1)),h=deconvertVU(a.charCodeAt(l+2)),m=deconvertVU(a.charCodeAt(l+3)),r=deconvertVU_comp((a.charCodeAt(l+6)&127)<<1),q=0!=(a.charCodeAt(l+6)&128),subStrips[g].setVU(n,h,p,m,r,r,q,q),b&&selectedStrip.type==E_STRIP_TYPE.SUB&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+4)),v=deconvertVU(a.charCodeAt(l+5)),d.vuIN.setValue(t),
d.vuOUT.setValue(v),d.vuCOMP.setValue(r)),c&&selectedStrip.type==E_STRIP_TYPE.SUB&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+4)),v=deconvertVU(a.charCodeAt(l+5)),f.vuIN.setValue(t),f.vuOUT.setValue(v));e+=7*a.charCodeAt(2);for(g=0;g<a.charCodeAt(3)&&!(g>=curSetup.fx);g++)l=e+7*g,n=deconvertVU(a.charCodeAt(l+0)),p=deconvertVU(a.charCodeAt(l+1)),h=deconvertVU(a.charCodeAt(l+2)),m=deconvertVU(a.charCodeAt(l+3)),r=deconvertVU_comp((a.charCodeAt(l+6)&127)<<1),q=0!=(a.charCodeAt(l+6)&128),fxStrips[g].setVU(n,
h,p,m,r,r,q,q),fxoutWidget.idx==g&&fxoutWidget.setVU(n,h,p,m,r,r,q,q),editWidget.pages[editWidget.E_MODE.fx].enabled&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(q=editWidget.pages[editWidget.E_MODE.fx],1<=h?q.CLIPS[g].clip():q.CLIPS[g].state&&!q.CLIPS[g].releasing&&q.CLIPS[g].release(),q.VUS[g].setValueExt(n,h),1<=m?q.CLIPS2[g].clip():q.CLIPS2[g].state&&!q.CLIPS2[g].releasing&&q.CLIPS2[g].release(),q.VUS2[g].setValueExt(p,m)),b&&selectedStrip.type==E_STRIP_TYPE.FX&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+
4)),v=deconvertVU(a.charCodeAt(l+5)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r)),c&&selectedStrip.type==E_STRIP_TYPE.FX&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+4)),v=deconvertVU(a.charCodeAt(l+5)),f.vuIN.setValue(t),f.vuOUT.setValue(v));e+=7*a.charCodeAt(3);for(g=0;g<a.charCodeAt(4)&&!(g>=curSetup.aux);g++)l=e+5*g,n=deconvertVU(a.charCodeAt(l+0)),p=deconvertVU(a.charCodeAt(l+1)),r=deconvertVU_comp((a.charCodeAt(l+4)&127)<<1),q=0!=(a.charCodeAt(l+4)&128),auxStrips[g].setVU(n,
p,0,0,r,0,q,0),auxoutWidget.idx==g&&auxoutWidget.setVU(n,p,r,q),editWidget.pages[editWidget.E_MODE.aux].enabled&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(q=editWidget.pages[editWidget.E_MODE.aux],1<=p?q.CLIPS[g].clip():q.CLIPS[g].state&&!q.CLIPS[g].releasing&&q.CLIPS[g].release(),q.VUS[g].setValueExt(n,p)),b&&selectedStrip.type==E_STRIP_TYPE.AUX&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+2)),v=deconvertVU(a.charCodeAt(l+3)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r)),
c&&selectedStrip.type==E_STRIP_TYPE.AUX&&selectedStrip.subId==g&&(t=deconvertVU(a.charCodeAt(l+2)),v=deconvertVU(a.charCodeAt(l+3)),f.vuIN.setValue(t),f.vuOUT.setValue(v));var l=e+=5*a.charCodeAt(4),n=deconvertVU(a.charCodeAt(l+0)),p=deconvertVU(a.charCodeAt(l+1)),r=deconvertVU_comp((a.charCodeAt(l+4)&127)<<1),q=0!=(a.charCodeAt(l+4)&128),h=deconvertVU(a.charCodeAt(l+5)),m=deconvertVU(a.charCodeAt(l+6)),g=deconvertVU_comp((a.charCodeAt(l+9)&127)<<1),J=0!=(a.charCodeAt(l+9)&128);masterWidget.setVU2(n,
p,h,m,r,g,q,J);if(b&&selectedStrip.type==E_STRIP_TYPE.MASTER){var q=d.left,t=deconvertVU(a.charCodeAt(l+2)),v=deconvertVU(a.charCodeAt(l+3)),O=deconvertVU(a.charCodeAt(l+7)),F=deconvertVU(a.charCodeAt(l+8));d.vuIN.setValue(q?t:O);d.vuOUT.setValue(q?v:F);d.vuCOMP.setValue(q?r:g)}c&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(q=f.left,f.vuIN.setValue(q?t:O),f.vuOUT.setValue(q?v:F));l=e+=5*a.charCodeAt(6);deconvertVU(a.charCodeAt(l+0));n=deconvertVU(a.charCodeAt(l+1));p=deconvertVU(a.charCodeAt(l+2));
r=deconvertVU_comp((a.charCodeAt(l+5)&127)<<1);q=0!=(a.charCodeAt(l+5)&128);lineinStrips[0].setVU(n,p,0,0,r,0,q,0);b&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&0==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r));c&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&0==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),f.vuIN.setValue(t),f.vuOUT.setValue(v));l=e+6;deconvertVU(a.charCodeAt(l+
0));n=deconvertVU(a.charCodeAt(l+1));p=deconvertVU(a.charCodeAt(l+2));r=deconvertVU_comp((a.charCodeAt(l+5)&127)<<1);q=0!=(a.charCodeAt(l+5)&128);lineinStrips[1].setVU(n,p,0,0,r,0,q,0);b&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&1==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+4)),d.vuIN.setValue(t),d.vuOUT.setValue(v),d.vuCOMP.setValue(r));c&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&1==selectedStrip.subId&&(t=deconvertVU(a.charCodeAt(l+3)),v=deconvertVU(a.charCodeAt(l+
4)),f.vuIN.setValue(t),f.vuOUT.setValue(v))}}function parseRTAdata(a){if(mode==E_MODE.EDIT&&selectedStrip.name==dataValue["var.rta"]+"."){switch(editWidget.mode){case editWidget.E_MODE.eqch:case editWidget.E_MODE.eqaux:case editWidget.E_MODE.eqm:break;default:return}a=atob(a.slice(4));for(var b=[],c=0,d=a.length;c<d;c++){var f=.004167508166392142*a.charCodeAt(c);b.push(f)}editWidget.pages[editWidget.mode].eq.setRTA(b)}}
function parseBMessage(a){a=a.split("^");if("SYNC"==a[1]&&settings.sync){var b=a[3];a[2]==(settings.sync_id||"SYNC_ID")&&setSelected(b,!1,!0)}}function potentialTranslate(a){a.startsWith("$")&&(a=a.substr(1),a=a in lang?lang[a]:a);return a}
function dlgShow(a,b,c){var d=document.getElementById("dlg_"+a);if("undefined"==typeof d||null==d)d=document.createElement("DIV"),d.id="dlg_"+a,d.className="DIM_DIALOG",d.style.display="block",document.body.appendChild(d);b="<div><div><h1>"+potentialTranslate(b)+"</h1><br>";if(isDefined(c)&&"object"==typeof c)for(var f=0;f<c.length;f++)b+="<input type='button' class='BTN' onclick=\"dlgResult('dlg_"+a+"',"+f+")\" value= '"+potentialTranslate(c[f])+"' />&nbsp;&nbsp;&nbsp;&nbsp;";d.innerHTML=b+"</div></div>"}
function dlgHide(a){a=document.getElementById("dlg_"+a);"undefined"!=typeof a&&null!=a&&a.remove()}function dlgResult(a,b){log("dlgResult: "+a+" "+b);sendMessage("DLGRESULT^"+a+"^"+b);dlgHide(a.replace("dlg_",""))}
function emulate(){for(var a=getValue("mgmask"),b=checkBit(a,MUTEALL_BIT_IDX),c=0;8>c;c++){var d=randomOf(allStrips.length-1),f=allStrips[d],e=.9*Math.random(),g=.9+.2*Math.random();modalsWidget.pages[0].m.setValue(e,d);f.type==E_STRIP_TYPE.IN&&gainStrips[f.subId].setVUPre(e);var d=f.getNameValue("mute"),h=f.getNameValue("forceunmute"),l=f.getNameValue("mgmask"),m=checkBit(a,MUTEFX_BIT_IDX)&&f.type==E_STRIP_TYPE.FX,h=(a&l||b||m||d)&&!h,d=f.getNameValue("mix"),d=h?0:d/zeroDbPos*e,h=.1*d;f.setVU(e,
d,e*g,d*g,h,h*g,!0,!0)}.4<Math.random()&&(e=.9*Math.random(),d=masterWidget.getNameValue("mix"),g=.9+.2*Math.random(),d=d/zeroDbPos*e,h=0,masterWidget.setVU2(e,d,e*g,d*g,h,h*g,!0,!0),d=auxoutWidget.sl.value,d=d/zeroDbPos*e,auxoutWidget.setVU(e,d,e*g,d*g,h,h*g,!0,!0),d=fxoutWidget.sl.value,d=d/zeroDbPos*e,fxoutWidget.setVU(e,d,e*g,d*g,h,h*g,!0,!0));if(mode==E_MODE.EDIT&&selectedStrip.type==E_STRIP_TYPE.MASTER&&.5<Math.random()){a=editWidget.pages[editWidget.E_MODE.fx].VUS;b=editWidget.pages[editWidget.E_MODE.fx].MUTES;
f=editWidget.pages[editWidget.E_MODE.fx].SLIDERS;for(c=0;c<a.length;c++)e=b[c].state,g=f[c].getVal(),e=g/zeroDbPos*Math.random()*1.002*(e?0:1),a[c].setValueExt(0,e);a=editWidget.pages[editWidget.E_MODE.fx].VUS2;for(c=0;c<a.length;c++)e=b[c].state,g=f[c].getVal(),e=g/zeroDbPos*Math.random()*1.002*(e?0:1),a[c].setValueExt(0,e);a=editWidget.pages[editWidget.E_MODE.aux].VUS;b=editWidget.pages[editWidget.E_MODE.aux].MUTES;f=editWidget.pages[editWidget.E_MODE.aux].SLIDERS;for(c=0;c<a.length;c++)e=b[c].state,
g=f[c].getVal(),e=g/zeroDbPos*Math.random()*1.002*(e?0:1),a[c].setValueExt(0,e)}.5<Math.random()&&(e=precision(Math.random(),4),c=precision(.8*e,4),d=precision(.2*e,4),editWidget.pages[editWidget.E_MODE.dyn].setVU(e,c,d));if(mode==E_MODE.EDIT&&selectedStrip.name==dataValue["var.rta"]+"."){switch(editWidget.mode){case editWidget.E_MODE.eqch:case editWidget.E_MODE.eqaux:case editWidget.E_MODE.eqm:break;default:return}a=[];for(c=0;120>c;c++)e=.35+.03*Math.random(),a.push(e);editWidget.pages[editWidget.mode].eq.setRTA(a)}}
var trd=0,trStop=!1,co=0;function trololo(){for(var a=0;a<inStrips.length;a++)inStrips[a].setNameValue("mix",bound((Math.cos(trd+.4*a)+1)/2*.7,0,1)),regUpdate(inStrips[a]);if(0==co%10)for(a=fxStrips[0].id;a<allStrips.length;a++)allStrips[a].setNameValue("mix",.7*Math.random()),regUpdate(allStrips[a]);trd+=.1;co++;trStop||setTimeout(trololo,50)}function copyChannel(a){for(var b=Object.keys(dataValue),c={},d=0,f=b.length;d<f;d++)b[d].startsWith(a)&&(c[b[d]]=dataValue[b[d]]);return c}
function mixerToJson(){for(var a=[],b=0;b<allStrips.length;b++){var c=copyChannel(allStrips[b].name);a.push(c)}return"jsonToMixer('"+JSON.stringify(a)+"');"}function jsonToMixer(a){a=JSON.parse(a);for(var b=0;b<a.length;b++){log(b);for(var c=a[b],d=Object.keys(c),f=0;f<d.length;f++){var e=d[f];setValueX(e,c[e])}}drawAll()}function showData(a){for(var b=Object.keys(dataValue),c=0,d=b.length;c<d;c++)b[c].contains(a)&&console.log(b[c]+": "+dataValue[b[c]])}
function getKeys(a){for(var b=[],c=Object.keys(dataValue),d=0,f=c.length;d<f;d++)c[d].contains(a)&&b.push(c[d]);return b}PROGRAM_VERSION="01/07/2017";APP_ID="com.soundcraft.ui.tablet";ROUTING_TEST_MODE=PATTERNED=EMULATE=WEBSITE_MODE=DEPLOY=!1;VU_RANGE=80;COMP_RANGE=20;COMP_ZOOM=2;COMP_SCALE=COMP_RANGE/VU_RANGE*COMP_ZOOM;GLOBAL_VU_FALL_SPEED=.01;GLOBAL_VU_FALL_ACC=GLOBAL_VU_FALL_SPEED/fps;GLOBAL_PEAK_FALL_SPEED=GLOBAL_VU_FALL_SPEED/10;GLOBAL_PEAK_FALL_ACC=GLOBAL_PEAK_FALL_SPEED/fps*2;
SCROLL_SCALE=1.5;TAP_TEMPO_MAX_GAP=3100;TAP_TEMPO_AVG_FROM=5;DBL_CLK_TIME=350;HOLD_TIME=600;CLIP_HOLD_TIME=PEAK_HOLD_TIME=3E3;PHANTOM_ON_DELAY=4E3;PHANTOM_OFF_DELAY=17E3;mode=0;HAVE_GATE=HAVE_REC=HAVE_HP=HAVE_LATENCY=HAVE_ISOLATION=HAVE_ROUTING=!1;HAVE_SYNC=!0;CASCADE_MODE=IS_UI_24=HAVE_MTK=HAVE_MATRIX=!1;measures={topWidgetHeight:71,bottomWidgetHeight:34,mixerStripWidth:112,masterStripWidth:127,mixerRightMargin:127,vuWidth:11,db0:.7647058823529421};
color={bg:"#16181C",botBG:"#242424",buttonsBG:"#919497",tabStroke:"#535457",masterLabel:"#ECCA12",stripChLabel:"#C4C4C4",labelText:"#F9F9F9",labelTextSel:"#F9F9F9",eqLabel:"#EEEEEE",tabText:"#C8C9C9",tabTextSel:"#f9f9f9",vuBg:"#5E6168",ledText:"#00ffff",ledTextVCA:"#22E904",mLedText:"#E7E840",eqBg:"#18191D",eqBg2:"#18191D",graphMarks:"#8D8E90",yellow:"#BCA633",red:"#A83B3B",blue:"#3576B1",brown:"#B28741",green:"#47AF46",purple:"#8835b1",orange:"#b27635",gray:"#B0AFAF",black:"#060606",black2:"#242424",
sub:"#ba5d81",modal:"#32ABBE",media:"#A8184B",white:"#f9f9f9",presetBg:"#232627",shadow:"#444",maxx:"#AB9A89",tvPhantom:"#3577b1",tvInvert:"#b37936",tvMute:"#b53636",tvMuteMG:"#e55",tvMuteUn:"#82C9DE",tvSolo:"#c3a72d",tvGray:"#555",tvClearSolo:"#ccaf2f",tvMuteALL:"#ba3838",tvMuteFX:"#387dba",tvInvertOff:"#4D4D5D",tvPhantomOff:"#4D4D5D",tvMuteOff:"#807B7B",tvSoloOff:"#80807B",EQ:"#A83B3B",DYN:"#47AF46",FX:"#3576B1",AUX:"#BCA633",MATRIX:"#b27635",LINEIN:"#BC2D1B",DIGI:"#bbb",INPUT:"#c4673a",vuPeak:"#b4b",
grad1:null,grad2:null,grad3:null,grad4:null,grad5:null,grad6:null,gradMBL:null,panGrad:null,mPanGrad:null,gradTVInd:null,longClickMark:"rgba(200,200,200,0.5)",longClickMark2:"rgba(0,0,0,0.14)",me:"#FF9900",GATE:"#6D9F36",USB:"#C35353",LOCAL:"#D08561",SD:"#BCA633",vgText:"#60CAD1",mgText:"#E85A62",afsFixed:"#3333bb",afsLive:"#DBD23C",afsGraphPeakFixed:"rgba(51,51,187,0.6)",afsGraphPeakLive:"rgba(219,210,60,0.6)"};
font={stripChannel:"11pt open_sans_condensedbold",eqMarks:"12px open_sans_condensedbold",eqSlText:"15px open_sans_condensedbold",eqLabel:"14pt open_sans_condensedbold",tabText:"12pt open_sans_condensedbold",tabTextSel:"14pt open_sans_condensedbold",botChLabel:"14pt open_sans_condensedbold",botMChLabel:"14pt open_sans_condensedbold",settingsLabel:"18px open_sans_condensedbold",settings:"16px open_sans_condensedbold",led:"18px umixled",topLed:"16px umixled",stripMarks:"9px open_sansbold",editbox:"18px open_sans_condensedbold",
listItems:"13pt open_sans_condensedbold",time:"17pt open_sans_condensedbold, monospace",sans13pt:"13pt open_sans_condensedbold"};Shadow={main:[color.black,0,1,1],big:[color.black,0,2,2],white:[color.white,0,1,1]};allStrips=[];allStripsNoVca=[];auxStrips=[];inStrips=[];gainStrips=[];gainStrips2=[];fxStrips=[];subStrips=[];mediaStrips=[];lineinStrips=[];vcaStrips=[];auxSendStrips=[];mtxSendStrips=[];fxSendStrips=[];bankIdx=0;var activeViewGroup=-1,lastActiveViewGroup=-1,lastActiveViewPosition=-1;
activeSubGroup=-1;currentSnapName=selectedShowName=inView=null;selectedChannel=1;selectedChID="";selectedMtxSend=selectedFxSend=selectedAuxSend=selectedStrip=null;prevSelChannel=0;guiReady=hideHPAUX=stopUpdateMode=noData=!1;
function configFunctions(){HAVE_REC=!!curSetup.rec;switch(curSetup.input){case 8:case 12:HAVE_LATENCY=HAVE_ROUTING=!1,HAVE_HP=!0}20<=curSetup.input&&(HAVE_LATENCY=HAVE_ROUTING=IS_UI_24=!0,HAVE_HP=!1,HAVE_MATRIX=HAVE_MTK=HAVE_ISOLATION=HAVE_GATE=!0);40<=curSetup.input&&(CASCADE_MODE=!0)}
function loadResources(){res._font1="asdasd";if(isLocal||CHEETAH_TEXTURE)CHEETAH_TEXTURE=!1,res["imga_1.png"]=loadImg("ch/imga_1.png",!1),res["imga_2.png"]=loadImg("ch/imga_2.png",!1),res["imga_3.png"]=loadImg("ch/imga_3.png",!1),res["imga_4.png"]=loadImg("ch/imga_4.png",!1),CHEETAH_TEXTURE=!0;res.topBarLeft=loadImg("TOPNAV-L.png");res.topBarTile=loadImg("TOPNAV-T3.png");res.topBarRight=loadImg("TOPNAV-R.png");res.topBarLED=loadImg("TOPNAV-LED.png");res.topBarLogo=loadImg("UMIX-OFF.png");res.topBarLogo2=
loadImg("UMIX-ON3.png");res.stripTop=loadImg("C-TOP.png");res.stripAuxTop2=loadImg("C-AUX-TOP.png");res.stripAuxTop=loadImg("C-AUX-TOP-UPD.png");res.stripTile=loadImg("C-TILE.png");res.stripBottom=loadImg("C-BOT.png");res.stripLabel=loadImg("C-LABEL.png");res.auxStripTop=loadImg("AUX-SC-TOP.png");res.auxStripTile=loadImg("AUX-SC-TILE.png");res.auxStripBottom=loadImg("AUX-SC-BOTTOM.png");res.blStripTop=loadImg("BLANK-SC-TOP2.png");res.blStripTile=loadImg("BLANK-SC-TILE.png");res.blStripBottom=loadImg("BLANK-SC-BOTTOM.png");
res.blStripLabel=loadImg("BLANK-SC-LABEL.png");res.mAUXStripTop=loadImg("AUX-M-TOP2.png");res.mStripTopNCS=loadImg("M-TOP-NCS.png");res.mStripTile=loadImg("M-TILE.png");res.mStripBottom=loadImg("M-BOTTOM.png");res.mStripBottomLabel=loadImg("M-LABEL.png");res.mStripMute_OFF=loadImg("M-MUTE-OFF.png");res.mStripMute_OFF_F=loadImg("M-MUTE-OFF_F.png");res.mStripMute_ON=loadImg("M-MUTE-ON.png");res.mStripSolo_OFF=loadImg("M-SOLO-OFF.png");res.mStripSolo_ON=loadImg("M-SOLO-ON.png");res.fader=loadImg("FADER-SILVER2.png",
!0);res.redFader=loadImg("FADER-RED2.png",!0);res.blueFader=loadImg("FADER_BLUE.png",!0);res.greenFader=loadImg("SLIDER_GREEN.png",!0);res.subFader=loadImg("FADER_PINK.png",!0);res.auxFader=loadImg("FADER_YELLOW.png",!0);res.mtxFader=loadImg("FADER-ORANGE.png",!0);res.gainFader=loadImg("FADER_UI_B.png",!0);res.fxFader=loadImg("FADER-FX3.png",!0);res.fxFader_p=loadImg("FADERP-FX2.png",!0);res.fxFader_o=loadImg("FADERO-FX2.png",!0);res.fxFader_g=loadImg("FADERG-FX2.png",!0);res.fxFader_b=loadImg("FADERB-FX2.png",
!0);res.panSlider=loadImg("PAN-SLIDER.png",!0);res.presetLED=loadImg("LED-PRESET.png");res.peakOFF=loadImg("PEAK-OFF.png",!0);res.peakON=loadImg("PEAK-ON.png",!0);res.vuTexture=loadImg("M VU TILE5.png",!0);res.bMixGainOff=loadImg("MIXG-OFF.png",!0);res.bMixGainOn=loadImg("MIX_B100.png",!0);res.bMixGain2=loadImg("MIXG-GAIN.png",!0);res.bTVOff=loadImg("TV-OFF.png",!0);res.bTVOn=loadImg("TV-ON.png",!0);res.bFXOff=loadImg("FXS-OFF.png",!0);res.bFXOn=loadImg("FXS-ON.png",!0);res.bAUXOff=loadImg("AUXS-OFF.png",
!0);res.bAUXOn=loadImg("AUX-BTN_Y1.png",!0);res.bEDITOff=loadImg("EDT-OFF.png",!0);res.bEDIT_T=loadImg("EDT-ON_T.png",!0);res.bSettingsOff=loadImg("SETTINGS-OFF.png",!0);res.bSettingsOn=loadImg("SETTINGS-ON.png",!0);res.bPlayerOff=loadImg("AUD-BTN-OFF.png",!0);res.bPlayerOn=loadImg("AUD-BTN-ON.png",!0);res.bMuteOff=loadImg("MUTE-SC-OFF.png",!0);res.bMuteOff_F=loadImg("MUTE-SC-OFF_F.png",!0);res.bMuteOn=loadImg("MUTE-SC-ON.png",!0);res.bPre=loadImg("PRE-OFF.png",!0);res.bPost=loadImg("POST-ON_g.png",
!0);res.bSoloOff=loadImg("SOLO-SC-OFF.png",!0);res.bSoloOn=loadImg("SOLO-SC-ON.png",!0);res.bF1Off=loadImg("F1-OFF.png");res.bF1On=loadImg("F1-ON.png");res.bF2Off=loadImg("F2-OFF.png");res.bF2On=loadImg("F2-ON.png");res.SSUPD_ON=loadImg("SAVE-ON.png");res.SSUPD_OFF=loadImg("SAVE-OFF.png");res.SS_ON=loadImg("SAVEAS-ON.png");res.SS_OFF=loadImg("SAVEAS-OFF.png");res.RECS_STOP=loadImg("RECS-STOP.png");res.RECS_OFF=loadImg("RECS-OFF.png");res.PLAYS_STOP=loadImg("PLAYS-STOP.png");res.PLAYS_OFF=loadImg("PLAYS-OFF.png");
res.bPhantomOff=loadImg("PHANTOM-OFF.png",!0);res.bPhantomOn=loadImg("PHANTOM-ON.png",!0);res.b48Off=loadImg("48V-OFF.png",!0);res.b48On=loadImg("48V-ON.png",!0);res.hiz_off=loadImg("HIZ-OFF2.png",!0);res.hiz_on=loadImg("HIZ-ON2.png",!0);res.bPIOff=loadImg("PI-OFF.png",!0);res.bPIOn=loadImg("PI-ON.png",!0);res.bBMuteOff=loadImg("MUTE-L-BTN-OFF.png",!0);res.bBMuteOn=loadImg("MUTE-L-BTN-ON.png",!0);res.soTop=loadImg("SC-TOP.png");res.soTile=loadImg("SC-TILE.png");res.soBottom=loadImg("SC-BOTTOM.png");
res.bINPUTS_OFF=loadImg("INPUTS-OFF.png");res.bINPUTS_ON=loadImg("INPUTS-ON.png");res.bFXRet_OFF=loadImg("FXRET-BTN-OFF.png");res.bFXRet_ON=loadImg("FXRET-BTN-ON.png");res.bMuteAll_OFF=loadImg("MUTE-ALL-OFF.png");res.bMuteAll_ON=loadImg("MUTE-ALL-ON.png");res.bMuteFX_OFF=loadImg("MUTE-FX-OFF.png");res.bMuteFX_ON=loadImg("MUTE-FX-ON.png");res.bMTA_OFF=loadImg("CMIX-OFF.png");res.bMTA_ON=loadImg("CMIX-ON.png");res.bMuteGr_OFF=loadImg("MUTEGR-BTN-OFF.png");res.bMuteGr_ON=loadImg("MUTEGR-BTN-ON.png");
res.bAUXMast_OFF=loadImg("AUXM-BTN-OFF.png");res.bAUXMast_ON=loadImg("AUXM-BTN-ON2.png");res.bSUBGr_OFF=loadImg("SUBGR-BTN-OFF.png");res.bSUBGr_ON=loadImg("SUBGR-BTN-ON.png");res.bVIEWGr_OFF=loadImg("VIEWGR-BTN-OFF.png");res.bVIEWGr_ON=loadImg("VIEWGR-BTN-ON.png");res.bBYPASS_ON=loadImg("BYPASS-ON.png");res.bBYPASS_OFF=loadImg("BYPASS-OFF.png");res.bRESET_ON=loadImg("RESET-ON.png");res.bRESET_OFF=loadImg("RESET-OFF.png");res.bROOM_OFF=loadImg("ROOM-OFF.png");res.bROOM_ON=loadImg("ROOM-GR-ON.png");
res.bHARDKNEE_OFF=loadImg("HARD-KNEE-OFF.png");res.bSOFTKNEE_ON=loadImg("SOFT-KNEE-ON.png");res.bEZEQ_ON=loadImg("EZ-ON.png");res.bEZEQ_OFF=loadImg("EZ-BTN-OFF.png");res.eqHFaderGray=loadImg("SLIDER_SILVER_H.png",!0);res.eqVFaderGray=loadImg("FADER_UI_B.png",!0);res.eqVFaderRed=loadImg("SLIDER_RED.png",!0);res.eqVFaderGreen=loadImg("SLIDER_GREEN.png",!0);res.eqVFaderOrange=loadImg("SLIDER_PEW.png",!0);res.eqVFaderBlue=loadImg("SLIDER_BLUE.png",!0);res.eqVFaderPurple=loadImg("SLIDER_PURPLE.png",!0);
res.eqVFaderYellow=loadImg("SLIDER_YELLOW.png",!0);res.fxLEDb=loadImg("FX-B-LED.png",!0);res.auxsLED=loadImg("AUXS-LED.png",!0);res.b1=loadImg("nr/NR1-OFF.png");res.b2=loadImg("nr/NR2-OFF.png");res.b3=loadImg("nr/NR3-OFF.png");res.b4=loadImg("nr/NR4-OFF.png");res.b5=loadImg("nr/NR5-OFF.png");res.b6=loadImg("nr/NR6-OFF.png");res.b1R=loadImg("nr/NR1-RED-ON.png");res.b2R=loadImg("nr/NR2-RED-ON.png");res.b3R=loadImg("nr/NR3-RED-ON.png");res.b4R=loadImg("nr/NR4-RED-ON.png");res.b5R=loadImg("nr/NR5-RED-ON.png");
res.b6R=loadImg("nr/NR6-RED-ON.png");res.b1B=loadImg("nr/NR1-BLUE-ON.png");res.b2B=loadImg("nr/NR2-BLUE-ON.png");res.b3B=loadImg("nr/NR3-BLUE-ON.png");res.b4B=loadImg("nr/NR4-BLUE-ON.png");res.b5B=loadImg("nr/NR5-BLUE-ON.png");res.b6B=loadImg("nr/NR6-BLUE-ON.png");res.bTAP=loadImg("TAP-BLA-OFF.png",!0);res.bTAP_Pressed=loadImg("TAP-BLA-ON.png",!0);res.bTAPT_OFF=loadImg("TAPT-BTN_DLY-OFF.png",!0);res.bTAPT_ON=loadImg("TAPT-BTN_DLY-ON.png",!0);res.player_prev_on=loadImg("MEDIA-PREV-ON.png");res.player_prev_off=
loadImg("MEDIA-PREV-OFF.png");res.player_next_on=loadImg("MEDIA-NEXT-ON.png");res.player_next_off=loadImg("MEDIA-NEXT-OFF.png");res.player_play=loadImg("MEDIA-PLAY.png");res.player_pause=loadImg("MEDIA-PAUSE.png");res.player_stop_on=loadImg("MEDIA-STOP-ON.png");res.player_stop_off=loadImg("MEDIA-STOP-OFF.png");res.player_rec_on=loadImg("MEDIA-REC-ON2.png");res.player_rec_off=loadImg("MEDIA-REC-OFF.png");res.lex_delay_a=loadImg("LEX-DA.png");res.lex_reverb=loadImg("LEX-REV.png");res.lex_chorus=loadImg("LEX-CH.png");
res.lex_room=loadImg("LEX-RM.png");res.lex_tap_off=loadImg("LEX_TAP_OFF.png");res.lex_tap_on=loadImg("LEX_TAP_ON.png");res.lock=loadImg("lock_3.png",!0);res.RTA_OFF=loadImg("RTA_OFF.png");res.RTA_ON=loadImg("RTA_ON.png");res.DESS_OFF=loadImg("DES-OFF.png");res.DESS_ON=loadImg("DES-ON.png");res.lex=loadImg("lex.png");res.dbx=loadImg("dbx.png");res.dbx_logo=loadImg("dbx_logo.png");res.lex_rev=loadImg("lex_logo.png");res.lex_cho=loadImg("lex_cho.png");res.lex_dly=loadImg("lex_dly.png");res.lex_rmlogo=
loadImg("lex_rmlogo.png");res.DIGI_PRE=loadImg("DIGI_AM.png");res.digitech_logo=loadImg("DIGITECH_LOGO.png");res.AFS2LOGO=loadImg("AFS2LOGO.png");res.OFF_OFF=loadImg("OFF-OFF.png");res.OFF_ON=loadImg("OFF-ON.png");res.ON_ON=loadImg("ON-ON.png");res.SETUP_OFF=loadImg("SETUP-OFF.png");res.SETUP_ON=loadImg("SETUP-ON.png");res.AFSON_ON=loadImg("AFSON-ON2.png");res.AFSON_OFF=loadImg("AFSON-OFF2.png");res.MOME_OFF=loadImg("MOME-OFF.png");res.MOME_ON=loadImg("MOME-ON.png");res.AMP_D=loadImg("DIGIAMP_A.png");
res.AMP_G=loadImg("AMP-GREY.png");res.CAB_D=loadImg("DIGICAB_A2.png");res.CAB_G=loadImg("SPKR-GREY.png");res.inv_pic=loadImg("picto_gr2.png",!0);res.about=loadImg("SCLOGO_B.png");res.pedal_grey=loadImg("PEDAL-GREY.png");res.pedal_light=loadImg("PEDAL-LIGHT-ON.png");res.bg=loadImg("PATTERN_DNS.png");res.bolt_icon=loadImg("BOLT_ICON.png");res.cl_s_btn_off=loadImg("CL_BTN_OFF.png");res.cl_s_btn_on=loadImg("CL_BTN_ON.png");res.postproc=loadImg("PP-OFF.png");res.preproc=loadImg("PP-ONO.png");res.FX_BTN_OFF=
loadImg("FX_BTN_OFF.png");res.FX_BTN_PUR=loadImg("FX_BTN_PUR.png");res.FX_BTN_OR=loadImg("FX_BTN_OR.png");res.FX_BTN_GR=loadImg("FX_BTN_GR.png");res.FX_BTN_BLU=loadImg("FX_BTN_BLU.png");res.PRV_SNP_ON=loadImg("PRV-SNP-ON.png");res.PRV_SNP_OFF=loadImg("PRV-SNP-OFF.png");res.NXT_SNP_ON=loadImg("NXT-SNP-ON.png");res.NXT_SNP_OFF=loadImg("NXT-SNP-OFF.png");res.MTK_PLAY=loadImg("MTRK-PLAY.png");res.MTK_STOP=loadImg("MTK-STOP.png");res.MTK_REC_ON=loadImg("MTK-REC-ON.png");res.MTK_REC_OFF=loadImg("MTK-REC-OFF.png");
res.SO2_TOP=loadImg("SO-TOP.png");res.SO2_TILE=loadImg("SO-TILE.png");res.SO2_BOTTOM=loadImg("SO-BOTTOM.png");res.SO_M_BTN_TUR=loadImg("SO-M-BTN-TUR.png");res.SO_M_BTN_RED=loadImg("SO-M-BTN-RED.png");res.SO_M_BTN_PNK=loadImg("SO-M-BTN-PNK.png");res.SO_M_BTN_OFF=loadImg("SO-M-BTN-OFF.png");res.SO_M_BTN_BLU=loadImg("SO-M-BTN-BLU.png");res.SO_L_BTN_TUR=loadImg("SO-L-BTN-TUR.png");res.SO_L_BTN_RED=loadImg("SO-L-BTN-RED.png");res.SO_L_BTN_OFF=loadImg("SO-L-BTN-OFF.png");res.SO_B_BTN_YLW=loadImg("SO-B-BTN-YLW.png");
res.SO_B_BTN_PNK=loadImg("SO-B-BTN-PNK.png");res.SO_B_BTN_BLU=loadImg("SO-B-BTN-BLU.png");res.SO_B_BTN_GRE=loadImg("SO-B-BTN-GRE.png");res.SO_B_BTN_OFF=loadImg("SO-B-BTN-OFF.png");res.FFUNC_OFF=loadImg("SO-S-SLV.png");res.FFUNC_RED=loadImg("SO-S-RED.png");res.FFUNC_GRE=loadImg("SO-S-GRE.png");res.FFUNC_YLW=loadImg("SO-S-YLW.png");res.FFUNC_BLU=loadImg("SO-S-BLU.png");res.FFUNC_B_OFF=loadImg("SO-M-SLV.png");res.FFUNC_B_YLW=loadImg("SO-M-YLW.png");res.FFUNC_B_RED=loadImg("SO-M-RED.png");res.FFUNC_B_GRE=
loadImg("SO-M-GRE.png");res.FFUNC_B_BLU=loadImg("SO-M-BLU.png");IS_UI_24&&settings.bigSlideOut&&(res.VCA_ON=loadImg("VCA_ON.png"),res.VCA_OFF=loadImg("VCA_OFF.png"),res.SUBG_ON=loadImg("SUBG_ON.png"),res.SUBG_OFF=loadImg("SUBG_OFF.png"),res.HOME_ON=loadImg("HOME_ON.png"),res.HOME_OFF=loadImg("HOME_OFF.png"),res.FXM_ON=loadImg("FXM_ON.png"),res.FXM_OFF=loadImg("FXM_OFF.png"),res.AUXM_ON=loadImg("AUXM_ON.png"),res.AUXM_OFF=loadImg("AUXM_OFF.png"));getValue("settings.demo")&&(res.UIX=loadImg("uix.png"));
checkFonts()}var topWidget=null,bottomWidget=null,masterWidget=null,mixerWidget=null,gainMixer=null,auxWidget=null,fxSendsWidget=null,editWidget=null,editStripWidget=null,settingsWidget=null,playerStrips=null,playerLabels=null,slideOutWidget=null,auxoutWidget=null,fxoutWidget=null,modalsWidget=null,playerWidget=null,fsGEQ=null,fsPEQ=null,pongGame=null,moremeWidget=null,networkWidget=null;showsPopup=metersWidget=null;
function settingsCheck(){curSetup.rec||(settings.f1func==E_FFUNC.REC&&settingsStorage.set("f1func",E_FFUNC.PLAY),settings.f2func==E_FFUNC.REC&&settingsStorage.set("f2func",E_FFUNC.NEWSNAP));1>settings.drawRate&&settingsStorage.set("drawRate",1)}bgPattern=color.eqBg;
function initGUI(){IMG_LOAD_0=null;WEBSITE_MODE&&loadDemoUserSnapshot();if("ch"==settings.lang)for(var a=Object.keys(font),b=0;b<a.length;b++)font[a[b]]=font[a[b]].replace("open_sans_condensedbold","Tahoma");isLocal&&initLocal();if(PATTERNED=isLocal?!1:settings.patterned)bgPattern=createPattern(res.bg,"repeat"),color.eqBg=bgPattern;sendTime();setInterval(function(){sendMessage("ALIVE")},1E3);settingsCheck();initGradients();HAVE_HP&&(hideHPAUX=0==getValue("var.hpaux"));topWidget=new TopWidget;auxoutWidget=
new AUXOUTStrip;fxoutWidget=new FXOUTStrip;bottomWidget=new BottomWidget2;mixerWidget=new MainMixer;gainMixer=new GainMixer;selectedStrip=inStrips[0];masterWidget=new MasterStrip;slideOutWidget=IS_UI_24&&settings.bigSlideOut?new SlideOut2:new SlideOut;auxWidget=new AUXSendsPage;fxSendsWidget=new FXSENDSPage;settingsWidget=new SETTINGS;modalsWidget=new MODALS;playerStrips=new MEDIA_STRIPS;playerLabels=new MEDIA_LABELS;playerWidget=IS_UI_24?new PLAYER_PAGE:new PLAYER;editWidget=new EDIT_PAGE;editStripWidget=
new EDIT_STRIP;moremeWidget=new MOREME;pongGame=new PONG;prepareF1F2();resumeShowGroup();guiReady=!0;mode=E_MODE.MIX;isPortrait&&settings.moremeportrait?setMode(E_MODE.MOREME,2):setMode(E_MODE.MIX);syncHPAUX();selectFirstVisible();setTimeout(updateSomeStuff,500);setInterval(updateSomeStuff,3E3);WEBSITE_MODE&&setInterval(saveDemoUserSnapshot,5E3);EMULATE&&setInterval(emulate,50)}
function saveDemoUserSnapshot(){settingsStorage.put("DEMO_SNAP_VER","ui"+curSetup.input);settingsStorage.put("DEMO_SNAP_DATA",dataValue)}function loadDemoUserSnapshot(){var a=settingsStorage.get("DEMO_SNAP_VER"),b=settingsStorage.get("DEMO_SNAP_DATA");a=="ui"+curSetup.input&&b&&"object"===typeof b&&Object.extend(dataValue,b)}var keyboard=null,keyboardCheckTimer=null;
function initLocal(){isLocal&&isDefined($j)&&($j("#eb2").keyboard({layout:"custom",customLayout:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {accept}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","Q W E R T Y U I O P { } |",'A S D F G H J K L : " {accept}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}",
"ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {accept}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {accept}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},display:{accept:"OK",cancel:"CANCEL",shift:"SHIFT",alt:"ALT",bksp:"←"},userClosed:!0,usePreview:!1,cancelClose:!1,accepted:function(a,b,c){editOk.valueFunc();hideEditBox2()},
canceled:function(a,b,c){hideEditBox2()}}),keyboard=$j("#eb2").getkeyboard(),keyboardCheckTimer=setInterval(function(){"none"==editContainer.style.display&&keyboard.isVisible()&&keyboard.close()},250))}function onDataINIT(){updateSomeStuff()}function updateSomeStuff(){updateCurSnapList()}function updateCurSnapList(){var a=getValue("var.currentShow");a&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}
function selectFirstVisible(){for(var a=0,b=0;b<allStrips.length;b++)if(allStrips[b].enabled){a=b;break}setSelected(a)}
function resumeShowGroup(){var a=settings.currentViewGroup;if(-1!=a)if(300<=a&&IS_UI_24)mixerWidget.showVCA(bound(a-300,0,6));else if(200<=a)mixerWidget.showSG(bound(a-200,0,6));else if(100<=a)switch(a){case E_VG.INPUTS:mixerWidget.showInputsGroup();break;case E_VG.FXS:mixerWidget.showFxGroup();break;case E_VG.SUBS:mixerWidget.showSubGroup();break;case E_VG.AUXS:mixerWidget.showAuxGroup();break;case E_VG.VCAS:mixerWidget.showVCAGroup()}else mixerWidget.showViewGroup(settings.currentViewGroup)}
function goBack(){setMode(lastMode)}lastMode=E_MODE.MIX;modeHistory=[];function modeBack(){isPortrait||(2>modeHistory.length?setMode(E_MODE.MIX):setMode(modeHistory.pop()))}
function setMode(a,b){if(null!=mixerWidget){if(isPortrait)switch(a){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.MOREME:break;default:return}lastMode=mode;modeHistory.push(mode);mode=a;clearInterval(ticker);switch(a){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.MOREME:break;default:slideOutWidget.hide()}for(var c=0;c<widgets.length;c++)widgets[c].hide();topWidget.show();masterWidget.show();bottomWidget.show();mixerWidget.mode!=
E_MODE.MIX&&mixerWidget.setMode(E_MODE.MIX);bottomWidget.upd();switch(a){case E_MODE.MIX:mixerWidget.show();(settings.pinSlideOut||isDefined(b)&&2!=b)&&slideOutWidget.show();break;case E_MODE.GAIN:bottomWidget.syncOffset();gainMixer.show();break;case E_MODE.EDIT:editStripWidget.show();editWidget.show();break;case E_MODE.AUX:(settings.pinSlideOutX||isDefined(b)&&2!=b)&&slideOutWidget.show();auxoutWidget.show();auxWidget.show();break;case E_MODE.FXSENDS:(settings.pinSlideOutX||isDefined(b)&&2!=b)&&
slideOutWidget.show();fxSendsWidget.show();fxoutWidget.show();break;case E_MODE.SETTINGS:bottomWidget.hide();settingsWidget.show();break;case E_MODE.MODALS:bottomWidget.hide();modalsWidget.show();break;case E_MODE.PLAYER:bottomWidget.hide();playerWidget.show();IS_UI_24?0==playerWidget.mode&&(playerStrips.show(),playerLabels.show()):(playerStrips.show(),playerLabels.show());break;case E_MODE.PONG:pongGame.show();break;case E_MODE.MOREME:slideOutWidget.hide(),bottomWidget.hide(),masterWidget.hide(),
isDefined(b)&&2==b&&topWidget.hide(),auxoutWidget.show(),moremeWidget.show()}geomAll();drawAll("MODE("+a+")")}}
function setSelected(a,b,c){if(isDefined(a)&&null!=a){var d=selectedStrip;c=c||!1;if(a>allStrips.length-1||-1>a)return!1;if(-1==a&&-1==selectedChannel&&b)return setSelected(prevSelChannel);if(selectedChannel==a)return!1;-1!=a&&(prevSelChannel=a);-1==a?(selectedChannel=-1,selectedStrip=masterWidget,selectedChID=masterWidget.name.slice(0,-1)):(selectedChannel=a,selectedStrip=allStrips[a],selectedChID=selectedStrip.name.slice(0,-1));mode==E_MODE.EDIT&&(editStripWidget.setStrip(),editWidget.upd(),regUpdate(editStripWidget));
regUpdate(selectedStrip);regUpdate(d);regUpdate(bottomWidget);regUpdate(masterWidget);mode==E_MODE.PLAYER&&regUpdate(playerLabels);mode==E_MODE.GAIN&&(regUpdate(findByID(gainStrips,d.id)),regUpdate(findByID(gainStrips,selectedStrip.id)));mode==E_MODE.AUX&&(regUpdate(findByID(auxSendStrips,d.id)),regUpdate(findByID(auxSendStrips,selectedStrip.id)),-1==d.id||-1==selectedStrip.id?regUpdate(auxWidget):(regUpdate(findByID(mtxSendStrips,d.id)),regUpdate(findByID(mtxSendStrips,selectedStrip.id))));mode==
E_MODE.FXSENDS&&(b=fxSendsWidget.page.strips,regUpdate(findByID(b,d.id)),regUpdate(findByID(b,selectedStrip.id)));auxoutWidget.enabled&&regUpdate(auxoutWidget);fxoutWidget.enabled&&regUpdate(fxoutWidget);settings.sync&&!c&&sendMessage("BMSG^SYNC^"+settings.sync_id+"^"+a);return!0}}function findByID(a,b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c];return null}
function findStripByKey(a){a.endsWith(".")||(a+=".");if(a.contains("m."))return masterWidget;for(var b=0;b<allStrips.length;b++)if(allStrips[b].name==a)return allStrips[b]}function sendTime(){var a=(new Date).getTimezoneOffset();sendMessage("USERTIME^"+Date.now()+"^"+a)}
function toggleSlideOut(){mode!=E_MODE.MIX&&mode!=E_MODE.GAIN&&mode!=E_MODE.AUX&&mode!=E_MODE.FXSENDS?setMode(E_MODE.MIX,!0):(slideOutWidget.enabled?slideOutWidget.hide():slideOutWidget.show(),geomAll(),drawAll("slideout "+slideOutWidget.enabled))}
function initGradients(){color.grad1=ctx.createLinearGradient(0,0,0,7);color.grad1.addColorStop(0,"rgba(255,255,255,0.1)");color.grad1.addColorStop(1,"rgba(255,255,255,0)");color.grad2=ctx.createLinearGradient(0,7,0,0);color.grad2.addColorStop(0,"rgba(255,255,255,0.1)");color.grad2.addColorStop(1,"rgba(255,255,255,0)");color.grad3=ctx.createLinearGradient(0,0,0,5);color.grad3.addColorStop(0,"rgba(255,255,255,0.7)");color.grad3.addColorStop(.15,"rgba(255,255,255,0.2)");color.grad3.addColorStop(1,"rgba(255,255,255,0)");
color.grad4=ctx.createLinearGradient(0,5,0,0);color.grad4.addColorStop(0,"rgba(255,255,255,0.7)");color.grad4.addColorStop(.2,"rgba(255,255,255,0.2)");color.grad4.addColorStop(1,"rgba(255,255,255,0)");color.grad5=ctx.createLinearGradient(0,0,0,20);color.grad5.addColorStop(0,"rgba(255,255,255,0.0)");color.grad5.addColorStop(1,"rgba(255,255,255,0.15)");color.grad6=ctx.createLinearGradient(0,0,0,20);color.grad6.addColorStop(0,"rgba(255,255,255,0.15)");color.grad6.addColorStop(.6,"rgba(255,255,255,0.0)");
color.gradMBL=ctx.createLinearGradient(0,0,123,0);color.gradMBL.addColorStop(0,"rgba(255,255,255,0)");color.gradMBL.addColorStop(.5,"rgba(255,255,255,0.2)");color.gradMBL.addColorStop(1,"rgba(255,255,255,0)");color.panGrad=ctx.createLinearGradient(0,13,0,19);color.panGrad.addColorStop(0,"#00ffff");color.panGrad.addColorStop(1,"#0D6666");color.mPanGrad=ctx.createLinearGradient(0,13,0,19);color.mPanGrad.addColorStop(0,"#ffff00");color.mPanGrad.addColorStop(1,"#666600");color.tvvuGrad=ctx.createLinearGradient(0,
82,0,0);color.tvvuGrad.addColorStop(0,"green");color.tvvuGrad.addColorStop(.5,"yellow");color.tvvuGrad.addColorStop(1,"red");color.tvvuGrad2=ctx.createLinearGradient(0,82,0,0);color.tvvuGrad2.addColorStop(0,"#494");color.tvvuGrad2.addColorStop(.5,"#aa3");color.tvvuGrad2.addColorStop(1,"#d44");color.stripGrad=ctx.createLinearGradient(0,0,measures.mixerStripWidth,0);color.stripGrad.addColorStop(0,"rgba(255,255,255,0)");color.stripGrad.addColorStop(.5,"rgba(255,255,255,0.2)");color.stripGrad.addColorStop(1,
"rgba(255,255,255,0)");color.grpeak=ctx.createLinearGradient(0,6,0,0);color.grpeak.addColorStop(1,"#700");color.grpeak.addColorStop(.3,"#f00");color.grpeak.addColorStop(0,"#f00")}IMG_LOAD_0=null;function drawLoadingScreen(){var a=screenWidth,b=screenHeight;ctx.fillStyle="#000000";ctx.fillRect(0,0,a,b);a=isRetina?"img2x/":"img1x/";IMG_LOAD_0=new Image;IMG_LOAD_0.onload=IL_LOADED;IMG_LOAD_0.src=a+"UI_SPLASH_D.png"}function IL_LOADED(){drawProgress(0);startLoadingTime=Date.now();CHK_START()}
startLoadingTime=0;function CHK_START(){if(1==startLoading){var a=Date.now()-startLoadingTime;log("start delay: "+a+"ms");loadResources()}else 0==startLoading?(drawProgress(-1),checkConnection()):drawProgress(0),setTimeout(CHK_START,1E3)}
function drawProgress(a){var b=screenWidth,c=screenHeight,d=560>c?.8:1,f=b/2|0,e=(b-IMG_LOAD_0.w()*d)/2|0,g=(c-IMG_LOAD_0.h()*d)/2|0,g=g+0;550>c&&(g-=26);var h=g+40|0,f=ctx.createRadialGradient(f,h,0,f,h,500);f.addColorStop(0,"#1C2A34");f.addColorStop(1,"#000");ctx.fillStyle="#000";ctx.fillRect(0,0,b,c);ctx.fillStyle=f;ctx.fillRect(0,0,b,c);drawImageScale(IMG_LOAD_0,e,g,d);c=1+(b-338)/2|0;d=g+IMG_LOAD_0.h()*d-10;0>a?(ctx.font="bold 48pt open_sans_condensedbold",ctx.fillStyle="#e33",ctx.textAlign=
"center",ctx.fillText(lang.OFFLINE,b/2|0,d+28)):(ctx.fillStyle="#004040",ctx.shadowColor="#004040",ctx.shadowBlur=6,ctx.fillRect(c,d,338,5),ctx.shadowColor="#00BFBF",ctx.shadowBlur=20,ctx.shadowOffsetX=-1,ctx.fillStyle="#00BFBF",ctx.fillRect(c,d,bound(Math.round(338*a),2,338),5),ctx.setShadow(null))}
function updateCacheAll(){log("updateCacheAll()");allStrips.forEach(function(a){a.UPDATE_CACHE()});auxSendStrips.forEach(function(a){a.UPDATE_CACHE()});fxSendStrips.forEach(function(a){a.UPDATE_CACHE()});auxWidget&&auxWidget.page.strips[0].cachePaint();fxSendsWidget&&fxSendsWidget.page.strips[0].cachePaint();slideOutWidget&&slideOutWidget.cachePaint()}isPortrait=!1;
function onResize(){var a=screenWidth<screenHeight;log(screenWidth+"x"+screenHeight+"; guiReady: "+guiReady);a?(isPortrait||onPortrait(),isPortrait=!0):(a=isPortrait,isPortrait=!1,a&&onLandscape());geomAll();updateCacheAll();drawAll("resize "+screenWidth+"x"+screenHeight)}function onLandscape(){log("onLandscape()");guiReady&&(mode==E_MODE.MOREME||settings.moremeportrait)&&modeBack()}
function onPortrait(){log("onPortrait()");if(guiReady)if(settings.moremeportrait)setMode(E_MODE.MOREME,2);else switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.MOREME:break;default:setMode(E_MODE.MIX)}}function calcBPMfromArr(a){if(2>a.length)return-1;a=(a.last()-a[0])/(a.length-1);return Math.round(6E4/a)}
function getGlobalBpm(){for(var a=0,b=0,c=!1,d=fxStrips.length-1;0<d;d--){var f=fxStrips[d].getNameValue("bpm");1==fxStrips[d].getNameValue("fxtype")&&(a=f,0!=b&&b!=f&&(c=!0),b=f)}return""+a+(c?"*":"")}BPM_TAP_ARRAY=[];
function bpmTapHandler(a){isDefined(a)||(a=-1);var b=Date.now();if(0==BPM_TAP_ARRAY.length)topWidget.led.setMsg(lang.KEEP_TAPPING),BPM_TAP_ARRAY.push(b);else if(BPM_TAP_ARRAY.length>TAP_TEMPO_AVG_FROM&&BPM_TAP_ARRAY.shift(),b-BPM_TAP_ARRAY.last()>TAP_TEMPO_MAX_GAP)BPM_TAP_ARRAY.clear(),topWidget.led.setMsg(lang.KEEP_TAPPING),BPM_TAP_ARRAY.push(b);else if(BPM_TAP_ARRAY.push(b),!(3>BPM_TAP_ARRAY.length||(b=calcBPMfromArr(BPM_TAP_ARRAY),10>b)))switch(topWidget.led.setMsg(b+" "+lang.BPM),a){case -1:for(a=
0;a<fxStrips.length;a++)fxStrips[a].setNameValue("bpm",b);break;case 0:fxStrips[0].setNameValue("bpm",b);break;case 1:fxStrips[1].setNameValue("bpm",b);break;case 2:fxStrips[2]&&fxStrips[2].setNameValue("bpm",b);break;case 3:fxStrips[3]&&fxStrips[3].setNameValue("bpm",b)}}
function askBpm(a){isDefined(a)||(a=-1);var b=[];switch(a){case -1:for(a=0;a<fxStrips.length;a++)b.push(fxStrips[a]);break;case 0:b.push(fxStrips[0]);break;case 1:b.push(fxStrips[1]);break;case 2:fxStrips[2]&&b.push(fxStrips[2]);break;case 3:fxStrips[3]&&b.push(fxStrips[3])}editOk.arr=b;editOk.valueFunc=function(){var a=editBox2.value;if(null!=a&&0!=a.length&&(a=parseInt(a),!isNaN(a)))if(20>a||400<a)showPopupMsg(lang.OUT_OF_RANGE);else{for(var b=0;b<this.arr.length;b++)this.arr[b].setNameValue("bpm",
a);topWidget.led.setMsg(a+" "+lang.BPM);drawAll()}};b=b[0].getNameValue("bpm");showEditBox2(lang.ENTER_BPM,""+b)}function prepareF1F2(){regUpdate(masterWidget)}
function doFfunc(a){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else switch(a){case E_FFUNC.NEWSNAP:settingsWidget.setMode(2);setMode(E_MODE.SETTINGS);showsPage.bSNAPSAVE.click();break;case E_FFUNC.UPDCURSNAP:a=getValue("var.currentShow");var b=getValue("var.currentSnapshot");if(!a||!b){showPopupMsg(lang.NO_CURRENT_SNAPSHOT,1E3);break}confOk.valueFunc=function(){var a=getValue("var.currentShow"),b=getValue("var.currentSnapshot");a&&b?sendMessage(E_COMMANDS.SNAP_SAVE+"^"+a+"^"+b):showPopupMsg(lang.NO_CURRENT_SNAPSHOT,
1E3)};showConfBox(lang.UPDATE_CURRENT_SNAPSHOT);break;case E_FFUNC.PLAY:if(isBlocked("player")){showPopupMsg(lang.LOCKED,800);break}if(a=2==getValue("var.currentState"))player2track.STOP.onPress();else player2track.PLAY.onToggleUp();break;case E_FFUNC.REC:toggleRec();break;case E_FFUNC.MTK_REC:toggleMTKRec();break;case E_FFUNC.MTK_PLAY:if(isBlocked("player")){showPopupMsg(lang.LOCKED,800);break}if(a=2==getValue("var.mtk.currentState"))mtkPlay.STOP.onPress();else mtkPlay.PLAY.onToggleUp();break;case E_FFUNC.NEXT_SNAP:a=
getValue("var.currentShow");b=getValue("var.currentSnapshot");b=CURRENT_SNAPS_LIST.indexOf(b);(b=CURRENT_SNAPS_LIST[b+1]||CURRENT_SNAPS_LIST[0])&&sendMessage(E_COMMANDS.SNAP_LOAD+"^"+a+"^"+b);break;case E_FFUNC.PREV_SNAP:a=getValue("var.currentShow");b=getValue("var.currentSnapshot");b=CURRENT_SNAPS_LIST.indexOf(b);(b=CURRENT_SNAPS_LIST[b-1]||CURRENT_SNAPS_LIST.last())&&sendMessage(E_COMMANDS.SNAP_LOAD+"^"+a+"^"+b);break;case E_FFUNC.SWAP_USB:sendMessage("SWAPUSB");break;case E_FFUNC.MUTE_ALL:isMuteAll()?
mixerWidget.cancelMuteAll():mixerWidget.muteAll();break;case E_FFUNC.DIM:a=getValue("m.dim"),setValue("m.dim",a?0:1)}}var CURRENT_SNAPS_LIST=[];function toggleRec(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):(getValue("var.isRecording"),.5<=getValue("var.recBusy")||(sendMessage(E_COMMANDS.TOGGLE_REC),regUpdate(player2track),regUpdate(masterWidget)))}
function toggleMTKRec(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):.5<=getValue("var.mtk.rec.busy")||(getValue("var.mtk.rec.currentState"),sendMessage(E_COMMANDS.TOGGLE_MTK_REC),regUpdate(mtkRec),regUpdate(masterWidget))}ignoreClearModal=!1;
function handleKey(a,b,c){if(guiReady&&"block"!=editBox.style.display&&"block"!=editContainer.style.display){switch(b){case E_KEYS.escape:mixerWidget.showAll();break;case E_KEYS.backspace:case E_KEYS.tab:c.preventDefault()}switch(b){case E_KEYS.backspace:setMode(lastMode);break;case E_KEYS.tab:switch(mode){case E_MODE.MIX:slideOutWidget.enabled&&"SlideOut2"==slideOutWidget.widgetName&&slideOutWidget.nextMode();break;case E_MODE.EDIT:editWidget.nextMode();break;case E_MODE.AUX:auxWidget.nextMode();
break;case E_MODE.FXSENDS:fxSendsWidget.nextMode();break;case E_MODE.SETTINGS:settingsWidget.nextMode();break;case E_MODE.MODALS:modalsWidget.nextMode();break;case E_MODE.PLAYER:IS_UI_24&&playerWidget.nextMode()}break;case E_KEYS.down_arrow:mixerWidget.enabled&&mixerWidget.goLeft();break;case E_KEYS.up_arrow:mixerWidget.enabled&&mixerWidget.goRight();break;case E_KEYS.left_arrow:switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:break;default:return}selectPrevChannel();
break;case E_KEYS.right_arrow:switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:break;default:return}selectNextChannel()}switch(a){case "1":topWidget.bTOTAL.click();break;case "2":topWidget.bMix.click();break;case "3":topWidget.bEDIT.click();break;case "4":topWidget.bAUX.click();break;case "5":topWidget.bFX.click();break;case "6":topWidget.bPlayer.click();break;case "7":topWidget.bSet.click();break;case "8":case " ":topWidget.bLogo.click();break;case "Q":slideOutWidget.inp.click();
break;case "W":slideOutWidget.fx.click();break;case "E":slideOutWidget.sub.click();break;case "R":slideOutWidget.aux.click();break;case "T":IS_UI_24&&slideOutWidget.vca.click();break;case "D":DEPLOY||(dbgWidgets=!dbgWidgets,drawAll());break;case "P":mode==E_MODE.EDIT&&(null!=currentPresetWindow?currentPresetWindow.close():editWidget.showPresets());if(mode==E_MODE.MIX){switch(selectedStrip.type){case E_STRIP_TYPE.MASTER:case E_STRIP_TYPE.VCA:return}mWidgets.length?"PRESET_MENU"==mWidgets[0].widgetName&&
clearModals():(clearModals(),mixerWidget.showPresets())}return;case "F":case "n":toggleMuteFX();break;case "A":case "`":toggleMuteAll();break;case "M":switch(mode){case E_MODE.MIX:case E_MODE.EDIT:selectedStrip.mute&&selectedStrip.mute.click();break;case E_MODE.AUX:a=null;(a=1==auxStrips[auxWidget.mode].getNameValue("matrix")?findByID(mtxSendStrips,selectedStrip.id):findByID(auxSendStrips,selectedStrip.id))&&a.mute&&a.mute.click();break;case E_MODE.FXSENDS:(a=findByID(fxSendStrips,selectedStrip.id))&&
a.mute&&a.mute.click();break;default:return}break;case "S":switch(mode){case E_MODE.MIX:case E_MODE.EDIT:break;default:return}selectedStrip.solo&&(selectedStrip.solo.click(),mode==E_MODE.MODALS&&regUpdate(tvWidget));break;case "C":if(mWidgets.length)"SUBMENU"==mWidgets[0].widgetName&&clearModals();else if(bottomWidget.enabled&&-1!=bottomWidget.IDS.indexOf(selectedChannel))bottomWidget.onHold(!0);return;case "a":muteGroupToggle(0);break;case "b":muteGroupToggle(1);break;case "c":muteGroupToggle(2);
break;case "d":muteGroupToggle(3);break;case "e":muteGroupToggle(4);break;case "f":muteGroupToggle(5);break;case "Z":masterWidget.f1c.enabled&&masterWidget.f1c.click();break;case "X":masterWidget.f2c.enabled&&masterWidget.f2c.click();break;case "q":switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:break;default:return}var d=selectedStrip;if(null==d||d.type==E_STRIP_TYPE.MASTER)return;editOk.valueFunc=function(){var a=editBox2.value;null!=a&&0!=a.length&&
(a=a.toUpperCase(),d.setName(a),regUpdate(bottomWidget),regUpdate(editStripWidget),regUpdate(playerStrips),regUpdate(editWidget))};showEditBox2(lang.RENAME_CHANNEL.format(d.text),d.getName())}!ignoreClearModal&&mWidgets.length&&clearModals();ignoreClearModal=!1}}function toggleMuteAll(){checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?mixerWidget.cancelMuteAll():mixerWidget.muteAll();regUpdate(slideOutWidget);regUpdate(playerWidget)}
function toggleMuteFX(){checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?mixerWidget.unMuteFX():mixerWidget.muteFX();regUpdate(slideOutWidget);regUpdate(playerWidget)}
function selectNextChannel(){var a=-1,b=allStrips;if(0<=activeViewGroup&&10>activeViewGroup&&inView)a=inView.indexOf(selectedChannel),a=inView.length-1==a?-1:a+1,a=-1==a?-1:inView[a],setSelected(a),bottomWidget.gotoID2(a);else{for(var c=selectedChannel+1;c<b.length;c++){var d=b[c];if(-1!=bottomWidget.IDS.indexOf(d.id)){a=d.id;setSelected(a);bottomWidget.gotoID2(a);return}}-1==a&&(mode==E_MODE.AUX||mode==E_MODE.FXSENDS?(setSelected(0),bottomWidget.gotoID2(0)):setSelected(-1))}}
function selectPrevChannel(){var a=-1,b=allStrips;if(0<=activeViewGroup&&10>activeViewGroup&&inView)a=inView.indexOf(selectedChannel),a=0==a?-1:-1==a?inView.length-1:a-1,a=-1==a?-1:inView[a],setSelected(a),bottomWidget.gotoID2(a);else if(-1==selectedChannel){for(var c=b.length-1;0<=c;c--){var d=b[c];if(-1!=bottomWidget.IDS.indexOf(d.id)){a=d.id;break}}setSelected(a);-1!=selectedChannel&&bottomWidget.gotoID3(a)}else{for(c=selectedChannel-1;0<=c;c--)if(d=b[c],-1!=bottomWidget.IDS.indexOf(d.id)){a=d.id;
setSelected(a);bottomWidget.gotoID3(a);break}-1==a&&(mode==E_MODE.AUX||mode==E_MODE.FXSENDS?(a=bottomWidget.IDS.last(),setSelected(a),bottomWidget.gotoID3(a)):setSelected(-1))}}wsock=null;netConnectCache=netConnectState=wsockFailures=0;netConnectTimer=null;netwFrameCounter=0;noConnectMessage=null;
function networkTick(){if(null==wsock){var a=document.URL.replace("http:","ws:"),a=a.replace("/phone.html",""),a=a.replace("/mixer.html","");log(a);noConnectMessage=$("noConnectMessage");wsock=io.connect(a,{"reconnection limit":3E3,"max reconnection attempts":Infinity});wsock.on("connect",function(){wsockFailures=0;sendTimeNetwork();sendMessage("SERIAL")});wsock.on("disconnect",function(){wsockFailures++});wsock.on("reconnect_failed",function(){log("reconnect failed");wsockFailures++;wsock.disconnect();
wsock.socket.reconnect()});wsock.on("error",function(a){log("Socket.io ERROR: "+a.message);wsockFailures++;wsock.disconnect();wsock.socket.reconnect()});wsock.on("message",receiveMessage)}netwFrameCounter&7||(netConnectState=isSocketConnected(),netConnectCache!==netConnectState&&(netConnectState?(conMessageHide(),clearTimeout(netConnectTimer),onNetConnect()):(netConnectTimer=setTimeout(function(){conMessageShow()},2E3),onNetDisconnect()),netConnectCache=netConnectState));netwFrameCounter++;15E3<=
netwFrameCounter&&(netwFrameCounter=0)}function isSocketConnected(){return null!=wsock&&wsock.socket.connected}function sendMessage(a){dbgNetwork&&log(a);return null!=wsock&&wsock.socket.connected?(wsock.send(a),!0):!1}function onNetConnect(){log("#onNetConnect");topWidget&&regUpdate(topWidget)}function onNetDisconnect(){log("#onNetDisconnect");topWidget&&regUpdate(topWidget)}
function conMessageShow(){log("#conMessageShow");"visible"!=noConnectMessage.style.visibility&&(noConnectMessage.style.visibility="visible")}function conMessageHide(){log("#conMessageHide");"hidden"!=noConnectMessage.style.visibility&&(noConnectMessage.style.visibility="hidden")}function iosys(a){sendMessage("IOSYS^"+a)}function sendTimeNetwork(){var a=(new Date).getTimezoneOffset();sendMessage("USERTIME^"+Date.now()+"^"+a)}initSent=!1;msgCount2=msgCount=0;
function receiveMessage2(a){msgCount2++;try{if(null!=a)if(a.startsWith("SETD^")){var b=a.split("^",3);3>b.length||putValue(b[1],parseFloat(b[2]))}else a.startsWith("SETS^")?(b=a.split("^",3),3>b.length||putValue(b[1],b[2])):parseCommand(a)}catch(c){showPopupMsg(c.message),log(c.stack),initSent||sendMessage("INIT"),initSent=!0}}function receiveMessage(a){msgCount++;if(a.contains("\n")){a=a.split("\n");for(var b=0;b<a.length;b++)receiveMessage2(a[b])}else receiveMessage2(a)}networkPollTick=networkTick;
function VtoPAN(a){return 200*a-100|0}function PANtoV(a){return bound((a+100)/200,0,1)}function VtoLIN(a){return 2.676529517952372E-4*Math.exp(a*(23.90844819639692+a*(-26.23877598214595+(12.195249692570245-.4878099877028098*a)*a)))*(.055>a?Math.sin(28.559933214452666*a):1)}zeroDbPos=.7647058823529421;SOUND_SPEED=331.3+.606*22;SAMPLE_RATE=44100;ONE_FOOT_IN_METERS=.3048;
function VtoDB(a){var b=VtoLIN(a);.001>a?a="- @ ":(b=(20*Math.log(b)/Math.log(10)*10+.45|0)/10,-20>=b?b=""+(b|0):-1==(""+b).indexOf(".")&&(b+=".0"),a=b+" dB",-120>b&&(this.text="- @ "));return a}function VtoDB2(a){var b=VtoLIN(a);.001>a?a="-inf":(b=(20*Math.log(b)/Math.log(10)*10+.45|0)/10,-20>=b?b=""+(b|0):-1==(""+b).indexOf(".")&&(b+=".0"),a=b,-120>b&&(this.text="-inf"));return a}function VtoDBf(a){a=VtoLIN(a);return 1E-10>a?-200:20*Math.log(a)/Math.log(10)}
function VtoDBf3(a){a=VtoLIN(a);return(20*Math.log(a)/Math.log(10)*10+.45|0)/10}function DBtoVf2(a){return findV(VtoDBf3,a)}function DBtoVf(a){if(-200>=a)return 0;if(10<=a)return 1;a=Math.pow(10,a/20);for(var b=0,c=1,d=0;128>d;d++){var f=.5*(b+c),e=VtoLIN(f);if(1E-10>Math.abs(e-a))return f;e>a?c=f:b=f}return.5*(b+c)}function findV(a,b){for(var c=0,d=1,f=0;128>f;f++){var e=.5*(c+d),g=a(e);if(1E-10>Math.abs(g-b))return e;g>b?d=e:c=e}return.5*(c+d)}function VtoGAINP(a){return 90*a-40}
function GAINPtoV(a){return bound((a+40)/90,0,1)}ui24pgains=[-5,-5,-3,-3,-1,-1,1,1,3,3,5,5,7,7,9,9,11,11,13,13,15,15,17,17,19,19,21,21,23,23,25,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58];function VtoGAIN24(a){a=parseInt(64*a);0>a&&(a=0);63<a&&(a=63);return ui24pgains[a]-1}function GAIN24toV(a){return bound((a+6)/63,0,1)}
function VtoLATENCY(a){return 0==a?"0"+lang.MS:a<=47/SAMPLE_RATE?Math.round(SAMPLE_RATE*a)+lang.SMPL:precision(1E3*a,1)+lang.MS}
function askForDelay(a,b,c,d){c=c||"delay";editOk.valueFunc=function(){$("DELAY_TIME").hide();var d=$$("input[type=radio]:checked")[0].value,f=parseFloat(editBox2.value);if(isNaN(f)&&"fps"!=d)showPopupMsg(lang.WRONG_VALUE);else{switch(d){case lang.MS:f/=1E3;break;case "smpl":f=(f|0)/SAMPLE_RATE;break;case "meters":f=m2ms(f)/1E3;break;case "ft":f=m2ms(f*ONE_FOOT_IN_METERS)/1E3;break;case "fps":f=editBox2.value||"";f=f.replace("\\","/");if(20<f.length||!f.contains("/")){showPopupMsg(lang.SYNTAX_FPS_ENTER);
return}f=eval(f);if(!isDefined(f)||isNaN(f)){showPopupMsg(lang.SYNTAX_FPS_ENTER);return}}if(f>b){var h=b,l="";switch(d){case "fps":case "ms":h=precision(1E3*h,2);l=h+lang.MS;break;case "smpl":h=Math.round(h*SAMPLE_RATE);l=h+lang.SMPL;break;case "meters":h=s2m(h);h=precision(h,2);l=h+lang.METERS;break;case "ft":h=s2m(h)/ONE_FOOT_IN_METERS,h=precision(h,2),l=h+lang.FT}showPopupMsg(lang.EXCEEDS_MAXIMUM_DELAY+" ("+l+")")}f=bound(f,0,b);a.setNameValue(c,f);regUpdate(a)}};var f=a.getNameValue(c);switch($$("input[type=radio]:checked")[0].value){case "ms":f=
precision(1E3*f,2);break;case "smpl":f=Math.round(f*SAMPLE_RATE);break;case "meters":f=s2m(f);f=precision(f,2);break;case "ft":f=s2m(f)/ONE_FOOT_IN_METERS;f=precision(f,2);break;case "fps":f=""}showEditBox2(d,""+f);$("DELAY_TIME").show()}cachedStripLinein=cachedStripGain2=cachedStripGain=cachedStripAux=cachedStrip=null;cachedStripGain2H=cachedStripGainH=cachedStripH=-1;cachedMStripH=cachedMStrip=null;settingsBuffer={};settingsBufferType=-1;
function blockGainBySrc(a){log("blockGainBySrc: "+a);if(HAVE_ROUTING&&a&&a.startsWith("hw.")){var b=getValue(a+".phantom")?4E3:17E3;log(a+" "+b);for(var c=0,d=gainStrips.length;c<d;c++)if(gainStrips[c].getNameValue("src")==a){var f=gainStrips[c];f.slGain.disabled=!0;f.blocked_gain=!0;regUpdate(f);clearTimeout(f.btimer);f.btimer=setTimeout(function(){this.blocked_gain=this.slGain.disabled=!1;regUpdate(this)}.bind(f),b)}c=0;for(d=gainStrips2.length;c<d;c++)gainStrips2[c].name==a+"."&&(f=gainStrips2[c],
f.slGain.disabled=!0,f.blocked_gain=!0,regUpdate(f),clearTimeout(f.btimer),f.btimer=setTimeout(function(){this.blocked_gain=this.slGain.disabled=!1;regUpdate(this)}.bind(f),b))}}
function blockStrip(a,b){var c=inStrips[a],d=gainStrips[a],f=gainStrips2[a];c&&(c.blocked_gain=!0,regUpdate(c),d&&(d.slGain.disabled=!0,d.blocked_gain=!0,regUpdate(d)),f&&(f.slGain.disabled=!0,f.blocked_gain=!0,regUpdate(f)),clearTimeout(c.btimer),c.btimer=setTimeout(function(){c.blocked_gain=!1;regUpdate(c);d&&(d.slGain.disabled=!1,d.blocked_gain=!1,regUpdate(d));f&&(f.slGain.disabled=!1,f.blocked_gain=!1,regUpdate(f))},b||3E3))}function ms2m(a){return a/1E3*SOUND_SPEED}
function s2m(a){return a*SOUND_SPEED}function m2ms(a){return a/SOUND_SPEED*1E3}function m2s(a){return a/SOUND_SPEED}
var MAX_DELAY_INPUT=.25,MAX_DELAY_OUTPUT=.5,Strip=Class.create(Widget,{initialize:function($super,b,c,d,f){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.widgetName="Strip";this.id=c;this.subId=f;this.type=d;this.name="zz.xx";this.w=measures.mixerStripWidth;this.text="CH 0";this.mode=E_STRIP_MODE.MIX;this.color="#FFFFFF";this.subGroup=-1;this.stereo=!1;this.defaultSRC="";this.haveVCA=!1;switch(this.type){case E_STRIP_TYPE.IN:this.name="i."+f+".";this.defaultSRC="hw."+f;this.color=color.INPUT;
this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.FX:this.name="f."+f+".";this.stereo=!0;this.color=color.blue;this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.SUB:this.name="s."+f+".";this.stereo=!0;this.color=color.sub;break;case E_STRIP_TYPE.AUX:this.name="a."+f+".";this.color=color.AUX;break;case E_STRIP_TYPE.MEDIA:this.name="p."+f+".";this.color=color.media;this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.LINEIN:this.name="l."+f+".";this.defaultSRC="li."+f;this.color=color.LINEIN;this.haveVCA=IS_UI_24;
break;case E_STRIP_TYPE.VCA:this.name="v."+f+".",this.color=color.green}this.gainName=this.name;this.widgetName+="("+this.name+")";this.AUXS=[];this.FXS=[];this.MTX=null;this.linked=this.isClipping=!1;this.linkTarget=null;this.firstInGroup=this.lastInGroup2=this.lastInGroup=!1;this.cacheGain=this.cache=null;this.cacheH=0;this.gtimer=null;this.blocked_gain=!1;this.btimer=null;this.initWidgets()},updGain:function(){},getMuteState:function(a,b){a=a||!1;var c=b?!1:this.getNameValue("mute"),d=getValue("mgmask"),
f=this.getNameValue("mgmask"),f=d&f,e=checkBit(d,MUTEALL_BIT_IDX),d=this.type==E_STRIP_TYPE.FX&&checkBit(d,MUTEFX_BIT_IDX),g=!1;if(IS_UI_24&&this.haveVCA){var h=this.getNameValue("vca");vcaStrips[h]&&(g=vcaStrips[h].getMuteState())}if(f||e||d||g)c=1;f=this.getNameValue("forceunmute");!a&&f&&(c=0);return c},initWidgets:function(){var a=this;if(this.type==E_STRIP_TYPE.VCA)this.led=new LED(this),this.led.setPos(6,4),this.led.setSize(100,38),this.led.onInput=function(b){b=parseFloat(b);a.sl.setValue(DBtoVf2(b))},
this.led.onDouble=function(){mode==E_MODE.MIX&&a.sl.setValue(zeroDbPos)},this.mute=new CheckBox(this),this.mute.setPos(4,88),this.mute.setImages(res.bMuteOff,res.bMuteOn,res.bMuteOff_F),this.mute.getState=function(){this.state=a.getNameValue("mute");var b=getValue("mgmask"),c=a.getNameValue("mgmask"),c=b&c,b=checkBit(b,MUTEALL_BIT_IDX);if(c||b)this.state=1;1==a.getNameValue("forceunmute")?(this.state=0,this.img0=res.bMuteOff_F):this.img0=res.bMuteOff;return this.state},this.mute.onToggle=function(){handle_mgmask(!1)},
this.mute.onToggleUp=function(){var b=getValue("mgmask"),c=a.getNameValue("mgmask"),c=b&c,b=checkBit(b,MUTEALL_BIT_IDX);c||b||a.setNameValue("mute",1);a.setNameValue("forceunmute",0)},this.mute.onToggleDown=function(){var b=getValue("mgmask"),c=a.getNameValue("mgmask"),c=b&c,b=checkBit(b,MUTEALL_BIT_IDX);c||b?a.setNameValue("forceunmute",1):a.setNameValue("mute",0)},this.spread=new CheckBox(this),this.spread.setAnchors(4,null,null,30),this.spread.setImages(res.FFUNC_OFF,res.FFUNC_GRE),this.spread.redrawParent=
!0,this.spread.idx=this.subId,this.spread.font="14px open_sans_condensedbold",this.spread.textColor=color.black2,this.spread.textColorActive=color.black2,this.spread.disabledHide=!0,this.spread.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:1,offsetY:-3,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:12},this.spread.getState=function(){this.text=(this.state=activeViewGroup==300+this.idx?1:0)?lang.CLOSE:lang.SPILL;this.disabled=!0;for(var a=
0,c=allStrips.length;a<c;a++)if(allStrips[a].haveVCA&&allStrips[a].getNameValue("vca")===this.idx){this.disabled=!1;break}},this.spread.onToggleUp=function(){mixerWidget.showVCA(this.idx);this.state=activeViewGroup==300+this.idx?1:0},this.spread.onToggleDown=function(){resumeLastActiveVG();this.state=activeViewGroup==300+this.idx?1:0},this.sl=new Slider(this,this.type),this.sl.setPos(0,134),this.sl.setKey(this.name+"mix"),this.sl.color=this.color,this.sl.w=this.w,this.sl.laneOffset=36,this.sl.faderX=
60,this.sl.bottomMargin=24,this.sl.lane=!0;else{this.led=new LED(this);this.led.setPos(6,4);this.led.setSize(100,38);this.type==E_STRIP_TYPE.IN&&IS_UI_24&&(this.led.getState=function(){var b=a.getNameValue("vca"),c=mode!=E_MODE.GAIN;this.color=0<=b&&7>b&&c?color.ledTextVCA:color.ledText});this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):mode==E_MODE.GAIN?a.slGain.setValue(GAINPtoV(b)):a.sl.setValue(DBtoVf2(b))};this.led.onDouble=function(){mode!=E_MODE.GAIN&&a.sl.setValue(zeroDbPos)};
this.type!=E_STRIP_TYPE.AUX?(this.pan=new PanSlider(this),this.pan.key=this.name+"pan",this.pan.setPos(5,46),this.pan.setSize(102,30)):HAVE_LATENCY&&(this.delay=new TButton(this),this.delay.setPos(58,46),this.delay.setImages(res.cl_s_btn_off,res.cl_s_btn_on),this.delay.redrawParent=!0,this.delay.opaque=!1,this.delay.setKey(this.name+"delay"),this.delay.getState=function(){this.text=VtoLATENCY(a.getNameValue("delay"))},this.delay.onPress=function(){askForDelay(a,MAX_DELAY_OUTPUT,"delay",a.getName()+
" "+lang.OUTPUT_DELAY)});this.mute=new CheckBox(this);this.mute.setPos(4,88);this.mute.setImages(res.bMuteOff,res.bMuteOn,res.bMuteOff_F);this.mute.getState=function(){this.state=a.getMuteState();this.img0=a.getNameValue("forceunmute")?res.bMuteOff_F:res.bMuteOff;return this.state};this.mute.onToggle=function(){checkMutes();isDefined(this.parent.id)&&selectedChannel!=this.parent.id&&setSelected(this.parent.id)};this.mute.onToggleUp=function(){var b=getValue("mgmask"),c=a.getNameValue("mgmask"),c=
b&c,d=checkBit(b,MUTEALL_BIT_IDX),b=checkBit(b,MUTEFX_BIT_IDX)&&a.type==E_STRIP_TYPE.FX,f=!1;if(IS_UI_24&&this.haveVCA){var e=a.getNameValue("vca");vcaStrips[e]&&(f=vcaStrips[e].getMuteState())}c||d||b||f||a.setNameValue("mute",1);a.setNameValue("forceunmute",0)};this.mute.onToggleDown=function(){a.getMuteState(!0,!0)?a.setNameValue("forceunmute",1):a.setNameValue("mute",0)};this.solo=new CheckBox(this);this.solo.setPos(58,88);this.solo.setImages(res.bSoloOff,res.bSoloOn);this.solo.getState=function(){this.state=
a.getNameValue("solo")};this.solo.onToggle=function(){checkSolos();isDefined(this.parent.id)&&selectedChannel!=this.parent.id&&setSelected(this.parent.id)};this.solo.onToggleUp=function(){if(0==getValue("settings.multiplesolo"))for(var b=0;b<allStrips.length;b++)allStrips[b].type!=E_STRIP_TYPE.VCA&&allStrips[b].setNameValue("solo",0);a.setNameValue("solo",1)};this.solo.onToggleDown=function(){a.setNameValue("solo",0)};this.sl=new Slider(this,this.type);this.sl.setPos(0,134);this.sl.color=this.color;
this.sl.param="mix";this.sl.key=this.name+"mix";this.sl.w=this.w;this.sl.laneOffset=36;this.sl.faderX=60;this.sl.bottomMargin=24;this.sl.lane=this.type!=E_STRIP_TYPE.IN;this.type==E_STRIP_TYPE.AUX&&(this.sl.getState=function(){var b=1==a.getNameValue("matrix");this.fader=b?res.mtxFader:res.auxFader;this.color=b?color.MATRIX:a.color});switch(this.type){case E_STRIP_TYPE.AUX:this.sl.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);setMode(E_MODE.EDIT)};this.sl.onDouble=function(){auxWidget.setMode(a.subId);
setMode(E_MODE.AUX)};break;case E_STRIP_TYPE.FX:this.sl.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);setMode(E_MODE.EDIT)};this.sl.onDouble=function(){fxSendsWidget.setMode(a.subId);setMode(E_MODE.FXSENDS)};break;case E_STRIP_TYPE.MEDIA:this.sl.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);setMode(E_MODE.EDIT)};this.sl.onDouble=function(){mode==E_MODE.PLAYER?setMode(E_MODE.MIX):setMode(E_MODE.PLAYER)};break;default:this.sl.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);
setMode(E_MODE.EDIT)},this.sl.onDouble=function(){modalsWidget.setMode(0);setMode(E_MODE.MODALS)}}this.stereo?(this.vu=new VUMeter(this),this.vu.setAnchors(15,149,null,settings.disableVUs2?25:101),this.clip=new ClipBulb(this),this.clip.setPos(9,127),settings.disableVUs2||(this.gi=new GATEind(this),this.gi.x=15,this.gr=new GRMeter(this),this.gr.x=15,this.gi2=new GATEind(this),this.gi2.x=32,this.gr2=new GRMeter(this),this.gr2.x=32),this.vu2=new VUMeter(this),this.vu2.setAnchors(32,149,null,settings.disableVUs2?
25:101),this.clip2=new ClipBulb(this),this.clip2.setPos(26,127),this.tvvu2=this.tvvu=null):(this.vu=new VUMeter(this),this.vu.setAnchors(21,149,null,settings.disableVUs2?25:101),this.clip=new ClipBulb(this),this.clip.setPos(15,127),settings.disableVUs2||(this.gi=new GATEind(this),this.gi.x=21,this.gr=new GRMeter(this),this.gr.x=21),this.tvvu=null)}},setMode:function(a){this.mode=a;switch(a){case E_STRIP_MODE.MIX:this.enabled=!0;this.type==E_STRIP_TYPE.IN&&(isDefined(this.gr)&&(this.gr.enabled=!0),
isDefined(this.gi)&&(this.gi.enabled=!0),isDefined(this.hiz)&&(this.hiz.enabled=!1),isDefined(this.delay)&&(this.delay.enabled=!1),this.phantom.enabled=!1,this.slGain.enabled=!1,this.polarity.enabled=!1,this.vuPre.enabled=!1,this.clipPre.enabled=!1,this.pan.enabled=!0,this.mute.enabled=!0,this.solo.enabled=!0,this.sl.enabled=!0,this.vu.enabled=!0,this.clip.enabled=!0,this.color=color.INPUT);break;case E_STRIP_MODE.GAIN:this.type!=E_STRIP_TYPE.IN?this.enabled=!1:(isDefined(this.gr)&&(this.gr.enabled=
!1),isDefined(this.gi)&&(this.gi.enabled=!1),this.mute.enabled=!1,this.solo.enabled=!1,this.pan.enabled=!1,this.sl.enabled=!1,this.vu.enabled=!1,this.clip.enabled=!1,isDefined(this.hiz)&&(this.hiz.enabled=!0),isDefined(this.delay)&&(this.delay.enabled=!0),this.phantom.enabled=!0,this.polarity.enabled=!0,this.slGain.enabled=!0,this.vuPre.enabled=!0,this.clipPre.enabled=!0,this.color=color.red);getValue("settings.demo")&&20>curSetup.input&&2>this.id&&this.phantom.hide();this.updGain();break;default:return}this.NEED_UPDATE=
!0},calcGeometry:function(){this.h=this.parent.h;isDefined(this.gr)&&(this.gr.y=this.h-this.gr.h-26);isDefined(this.gi)&&(this.gi.y=this.h-this.gr.h-26-13);isDefined(this.gr2)&&(this.gr2.y=this.h-this.gr2.h-26);isDefined(this.gi2)&&(this.gi2.y=this.h-this.gr2.h-26-13)},reset:function(){0==this.getNameValue("stereoIndex")&&(this.setLinked(!1),allStrips[this.id+1].setLinked(!1),this.type!=E_STRIP_TYPE.MEDIA&&allStrips[this.id+1].setNameValue("pan",.5));1==this.getNameValue("stereoIndex")&&(this.setLinked(!1),
allStrips[this.id-1].setLinked(!1),this.type!=E_STRIP_TYPE.MEDIA&&allStrips[this.id-1].setNameValue("pan",.5));if(this.type==E_STRIP_TYPE.VCA){var a=this.subId;allStrips.each(function(b){b.getNameValue("vca")==a&&(b.setNameValue("vca",-1),regUpdate(b))});activeViewGroup==E_VG.VCA1+a&&mixerWidget.showAll()}resetChannel(this.name.slice(0,-1));regUpdate(this);regUpdate(bottomWidget);regUpdate(gainMixer);mode==E_MODE.FXSENDS&&regUpdate(fxSendsWidget);mode==E_MODE.PLAYER&&regUpdate(playerLabels);mode==
E_MODE.EDIT&&regUpdate(editWidget)},copySettings:function(a){settingsBuffer={};a=isDefined(a);for(var b in dataValue)!dataValue.hasOwnProperty(b)||!b.contains(this.name)||b.contains(".name")||b.contains(".defname")||b.contains(".stereoIndex")||b.contains(".slave")||b.contains(".stereo")||!a&&b.contains(".mgmask")||!a&&b.contains(".subgroup")||b.contains(".gain")&&!b.contains(".eq.")||b.contains(".phantom")||b.contains(".invert")||b.contains(".hiz")||b.contains(".digitech")||b.contains(".safe")||b.contains(".src")||
b.contains(".scsrc")||!a&&b.contains(".mute")&&!b.contains(".aux.")&&!b.contains(".fx.")||!a&&b.contains(".solo")||!a&&b.contains(".forceunmute")||(settingsBuffer[b.replace(this.name,"")]=dataValue[b]);settingsBufferType=this.type},pasteSettings:function(){if(settingsBufferType!=this.type)showPopupMsg(lang.INCOMPATIBLE_CHANNEL_TYPE,1E3);else for(var a in settingsBuffer)settingsBuffer.hasOwnProperty(a)&&isDefined(dataValue[this.name+a])&&(setValue(this.name+a,settingsBuffer[a]),updateByKey(this.name+
a))},getLabel:function(){var a=this.text;this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX&&this.getNameValue("matrix")&&(a="MTX "+(this.subId+1));this.getNameValue("stereoIndex");return a},getColor:function(){return this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX&&this.getNameValue("matrix")?color.MATRIX:this.color},getName:function(){var a=getValue(this.name+"name");if(!a)switch(this.type){case E_STRIP_TYPE.VCA:a=lang.VCA+" "+(this.subId+1);break;case E_STRIP_TYPE.IN:a=lang.CH+" "+(this.subId+1);break;case E_STRIP_TYPE.AUX:a=
lang.AUX+" "+(this.subId+1);HAVE_MATRIX&&this.getNameValue("matrix")&&(a=lang.MTX+" "+(this.subId+1));break;case E_STRIP_TYPE.FX:var b=this.getNameValue("fxtype"),a=lang.FX+" "+(this.subId+1);switch(b){case E_FX.REVERB:a+=" "+lang.REVERB;break;case E_FX.DELAY:a+=" "+lang.DELAY;break;case E_FX.CHORUS:a+=" "+lang.CHORUS;break;case E_FX.ROOM:a+=" "+lang.ROOM}break;case E_STRIP_TYPE.SUB:a=lang.SUB+" "+(this.subId+1);break;case E_STRIP_TYPE.LINEIN:a=lang.LINE_IN;1<curSetup.linein&&(a+=" "+(0==this.subId%
2?lang.L:lang.R));break;case E_STRIP_TYPE.MEDIA:a=lang.PLAYER+" "+(0==this.subId%2?lang.L:lang.R)}return a},setName:function(a){setValue(this.name+"name",a);regUpdate(bottomWidget)},getNameValue:function(a){return getValue(this.name+a)},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},setLinked:function(a){if(a){if(this.type==E_STRIP_TYPE.AUX){if(isBlocked("auxlvl",this.subId)){showPopupMsg(lang.LOCKED,1E3);return}if(isBlocked("auxlvl",this.subId+1)){showPopupMsg(lang.LOCKED,1E3);
return}}this.linkTarget=allStrips[this.id+1];if(!this.linkTarget||this.linkTarget.type!=this.type)return;this.copySettings(!0);this.linkTarget.pasteSettings();setValue(this.name+"stereoIndex",0);setValue(this.linkTarget.name+"stereoIndex",1);settings.me.contains(this.id)?settings.me.push(this.linkTarget.id):settings.me.contains(this.linkTarget.id)&&settings.me.push(this.id);if(this.type==E_STRIP_TYPE.AUX){a=this.subId;for(var b=0;b<inStrips.length;b++)setValue(inStrips[b].name+"aux."+(a+1)+".value",
inStrips[b].getNameValue("aux."+a+".value")),setValue(inStrips[b].name+"aux."+(a+1)+".post",inStrips[b].getNameValue("aux."+a+".post")),setValue(inStrips[b].name+"aux."+(a+1)+".mute",inStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<lineinStrips.length;b++)setValue(lineinStrips[b].name+"aux."+(a+1)+".value",lineinStrips[b].getNameValue("aux."+a+".value")),setValue(lineinStrips[b].name+"aux."+(a+1)+".post",lineinStrips[b].getNameValue("aux."+a+".post")),setValue(lineinStrips[b].name+"aux."+(a+
1)+".mute",lineinStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<mediaStrips.length;b++)setValue(mediaStrips[b].name+"aux."+(a+1)+".value",mediaStrips[b].getNameValue("aux."+a+".value")),setValue(mediaStrips[b].name+"aux."+(a+1)+".post",mediaStrips[b].getNameValue("aux."+a+".post")),setValue(mediaStrips[b].name+"aux."+(a+1)+".mute",mediaStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<fxStrips.length;b++)setValue(fxStrips[b].name+"aux."+(a+1)+".value",fxStrips[b].getNameValue("aux."+a+".value")),
setValue(fxStrips[b].name+"aux."+(a+1)+".post",fxStrips[b].getNameValue("aux."+a+".post")),setValue(fxStrips[b].name+"aux."+(a+1)+".mute",fxStrips[b].getNameValue("aux."+a+".mute"));if(HAVE_MATRIX){for(b=0;b<auxStrips.length;b++)setValue(auxStrips[b].name+"mtx."+(a+1)+".value",auxStrips[b].getNameValue("mtx."+a+".value")),setValue(auxStrips[b].name+"mtx."+(a+1)+".mute",auxStrips[b].getNameValue("mtx."+a+".mute"));for(b=0;b<subStrips.length;b++)setValue(subStrips[b].name+"mtx."+(a+1)+".value",subStrips[b].getNameValue("mtx."+
a+".value")),setValue(subStrips[b].name+"mtx."+(a+1)+".mute",subStrips[b].getNameValue("mtx."+a+".mute"));setValue("m.mtx."+(a+1)+".value",getValue("m.mtx."+a+".value"));setValue("m.mtx."+(a+1)+".mute",getValue("m.mtx."+a+".mute"));setValue("m.mtx."+(a+1)+".r.value",getValue("m.mtx."+a+".r.value"));setValue("m.mtx."+(a+1)+".r.mute",getValue("m.mtx."+a+".r.mute"));for(b=0;b<curSetup.aux;b++)setValue(this.name+"mtx."+b+".pan",0),setValue(this.linkTarget.name+"mtx."+b+".pan",1)}}if(this.type==E_STRIP_TYPE.IN||
this.type==E_STRIP_TYPE.MEDIA||this.type==E_STRIP_TYPE.LINEIN)for(setValue(this.name+"pan",0),setValue(this.linkTarget.name+"pan",1),b=0;b<curSetup.aux;b++)setValue(this.name+"aux."+b+".pan",0),setValue(this.linkTarget.name+"aux."+b+".pan",1);regUpdate(this);regUpdate(this.linkTarget);mode==E_MODE.EDIT&&(editWidget.upd(),regUpdate(editWidget))}else{a=0==getValue(this.name+"stereoIndex");if(this.type==E_STRIP_TYPE.AUX){if(isBlocked("auxlvl",this.subId)){showPopupMsg(lang.LOCKED,1E3);return}if(isBlocked("auxlvl",
this.subId+(a?1:-1))){showPopupMsg(lang.LOCKED,1E3);return}}this.linkTarget=allStrips[this.id+(a?1:-1)];if(!this.linkTarget||this.linkTarget.type!=this.type)return;setValue(this.name+"stereoIndex",-1);setValue(this.linkTarget.name+"stereoIndex",-1);if(this.type==E_STRIP_TYPE.IN||this.type==E_STRIP_TYPE.MEDIA||this.type==E_STRIP_TYPE.LINEIN)for(b=0;b<curSetup.aux;b++)setValue(this.name+"aux."+b+".pan",.5),setValue(this.linkTarget.name+"aux."+b+".pan",.5);if(this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX)for(b=
0;b<curSetup.aux;b++)setValue(this.name+"mtx."+b+".pan",.5),setValue(this.linkTarget.name+"mtx."+b+".pan",.5);regUpdate(this);regUpdate(this.linkTarget);mode==E_MODE.EDIT&&(editWidget.upd(),regUpdate(editWidget));this.linkTarget=null}if(mode==E_MODE.AUX)auxWidget.onShow()},setVU:function(a,b,c,d,f,e,g,h){if(this.type!=E_STRIP_TYPE.VCA){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b);settings.disableVUs2||(this.gr.setValue(f),this.gi.setValue(g));
for(var l=0;l<this.AUXS.length;l++)this.AUXS[l].setVU(a,b);for(l=0;l<this.FXS.length;l++)this.FXS[l].setVU(a,b);HAVE_MATRIX&&this.MTX&&this.MTX.setVU(a,b);this.stereo?(1<=d?this.clip2.clip():this.clip2.state&&!this.clip2.releasing&&this.clip2.release(),this.vu2.setValueExt(c,d),settings.disableVUs2||(this.gr2.setValue(e),this.gi2.setValue(h)),modalsWidget.pages[0].m.setValue(b,f,g,this.id,d,e,h)):modalsWidget.pages[0].m.setValue(b,f,g,this.id)}},drawMarksGain:function(a){var b=this.sl.h-80;a.fillStyle=
"rgba(255,255,255,0.35)";a.textAlign="center";a.font=font.stripMarks;GAINPtoV(30);GAINPtoV(0);GAINPtoV(-20);IS_UI_24&&(GAIN24toV(30),GAIN24toV(0));a.shadowColor="transparent";var c=[1,GAINPtoV(40),GAINPtoV(30),GAINPtoV(20),GAINPtoV(10),GAINPtoV(-10),GAINPtoV(-20),GAINPtoV(-30),0];IS_UI_24&&(c=[1,GAIN24toV(50),GAIN24toV(40),GAIN24toV(30),GAIN24toV(20),GAIN24toV(10),0]);for(var d=0;d<c.length;d++){var f=Math.floor(b*(1-c[d]))+35;a.fillStyle="rgba(0,0,0,0.2)";a.fillRect(92,134+f,10,1);a.fillStyle="rgba(255,255,255,0.26)";
a.fillRect(92,134+f+1,10,1)}f=b*(1-GAINPtoV(0))+35;IS_UI_24&&(f=b*(1-GAIN24toV(0))+35);a.fillStyle="#939394";a.fillRect(92,134+(f|0),12,3)},DRAW_UPDATE_CHECK:function(){var a;a=this.getNameValue("mix");var b=this.getNameValue("mute"),c=this.getNameValue("forceunmute"),d=this.getNameValue("mgmask"),f=getValue("mgmask"),e=this.getNameValue("solo"),g=this.getNameValue("pan"),h=this.getNameValue("stereoIndex");a=""+a+b+c+d+f+e+g+(selectedStrip==this)+h+this.firstInGroup+this.lastInGroup+this.sl.slowMode;
switch(this.type){case E_STRIP_TYPE.IN:a+=this.blocked_gain;case E_STRIP_TYPE.LINEIN:a+=this.getNameValue("src");case E_STRIP_TYPE.MEDIA:a+=this.getNameValue("subgroup"),a+=-1!=settings.me.indexOf(this.id);case E_STRIP_TYPE.FX:IS_UI_24&&(a+=this.getNameValue("src"),b=this.getNameValue("vca"),null==b&&(b=-1),a=a+b+(0<=b?vcaStrips[b]&&vcaStrips[b].getMuteState():!1));break;case E_STRIP_TYPE.VCA:a+=activeViewGroup==300+this.subId;a+=this.spread.state;b=!0;c=0;for(d=allStrips.length;c<d;c++)if(allStrips[c].haveVCA&&
allStrips[c].getNameValue("vca")===this.subId){b=!1;break}a+=b;break;case E_STRIP_TYPE.AUX:IS_UI_24&&(a+=this.getNameValue("delay"),a+=this.getNameValue("matrix")),a+=settings.meout,a+=this.subId==settings.meout}if(a===this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},paint:function(){this.cacheH!=this.h&&this.cachePaint();drawImage(this.cache,0,0);var a=this.getNameValue("stereoIndex"),b=selectedStrip.id==this.id,c=!1;switch(this.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:settings.me.contains(this.id)&&
(c=!0);0==a&&settings.me.contains(this.id+1)&&(c=!0);1==a&&settings.me.contains(this.id-1)&&(c=!0);break;case E_STRIP_TYPE.AUX:settings.meout==this.subId&&(c=!0),0==a&&settings.meout==this.subId+1&&(c=!0),1==a&&settings.meout==this.subId-1&&(c=!0)}b&&(ctx.globalAlpha=.055,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=1);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textBaseline="alphabetic";
b=this.text;this.type==E_STRIP_TYPE.AUX?(HAVE_MATRIX&&(b=this.getNameValue("matrix")?"MTX "+(this.subId+1):"AUX "+(this.subId+1)),0==a?b+="L":1==a&&(b+="R")):!HAVE_ROUTING||this.type!=E_STRIP_TYPE.IN&&this.type!=E_STRIP_TYPE.LINEIN||(a=this.getNameValue("src"))&&isString(a)&&a!=this.defaultSRC&&(b+=" ("+(E_SRC_NAMES[a]||a)+")");ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=c?color.me:"#B5B5B5";ctx.fillText(b,11,this.h-10);ctx.textAlign="center";this.subGroup=getValue(this.name+"subgroup");
null!=this.subGroup&&0<=this.subGroup&&(ctx.fillStyle="#B55B7F",ctx.fillText("S"+(this.subGroup+1),this.w-11,this.h-25));c=IS_UI_24&&this.haveVCA?getValue(this.name+"vca"):-1;IS_UI_24&&0<=c&&(ctx.fillStyle="#58AE6E",ctx.fillText("V"+(c+1),this.w-11,this.h-40));HAVE_HP&&this.type==E_STRIP_TYPE.AUX&&this.subId>=curSetup.aux-2&&(ctx.shadowColor="transparent",ctx.fillStyle="#252522",ctx.fillRect(this.w-51,this.h-22,30,15),ctx.fillStyle=color.white,ctx.fillText(lang.HP+" "+(0==this.subId%2?lang.L:lang.R),
this.w-36,this.h-10));if(mode!=E_MODE.GAIN){var d=dataValue.mgmask,a=this.getNameValue("mgmask"),b=a&d,f=this.getNameValue("mute"),e=d&1<<MUTEALL_BIT_IDX,g=this.type==E_STRIP_TYPE.FX&&d&1<<MUTEFX_BIT_IDX,d=!1;IS_UI_24&&vcaStrips[c]&&(d=vcaStrips[c].mute.getState());var h=this.getNameValue("forceunmute");ctx.fillStyle=h?color.tvMuteUn:color.tvMuteMG;ctx.textAlign="center";ctx.font="10pt open_sans_condensedbold";var l=0,m=this.stereo?9:11;e&&ctx.fillText("A",m,142+16*l);l++;f&&ctx.fillText("M",m,142+
16*l);l++;g&&ctx.fillText("F",m,142+16*l);l++;for(f=0;6>f;f++)a&1<<f&&(ctx.fillStyle=b&1<<f?h?color.tvMuteUn:color.tvMuteMG:"#888",ctx.fillText(f+1+"",m,142+16*l)),l++;IS_UI_24&&0<=c&&(ctx.fillStyle=d?h?color.tvMuteUn:color.tvMuteMG:"#888",ctx.fillText("V"+(c+1),m,142+16*l))}this.blocked_gain&&(ctx.setShadow(null),ctx.fillStyle=color.yellow,ctx.fillRoundRect(4,190,16,18,4),drawImage(res.bolt_icon,4,191))},cachePaint:function(a){a?a=ctx:(this.cache=document.createElement("canvas"),a=this.cache.getContext("2d"),
isRetina?(this.cache.width=2*this.w,this.cache.height=2*this.h,a.scale(2,2)):(this.cache.width=this.w,this.cache.height=this.h));switch(this.type){case E_STRIP_TYPE.VCA:case E_STRIP_TYPE.AUX:fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);HAVE_LATENCY?drawImageCtx(res.stripAuxTop,0,0,a):drawImageCtx(res.stripAuxTop2,0,0,a);break;default:fillVertPatternCtx(res.stripTile,this.h,a),drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a),drawImageCtx(res.stripTop,
0,0,a)}if(this.type!=E_STRIP_TYPE.IN){switch(this.type){case E_STRIP_TYPE.FX:a.globalAlpha=.08;break;case E_STRIP_TYPE.MEDIA:a.globalAlpha=.05;break;case E_STRIP_TYPE.SUB:a.globalAlpha=.07;break;case E_STRIP_TYPE.AUX:a.globalAlpha=.07;break;case E_STRIP_TYPE.LINEIN:a.globalAlpha=.07;break;default:a.globalAlpha=.07}a.fillStyle=this.color;a.fillRect(0,0,this.w,this.h);a.globalAlpha=1}drawMarksDB(this.sl.h,134,100,a);this.stereo?drawVUMarks(this.vu2,this.gr2,a):drawVUMarks(this.vu,this.gr,a);this.cacheH=
this.h},cachePaintGain:function(){cachedStripGain=document.createElement("canvas");var a=cachedStripGain.getContext("2d");isRetina?(cachedStripGain.width=2*this.w,cachedStripGain.height=2*this.h,a.scale(2,2)):(cachedStripGain.width=this.w,cachedStripGain.height=this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);drawImageCtx(res.stripAuxTop,0,0,a);a.globalAlpha=.07;a.fillStyle="#f00";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;this.drawMarksGain(a);
drawVUMarks(this.vuPre,null,a);cachedStripH=this.h}}),GainStrip=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.widgetName="Strip";this.subId=this.id=c;this.type=E_STRIP_TYPE.GAIN;this.name="zz.xx";this.w=measures.mixerStripWidth;this.setAnchors(null,0,null,0);this.text="CH 0";this.color=color.red;this.subGroup=-1;this.stereo=!1;this.gainName=this.name="i."+this.subId+".";HAVE_ROUTING&&(this.gainName="hw."+this.subId+".");this.defaultSRC=
"hw."+this.subId;this.widgetName+="("+this.name+")";this.linked=this.isClipping=!1;this.linkTarget=null;this.firstInGroup=this.lastInGroup2=this.lastInGroup=!1;this.cacheGain=this.cache=null;this.cacheH=0;this.gtimer=null;this.blocked_gain=!1;this.btimer=null;this.noGain=!1;this.initWidgets();this.updGain()},onShow:function(){this.updGain()},updGain:function(){if(HAVE_ROUTING){var a=this.getNameValue("src");isString(a)&&a||(a="hw."+this.subId,this.setNameValue("src",a));this.led.state=0;this.slGain.disabled=
!1;this.noGain=this.slGain.hideOnDisabled=!1;a.startsWith("hw.")?(this.phantom.show(),this.slGain.show(),this.gainName=a+=".",this.unRegAllKeys(),this.regKey(a+"hiz"),this.regKey(a+"disablegain"),this.phantom.setKey(a+"phantom",!0),this.slGain.setKey(a+"gain",!0),this.led.state=0,this.led.keyPrefix=a,this.led.unRegAllKeys(),this.led.regKey(a+"gain"),this.led.regKey(a+"disablegain"),this.hiz.setKey(a+"hiz",!0),hasHIZ(this)?this.hiz.show():this.hiz.hide()):(this.phantom.hide(),this.hiz.hide(),this.slGain.disabled=
!0,this.slGain.hideOnDisabled=!0,this.led.state=2,this.led.msg="...",this.noGain=!0)}},initWidgets:function(){var a=this;this.led=new LED(this);this.led.setPos(6,4);this.led.setSize(100,38);this.led.redrawParent=!0;IS_UI_24&&(this.led.getState=function(){if(2==this.state){var b=a.getNameValue("src");this.msg=b=E_SRC_NAMES[b]||"..."}});this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):a.slGain.setValue((IS_UI_24?GAIN24toV:GAINPtoV)(b))};this.led.onDouble=function(){a.slGain.setValue((IS_UI_24?
GAIN24toV:GAINPtoV)(0))};this.phantom=new CheckBox(this);this.phantom.param="phantom";this.phantom.setKey(this.gainName+"phantom",!0);this.phantom.setPos(4,46);this.phantom.setImages(res.b48Off,res.b48On);this.phantom.getState=function(){this.disabled=getValue(a.gainName+"disablegain");hasHIZ(a)&&!this.disabled&&(this.disabled=1==a.getGainNameValue("hiz"))};HAVE_ROUTING?this.phantom.onToggle=function(){blockGainBySrc(this.key.replace(".phantom",""));updateByKey(this.key)}:(this.phantom.onToggleDown=
function(){blockStrip(a.id,PHANTOM_OFF_DELAY)},this.phantom.onToggleUp=function(){blockStrip(a.id,PHANTOM_ON_DELAY)});this.polarity=new CheckBox(this);this.polarity.param="invert";this.polarity.setKey(this.name+"invert",!0);this.polarity.setPos(58,46);this.polarity.setImages(res.bPIOff,res.bPIOn);this.hiz=new CheckBox(this);this.hiz.setKey(this.gainName+"hiz",!0);this.hiz.setPos(4,88);this.hiz.setImages(res.hiz_off,res.hiz_on);this.hiz.getState=function(){this.disabled=getValue(a.gainName+"disablegain")};
this.hiz.onToggleUp=function(){1==a.getGainNameValue("phantom")&&(a.setGainNameValue("phantom",0),HAVE_ROUTING?blockGainBySrc(this.key.replace(".hiz","")):blockStrip(a.id,PHANTOM_OFF_DELAY))};HAVE_ROUTING?this.hiz.onToggle=function(){updateByKey(this.key)}:hasHIZ(this)||this.hiz.hide();HAVE_LATENCY&&(this.delay=new TButton(this),this.delay.setPos(58,88),this.delay.setImages(res.cl_s_btn_off,res.cl_s_btn_on),this.delay.redrawParent=!0,this.delay.opaque=!1,this.delay.setKey(this.name+"delay",!0),this.delay.getState=
function(){this.text=VtoLATENCY(a.getNameValue("delay"))},this.delay.onPress=function(){askForDelay(a,MAX_DELAY_INPUT,"delay",a.getName()+" "+lang.INPUT_DELAY)});this.slGain=new Slider(this,this.type);this.slGain.fader=res.gainFader;this.slGain.param="gain";this.slGain.setKey(this.name+"gain",!0);this.slGain.setPos(0,134);this.slGain.color=color.red;this.slGain.w=this.w;this.slGain.laneOffset=36;this.slGain.faderX=60;this.slGain.bottomMargin=24;this.slGain.noStereoArrows=!0;for(var b=.29,c=[];1>b;)c.push(b),
b+=.0225;c.push(1);this.slGain.latch=!1;this.slGain.latchArr=c;this.slGain.latchStep=.0225;this.slGain.getState=function(){this.disabled=this.disabled||getValue(a.gainName+"disablegain")};this.slGain.onDouble=function(){setMode(E_MODE.MIX)};this.slGain.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);setMode(E_MODE.EDIT)};HAVE_ROUTING&&(this.slGain.onValue=function(){updateByKey(this.key)});this.vuPre=new VUMeter(this);this.vuPre.setAnchors(21,149,null,26);this.vuPre.gain=!0;this.clipPre=
new ClipBulb(this);this.clipPre.setPos(15,127);this.clipPre.master=!0},getLabel:function(){return this.text},getColor:function(){return this.color},getName:function(){var a=getValue(this.name+"name");a||(a=lang.CH+" "+(this.subId+1));return a},setName:function(a){setValue(this.name+"name",a);regUpdate(bottomWidget)},getGainNameValue:function(a){return getValue(this.gainName+a)},setGainNameValue:function(a,b){return setValue(this.gainName+a,b)},getNameValue:function(a){return getValue(this.name+a)},
setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},setVUPre:function(a){if(1<=a)this.clipPre.clip(),this.slGain.noUp=!0,this.slGain.noUpValue=this.slGain.value,masterWidget.setClipped();else if(this.clipPre.state&&!this.clipPre.releasing){this.clipPre.release();masterWidget.clipRelease();var b=this;clearTimeout(this.gtimer);this.gtimer=setTimeout(function(){b.slGain.noUp=!1},CLIP_HOLD_TIME)}this.vuPre.setValueExt(0,a)},drawMarksGain:function(a){var b=this.slGain.h-80;a.fillStyle=
"rgba(255,255,255,0.35)";a.textAlign="center";a.font=font.stripMarks;GAINPtoV(30);GAINPtoV(0);GAINPtoV(-20);IS_UI_24&&(GAIN24toV(30),GAIN24toV(0));var c=[1,GAINPtoV(40),GAINPtoV(30),GAINPtoV(20),GAINPtoV(10),GAINPtoV(-10),GAINPtoV(-20),GAINPtoV(-30),0];IS_UI_24&&(c=[1,GAIN24toV(50),GAIN24toV(40),GAIN24toV(30),GAIN24toV(20),GAIN24toV(10),0]);for(var d=0;d<c.length;d++){var f=Math.floor(b*(1-c[d]))+35;a.fillStyle="rgba(0,0,0,0.2)";a.fillRect(92,134+f,10,1);a.fillStyle="rgba(255,255,255,0.26)";a.fillRect(92,
134+f+1,10,1)}f=b*(1-GAINPtoV(0))+35;IS_UI_24&&(f=b*(1-GAIN24toV(0))+35);a.fillStyle="#939394";a.fillRect(92,134+(f|0),12,3)},DRAW_UPDATE_CHECK:function(){var a;a=this.getGainNameValue("gain");var b=this.getGainNameValue("phantom"),c=this.getNameValue("invert");a=""+a+b+c+this.blocked_gain+(selectedStrip.id==this.id);a+=this.firstInGroup;a+=this.lastInGroup;a+=this.slGain.slowMode;HAVE_ROUTING&&(a+=this.getNameValue("src"));IS_UI_24&&(a+=this.getNameValue("delay"));hasHIZ(this)&&(a+=this.getGainNameValue("hiz"));
if(a==this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},paint:function(){cachedStripGainH!=this.h&&this.cachePaint();drawImage(cachedStripGain,0,0);this.noGain&&(ctx.fillStyle="rgba(0,0,0,0.3)",ctx.fillRect(0,0,this.w,this.h));var a=this.getNameValue("stereoIndex"),b=selectedStrip.id==this.id,c=!1;switch(this.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:settings.me.contains(this.id)&&(c=!0);0==a&&settings.me.contains(this.id+1)&&(c=!0);1==a&&settings.me.contains(this.id-1)&&(c=!0);
break;case E_STRIP_TYPE.AUX:settings.meout==this.subId&&(c=!0),0==a&&settings.meout==this.subId+1&&(c=!0),1==a&&settings.meout==this.subId-1&&(c=!0)}b&&(ctx.globalAlpha=.055,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=1);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textBaseline="alphabetic";a=this.text;HAVE_ROUTING&&(b=this.getNameValue("src"))&&isString(b)&&b!=this.defaultSRC&&(a+=
" ("+(E_SRC_NAMES[b]||b)+")");ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=c?color.me:"#B5B5B5";ctx.fillText(a,11,this.h-10);this.blocked_gain&&(ctx.setShadow(null),ctx.fillStyle=color.yellow,ctx.fillRoundRect(4,190,16,18,4),drawImage(res.bolt_icon,4,191))},cachePaint:function(){cachedStripGain=document.createElement("canvas");var a=cachedStripGain.getContext("2d");isRetina?(cachedStripGain.width=2*this.w,cachedStripGain.height=2*this.h,a.scale(2,2)):(cachedStripGain.width=this.w,
cachedStripGain.height=this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);drawImageCtx(res.stripAuxTop,0,0,a);a.globalAlpha=.07;a.fillStyle="#f00";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;this.drawMarksGain(a);drawVUMarks(this.vuPre,null,a);cachedStripGainH=this.h}}),GainStrip2=Class.create(Widget,{initialize:function($super,b,c,d){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.widgetName="Strip";this.id=c;this.subId=d;this.type=
777;this.name="zz.xx";this.w=measures.mixerStripWidth;this.setAnchors(null,0,null,0);this.text="HW "+(this.subId+1);this.color=color.red;this.subGroup=-1;this.stereo=!1;this.gainName=this.name="hw."+this.subId+".";this.widgetName+="("+this.name+")";this.linked=this.isClipping=!1;this.linkTarget=null;this.firstInGroup=this.lastInGroup2=this.lastInGroup=!0;this.cacheGain=this.cache=null;this.cacheH=0;this.gtimer=null;this.blocked_gain=!1;this.btimer=null;this.initWidgets()},updGain:function(){},initWidgets:function(){var a=
this;this.unRegAllKeys();this.regKey(this.name+"hiz");this.regKey(this.name+"disablegain");this.led=new LED(this);this.led.setPos(6,4);this.led.setSize(100,38);this.led.regKey(this.name+"gain");this.led.needStereo=!1;this.led.keyPrefix=this.gainName;this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):a.slGain.setValue((IS_UI_24?GAIN24toV:GAINPtoV)(b))};this.led.onDouble=function(){a.slGain.setValue((IS_UI_24?GAIN24toV:GAINPtoV)(0))};this.phantom=new CheckBox(this);
this.phantom.param="phantom";this.phantom.setKey(this.name+"phantom",!0);this.phantom.setPos(4,46);this.phantom.setImages(res.b48Off,res.b48On);this.phantom.getState=function(){this.disabled=getValue(a.gainName+"disablegain");hasHIZ(a)&&!this.disabled&&(this.disabled=1==a.getNameValue("hiz"))};this.phantom.onToggle=function(){blockGainBySrc(this.key.replace(".phantom",""));updateByKey(this.key)};2>this.subId%20&&(this.phantom.regKey(this.name+"hiz"),this.hiz=new CheckBox(this),this.hiz.setKey(this.name+
"hiz",!0),this.hiz.setPos(4,88),this.hiz.setImages(res.hiz_off,res.hiz_on),this.hiz.getState=function(){this.disabled=getValue(a.gainName+"disablegain")},this.hiz.onToggleUp=function(){1==a.getNameValue("phantom")&&(a.setNameValue("phantom",0),blockGainBySrc(this.key.replace(".hiz","")))},this.hiz.onToggle=function(){updateByKey(this.key)});this.slGain=new Slider(this,this.type);this.slGain.fader=res.gainFader;this.slGain.param="gain";this.slGain.noFocus=!0;this.slGain.setKey(this.name+"gain",!0);
this.slGain.setPos(0,134);this.slGain.color=color.red;this.slGain.w=this.w;this.slGain.laneOffset=36;this.slGain.faderX=60;this.slGain.bottomMargin=24;this.slGain.getState=function(){this.disabled=this.disabled||getValue(a.gainName+"disablegain")};this.slGain.onDouble=function(){setMode(E_MODE.MIX)};this.slGain.onValue=function(){updateByKey(this.key)}},getLabel:function(){return this.text},getColor:function(){return this.color},getName:function(){return"[ in "+(this.subId+1)+" ]"},setName:function(a){},
getNameValue:function(a){return getValue(this.name+a)},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},drawMarksGain:function(a){var b=this.slGain.h-80;a.fillStyle="rgba(255,255,255,0.35)";a.textAlign="center";a.font=font.stripMarks;GAINPtoV(30);GAINPtoV(0);GAINPtoV(-20);IS_UI_24&&(GAIN24toV(30),GAIN24toV(0));a.shadowColor="transparent";var c=[1,GAINPtoV(40),GAINPtoV(30),GAINPtoV(20),GAINPtoV(10),GAINPtoV(-10),GAINPtoV(-20),GAINPtoV(-30),0];IS_UI_24&&(c=[1,GAIN24toV(50),GAIN24toV(40),
GAIN24toV(30),GAIN24toV(20),GAIN24toV(10),0]);for(var d=0;d<c.length;d++){var f=Math.floor(b*(1-c[d]))+35;a.fillStyle="rgba(0,0,0,0.2)";a.fillRect(92,134+f,10,1);a.fillStyle="rgba(255,255,255,0.26)";a.fillRect(92,134+f+1,10,1)}f=b*(1-GAINPtoV(0))+35;IS_UI_24&&(f=b*(1-GAIN24toV(0))+35);a.fillStyle="#939394";a.fillRect(92,134+(f|0),12,3)},DRAW_UPDATE_CHECK:function(){var a;a=this.getNameValue("gain");var b=this.getNameValue("phantom");a=""+a+b+this.blocked_gain+this.slGain.slowMode;2>this.subId&&(a+=
this.getNameValue("hiz"));if(!this.CACHED_PARAMS.length)return this.CACHED_PARAMS=a,!0;if(a==this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},paint:function(){cachedStripGain2H!=this.h&&this.cachePaint();drawImage(cachedStripGain2,0,0);var a=this.getNameValue("stereoIndex"),b=selectedStrip.id==this.id;switch(this.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:settings.me.contains(this.id),0==a&&settings.me.contains(this.id+1),1==a&&settings.me.contains(this.id-1)}b&&(ctx.globalAlpha=
.055,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=1);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textBaseline="alphabetic";a=this.text;ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle="#B5B5B5";ctx.fillText(a,11,this.h-10);this.blocked_gain&&(ctx.setShadow(null),ctx.fillStyle=color.yellow,ctx.fillRoundRect(4,190,16,18,4),drawImage(res.bolt_icon,4,191))},cachePaint:function(){cachedStripGain2=
document.createElement("canvas");var a=cachedStripGain2.getContext("2d");isRetina?(cachedStripGain2.width=2*this.w,cachedStripGain2.height=2*this.h,a.scale(2,2)):(cachedStripGain2.width=this.w,cachedStripGain2.height=this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);drawImageCtx(res.stripAuxTop,0,0,a);a.globalAlpha=.04;a.fillStyle="#f00";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;this.drawMarksGain(a);drawVUMarks(this.vuPre,null,a);
cachedStripH=this.h}}),MasterStrip=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MasterStrip";this.name="m.";this.y=measures.topWidgetHeight;this.w=measures.masterStripWidth;this.botLabelHeight=res.mStripBottomLabel.h();this.botHeight=res.mStripBottom.h();this.color=color.red;this.stereo=!0;this.type=E_STRIP_TYPE.MASTER;this.subId=this.id=-1;this.text=lang.MASTER;this.muted=this.soloed=this.clipped=!1;this.timer=this.MTX2=this.MTX=null;this.lastClickTime=-1;this.regKey("m.dim");
this.initWidgets()},setVU2:function(a,b,c,d,f,e,g,h){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b);1<=d?this.clip2.clip():this.clip2.state&&!this.clip2.releasing&&this.clip2.release();this.vu2.setValueExt(c,d);HAVE_MATRIX&&this.MTX&&this.MTX.setVU(a,b);HAVE_MATRIX&&this.MTX2&&this.MTX2.setVU(c,d);settings.disableVUs2||(this.gr.setValue(f),this.gr2.setValue(e),IS_UI_24||(this.gi.setValue(g),this.gi2.setValue(h)))},initWidgets:function(){this.led=
new LED(this);this.led.setPos(6,4);this.led.setSize(115,38);this.led.color=color.mLedText;this.led.master=!0;this.led.onDown=function(){mode==E_MODE.MODALS?setMode(E_MODE.MIX):(modalsWidget.setMode(0),setMode(E_MODE.MODALS))};this.pan=new PanSlider(this);this.pan.key=this.name+"pan";this.pan.setPos(5,46);this.pan.setSize(117,30);var a=this;this.sl=new Slider(this,E_STRIP_TYPE.MASTER);this.sl.param="mix";this.sl.key=this.name+"mix";this.sl.setPos(0,134);this.sl.canScroll=!1;this.sl.w=this.w;this.sl.laneOffset=
34;this.sl.faderX=77;this.sl.bottomMargin=58;this.sl.master=!0;this.sl.onhold=function(){if(settings.masterLock&&this.locked){this.locked=!1;this.slide=!0;var b=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){var c=Math.abs(b.pressPoint[1]-b.currentPoint[1]);5>Math.abs(b.pressPoint[0]-b.currentPoint[0])&&5>c&&(settings.nudge&&(b.slowMode=!0),regUpdate(a))},this.holdTime+500)}else settings.nudge&&(this.slowMode=!0);regUpdate(a)};this.sl.onDoubleKnob=function(){editWidget.setMode(editWidget.arr[0]);
mode!=E_MODE.EDIT&&setMode(E_MODE.EDIT);-1!=selectedChannel&&setSelected(-1)};this.f1c=new CheckBox(this);this.f1c.setPos(4,88);this.f1c.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.f1c.font="14px open_sans_condensedbold";this.f1c.textColor=color.black2;this.f1c.textColorActive=color.white;this.f1c.shadowColorActive="#333";this.f1c.shadowColor="#ccc";this.f1c.opaque=!1;this.f1c.regKey("mgmask");this.f1c.regKey("m.dim");this.f1c.regKey("var.currentState");this.f1c.regKey("var.recBusy");this.f1c.regKey("var.isRecording");
this.f1c.regKey("var.present");this.f1c.regKey("var.mtk.present");this.f1c.regKey("var.mtk.currentState");this.f1c.regKey("var.mtk.rec.busy");this.f1c.regKey("var.mtk.rec.currentState");this.f1c.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:-1,offsetY:-3,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:12};this.f1c.getState=function(){this.text=null;var a=settings.bigSlideOut&&slideOutWidget.enabled?E_FFUNC.MUTE_ALL:settings.f1func;this.buttonMode=
this.disabled=!1;this.state=0;switch(a){case E_FFUNC.NEWSNAP:this.img0=res.SS_OFF;this.img1=res.SS_ON;this.buttonMode=!0;break;case E_FFUNC.UPDCURSNAP:this.img0=res.SSUPD_OFF;this.img1=res.SSUPD_ON;this.buttonMode=!0;break;case E_FFUNC.NEXT_SNAP:this.img0=res.NXT_SNP_OFF;this.img1=res.NXT_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.PREV_SNAP:this.img0=res.PRV_SNP_OFF;this.img1=res.PRV_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.MUTE_ALL:this.state=isMuteAll()?1:0;this.img0=res.FFUNC_B_OFF;this.img1=
res.FFUNC_B_RED;this.text=lang.MUTE_ALL.replace(" ","\n");break;case E_FFUNC.DIM:this.state=getValue("m.dim")?1:0;this.img0=res.FFUNC_B_OFF;this.img1=res.FFUNC_B_BLU;this.text=lang.DIM;break;case E_FFUNC.PLAY:this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present");this.img0=res.PLAYS_OFF;this.img1=res.PLAYS_STOP;break;case E_FFUNC.REC:this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||.5<getValue("var.recBusy");this.img0=res.RECS_OFF;this.img1=
res.RECS_STOP;break;case E_FFUNC.MTK_PLAY:this.state=2==getValue("var.mtk.currentState")?1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState");this.img0=res.MTK_PLAY;this.img1=res.MTK_STOP;break;case E_FFUNC.MTK_REC:this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState");this.img0=res.MTK_REC_OFF;this.img1=res.MTK_REC_ON;break;
default:this.img1=res.bF1Off,this.img2=res.bF1On}};this.f1c.onToggle=function(){doFfunc(settings.bigSlideOut&&slideOutWidget.enabled?E_FFUNC.MUTE_ALL:settings.f1func)};this.f2c=new CheckBox(this);this.f2c.setPos(67,88);this.f2c.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.f2c.font="14px open_sans_condensedbold";this.f2c.textColor=color.black2;this.f2c.textColorActive=color.white;this.f2c.shadowColorActive="#333";this.f2c.shadowColor="#ccc";this.f2c.regKey("mgmask");this.f2c.regKey("m.dim");this.f2c.regKey("var.currentState");
this.f2c.regKey("var.recBusy");this.f2c.regKey("var.isRecording");this.f2c.regKey("var.present");this.f2c.regKey("var.mtk.present");this.f2c.regKey("var.mtk.currentState");this.f2c.regKey("var.mtk.rec.busy");this.f2c.regKey("var.mtk.rec.currentState");this.f2c.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:-1,offsetY:-3,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:12};this.f2c.getState=function(){this.text=null;var a=settings.bigSlideOut&&
slideOutWidget.enabled?E_FFUNC.DIM:settings.f2func;this.buttonMode=this.disabled=!1;this.state=0;switch(a){case E_FFUNC.NEWSNAP:this.img0=res.SS_OFF;this.img1=res.SS_ON;this.buttonMode=!0;break;case E_FFUNC.UPDCURSNAP:this.img0=res.SSUPD_OFF;this.img1=res.SSUPD_ON;this.buttonMode=!0;break;case E_FFUNC.NEXT_SNAP:this.img0=res.NXT_SNP_OFF;this.img1=res.NXT_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.PREV_SNAP:this.img0=res.PRV_SNP_OFF;this.img1=res.PRV_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.MUTE_ALL:this.state=
isMuteAll()?1:0;this.img0=res.FFUNC_B_OFF;this.img1=res.FFUNC_B_RED;this.text=lang.MUTE_ALL.replace(" ","\n");break;case E_FFUNC.DIM:this.state=getValue("m.dim")?1:0;this.img0=res.FFUNC_B_OFF;this.img1=res.FFUNC_B_BLU;this.text=lang.DIM;break;case E_FFUNC.PLAY:this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present");this.img0=res.PLAYS_OFF;this.img1=res.PLAYS_STOP;break;case E_FFUNC.REC:this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||
.5<getValue("var.recBusy");this.img0=res.RECS_OFF;this.img1=res.RECS_STOP;break;case E_FFUNC.MTK_PLAY:this.state=2==getValue("var.mtk.currentState")?1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState");this.img0=res.MTK_PLAY;this.img1=res.MTK_STOP;break;case E_FFUNC.MTK_REC:this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState");
this.img0=res.MTK_REC_OFF;this.img1=res.MTK_REC_ON;break;default:this.img1=res.bF2Off,this.img2=res.bF2On}};this.f2c.onToggle=function(){doFfunc(settings.bigSlideOut&&slideOutWidget.enabled?E_FFUNC.DIM:settings.f2func)};var b=101+measures.bottomWidgetHeight;this.clip=new ClipBulb(this);this.clip.setPos(12,127);this.vu=new VUMeter(this);this.vu.setAnchors(18,149,null,settings.disableVUs2?59:b);settings.disableVUs2||(IS_UI_24||(this.gi=new GATEind(this),this.gi.x=18,this.gi2=new GATEind(this),this.gi2.x=
37),this.gr=new GRMeter(this),this.gr.x=18,this.gr2=new GRMeter(this),this.gr2.x=37);this.clip2=new ClipBulb(this);this.clip2.setPos(31,127);this.vu2=new VUMeter(this);this.vu2.setAnchors(37,149,null,settings.disableVUs2?59:b)},getLabel:function(){return this.text},getColor:function(){return this.color},getName:function(){return lang.MASTER},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},getNameValue:function(a){return getValue(this.name+a)},calcGeometry:function(){this.x=screenWidth-
this.w;slideOutWidget.enabled&&(this.x-=slideOutWidget.w);this.h=screenHeight-this.y;settings.disableVUs2||(this.gr.y=this.h-this.gr.h-26-measures.bottomWidgetHeight,this.gr2.y=this.h-this.gr.h-26-measures.bottomWidgetHeight,IS_UI_24||(this.gi.y=this.gr.y-13,this.gi2.y=this.gr2.y-13))},setClipped:function(){this.clipped=!0;regUpdate(this)},clipRelease:function(){var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.clipped=!1;regUpdate(a)},CLIP_HOLD_TIME)},setSolo:function(a){this.soloed=
a;regUpdate(this)},onDown:function(a,b){this.globalX();var c=b-this.globalY();this.botDown=!1;if(c>this.h-34)if(this.botDown=!0,c=Date.now(),c-this.lastClickTime<DBL_CLK_TIME)this.onDouble(),this.lastClickTime=c-DBL_CLK_TIME;else{this.lastClickTime=c;var d=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){d.onHold()},HOLD_TIME)}},onUp:function(){this.botDown&&setSelected(-1,!0);clearTimeout(this.holdTimer)},onHold:function(){this.botDown=!1;-1!=selectedChannel&&setSelected(-1);
var a=new STRIPMENU(null,this);a.x=bound(this.x,0,screenWidth-a.w);a.y=screenHeight-a.h-measures.bottomWidgetHeight;a.poplineX=130;mWidgets.push(widgets.pop());regUpdate(a)},onDouble:function(){this.botDown=!1;mode!=E_MODE.EDIT?(editWidget.setMode(editWidget.E_MODE.dyn),-1!=selectedChannel&&setSelected(-1),setMode(E_MODE.EDIT)):(-1!=selectedChannel&&setSelected(-1),goBack())},showPresets:function(){this.menu=new PRESET_MENU2(null,"chm",this);this.menu.color=this.color;this.menu.center=!0;this.menu.updateGeometry();
regUpdate(this.menu)},savePreset:function(){for(var a="m.afs.enabled m.afs.fmode m.afs.cmode m.afs.numtotal m.afs.numfixed m.afs.logic m.afs.livelift m.afs.sensitivity m.l.invert m.r.invert".split(" "),a=a.concat(getKeys("m.eq.")),a=a.concat(getKeys("m.dyn.")),a=a.filter(function(a){return!a.contains(".enabled")}),a=a.filter(function(a){return!a.contains(".bypass")}),a=a.filter(function(a){return!a.contains(".prmod")}),b={},c=0;c<a.length;c++){var d=a[c],f=a[c].replace("m.",".");b[f]=getValue(d)}return b},
loadPreset:function(a,b){applyPreset("m",a);isDefined(b)&&(setValue("m.eq.prname",b),setValue("m.dyn.prname",b));regUpdate(editWidget)},paint:function(){cachedMStripH!=this.h&&this.cachePaint();drawImage(cachedMStrip,0,0,this.w,this.h);ctx.fillStyle=color.gradMBL;ctx.fillRect(2,this.h-37,this.w-4,3);ctx.fillStyle=this.color;selectedChannel==this.id&&ctx.fillRect(2,this.h-this.botLabelHeight,this.w-4,35);ctx.drawText(lang.MASTER,this.w/2,this.h-10,{color:ctx.fillStyle=color.masterLabel,font:font.botMChLabel,
align:"center",shadow:Shadow.main});ctx.textAlign="left";for(var a=!1,b=0;b<allStrips.length;b++)if(allStrips[b].getNameValue("mute")){a=!0;break}b=getValue("mgmask");if(a||b)ctx.fillStyle="#e22",ctx.font="14px open_sans_condensedbold",ctx.drawText(b?"MG":"M",11,20.5,{shadow:Shadow.main});a=!1;for(b=0;b<allStrips.length;b++)if(allStrips[b].getNameValue("solo")){a=!0;break}a&&(ctx.font="14px open_sans_condensedbold",ctx.fillStyle="#ee2",ctx.drawText("S",13,36,{shadow:Shadow.main}));IS_UI_24&&getValue("m.dim")&&
(ctx.font="10px open_sans_condensedbold",ctx.fillStyle="#32B6E2",ctx.textAlign="right",ctx.drawText("DIM",this.w-10,37,{shadow:Shadow.main}));this.clipped&&(ctx.fillStyle="#e22",ctx.fillRoundRect(101,9,17,15,2),ctx.fillStyle=color.black,ctx.textAlign="left",ctx.font="14px open_sans_condensedbold",ctx.fillText("C",106,21.5));ctx.shadowColor="transparent"},cachePaint:function(){if(cachedMStripH!=this.h){cachedMStrip=document.createElement("canvas");var a=cachedMStrip.getContext("2d");isRetina?(cachedMStrip.width=
2*this.w,cachedMStrip.height=2*this.h,a.scale(2,2)):(cachedMStrip.width=this.w,cachedMStrip.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.mStripTile,this.h,a);drawImageCtx(res.mStripBottom,0,this.h-this.botHeight-this.botLabelHeight,a);drawImageCtx(res.mStripBottomLabel,0,this.h-this.botLabelHeight,a);drawImageCtx(res.mStripTopNCS,0,0,a);a.globalAlpha=.06;a.fillStyle="#fff";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;a.fillStyle="rgba(255,255,0,0.8)";
a.fillTriangle(this.w-18,10,3,4);a.fillStyle=this.color;a.fillRect(2,this.h-37,this.w-4,3);a.font=font.stripChannel;a.textAlign="left";a.fillStyle=color.stripChLabel;a.setShadow(color.black,3,1,1);a.fillText(lang.L,20,this.h-43);a.fillText(lang.R,38,this.h-43);drawVUMarks(this.vu2,this.gr2,a);drawMarksDB(this.sl.h,134,117,a);cachedMStripH=this.h}}});function isMuteAll(){return checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)}fxStripCache=null;fxStripCacheH=-1;
var FXStrip=Class.create(Widget,{initialize:function($super,b,c,d,f){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.id=c;this.widgetName="FXStrip";this.name=d;this.name2=f;this.w=measures.mixerStripWidth;this.x=this.w*c;this.text="CH X";this.color=b.color;this.lastInGroup=this.firstInGroup=!1;this.initWidgets()},setMode:function(a){this.name2="fx."+a+".";var b=this.name+this.name2;this.mute.setKey(b+"mute");this.sl.setKey(b+"value");this.led.setKey(b+"value");b=color.white;switch(a){case 0:b=
color.blue;break;case 1:b=color.brown;break;case 2:b=color.purple;break;case 3:b=color.green}this.sl.color=b},calcGeometry:function(){this.h=this.parent.h},setVU:function(a,b,c,d){b=0==this.mute.state?modVu(b,this.sl.value):0;1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b)},getNameValue:function(a){return getValue(this.name+a)},getName2Value:function(a){return getValue(this.name+this.name2+a)},initWidgets:function(){var a=this;this.led=new LED(this);
this.led.key=this.name+this.name2+"value";this.led.setPos(6,4);this.led.setSize(100,38);this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):a.sl.setValue(DBtoVf2(b))};this.mute=new CheckBox(this);this.mute.key=this.name+this.name2+"mute";this.mute.setPos(4,48);this.mute.setSize(102,29);this.mute.setImages(res.bBMuteOff,res.bBMuteOn);this.sl=new Slider(this,this.type);this.sl.key=this.name+this.name2+"value";this.sl.color=this.color;this.sl.setPos(0,94);this.sl.w=this.w;
this.sl.laneOffset=36;this.sl.faderX=60;this.sl.bottomMargin=24;this.sl.onDouble=function(){setMode(E_MODE.MIX)};this.vu=new VUMeter(this);this.vu.setAnchors(21,109,null,26);this.clip=new ClipBulb(this);this.clip.setPos(15,87)},paint:function(){fxStripCacheH!=this.h&&this.cachePaint();ctx.drawImage(fxStripCache,0,0,this.w,this.h);selectedStrip.id==this.id&&(ctx.globalAlpha=.06,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=1);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?
2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=color.stripChLabel;ctx.setShadow(color.black,3,1,1);ctx.fillText(this.text,11,this.h-10);ctx.shadowColor="transparent"},DRAW_UPDATE_CHECK:function(){var a;a=this.getName2Value("value");var b=this.getName2Value("mute"),c=this.getNameValue("stereoIndex");a=""+a+b+this.clip.state+c+(selectedStrip.id==this.id);if(a===this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},
cachePaint:function(){fxStripCache=document.createElement("canvas");var a=fxStripCache.getContext("2d");isRetina?(fxStripCache.width=2*this.w,fxStripCache.height=2*this.h,a.scale(2,2)):(fxStripCache.width=this.w,fxStripCache.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.auxStripTile,this.h,a);drawImageCtx(res.auxStripBottom,0,this.h-res.auxStripBottom.h(),a);drawImageCtx(res.auxStripTop,0,0,a);drawMarksDB(this.sl.h,94,100,a);drawVUMarks(this.vu,null,a);
fxStripCacheH=this.h}});auxStripCache=null;auxStripCacheH=-1;
var AUXStrip=Class.create(Widget,{initialize:function($super,b,c,d,f){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.id=c;this.widgetName="AUXStrip";this.name=d;this.name2=f;this.w=measures.mixerStripWidth;this.x=this.w*c;this.st=null;this.text="CH X";this.mode=0;this.color=b.color;this.pre=this.lastInGroup=this.firstInGroup=!1;this.initWidgets()},setMode:function(a){this.mode=a;this.name2=a="aux."+a+".";a=this.name+a;this.led.setKey(a+"value");this.led.keyPrefix=a;this.pan.setKey(a+"pan");
this.mute.setKey(a+"mute");this.post.setKey(a+"post");this.sl.setKey(a+"value");this.postproc&&this.postproc.setKey(a+"postproc");this.vu.reset();regUpdate(this)},calcGeometry:function(){this.h=this.parent.h},setVU:function(a,b){var c=0==this.post.state,c=0==this.mute.state?modVu(c?a:b,this.sl.value):0;1<=c?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,c)},setNameValue:function(a,b){setValue(this.name+a,b)},setName2Value:function(a,b){setValue(this.name+
this.name2+a,b)},getNameValue:function(a){return getValue(this.name+a)},getName2Value:function(a){return getValue(this.name+this.name2+a)},getMuteState:function(a){a=isDefined(a)?a:this.mode;var b=getValue("settings.auxmutelink"),c=this.name+("aux."+a+".");a=getValue(c+"mute");c=getValue(c+"post");(b||c)&&par.st.getMuteState()&&(a=1);return a},initWidgets:function(){var a=this;this.led=new LED(this);this.led.key=this.name+this.name2+"value";this.led.keyPrefix=this.name+this.name2;this.led.setPos(6,
4);this.led.setSize(100,38);this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):a.sl.setValue(DBtoVf2(b))};this.pan=new PanSlider(this);this.pan.key=this.name+this.name2+"pan";this.pan.disabled=!0;this.pan.setPos(5,46);this.pan.setSize(102,30);this.pan.onDisabledClick=function(){showPopupMsg(lang.NO_PAN_ON_MONO_AUX)};this.pan.getState=function(){this.disabled=-1==auxStrips[a.parent.auxID].getNameValue("stereoIndex")};this.mute=new CheckBox(this);this.mute.setPos(4,
88);this.mute.setImages(res.bMuteOff,res.bMuteOn);this.mute.getState=function(){this.state=a.getName2Value("mute");this.disabled=!1;var b=getValue("settings.auxmutelink"),c=a.getName2Value("post");(b||c)&&a.st.getMuteState()&&(this.state=1,this.disabled=!0)};this.post=new CheckBox(this);this.post.key=this.name+this.name2+"post";this.post.longClickMark=!0;this.post.clickOnUp=!0;this.post.setPos(58,88);this.post.setSize(50,37);this.post.setImages(res.bPre,res.bPost);this.post.onHold=function(){var b=
0==this.state?0:1,c=a.name2;confOk.valueFunc=function(){for(var a=0;a<allStrips.length;a++){switch(allStrips[a].type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.FX:break;default:continue}allStrips[a].setNameValue(c+"post",b);updateByKey(allStrips[a].name+c+"post")}};showConfBox(lang.SET_ALL_CHANNELS_TO.format(b?lang.POST:lang.PRE))};IS_UI_24&&(this.postproc=new CheckBox(this),this.postproc.key=this.name+this.name2+"postproc",this.postproc.longClickMark=
!0,this.postproc.clickOnUp=!0,this.postproc.setPos(4,131),this.postproc.setSize(50,37),this.postproc.invertedValue=!0,this.postproc.setImages(res.postproc,res.preproc),this.postproc.onHold=function(){var a=0==this.state?0:1;confOk.valueFunc=function(){for(var b=0;b<auxSendStrips.length;b++)auxSendStrips[b].setName2Value("postproc",a),regUpdate(auxSendStrips[b])};showConfBox(lang.SET_ALL_CHANNELS_TO.format(a?lang.POST_PROCESSING:lang.PRE_PROCESSING))});this.sl=new Slider(this,this.type);this.sl.key=
this.name+this.name2+"value";this.sl.color=this.color;this.sl.setPos(0,134);this.sl.w=this.w;this.sl.laneOffset=36;this.sl.faderX=60;this.sl.bottomMargin=24;this.sl.onDouble=function(){setMode(E_MODE.MIX)};this.vu=new VUMeter(this);this.vu.setAnchors(21,IS_UI_24?193:149,null,26);this.clip=new ClipBulb(this);this.clip.setPos(15,IS_UI_24?171:127)},DRAW_UPDATE_CHECK:function(){var a;a=-1!=settings.me.indexOf(this.id);var b=this.getName2Value("pan"),c=this.getName2Value("value"),d=this.getName2Value("mute"),
f=this.getNameValue("mute"),e=this.getName2Value("post"),g=this.getName2Value("postproc"),h=this.clip.state,l=this.getNameValue("stereoIndex");a=""+c+b+d+f+e+g+a+h+l+(selectedStrip.id==this.id);if(a===this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},paint2:function(){ctx.fillStyle="#15171C";ctx.fillRect(0,0,this.w,this.h);fillVertPattern(res.stripTile,this.h);drawImage(res.stripBottom,0,this.h-res.stripBottom.h());drawImage(res.stripTop,0,0);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?
2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=color.stripChLabel;ctx.fillText(this.text,11,this.h-10);this.drawMarks(ctx)},paint:function(){auxStripCacheH!=this.h&&this.cachePaint();ctx.drawImage(auxStripCache,0,0,this.w,this.h);this.sl.color=0==getValue(this.name+this.name2+"post")?color.AUX:color.green;selectedStrip.id==this.id&&(ctx.globalAlpha=.06,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=
1);var a=this.getNameValue("stereoIndex"),b=!1;settings.me.contains(this.id)&&(b=!0);0==a&&settings.me.contains(this.id+1)&&(b=!0);1==a&&settings.me.contains(this.id-1)&&(b=!0);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=b?color.me:color.stripChLabel;ctx.fillText(this.text,11,this.h-10);ctx.shadowColor="transparent"},cachePaint:function(){auxStripCache=
document.createElement("canvas");var a=auxStripCache.getContext("2d");isRetina?(auxStripCache.width=2*this.w,auxStripCache.height=2*this.h,a.scale(2,2)):(auxStripCache.width=this.w,auxStripCache.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);drawImageCtx(res.stripTop,0,0,a);drawMarksDB(this.sl.h,134,100,a);drawVUMarks(this.vu,null,a);auxStripCacheH=this.h}});mtxStripCache=null;
mtxStripCacheH=-1;
var MTXStrip=Class.create(Widget,{initialize:function($super,b,c,d,f){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.id=c;this.widgetName="MTXStrip";this.name=d;this.name2=f;this.w=measures.mixerStripWidth;this.x=this.w*c;this.text="CH X";this.color=color.MATRIX;this.pre=this.rr=this.lastInGroup=this.firstInGroup=!1;this.initWidgets()},calcGeometry:function(){this.h=this.parent.h},setMode:function(a){var b=this.name;a="mtx."+a+".";this.rr&&(a+="r.");this.name2=a;var c=b+a;this.led.setKey(c+
"value");this.led.keyPrefix=b+a;this.pan.setKey(c+"pan");this.mute.setKey(c+"mute");this.sl.setKey(c+"value");this.vu.reset()},setVU:function(a,b){var c=0==this.mute.state?modVu(b,this.sl.value):0;1<=c?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,c)},setNameValue:function(a,b){setValue(this.name+a,b)},setName2Value:function(a,b){setValue(this.name+this.name2+a,b)},getNameValue:function(a){return getValue(this.name+a)},getName2Value:function(a,b){return getValue(this.name+
this.name2+a)},initWidgets:function(){var a=this;this.led=new LED(this);this.led.key=this.name+this.name2+"value";this.led.keyPrefix=this.name+this.name2;this.led.setPos(6,4);this.led.setSize(100,38);this.pan=new PanSlider(this);this.pan.key=this.name+this.name2+"pan";this.pan.disabled=!0;this.pan.setPos(5,46);this.pan.setSize(102,30);this.pan.onDisabledClick=function(){showPopupMsg(lang.NO_PAN_ON_MONO_MATRIX)};this.pan.getState=function(){this.disabled=-1==auxStrips[a.parent.auxID].getNameValue("stereoIndex")};
this.mute=new CheckBox(this);this.mute.key=this.name+this.name2+"mute";this.mute.setPos(4,88);this.mute.setImages(res.bMuteOff,res.bMuteOn);this.sl=new Slider(this,this.type);this.sl.key=this.name+this.name2+"value";this.sl.color=color.MATRIX;this.sl.setPos(0,134);this.sl.w=this.w;this.sl.laneOffset=36;this.sl.faderX=60;this.sl.bottomMargin=24;this.sl.onDouble=function(){setMode(E_MODE.MIX)};this.vu=new VUMeter(this);this.vu.setAnchors(21,149,null,26);this.clip=new ClipBulb(this);this.clip.setPos(15,
127)},DRAW_UPDATE_CHECK:function(){var a;a=this.getName2Value("pan");var b=this.getName2Value("value"),c=this.getName2Value("mute");a=[b,a,c];if(!this.CACHED_PARAMS.length)return this.CACHED_PARAMS=a,!0;if(a.equals(this.CACHED_PARAMS))return!1;this.CACHED_PARAMS=a;return!0},paint2:function(){ctx.fillStyle="#15171C";ctx.fillRect(0,0,this.w,this.h);fillVertPattern(res.stripTile,this.h);drawImage(res.stripBottom,0,this.h-res.stripBottom.h());drawImage(res.stripTop,0,0);ctx.fillStyle=this.color;ctx.fillRect(0+
(this.firstInGroup?2:0),this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=color.stripChLabel;ctx.fillText(this.text,11,this.h-10);this.drawMarks(ctx)},paint:function(){mtxStripCacheH!=this.h&&this.cachePaint();ctx.drawImage(mtxStripCache,0,0,this.w,this.h);selectedStrip.id==this.id&&(ctx.globalAlpha=.06,ctx.fillStyle="#fff",ctx.fillRect(1,0,this.w-2,this.h),ctx.globalAlpha=1);var a=this.getNameValue("stereoIndex"),b=!1;
settings.me.contains(this.id)&&(b=!0);0==a&&settings.me.contains(this.id+1)&&(b=!0);1==a&&settings.me.contains(this.id-1)&&(b=!0);ctx.fillStyle=this.color;ctx.fillRect(this.firstInGroup?2:0,this.h-3,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?2:0),3);ctx.textAlign="left";ctx.font=font.stripChannel;ctx.fillStyle=b?color.me:color.stripChLabel;ctx.fillText(this.text,11,this.h-10);ctx.shadowColor="transparent"},cachePaint:function(){mtxStripCache=document.createElement("canvas");var a=mtxStripCache.getContext("2d");
isRetina?(mtxStripCache.width=2*this.w,mtxStripCache.height=2*this.h,a.scale(2,2)):(mtxStripCache.width=this.w,mtxStripCache.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h(),a);drawImageCtx(res.stripTop,0,0,a);a.globalAlpha=.07;a.fillStyle=this.color;a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;drawMarksDB(this.sl.h,134,100,a);drawVUMarks(this.vu,null,a);mtxStripCacheH=this.h}}),
AUXOUTStrip=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="AUX_OUT";this.y=measures.topWidgetHeight;this.w=measures.masterStripWidth;this.botLabelHeight=res.mStripBottomLabel.h();this.botHeight=res.mStripBottom.h();this.color=color.AUX;this.stereo=!1;this.idx=0;this.label="AUX_OUT";this.text="AUX";this.holdTimer=this.t=null;this.initWidgets()},onShow:function(){this.setAux(auxWidget.mode)},setVU:function(a,b,c,d){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&
this.clip.release();this.vu.setValueExt(a,b);settings.disableVUs2||(this.gr.setValue(c),this.gi.setValue(d))},setAux:function(a){this.idx=a;this.vu.reset();this.t=auxStrips[a];this.name=a="a."+a+".";this.led.key=a+"mix";this.sl.key=a+"mix";this.solo.key=a+"solo";this.label=lang.AUX+" "+(this.idx+1)+" "+lang.SEND;this.text="AUX "+(this.idx+1);regUpdate(this)},initWidgets:function(){var a=this;this.MIXTOAUX=new Button(this);this.MIXTOAUX.setPos(4,5);this.MIXTOAUX.setImages(res.bMTA_OFF,res.bMTA_ON);
this.MIXTOAUX.getState=function(){a.t&&(this.disabled=1==a.t.getNameValue("matrix"))};this.MIXTOAUX.onPress=function(){isBlocked("auxlvl",auxWidget.mode)?showPopupMsg(lang.LOCKED,1E3):(confOk.valueFunc=function(){copyMixToAux(auxWidget.mode)},showConfBox(lang.COPY_MIX_TO_AUX))};this.led=new LED(this);this.led.setPos(6,44);this.led.setSize(115,38);this.led.color=color.mLedText;this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):a.sl.setValue(DBtoVf2(b))};this.led.onDouble=
function(){setValue(a.sl.key,zeroDbPos);updateByKey(a.sl.key)};this.sl=new Slider(this,E_STRIP_TYPE.AUX);this.sl.setPos(0,134);this.sl.canScroll=!1;this.sl.w=this.w;this.sl.laneOffset=34;this.sl.faderX=77;this.sl.bottomMargin=58;this.sl.lane=!1;this.sl.onDoubleKnob=function(){isPortrait||(mode==E_MODE.MOREME&&setMode(E_MODE.AUX),setSelected(a.t.id),editWidget.setMode(editWidget.arr[0]),setMode(E_MODE.EDIT))};this.sl.getState=function(){this.fader=1==a.t.getNameValue("matrix")?res.mtxFader:res.auxFader};
this.mute=new CheckBox(this);this.mute.setPos(4,88);this.mute.setImages(res.mStripMute_OFF,res.mStripMute_ON);this.mute.getState=function(){this.state=a.t.getNameValue("mute");var b=getValue("mgmask"),d=a.t.getNameValue("mgmask"),f=checkBit(b,MUTEALL_BIT_IDX),e=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;if(b&d||f||e)this.state=1;1==a.t.getNameValue("forceunmute")?(this.state=0,this.img0=res.mStripMute_OFF_F):this.img0=res.mStripMute_OFF};this.mute.onToggleUp=function(){var b=getValue("mgmask"),
d=a.t.getNameValue("mgmask"),d=b&d,f=checkBit(b,MUTEALL_BIT_IDX),b=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;d||f||b?a.t.setNameValue("forceunmute",0):a.t.setNameValue("mute",1)};this.mute.onToggleDown=function(){var b=getValue("mgmask"),d=a.t.getNameValue("mgmask"),d=b&d,f=checkBit(b,MUTEALL_BIT_IDX),b=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;d||f||b?a.t.setNameValue("forceunmute",1):a.t.setNameValue("mute",0)};this.mute.onToggle=function(){checkMutes()};this.solo=new CheckBox(this);
this.solo.setPos(67,88);this.solo.setImages(res.mStripSolo_OFF,res.mStripSolo_ON);this.solo.onToggle=function(){checkSolos()};this.solo.onToggleUp=function(){if(0==getValue("settings.multiplesolo"))for(var b=0;b<allStrips.length;b++)allStrips[b].setNameValue("solo",0);a.t.setNameValue("solo",1)};var b=101+measures.bottomWidgetHeight;this.clip=new ClipBulb(this);this.clip.setPos(21,127);this.vu=new VUMeter(this);this.vu.setAnchors(27,149,null,settings.disableVUs2?59:b);settings.disableVUs2||(this.gi=
new GATEind(this),this.gi.x=27,this.gr=new GRMeter(this),this.gr.x=27)},onDown:function(a,b){this.globalX();var c=this;if(b-this.globalY()>this.h-32){var d=Date.now();if(d-this.lastClickTime<DBL_CLK_TIME)isPortrait||(mode!=E_MODE.EDIT?setMode(E_MODE.EDIT):setMode(lastMode),this.lastClickTime=d-DBL_CLK_TIME);else{var f=this.t;this.holdTimer=setTimeout(function(){if(mode!=E_MODE.MOREME){var a=new STRIPMENU(null,f);a.x=bound(c.globalX(),0,screenWidth-a.w);a.y=screenHeight-a.h-measures.bottomWidgetHeight;
mWidgets.push(widgets.pop());regUpdate(a)}},HOLD_TIME);this.t&&setSelected(this.t.id,!0);this.lastClickTime=d;regUpdate(this)}}},onUp:function(){clearTimeout(this.holdTimer)},calcGeometry:function(){this.x=screenWidth-this.w;masterWidget.enabled&&(this.x-=masterWidget.w);slideOutWidget.enabled&&(this.x-=slideOutWidget.w);this.y=topWidget.enabled?topWidget.h:0;this.h=screenHeight-this.y;settings.disableVUs2||(this.gr.y=this.h-this.gr.h-26-measures.bottomWidgetHeight,this.gi.y=this.gr.y-13)},paint:function(){ctx.fillStyle=
color.bg;ctx.fillRect(0,0,this.w,this.h);fillVertPattern(res.mStripTile,this.h);drawImage(res.mStripBottom,0,this.h-this.botHeight-this.botLabelHeight);drawImage(res.mAUXStripTop,0,0);drawImage(res.mStripBottomLabel,0,this.h-this.botLabelHeight);ctx.globalAlpha=.05;ctx.fillStyle=color.AUX;ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=1;ctx.fillStyle=this.color;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-4,3);ctx.fillStyle=color.gradMBL;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-4,
3);ctx.fillStyle=this.color;var a=selectedChannel==this.t.id;a&&ctx.fillRect(2,this.h-this.botLabelHeight,this.w-4,35);ctx.font=font.botMChLabel;ctx.textAlign="center";var b=this.t.getName();ctx.fillStyle=color.black;ctx.fillText(b,this.w/2+4|0,this.h-10+1,this.w-10);ctx.fillStyle=a?color.white:color.masterLabel;ctx.fillText(b,this.w/2+3|0,this.h-10,this.w-10);ctx.font=font.stripChannel;ctx.textAlign="left";a=this.t.getNameValue("matrix")?lang.MTX+" "+(this.t.subId+1):lang.AUX+" "+(this.t.subId+1);
b=getValue(this.name+"stereoIndex");0==b?a+="L":1==b&&(a+="R");var c=!1;settings.meout==this.idx&&(c=!0);0==b&&settings.meout==this.idx+1&&(c=!0);1==b&&settings.meout==this.idx-1&&(c=!0);ctx.fillStyle=c?color.me:color.stripChLabel;ctx.fillText(a,11,this.h-10-measures.bottomWidgetHeight);ctx.shadowColor="transparent";drawVUMarks(this.vu,this.gr,ctx);drawMarksDB(this.sl.h,134,117);b=getValue("mgmask");a=this.t.getNameValue("mgmask")&b;b&=1<<MUTEALL_BIT_IDX;c=this.t.getNameValue("forceunmute");ctx.fillStyle=
c?color.tvMuteUn:color.tvMuteMG;if(b||a){ctx.textAlign="center";ctx.font="10pt open_sans_condensedbold";c=0;b&&ctx.fillText("A",12,137+16*c++);if(a)for(b=0;6>b;b++)a&1<<b&&ctx.fillText(b+1+"",12,137+16*c++);1==this.t.getNameValue("mute")&&(this.t.getNameValue("forceunmute")&&(ctx.fillStyle="#82C9DE"),ctx.fillText("M",12,137+16*c++))}}}),FXOUTStrip=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX_OUT";this.y=measures.topWidgetHeight;this.w=measures.masterStripWidth;
this.botLabelHeight=res.mStripBottomLabel.h();this.botHeight=res.mStripBottom.h();this.color=color.blue;this.stereo=!0;this.text="FXR";this.label="FX";this.idx=0;this.initWidgets()},initWidgets:function(){var a=this;this.led=new LED(this);this.led.pkey="mix";this.led.setPos(6,4);this.led.setSize(115,38);this.led.color=color.mLedText;this.led.onDouble=function(){setValue(a.sl.key,zeroDbPos);updateByKey(a.sl.key)};this.led.onInput=function(b){b=parseFloat(b);isNaN(b)?showPopupMsg(lang.WRONG_VALUE):
a.sl.setValue(DBtoVf2(b))};this.pan=new PanSlider(this);this.pan.setPos(5,46);this.pan.setSize(117,30);this.mute=new CheckBox(this);this.mute.setPos(4,88);this.mute.setImages(res.mStripMute_OFF,res.mStripMute_ON);this.mute.getState=function(){this.state=a.t.getNameValue("mute");var b=getValue("mgmask"),d=a.t.getNameValue("mgmask"),f=checkBit(b,MUTEALL_BIT_IDX),e=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;if(b&d||f||e)this.state=1;1==a.t.getNameValue("forceunmute")?(this.state=0,this.img0=
res.mStripMute_OFF_F):this.img0=res.mStripMute_OFF};this.mute.onToggleUp=function(){var b=getValue("mgmask"),d=a.t.getNameValue("mgmask"),d=b&d,f=checkBit(b,MUTEALL_BIT_IDX),b=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;d||f||b?a.t.setNameValue("forceunmute",0):a.t.setNameValue("mute",1)};this.mute.onToggleDown=function(){var b=getValue("mgmask"),d=a.t.getNameValue("mgmask"),d=b&d,f=checkBit(b,MUTEALL_BIT_IDX),b=checkBit(b,MUTEFX_BIT_IDX)&&a.t.type==E_STRIP_TYPE.FX;d||f||b?a.t.setNameValue("forceunmute",
1):a.t.setNameValue("mute",0)};this.mute.onToggle=function(){checkMutes()};this.solo=new CheckBox(this);this.solo.setPos(67,88);this.solo.setImages(res.mStripSolo_OFF,res.mStripSolo_ON);this.solo.onToggle=function(){checkSolos()};this.solo.onToggleUp=function(){if(0==getValue("settings.multiplesolo"))for(var b=0;b<allStrips.length;b++)allStrips[b].setNameValue("solo",0);a.t.setNameValue("solo",1)};this.sl=new Slider(this,E_STRIP_TYPE.FX);this.sl.setPos(0,134);this.sl.canScroll=!1;this.sl.w=this.w;
this.sl.laneOffset=34;this.sl.faderX=77;this.sl.bottomMargin=58;this.sl.lane=!1;var b=101+measures.bottomWidgetHeight;this.clip=new ClipBulb(this);this.clip.setPos(12,127);this.vu=new VUMeter(this);this.vu.setAnchors(18,149,null,settings.disableVUs2?59:b);settings.disableVUs2||(this.gi=new GATEind(this),this.gi.x=18,this.gr=new GRMeter(this),this.gr.x=18,this.gi2=new GATEind(this),this.gi2.x=37,this.gr2=new GRMeter(this),this.gr2.x=37);this.clip2=new ClipBulb(this);this.clip2.setPos(31,127);this.vu2=
new VUMeter(this);this.vu2.setAnchors(37,149,null,settings.disableVUs2?59:b)},onShow:function(){this.setFx(fxSendsWidget.mode)},setVU:function(a,b,c,d,f,e,g,h){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b);1<=d?this.clip2.clip():this.clip2.state&&!this.clip2.releasing&&this.clip2.release();this.vu2.setValueExt(c,d);settings.disableVUs2||(this.gr&&this.gr.setValue(f),this.gi&&this.gi.setValue(g),this.gr2&&this.gr2.setValue(e),this.gi2&&this.gi2.setValue(h))},
setFx:function(a){this.idx=a;this.vu.reset();this.vu2.reset();this.t=fxStrips[a];a="f."+a+".";this.led.keyPrefix=a;this.pan.key=a+"pan";this.sl.key=a+"mix";this.solo.key=a+"solo";this.label=this.t.getName();this.text="FXR "+(this.idx+1)+"";this.holdTimer=null;regUpdate(this)},calcGeometry:function(){this.x=screenWidth-this.w;masterWidget.enabled&&(this.x-=masterWidget.w);slideOutWidget.enabled&&(this.x-=slideOutWidget.w);this.y=topWidget.enabled?topWidget.h:0;this.h=screenHeight-this.y;settings.disableVUs2||
(this.gr.y=this.h-this.gr.h-26-measures.bottomWidgetHeight,this.gi.y=this.gr.y-13,this.gr2.y=this.h-this.gr.h-26-measures.bottomWidgetHeight,this.gi2.y=this.gr2.y-13)},onDown:function(a,b){var c=a-this.globalX(),d=b-this.globalY(),f=this;this.pressPoint=[c,d];if(d>this.h-measures.bottomWidgetHeight)if(c=Date.now(),c-this.lastClickTime<DBL_CLK_TIME)editWidget.setMode(editWidget.E_MODE.fx),setMode(E_MODE.EDIT),bottomWidget.gotoIDmid(selectedChannel),this.lastClickTime=c-DBL_CLK_TIME;else{var e=this.t;
this.holdTimer=setTimeout(function(){var a=new STRIPMENU(null,e);a.x=bound(f.globalX(),0,screenWidth-a.w);a.y=screenHeight-a.h-measures.bottomWidgetHeight;mWidgets.push(widgets.pop());regUpdate(a)},HOLD_TIME);this.t&&setSelected(this.t.id,!0);this.lastClickTime=c;regUpdate(this)}},onUp:function(){clearTimeout(this.holdTimer)},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(0,0,this.w,this.h);fillVertPattern(res.mStripTile,this.h);drawImage(res.mStripTopNCS,0,0);drawImage(res.mStripBottom,0,this.h-
this.botHeight-this.botLabelHeight);drawImage(res.mStripBottomLabel,0,this.h-this.botLabelHeight);ctx.globalAlpha=.03;ctx.fillStyle="#99F";ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=1;ctx.fillStyle=this.color;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-4,3);ctx.fillStyle=color.gradMBL;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-4,3);ctx.fillStyle=this.color;selectedChannel==this.t.id&&ctx.fillRect(2,this.h-this.botLabelHeight,this.w-4,35);ctx.font=font.botMChLabel;ctx.textAlign=
"center";var a=this.t.getName();ctx.fillStyle=color.black;ctx.fillText(a,this.w/2+1|0,this.h-10+1,this.w-2);ctx.fillStyle=color.masterLabel;ctx.fillText(a,this.w/2|0,this.h-10,this.w-2);ctx.font=font.stripChannel;ctx.fillStyle=color.stripChLabel;ctx.textAlign="left";ctx.fillText(this.text,11,this.h-10-measures.bottomWidgetHeight);ctx.shadowColor="transparent";drawVUMarks(this.vu2,this.gr2,ctx);drawMarksDB(this.sl.h,134,117);var b=getValue("mgmask"),a=this.t.getNameValue("mgmask")&b,c=b&1<<MUTEALL_BIT_IDX,
b=this.t.type==E_STRIP_TYPE.FX&&b&1<<MUTEFX_BIT_IDX,d=this.t.getNameValue("forceunmute");ctx.fillStyle=d?"#82C9DE":"#e66";if(c||b||a){ctx.textAlign="center";ctx.font="10pt open_sans_condensedbold";d=0;b&&ctx.fillText("F",10,137+16*d++);c&&ctx.fillText("A",10,137+16*d++);if(a)for(c=0;6>c;c++)a&1<<c&&ctx.fillText(c+1+"",10,137+16*d++);1==this.t.getNameValue("mute")&&(this.t.getNameValue("forceunmute")&&(ctx.fillStyle="#82C9DE"),ctx.fillText("M",10,137+16*d++))}}});
function drawVUMarks(a,b,c){if(a){c=isDefined(c)?c:ctx;c.fillStyle="rgba(255,255,255,0.35)";c.textAlign="left";c.textBaseline="middle";c.font=font.stripMarks;var d=a.x+a.w+2,f=[-96,-90,-80,-70,-60,-50,-40,-24,-12,-6,0],e=a.y+5,g=a.h-9;if(70<g)for(a=0;a<f.length;a++)if(!(f[a]<-VU_RANGE)){var h=e+vuPosMark(f[a],g);c.fillText(f[a],d,h)}if(isDefined(b)&&null!=b)for(f=["1","5","10","20"],h=b.y+5,dy=(b.h-9)/(f.length-1),d=b.x+b.w+2,a=0;a<f.length;a++)c.fillText(f[a],d,h|0),h+=dy}}
function drawMarksDB(a,b,c,d){d=isDefined(d)?d:ctx;b=isDefined(b)?b:134;a=a-80+2;if(!(0>a)){d.fillStyle="rgba(255,255,255,0.35)";d.textAlign="center";d.setShadow(color.black,0,2,1);d.font=font.stripMarks;for(var f=[1,zeroDbPos,.5276,.1834,.0572,0],e=0;e<f.length;e++)0==f[e]&&(d.font="bold 11px sans serif");d.shadowColor="transparent";var f=[1,.8932,.6327,.5276,.3746,.1834,.0572,0],g=d.createLinearGradient(c-8,0,c-8+8,0);g.addColorStop(1,"rgba(255,255,255,0.13)");g.addColorStop(.5,"rgba(255,255,255,0.22)");
g.addColorStop(0,"rgba(255,255,255,0.3)");var h=d.createLinearGradient(c-8,0,c-8+12,0);h.addColorStop(1,"rgba(255,255,255,0.16)");h.addColorStop(.5,"rgba(255,255,255,0.22)");h.addColorStop(0,"rgba(255,255,255,0.3)");for(e=0;e<f.length;e++){var l=Math.round(a*(1-f[e])+35-1);d.fillStyle=g;d.fillRect(c-8,b+l+1,10,1)}l=a*(1-zeroDbPos)+35-2;d.fillStyle=h;d.fillRect(c-8,b+l,12,3)}}function vuPosMark(a,b){return-a*b/VU_RANGE+.45|0}
function drawMarksVU(a,b,c,d){d=isDefined(d)?d:ctx;b=(isDefined(b)?b:24)+4;a-=4;d.fillStyle="rgba(255,192,128,0.5)";d.textAlign="right";d.shadowColor="transparent";d.font="9px sans serif";--c;for(var f=[-96,-90,-80,-70,-60,-50,-40,-24,-12,-6,0],e=0;e<f.length;e++)if(!(f[e]<-VU_RANGE)){var g=vuPosMark(f[e],a)+4;d.fillText(f[e]+"-",c,b+g)}d.shadowColor="transparent"}
function copyMixToAux(a){var b=!1;-1!=auxStrips[a].getNameValue("stereoIndex")&&(b=!0);for(var c=0;c<allStrips.length;c++){var d=allStrips[c];switch(d.type){case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.AUX:continue}setValue(d.name+"aux."+a+".value",d.getNameValue("mix"));b&&setValue(d.name+"aux."+a+".pan",d.getNameValue("pan"))}drawAll()}function checkSolos(){regUpdate(masterWidget)}
function checkMutes(){mode==E_MODE.EDIT&&editWidget.mode==editWidget.E_MODE.aux&&regUpdate(editWidget);regUpdate(masterWidget)}mPanGrad=panGrad=null;scrollLock=mixerTouches=0;
var Slider=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="Slider";this.id=this.parent.id;this.key=null;this.type=c;this.param=null;switch(c){case E_STRIP_TYPE.IN:this.fader=res.fader;this.color=color.INPUT;break;case E_STRIP_TYPE.MASTER:this.fader=res.redFader;this.color="transparent";break;case E_STRIP_TYPE.FX:this.fader=res.blueFader;this.color=color.blue;break;case E_STRIP_TYPE.AUX:this.fader=res.auxFader;this.color=color.AUX;break;case E_STRIP_TYPE.SUB:this.fader=
res.subFader;this.color=color.sub;break;case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.LINEIN:this.fader=res.fader;this.color=color.media;break;default:this.fader=res.fader,this.color="#ffffff"}this.x=this.w=0;this.y=90;this.laneOffset=this.faderX=this.bottomMargin=0;this.needMoveEvt=this.redrawParent=!0;this.oldValue=this.value=this.lastClickTime=0;this.faderH=this.fader.h()-12;this.faderW=this.fader.w();this.slide=this.pressed=!1;this.touchID=-1;this.linked=!1;this.canScroll=!0;this.dy=0;this.lastPressPoint=
[-1,-1];this.locked=settings.masterLock;this.hist=[0,0];this.master=!1;this.lane=!0;this.noUp=!1;this.noUpValue=1;this.slowMode=this.hideOnDisabled=this.disabled=!1;this.slowValue=10;this.holdTime=1E3;this.noFocus=this.noStereoArrows=!1;this.latchArr=null;this.latch=!1;this.latchStep=0},calcGeometry:function(){this.h=this.parent.h-this.y-this.bottomMargin},onDown:function(a,b,c){mixerTouches++;var d=this;clearTimeout(this.holdTimer);this.currentPoint=[a,b];if(!this.disabled&&!this.pressed){this.pressed=
!0;this.touchID=c;var f=this.globalX()+this.faderX,e=this.globalY()+(this.h-this.faderH)*(1-this.getVal()),e=e|0;this.slide=f-10<=a&&f+this.faderW+10+5>=a&&e-10<=b&&e+this.faderH+10>=b;this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b];if(this.slide){this.holdTimer=setTimeout(function(){var a=Math.abs(d.pressPoint[1]-d.currentPoint[1]);if(5>Math.abs(d.pressPoint[0]-d.currentPoint[0])&&5>a)d.onhold()},this.holdTime);scrollLock++;this.oldValue=this.getVal();if(1==scrollLock)this.onFocus();this.ondown()}this.master&&
settings.masterLock?(this.locked=!0,this.slide=!1):this.locked=!1}this.canScroll&&bottomWidget.startScroll(a,c)},onMove:function(a,b,c){this.currentPoint=[a,b];if(!this.locked){if(!this.disabled&&this.touchID==c&&this.slide){b-=this.pressPoint[1];this.dy=Math.abs(b);var d=b/(this.h-this.faderH);this.slowMode&&(d/=this.slowValue);d=bound(this.oldValue-d,0,1);if(this.noUp&&d>this.noUpValue&&0>b)return;this.setVal(d);this.onValue();regUpdate(this)}this.canScroll&&bottomWidget.setScroll(a,c)}},onUp:function(a){mixerTouches--;
this.canScroll&&bottomWidget.endScroll(a);if(!this.disabled&&this.touchID==a)if(this.onup(),clearTimeout(this.holdTimer),this.locked)0<scrollLock&&scrollLock--,this.pressed=!1,this.touchID=-1,this.slide=!1,regUpdate(this);else{this.slide&&(this.oldValue=0,scrollLock--);a=Date.now();var b=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);if(15>Math.abs(this.lastPressPoint[0]-this.pressPoint[0])&&15>b&&a-this.lastClickTime<DBL_CLK_TIME){if(this.slide)this.onDoubleKnob();else this.onDouble();this.lastClickTime=
a-DBL_CLK_TIME}else this.lastClickTime=a;this.pressed=!1;this.touchID=-1;this.slowMode&&regUpdate(this);this.slide=this.slowMode=!1;this.master&&settings.masterLock&&(this.locked=!0)}},onhold:function(){settings.nudge&&(this.slowMode=!0,regUpdate(this))},onWheel:function(a){if(!(this.disabled||this.master&&settings.masterLock)){var b=this.getVal(),c=a/120/30;this.latch&&this.latchStep&&(c=this.latchStep*(0>a?-1:1));b=bound(b+c,0,1);this.noUp&&b>this.noUpValue||(this.setVal(b),this.onValue(),regUpdate(this))}},
setVal:function($super,b){var c=b;if(this.latch&&this.latchArr)for(var d=0,f=this.latchArr.length;d<f;d++)b>=this.latchArr[d]&&(c=this.latchArr[d]);$super(c)},ondown:function(){this.C_CH=!1;this.parent.CACHED_DRAWING&&(this.parent.CACHED_DRAWING=!1,this.C_CH=!0)},onup:function(){this.C_CH&&(this.parent.CACHED_DRAWING=!0)},setValue:function(a){this.setVal(a);this.onValue();regUpdate(this)},onDouble:function(){},onDoubleKnob:function(){},onFocus:function(){this.noFocus||!isDefined(this.parent.id)||
-1==this.parent.id&&mode==E_MODE.EDIT||bottomWidget.setSelected(this.parent.id)},onValue:function(){},getState:function(){},paint:function(){this.getState();this.value=this.getVal();var a=(this.h-this.faderH)*(1-this.value),a=a|0;this.disabled&&(ctx.globalAlpha=this.hideOnDisabled?0:.5);if(this.lane&&0!=settings.lanes){ctx.strokeStyle=this.color;var b=a+this.faderH-20,c=this.h-27,d=this.w-this.laneOffset;0<c-b&&(ctx.beginPath(),ctx.moveTo(d,b),ctx.lineTo(d,c),ctx.lineCap="round",ctx.lineWidth=1==
settings.lanes?2:4,ctx.stroke())}this.slowMode&&(ctx.shadowColor="#33CAFF",ctx.shadowBlur=12,ctx.shadowOffsetX=0,ctx.shadowOffsetY=0);drawImage(this.fader,this.faderX,a);this.slowMode&&ctx.setShadow();b=this.faderX;a+=34;if(isDefined(this.parent.getNameValue)&&!this.noStereoArrows)switch(this.parent.getNameValue("stereoIndex")){case 0:ctx.fillStyle=this.color;ctx.fillTriangle2(this.w-12,a-10,this.w-8-12,a,this.w-12,a+10);break;case 1:ctx.fillStyle=this.color,ctx.fillTriangle2(b-8,a-10,b,a,b-8,a+10)}this.master&&
settings.masterLock&&this.locked&&(ctx.setShadow(color.black,4,2,2),drawImage(res.lock,this.faderX+5.5,this.h-25))}}),PanSlider=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PanSlider";this.param="pan";this.sliderW=res.panSlider.w();this.needMoveEvt=!0;this.oldValue=this.value=this.lastClickTime=0;this.defaultValue=.5;this.grad=this.parent.stereo?color.mPanGrad:color.panGrad;this.timer=null;this.disabled=this.moved=this.lastP=this.slide=!1},onDown:function(a,b){clearTimeout(this.parent.led.timer);
clearTimeout(this.timer);if(this.disabled)this.onDisabledClick();else{var c=this.globalX()+(this.w-this.sliderW)*this.getVal(),d=this.globalY(),c=c|0;this.slide=c-8<=a&&c+this.sliderW+8>=a&&d<=b&&d+this.h>=b;this.moved=!1;this.slide&&(this.oldValue=this.getVal(),this.pressPoint=[a,b],isDefined(this.parent.id)&&-1!=this.parent.id&&mode!=E_MODE.EDIT&&bottomWidget.setSelected(this.parent.id));this.parent.led.setState(1);regUpdate(this.parent)}},onMove:function(a,b){if(this.slide&&!this.disabled){var c=
a-this.pressPoint[0];3<Math.abs(c)&&(this.moved=!0);c=bound(this.oldValue+c/(this.w-this.sliderW),0,1);this.setVal(c);this.onValue();regUpdate(this.parent)}},onUp:function(){if(!this.disabled){var a=Date.now();if(a-this.lastClickTime<DBL_CLK_TIME&&!this.moved&&!this.lastP){if(this.parent&&this.parent.getNameValue)switch(this.parent.getNameValue("stereoIndex")){case 0:this.setVal(0);break;case 1:this.setVal(1);break;default:this.setVal(this.defaultValue)}else this.setVal(this.defaultValue);this.lastClickTime=
0;regUpdate(this.parent)}this.lastP=this.moved;this.lastClickTime=a;this.slide=this.moved=!1;this.oldValue=0;this.pressPoint=[-1,-1];var b=this.parent.led;this.timer=setTimeout(function(){b.setState(0)},2E3);this.onValue()}},onWheel:function(a){var b=this.getVal(),b=bound(b+a/120/30,0,1);this.setVal(b);this.parent.led.setState(1);var c=this.parent.led;clearTimeout(this.timer);this.timer=setTimeout(function(){c.setState(0)},2E3);regUpdate(this.parent)},onDisabledClick:function(){},onValue:function(){},
getState:function(){},paint:function(){this.getState();this.grad=this.parent.stereo?color.mPanGrad:color.panGrad;var a=this.w-this.sliderW,b=a*this.getVal()+.5|0,c=this.w/2;this.disabled&&(ctx.globalAlpha=.5,b=.5*a+.5|0);ctx.fillStyle=this.grad;ctx.fillRect(c,12,b-c+(this.sliderW/2|0),8);drawImage(res.panSlider,b,0);this.disabled&&(ctx.globalAlpha=1)}});vuGradGain=vuGrad4=vuGrad3=vuGrad2=vuGrad=null;vuGradH=0;vuPattern=null;
var VUMeter=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="VUMeter";this.ignoreEvents=this.DYNAMIC_WIDGET=!0;this.w=measures.vuWidth;this.bottomMargin=0;this.bh=12;this.ghostFallVelocity=this.ghostValueBg=this.ghostValue=this.pFallVelocity=this.pValue=this.fallVelocity=this.valueBg=this.value=0;this.clipping=!1;this.gridImg=null;this.cachedHeight=-1;this.gain=!1;vuPattern||(vuPattern=createPattern(res.vuTexture,"repeat-y"));this.fillTexture=vuPattern;this.ignoreGrad=
!1;this.ptimer=null;this.curpPos=this.curgPos=this.curPos=0;this.quant=this.isTicking=!1;this.vuGradH=0;this.vuGradGain=this.vuGrad4=this.vuGrad3=this.vuGrad2=this.vuGrad=null;this.disabled=!1},setValueExt:function(a,b){if(!settings.disableVUs)if(!this.globalEnabled())if(this.value=this.valueBg=bound(b,0,4),this.ghostValue=this.ghostValueBg=bound(a,0,4),this.valueBg>this.pValue)this.pValue=this.valueBg,this.pFallVelocity=0,clearTimeout(this.ptimer),this.ptimer=null;else{var c=this;null==this.ptimer&&
(this.ptimer=setTimeout(function(){c.pFallVelocity=GLOBAL_VU_FALL_SPEED/2;c.isTicking||(c.isTicking=!0,regTick(c));c.ptimer=null},PEAK_HOLD_TIME))}else if(!(.005>Math.abs(b-this.valueBg)&&.005>Math.abs(a-this.ghostValueBg))){this.valueBg=bound(b,0,4);this.ghostValueBg=bound(a,0,4);var d=!1,f=!1,e=this.h*this.valueBg|0;e>this.h%12&&(e=e-e%12+this.h%12);this.curPos!=e&&(this.value<this.valueBg?(this.value=this.valueBg,f=!0):(this.fallVelocity=GLOBAL_VU_FALL_SPEED,d=!0));settings.disableVUpeak||(this.pValue<
this.valueBg?(this.pValue=this.valueBg,this.pFallVelocity=0,clearTimeout(this.ptimer),this.ptimer=null):(c=this,null==this.ptimer&&(this.ptimer=setTimeout(function(){c.pFallVelocity=GLOBAL_PEAK_FALL_SPEED;c.isTicking||(c.isTicking=!0,regTick(c));c.ptimer=null},PEAK_HOLD_TIME))));this.disableVUghost||(e=this.h*this.ghostValueBg|0,e>this.h%12&&(e=e-e%12+this.h%12),this.curgPos!=e&&(this.ghostValue<this.ghostValueBg?(this.ghostValue=this.ghostValueBg,f=!0):(this.ghostFallVelocity=GLOBAL_VU_FALL_SPEED,
d=!0)));d&&!this.isTicking&&(this.isTicking=!0,regTick(this));f&&regUpdate(this)}},reset:function(){this.pValue=this.ghostValue=this.ghostValueBg=this.value=this.valueBg=0;regUpdate(this)},tick:function(){var a=!1,b=!1;if(this.value<=this.valueBg)this.value=this.valueBg;else{this.value-=this.fallVelocity;this.fallVelocity+=GLOBAL_VU_FALL_ACC;this.value<this.valueBg?this.value=this.valueBg:a=!0;var c=this.h*this.value|0;settings.vuquantise&&c>this.h%12&&(c=c-c%12+this.h%12);this.curPos!=c&&(b=!0)}this.disableVUghost||
(this.ghostValue<=this.ghostValueBg?this.ghostValue=this.ghostValueBg:(this.ghostValue-=this.ghostFallVelocity,this.ghostFallVelocity+=GLOBAL_VU_FALL_ACC,this.ghostValue<this.ghostValueBg?this.ghostValue=this.ghostValueBg:a=!0,c=this.h*this.ghostValue|0,settings.vuquantise&&c>this.h%12&&(c=c-c%12+this.h%12),this.curgPos!=c&&(b=!0)));settings.disableVUpeak||(this.pValue<=this.valueBg?this.pValue=this.valueBg:0<this.pValue&&0<this.pFallVelocity&&(this.pValue-=this.pFallVelocity,this.pFallVelocity+=
GLOBAL_PEAK_FALL_ACC,this.pValue<this.valueBg?this.pValue=this.valueBg:a=!0,c=this.h*this.pValue|0,settings.vuquantise&&c>this.h%12&&(c=c-c%12+this.h%12),this.curpPos!=c&&(b=!0)));a?regTick(this):this.isTicking=!1;b&&regUpdate(this)},setPos:function($super,b,c,d){$super(b,c);this.bottomMargin=d},calcGeometry:function(){},onResize:function(){this.createGradient()},createGradient:function(){this.vuGradH==this.h||this.ignoreGrad||1>this.h||(this.vuGrad=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad.addColorStop(0,
"green"),this.vuGrad.addColorStop(.5,"yellow"),this.vuGrad.addColorStop(1,"red"),this.vuGrad2=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad2.addColorStop(0,"#494"),this.vuGrad2.addColorStop(.5,"#aa3"),this.vuGrad2.addColorStop(1,"#d44"),this.vuGrad3=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad3.addColorStop(0,"#345C7F"),this.vuGrad3.addColorStop(1,"#698CAF"),this.vuGrad4=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad4.addColorStop(0,"#296BA0"),this.vuGrad4.addColorStop(1,"#60A5EA"),
this.vuGradGain=ctx.createLinearGradient(0,this.h,0,0),this.vuGradGain.addColorStop(0,"#FF9900"),this.vuGradGain.addColorStop(1,"#FF0000"),this.vuGradH=this.h)},paint:function(){ctx.fillStyle=this.disabled?"#000":color.vuBg;ctx.fillRect(0,0,this.w,this.h);this.disabled&&(ctx.globalAlpha=.3);if(!settings.disableVUs){var a=this.h*this.value|0;settings.vuquantise&&a>this.h%12&&(a=a-a%12+this.h%12);this.curPos=a;a=bound(a,0,this.h);ctx.fillStyle=this.gain?this.vuGradGain:settings.dimVUs?this.vuGrad2:
this.vuGrad;ctx.fillRect(2,this.h-a,this.w-4,a);if(!settings.disableVUghost){var b=this.h*this.ghostValue|0;settings.vuquantise&&b>this.h%12&&(b=b-b%12+this.h%12);this.curgPos=b;b=bound(b,0,this.h);b>a&&(ctx.fillStyle=1>a?this.vuGrad4:this.vuGrad3,ctx.fillRect(2,this.h-b,this.w-4,b-a))}settings.disableVUpeak||(a=this.h*this.pValue|0,settings.vuquantise&&a>this.h%12&&(a=a-a%12+this.h%12),this.curpPos=a,12<a&&a<this.h&&(ctx.fillStyle=this.gain?this.vuGradGain:settings.dimVUs?this.vuGrad2:this.vuGrad,
ctx.fillRect(2,this.h-a,this.w-4,settings.vuquantise?12:5)))}ctx.fillStyle=this.fillTexture;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#090B0F";ctx.fillRect(0,this.h-2,this.w,2);ctx.fillRect(0,0,this.w,2)}}),GRMeter=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GRMeter";this.DYNAMIC_WIDGET=!0;this.w=measures.vuWidth;this.h=60;this.ignoreEvents=!0;this.pFallVelocity=this.fallVelocity=this.valueBg=this.value=0},tick:function(){},setValue:function(a){settings.disableVUs||
(a=bound(a/COMP_SCALE,0,1),.01>Math.abs(a-this.value)||(this.value=a,regUpdate(this)))},paint:function(){ctx.fillStyle="#52545A";ctx.fillRect(0,0,this.w,this.h);if(.015<this.value){var a=(this.h-4)*this.value|0,a=bound(a,0,this.h);1<a&&(ctx.fillStyle="#800",ctx.fillRect(2,2,this.w-4,a),ctx.fillStyle="#f00",ctx.fillRect(2,a+2,this.w-4,1));2<a&&(ctx.fillStyle="#b00",ctx.fillRect(2,a-1+2,this.w-4,1))}ctx.fillStyle=vuPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#090B0F";ctx.fillRect(0,this.h-
2,this.w,2);ctx.fillRect(0,0,this.w,2)}}),GATEind=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GRMeter";this.DYNAMIC_WIDGET=!0;this.h=this.w=measures.vuWidth;this.value=this.ignoreEvents=!0},setValue:function(a){this.value!=a&&(this.value=a,regUpdate(this))},paint:function(){ctx.fillStyle="#111";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#494B51";ctx.fillRect(2,2,this.w-4,this.h-4);ctx.strokeStyle="rgba(0,0,0,0.1)";ctx.strokeRect(.5,.5,this.w-1,this.h-1);if(!this.value){ctx.fillStyle=
"#e11";var a=2;ctx.fillRect(a,a,this.w-2*a,this.h-2*a);ctx.strokeStyle="rgba(0,0,0,0.8)";ctx.lineWidth=2;a=3;ctx.beginPath();ctx.moveTo(a,a);ctx.lineTo(this.w-a,this.h-a);ctx.moveTo(this.w-a,a);ctx.lineTo(a,this.h-a);ctx.stroke()}}}),ModeButton=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="ModeButton";this.state=0;this.disabled=!1;this.mode=c;this.img2=this.img1=this.img0=this.mode2=null;this.transMode=!1;this.clr0="#424242";this.clr1="#9036b5";this.clr2="#00c"},
setMode2:function(a){this.mode2=a},setImages:function(a,b){null!=a&&(this.img0=a,this.img1=b,this.w=this.img0.w(),this.h=this.img0.h())},onDown:function(){if(!this.disabled)switch(this.valueFunc(),this.state){case 0:setMode(this.mode);break;case 1:null!=this.mode2?setMode(this.mode2):setMode(E_MODE.MIX);break;case 2:null!=this.mode2?setMode(this.mode):setMode(E_MODE.MIX)}},setState:function(a){this.state=a},valueFunc:function(){},getState:function(){this.state=mode==this.mode?1:null!=this.mode2&&
this.mode2==mode?2:0},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha=.6);if(this.transMode)switch(ctx.roundRect(4,6,this.w-8,this.h-14,4),this.state){case 0:ctx.fillStyle=this.clr0;ctx.fill();this.img0&&drawImage(this.img0,0,0);break;case 1:ctx.fillStyle=this.clr1;ctx.fill();this.img0&&drawImage(this.img1,0,0);break;case 2:ctx.fillStyle=this.clr2,ctx.fill(),this.img0&&drawImage(this.img1,0,0)}else{switch(this.state){case 0:null!=this.img0?drawImage(this.img0,0,0):(ctx.fillStyle=
"rgba(60,60,60,0.7)",ctx.fillRect(0,0,this.w,this.h));break;case 1:null!=this.img1?drawImage(this.img1,0,0):(null!=this.img0&&drawImage(this.img0,0,0),ctx.fillStyle="rgba(255,255,0,0.2)",ctx.fillRect(0,0,this.w,this.h));break;case 2:null!=this.img2?drawImage(this.img2,0,0):(ctx.fillStyle=color.red,ctx.fillRect(0,0,this.w,this.h))}this.disabled&&(ctx.globalAlpha=1)}}}),TabButton=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="TabButton";this.mode=this.state=0;this.text=
"null";this.img0=null;this.font=font.tabText;this.textColor=color.tabText;this.it=this.cosmetic=!1;this.w=111;this.h=30},onDown:function(){this.cosmetic?this.valueFunc():this.parent.setMode(this.mode)},setImage:function(a,b,c){this.img0=a;this.ix=b;this.iy=c},valueFunc:function(){this.parent.setMode(this.mode)},getState:function(){this.cosmetic||(this.state=this.parent.mode==this.mode?1:0)},paint:function(){this.getState();this.dsbld&&(ctx.globalAlpha=.4);0==this.state?(ctx.fillStyle=color.eqBg,ctx.fillRect(0,
0,this.w,this.h),ctx.strokeStyle=color.tabStroke,ctx.strokeRect(.5,.5,this.w-1,this.h-2),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),null!=this.img0?(this.it&&(ctx.globalAlpha=.4),drawImage(this.img0,this.ix,this.iy),this.it&&(ctx.globalAlpha=1)):(ctx.font=this.font,ctx.textAlign="center",ctx.fillStyle=color.black,ctx.fillText(this.text,this.w/2+1|0,23,this.w-4),ctx.fillStyle=this.textColor,ctx.fillText(this.text,this.w/2|0,22,this.w-4))):(isDefined(this.color)?ctx.fillStyle=
this.color:ctx.fillStyle=this.parent.color,ctx.fillRect(0,0,this.w,this.h),ctx.fillStyle=color.grad3,ctx.fillRect(0,0,this.w,7),null!=this.img0?(this.it&&(ctx.globalAlpha=.4),drawImage(this.img0,this.ix,this.iy),this.it&&(ctx.globalAlpha=1)):(ctx.font=font.tabTextSel,ctx.textAlign="center",ctx.fillStyle=color.black,ctx.fillText(this.text,this.w/2+1|0,23,this.w-4),ctx.fillStyle=color.tabTextSel,ctx.fillText(this.text,this.w/2|0,22,this.w-4),ctx.shadowColor="transparent"));this.dsbld&&(ctx.globalAlpha=
1)}}),CheckBox=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CheckBox";this.img2=this.img1=this.img0=this.param=null;this.state=0;this.opaque=!1;this.clr0="#3E3E3E";this.clr1="rgba(255,255,255,0.5)";this.linked=this.invisible=this.disabledHide=this.disabled=this.invertedValue=!1;this.holdTimer=null;this.stopClick=this.clickOnUp=this.needBG=this.longClickMark=!1;this.lmColor=color.longClickMark;this.text=null;this.textColorActive=this.textColor=color.white;this.shadowColorActive=
this.shadowColor=null;this.textMargin=3;this.textParam={font:font.tabText,x:null,y:null,offsetX:0,offsetY:-2,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:[color.black,0,1,1],dy:16};this.buttonMode=!1},setImages:function(a,b,c){isDefined(a)&&(this.img0=a,this.w=this.img0.w(),this.h=this.img0.h());this.img1=b;isDefined(c)&&(this.img2=c)},onDownB:function(){this.disabled||(this.longOk=!1,this.state=1,this.opaque?regUpdate(this.parent):regUpdate(this))},onUpB:function(){this.disabled||
(this.state=0,this.opaque?regUpdate(this.parent):regUpdate(this),this.valueFunc(),this.onToggle())},onDown:function(){if(this.buttonMode)return this.onDownB();this.stopClick=!1;if(!this.disabled){this.clickOnUp||this.doClick();var a=this;clearTimeout(this.holdTimer);this.onHold&&(this.holdTimer=setTimeout(function(){a.onHold();a.stopClick=!0},HOLD_TIME))}},onUp:function(){if(this.buttonMode)return this.onUpB();clearTimeout(this.holdTimer);this.clickOnUp&&!this.stopClick&&(clearTimeout(this.holdTimer),
this.doClick())},doClick:function(){switch(this.state){case 0:case !1:this.state=1;this.onToggleUp();break;case 1:case !0:this.state=0,this.onToggleDown()}null!=this.key&&this.setVal(this.state);this.linked&&null!=this.parent.linkTarget&&this.parent.linkTarget.setNameValue(this.param,this.state);this.onToggle();this.valueFunc(this.state);regUpdate(this.parent)},setState:function(a){this.state=a;regUpdate(this.parent)},onToggle:function(){},onToggleUp:function(){},onToggleDown:function(){},valueFunc:function(){},
getState:function(){},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();isDefined(this.state)&&null!=this.state||(this.state=0);if(!this.invisible){this.needBG&&(ctx.fillStyle=color.eqBg,ctx.fillRect(0,0,this.w,this.h));this.disabled&&(ctx.globalAlpha=this.disabledHide?0:.2);switch(this.state){case 0:case !1:this.invertedValue?this.drawDOWNState():this.drawUPState();break;case 1:case !0:this.invertedValue?this.drawUPState():this.drawDOWNState()}this.disabled&&(ctx.globalAlpha=
1);if(this.longClickMark){var a=4;if(this.invertedValue&&!this.state||!this.invertedValue&&this.state)a+=1;ctx.fillStyle=color.longClickMark2;ctx.fillCircle(this.w-6,a+1,3);ctx.fillStyle=color.longClickMark;ctx.fillCircle(this.w-6,a+1,2)}}},drawUPState:function(){null!=this.img0?drawImage(this.img0,0,0):(ctx.fillStyle=this.clr0,ctx.fillRect(0,0,this.w,this.h));if(this.text){var a=Math.floor(this.textParam.x||this.w/2)+this.textParam.offsetX,b=Math.floor(this.textParam.y||this.h/2)+this.textParam.offsetY;
ctx.fillStyle=this.textColor;this.textParam.max=this.w-2*this.textMargin;this.shadowColor&&(this.textParam.shadow[0]=this.shadowColor);this.disabled&&(this.textParam.shadow[0]="transparent");ctx.drawText(this.text,a,b,this.textParam)}},drawDOWNState:function(){null!=this.img1?drawImage(this.img1,0,0):(null!=this.img0&&drawImage(this.img0,0,0),ctx.fillStyle=this.clr1,ctx.fillRect(0,0,this.w,this.h));if(this.text){var a=Math.floor(this.textParam.x||this.w/2)+this.textParam.offsetX,b=Math.floor(this.textParam.y||
this.h/2)+this.textParam.offsetY,a=a+this.textParam.pressOffsetX,b=b+this.textParam.pressOffsetY;ctx.fillStyle=this.textColorActive||this.textColor;this.textParam.max=this.w-2*this.textMargin;this.shadowColorActive&&(this.textParam.shadow[0]=this.shadowColorActive);this.disabled&&(this.textParam.shadow[0]="transparent");ctx.drawText(this.text,a,b,this.textParam)}}}),Indicator=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CheckBox";this.img2=this.img1=this.img0=this.param=
null;this.state=0;this.clr0="#222";this.clr1="rgba(255,255,255,0.5)";this.clr2="#0f0"},setImages:function(a,b){this.img0=a;this.img1=b;this.w=this.img0.w();this.h=this.img0.h()},setState:function(a){this.state=a;regUpdate(this.parent)},getState:function(){},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();switch(this.state){case 0:null!=this.img0?drawImage(this.img0,0,0):(ctx.fillStyle=this.clr0,ctx.fillRoundRect(0,0,this.w,this.h,2));break;case 1:null!=this.img1?drawImage(this.img1,
0,0):(null!=this.img0&&drawImage(this.img0,0,0),ctx.fillStyle=this.clr1,ctx.fillRoundRect(0,0,this.w,this.h,2));break;case 2:null!=this.img2?drawImage(this.img2,0,0):(ctx.fillStyle=this.clr2,ctx.fillRoundRect(0,0,this.w,this.h,2))}}}),Button=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="Button";this.img2=this.img1=null;this.pressed=!1;this.timer=null;this.disabled=this.longClickMark=this.longOk=!1;this.disabledHide=!0;this.text=null;this.textColorActive=this.textColor=
color.white;this.textMargin=3;this.textParam={font:font.tabText,x:null,y:null,offsetX:0,offsetY:0,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:[color.black,0,1,1],dy:16}},setImages:function(a,b){this.img1=a;this.img2=b;this.w=this.img1.w();this.h=this.img1.h()},onDown:function(){if(!this.disabled){this.longOk=!1;this.pressed=!0;this.valueFunc();var a=this;clearTimeout(this.timer);this.longClickMark&&(this.timer=setTimeout(function(){a.onHold();a.longOk=!0},HOLD_TIME));this.opaque?
regUpdate(this.parent):regUpdate(this)}},onUp:function(){if(!this.disabled&&(clearTimeout(this.timer),this.pressed=!1,this.opaque?regUpdate(this.parent):regUpdate(this),!this.longOk))this.onPress()},onHold:function(){},valueFunc:function(){},onValue:function(){},onPress:function(){},getState:function(){},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha=this.disabledHide?0:.2);this.pressed?null!=this.img2?drawImage(this.img2,0,0):(ctx.fillStyle="red",ctx.fillRect(0,0,this.w,this.h)):
null!=this.img1?drawImage(this.img1,0,0):(ctx.fillStyle="#666",ctx.fillRect(0,0,this.w,this.h));if(this.text){var a=Math.floor(this.textParam.x||this.w/2)+this.textParam.offsetX,b=Math.floor(this.textParam.y||this.h/2)+this.textParam.offsetY;this.pressed?(a+=this.textParam.pressOffsetX,b+=this.textParam.pressOffsetY,ctx.fillStyle=this.textColorActive||this.textColor):ctx.fillStyle=this.textColor;this.textParam.max=this.w-2*this.textMargin;ctx.drawText(this.text,a,b,this.textParam)}this.longClickMark&&
(b=4,this.state&&(b+=1),ctx.fillStyle=color.longClickMark2,ctx.fillCircle(this.w-6,b+1,3),ctx.fillStyle=color.longClickMark,ctx.fillCircle(this.w-6,b+1,2));this.disabled&&(ctx.globalAlpha=1)}}),ClipBulb=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CLIP_INDICATOR";this.state=0;this.h=this.w=20;this.timer=null;this.master=!1;this.redrawParent=!0;this.releasing=!1},clip:function(){this.state||(this.state=1,this.releasing=!1,regUpdate(this))},release:function(){clearTimeout(this.timer);
this.releasing=!0;var a=this;this.timer=setTimeout(function(){a.state=0;regUpdate(a)},CLIP_HOLD_TIME)},paint:function(){0==this.state?drawImage(res.peakOFF,0,0):drawImage(res.peakON,0,0)}}),LED=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="LED";this.text="0.0 db";this.msg="Message";null!=this.parent&&(this.id=this.parent.id);this.state=0;this.color=color.ledText;this.holdtimer=this.timer=null;this.keyPrefix=this.parent.name;this.percentMode=!1;this.pkey="mix";this.master=
!1;this.lastClickTime=0;this.needStereo=!0},updateLevel:function(){if("undefined"!=typeof this.parent.sl||"undefined"!=typeof this.parent.slGain)if(mode==E_MODE.GAIN&&isDefined(this.parent.slGain)){var a=getValue(this.keyPrefix+"gain"),a=precision((IS_UI_24?VtoGAIN24:VtoGAINP)(a),1);this.text=(0<a?"+":"")+a+" dB";getValue(this.keyPrefix+"disablegain")&&(this.text="...")}else a=getValue(this.keyPrefix+this.pkey),this.text=VtoDB(a)},updateLevelByKey:function(){if(this.percentMode)this.text=(100*getValue(this.key)|
0)+"%";else{var a=getValue(this.key);this.text=VtoDB(a)}},updatePan:function(){if("undefined"!=typeof this.parent.pan){var a=getValue(this.keyPrefix+"pan"),a=VtoPAN(a);this.text=0<a?"R "+a:0>a?"L "+-a:lang.CENTER}},setState:function(a){this.state=a;this.parent.NEED_UPDATE=!0;regUpdate(this.parent)},setMsg:function(a){this.msg=a;this.state=2;regUpdate(this.parent)},clearMsg:function(){this.state=0;regUpdate(this.parent)},valueFunc:function(){},showPan:function(){this.state=1;var a=this;clearTimeout(this.timer);
this.timer=setTimeout(function(){a.setState(0)},1E3)},onDown:function(){this.valueFunc();var a=this;clearTimeout(this.holdtimer);this.holdtimer=setTimeout(function(){a.onHold()},HOLD_TIME)},onUp:function(){clearTimeout(this.holdtimer);log("x");var a=Date.now();a-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=a-DBL_CLK_TIME):this.lastClickTime=a},onPress:function(){},onHold:function(){var a=this;editOk.valueFunc=function(){a.onInput(editBox2.value)};showEditBox2(lang.NEW_VALUE,
"")},onDouble:function(){},onInput:function(a){showPopupMsg(""+a)},getState:function(){},getState2:function(){null==this.key?(0==this.state&&this.updateLevel(),1==this.state&&this.updatePan()):1==this.state?this.updatePan():this.updateLevelByKey()},paint:function(){this.getState();this.getState2();if(this.needStereo){var a=getValue(this.parent.name+"stereoIndex");0==a&&(ctx.fillStyle=this.parent.color,ctx.fillRect(0,1,this.w+5,2),ctx.beginPath(),ctx.triangle2(0,1,18,1,0,19),ctx.fill());1==a&&(ctx.fillStyle=
this.parent.color,ctx.fillRect(-5,1,this.w+4,2),ctx.beginPath(),ctx.triangle2(this.w-18,1,this.w,1,this.w,19),ctx.fill())}ctx.font=font.led;ctx.textAlign="center";2==this.state?(ctx.fillStyle=this.color,ctx.fillText(this.msg,this.w/2|0,27)):(ctx.fillStyle=this.color,ctx.fillText(this.text,this.w/2|0,27))}}),TopLED=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="LED";this.text="...";this.msg="MSG";this.w=160;this.h=50;this.state=0;this.color=color.ledText;this.msgColor=
"#FF0";this.clickTimer=this.timer=null;this.clickTime=-1;this.usbTimer=null;this.usbMTK=this.usbFill=0;IS_UI_24&&(this.regKey("var.mtk.soundcheck"),this.regKey("var.mtk.rec.currentState"),this.regKey("var.mtk.rec.busy"));this.regKey("var.recBusy");this.regKey("var.isRecording");var c=this;HAVE_MTK?this.usbTimer=setInterval(function(){var b=getValue("var.usbfill"),f=getValue("var.mtk.bufferfill");f>b?(b=f,c.usbMTK=1):c.usbMTK=0;b=bound(b,0,1);isNear(b,c.usbFill,.01)||(c.usbFill=b,regUpdate(c))},500):
HAVE_REC&&(this.usbTimer=setInterval(function(){var b=getValue("var.usbfill"),b=bound(b,0,1);isNear(b,c.usbFill,.01)||(c.usbFill=b,regUpdate(c))},500))},setText:function(a){this.text=a;this.state=0;regUpdate(this)},setMsg:function(a,b){this.msg=a;this.state=1;isDefined(b)&&(this.msgColor=b);regUpdate(this);clearTimeout(this.timer);var c=this;this.timer=setTimeout(function(){c.state=0;regUpdate(c)},3E3)},clearMsg:function(){clearTimeout(this.timer);this.state=0;regUpdate(this)},onDown:function(){this.clickTime=
Date.now();var a=this;clearTimeout(this.clickTimer);this.clickTimer=setTimeout(function(){a.onLong()},HOLD_TIME)},onUp:function(){clearTimeout(this.clickTimer);Date.now()-this.clickTime>HOLD_TIME||(this.menu=new SHOW_MENU(null),this.menu.color=this.color,regUpdate(this.menu))},onLong:function(){settingsWidget.setMode(2);setMode(E_MODE.SETTINGS)},paint:function(){drawImage(res.topBarLED,0,0);ctx.textAlign="center";ctx.font=font.topLed;var a=this.w/2|0;ctx.lineWidth=1;if(.9<=this.usbFill){ctx.fillStyle=
"#e11";ctx.strokeStyle="#e11";ctx.font="10pt open_sans_condensedbold";var b=lang.RECORDING_DROPOUT;this.usbMTK&&(b=lang.MTK+" "+b);ctx.fillText(b,a,20,this.w-16);ctx.strokeRect(20.5,23.5,120,10);ctx.fillRect(20,23,120*this.usbFill|0,10)}else if(.6<=this.usbFill)ctx.fillStyle="#e81",ctx.strokeStyle="#e81",ctx.font="10pt open_sans_condensedbold",b=lang.USB_REC_TOO_SLOW,this.usbMTK&&(b=lang.MTK+" "+b),ctx.fillText(b,a,20,this.w-16),ctx.strokeRect(20.5,23.5,120,10),ctx.fillRect(20,23,120*this.usbFill|
0,10);else if(.2<=this.usbFill)ctx.fillStyle="#ee1",ctx.strokeStyle="#ee1",ctx.font="10pt open_sans_condensedbold",b=lang.USB_REC_BUFFER,this.usbMTK&&(b=lang.MTK+" "+b),ctx.fillText(b,a,20,this.w-16),ctx.strokeRect(20.5,23.5,120,10),ctx.fillRect(20,23,120*this.usbFill|0,10);else if(0==this.state){var b=.5<getValue("var.recBusy"),c=.5<getValue("var.isRecording"),d=IS_UI_24&&.5<getValue("var.mtk.rec.busy");ctx.fillStyle=this.color;if(c&&b||d){ctx.font="11pt open_sans_condensedbold";ctx.fillStyle=color.yellow;
b=lang.RECORDER_IS_BUSY;if(this.usbMTK||d)b=lang.MTK+" "+b;ctx.fillText(b,a,30,this.w-16)}else(d=getValue("var.currentSnapshot"))&&0==d.length&&(d=lang.NO_SNAPSHOT),ctx.fillText(d,a,30,this.w-16)}else 1==this.state&&(ctx.fillStyle=this.msgColor,ctx.fillText(this.msg,a,30,this.w-16));IS_UI_24&&(a=getValue("var.mtk.rec.currentState"),d=getValue("var.mtk.soundcheck"),b=8,c=5,a&&(ctx.fillStyle=color.red,ctx.fillRoundRect(b,c,25,14,4),ctx.textAlign="left",ctx.font="8pt open_sans_condensedbold",ctx.fillStyle=
color.white,ctx.drawText("MTK",b+3,c+11,{shadow:[color.black,0,1,1]}),b+=27),d&&(ctx.fillStyle="#4FCA3F",ctx.fillRoundRect(b,c,16,14,4),ctx.textAlign="left",ctx.font="8pt open_sans_condensedbold",ctx.fillStyle=color.white,ctx.drawText("SC",b+3,c+11,{shadow:[color.black,0,1,1]})));netConnectState||(b=this.w-24,c=5,ctx.fillStyle="#E2464F",ctx.fillRoundRect(b,c,16,14,4),ctx.textAlign="left",ctx.font="10pt Arial",ctx.fillStyle=color.white,ctx.drawText("⚠",b+2,c+11,{shadow:[color.black,0,1,1]}))}});
function usbFillCheck(){}
var TopWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="TopWidget";this.y=this.x=0;this.needClip=!0;this.h=measures.topWidgetHeight;this.cachedStrip=null;this.cachedStripHeight=0;this.initWidgets()},initWidgets:function(){var a=31;this.bTOTAL=new ModeButton(this,E_MODE.MODALS);this.bTOTAL.setPos(a,13);this.bTOTAL.setImages(res.bTVOff,res.bTVOn);this.bTOTAL.getState=function(){this.state=mode==this.mode?1:null!=this.mode2&&this.mode2==mode?2:0;this.disabled=isPortrait};
this.bTOTAL.valueFunc=function(){modalsWidget.setMode(0)};a+=this.bTOTAL.w+4;this.bMix=new ModeButton(this,E_MODE.MIX);this.bMix.setPos(a,13);this.bMix.setImages(res.bMixGainOff,res.bMixGainOn);this.bMix.setMode2(E_MODE.GAIN);this.bMix.img2=res.bMixGain2;a+=this.bMix.w+26;this.bEDIT=new ModeButton(this,E_MODE.EDIT);this.bEDIT.setPos(a,13);this.bEDIT.transMode=!0;this.bEDIT.setImages(res.bEDITOff,res.bEDIT_T);this.bEDIT.getState=function(){this.state=mode==this.mode?1:null!=this.mode2&&this.mode2==
mode?2:0;this.disabled=isPortrait};this.bEDIT.valueFunc=function(){mode==E_MODE.AUX&&editWidget.setMode(editWidget.E_MODE.aux);mode==E_MODE.FXSENDS&&editWidget.setMode(editWidget.E_MODE.fx)};a+=this.bEDIT.w+26;this.bAUX=new ModeButton(this,E_MODE.AUX);this.bAUX.setPos(a,13);this.bAUX.setImages(res.bAUXOff,res.bAUXOn);a+=this.bAUX.w+5;this.bFX=new ModeButton(this,E_MODE.FXSENDS);this.bFX.setPos(a,13);this.bFX.setImages(res.bFXOff,res.bFXOn);a+=this.bFX.w+25;this.bPlayer=new CheckBox(this);this.bPlayer.setPos(a,
13);this.bPlayer.setImages(res.bPlayerOff,res.bPlayerOn);this.bPlayer.onHold=function(){setMode(E_MODE.PONG)};this.bPlayer.getState=function(){this.state=mode==E_MODE.PLAYER?1:0;this.disabled=isPortrait};this.bPlayer.onDown=function(){this.stopClick=!1;if(!this.disabled){this.clickOnUp||this.doClick();var a=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){a.onHold();a.stopClick=!0},4E3)}};this.bPlayer.onToggleUp=function(){setMode(E_MODE.PLAYER)};this.bPlayer.onToggleDown=function(){setMode(E_MODE.MIX)};
a+=this.bPlayer.w+3;this.bSet=new ModeButton(this,E_MODE.SETTINGS);this.bSet.setPos(a,13);this.bSet.setImages(res.bSettingsOff,res.bSettingsOn);this.bSet.getState=function(){this.state=mode==this.mode?1:null!=this.mode2&&this.mode2==mode?2:0;this.disabled=isPortrait};this.led=new TopLED(this);this.bLogo=new CheckBox(this);this.bLogo.setImages(res.topBarLogo,res.topBarLogo2);this.bLogo.getState=function(){this.state=slideOutWidget.enabled?1:0};DEPLOY||(this.bLogo.onHold=function(){confOk.valueFunc=
function(){location.reload()};showConfBox(lang.RELOAD_UI)});this.bLogo.onToggle=function(){clearInterval(ticker);toggleSlideOut()}},calcGeometry:function(){this.w=screenWidth;this.led.setPos(this.w-270,15);this.bLogo.setPos(this.w-this.bLogo.w-25,13);this.led.enabled=this.led.x>this.bSet.x+this.bSet.w+4;this.bLogo.enabled=this.bLogo.x>this.bSet.x+this.bSet.w+4},paint:function(){this.cachedStripHeight!=this.w&&this.cachePaint();ctx.drawImage(this.cachedStrip,0,0,this.w,this.h)},drawSeparator:function(a,
b){b.fillStyle="rgba(255,255,255,0.08)";b.fillRect(a-1,2,3,measures.topWidgetHeight-4);b.fillStyle="rgba(0,0,0,0.41)";b.fillRect(a,2,1,measures.topWidgetHeight-4)},cachePaint:function(){null!=this.cachedStrip&&delete this.cachedStrip;this.cachedStrip=document.createElement("canvas");var a=this.cachedStrip.getContext("2d");isRetina?(this.cachedStrip.width=2*this.w,this.cachedStrip.height=2*this.h,a.scale(2,2)):(this.cachedStrip.width=this.w,this.cachedStrip.height=this.h);a.fillStyle="#E3E3E4";a.fillRect(0,
0,this.w,this.h);fillHorPatternCtx(res.topBarTile,this.w,a);979<this.w&&drawImageCtx(res.topBarRight,this.w-res.topBarRight.w(),0,a);drawImageCtx(res.topBarLeft,0,0,a);this.drawSeparator(191,a);this.drawSeparator(309,a);this.drawSeparator(524,a);this.cachedStripHeight=this.w}});velocity=ticker=null;amplitude=position=0;timestamp=null;step=frame=0;
function syncHPAUX(){HAVE_HP&&(hideHPAUX=0==getValue("var.hpaux"),null==inView?mixerWidget.showAll():mixerWidget.arrangeStrips("syncHPAUX"),editWidget.pages[editWidget.E_MODE.aux].sync(),hideHPAUX&&auxWidget.mode>curSetup.aux-3&&auxWidget.setMode(0),mode==E_MODE.AUXSENDS&&(auxWidget.onShow(),regUpdate(auxWidget)),regUpdate(settingsWidget))}
var BottomWidget2=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="BottomWidget2";this.x=0;this.h=measures.bottomWidgetHeight;this.needClip=this.needMoveEvt=!0;this.step=measures.mixerStripWidth;this.rw=0;this.holdTimer=null;this.IDS=[0];this.maxOffset=0;this.color="white";this.ownColor=!1;this.COLORS=["red"];this.move=this.editMode=!1;this.scrollX=this.touchID=-1;this.internia=0;this.prevSelected=this.lastClickTime=-1;this.grd=null;this.strips_arr=allStrips},addFrom:function(a,
b){for(var c=0;c<a.length;c++)(a[c].enabled||isDefined(b))&&this.IDS.push(a[c].id)},addFrom2:function(a){for(var b=0;b<a.length;b++)this.IDS.push(a[b].id),this.COLORS.push(a[b].color)},upd:function(){this.ownColor=!1;this.rw=0;this.IDS=[];this.COLORS=[];this.editMode=!1;this.strips_arr=mixerWidget.strips;switch(mode){default:var a=!1;mode!=E_MODE.EDIT&&(this.ownColor=!0);if(0<=activeViewGroup&&10>activeViewGroup&&inView){var b=[];inView.forEach(function(a){b.push(allStrips[a])});for(var c=0;c<b.length;c++){var d=
b[c];mode==E_MODE.EDIT&&d.type==E_STRIP_TYPE.VCA||!d.enabled||(this.IDS.push(d.id),this.COLORS.push(d.color))}break}settings.mediaFirst&&(this.addFrom(mediaStrips),mediaStrips[0].enabled&&this.COLORS.push(mediaStrips[0].color),mediaStrips[1].enabled&&this.COLORS.push(mediaStrips[1].color),a=!0);for(c=0;c<this.strips_arr.length;c++)d=this.strips_arr[c],mode==E_MODE.EDIT&&d.type==E_STRIP_TYPE.VCA||!d.enabled||a&&d.type==E_STRIP_TYPE.MEDIA||(this.IDS.push(d.id),this.COLORS.push(d.color));break;case E_MODE.GAIN:this.color=
color.INPUT;this.strips_arr=gainMixer.strips;this.addFrom(this.strips_arr);break;case E_MODE.AUX:if(auxWidget.page2&&auxWidget.page2.enabled)this.ownColor=!1,this.color=color.MATRIX,this.addFrom(mtxSendStrips);else{this.ownColor=!0;this.color=color.AUX;this.addFrom(inStrips,!0);this.addFrom(lineinStrips,!0);this.addFrom(mediaStrips,!0);this.addFrom(fxStrips,!0);for(c=0;c<inStrips.length;c++)this.COLORS.push(color.AUX);for(c=0;c<lineinStrips.length;c++)this.COLORS.push(color.LINEIN);for(c=0;c<mediaStrips.length;c++)this.COLORS.push(color.media);
for(c=0;c<fxStrips.length;c++)this.COLORS.push(color.blue)}break;case E_MODE.FXSENDS:this.color=color.blue;this.ownColor=!0;this.addFrom(inStrips,!0);this.addFrom(lineinStrips,!0);this.addFrom(mediaStrips,!0);this.addFrom(subStrips,!0);for(c=0;c<inStrips.length;c++)this.COLORS.push(fxSendsWidget.page.color);for(c=0;c<lineinStrips.length;c++)this.COLORS.push(color.LINEIN);for(c=0;c<mediaStrips.length;c++)this.COLORS.push(color.media);for(c=0;c<subStrips.length;c++)this.COLORS.push(color.sub)}this.rw=
this.IDS.length*this.step;this.maxOffset=this.rw-this.w;0>this.maxOffset&&(this.maxOffset=0)},onDown:function(a,b,c){this.pressPoint=[a,b];this.prX=a-this.x+this.offsetX;this.dx=0;this.touchID=c;this.move=!0;if(!((this.prX/this.step|0)>=this.IDS.length)){var d=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){d.onHold()},HOLD_TIME);this.velStart()}},onMove:function(a,b,c){this.touchID!=c||!this.move||0<scrollLock||(this.dx=a-this.pressPoint[0],3<Math.abs(this.dx)&&clearTimeout(this.holdTimer),
this.setOffset(this.offsetXold-this.dx*SCROLL_SCALE))},onUp:function(a){if(this.touchID==a||-123==a){clearTimeout(this.holdTimer);if(8>Math.abs(this.dx)){var b=this.prX/this.step|0;if(0<=b&&b<this.IDS.length){var c=this.IDS[b];mode==E_MODE.GAIN&&777==this.strips_arr[c].type||this.setSelected(this.IDS[b])}}this.move=!1;this.touchID=-1;this.pressPoint=[-1,-1];this.offsetXold=this.offsetX;c=Date.now();(!IS_UI_24||this.IDS[b]<vcaStrips[0].id)&&c-this.lastClickTime<DBL_CLK_TIME&&-123!=a&&8>Math.abs(this.dx)?
(this.onDouble(),this.lastClickTime=c-DBL_CLK_TIME):(this.lastClickTime=c,this.prevSelected=selectedChannel,this.velRelease())}},onHold:function(a){if(0==mWidgets.length){if(!a)this.onUp(-123);bottomWidget.move=!1;switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.VCA:break;default:return}if(mode==E_MODE.EDIT){a=this.prX/this.step|0;if(a>=this.IDS.length)return;this.setSelected(this.IDS[a])}if(-1!=selectedChannel){a=new STRIPMENU(null,selectedStrip);
var b=bottomWidget.IDS.indexOf(selectedStrip.id);a.x=bottomWidget.x+b*measures.mixerStripWidth-bottomWidget.offsetX-20;a.x=bound(a.x,0,screenWidth-a.w);a.y=screenHeight-a.h-measures.bottomWidgetHeight;mWidgets.push(widgets.pop());regUpdate(a)}}},onDouble:function(){if(this.prevSelected==selectedChannel){var a=this.prX/this.step|0,b=!0;0>a&&a>=this.IDS.length&&(b=!1);a=this.IDS[a];mode==E_MODE.GAIN&&777==this.strips_arr[a].type&&(b=!1);b&&(mode!=E_MODE.EDIT?(selectedStrip.type==E_STRIP_TYPE.FX?editWidget.setMode(editWidget.E_MODE.fx):
editWidget.setMode(editWidget.E_MODE.dyn),setMode(E_MODE.EDIT)):setMode(lastMode))}},setSelected:function(a){setSelected(a)},velStart:function(){velocity=amplitude=0;timestamp=Date.now();clearInterval(ticker);frame=bottomWidget.offsetX;ticker=setInterval(this.velTrack,1E3/fps)},velTrack:function(){var a,b;a=Date.now();b=a-timestamp;timestamp=a;a=bottomWidget.offsetX-frame;frame=bottomWidget.offsetX;b=1E3*a/(1+b);velocity=0==velocity?b:.3*b+.7*velocity},velRelease:function(){clearInterval(ticker);
Date.now()-timestamp<1E3/fps&&this.velTrack();5<Math.abs(velocity)&&this.mScroll(velocity)},mScroll:function(a){if(!settings.kinetic){var b=1E3/fps;position=this.offsetX;amplitude=.2*a;step=0;var c=this;clearInterval(ticker);ticker=setInterval(function(){var a=amplitude/b*2;position+=a;amplitude-=a;step+=1;.5>Math.abs(a)&&clearInterval(ticker);step>3*fps&&clearInterval(ticker);(0>=position||position>c.maxOffset)&&clearInterval(ticker);c.offsetX!=(position|0)&&c.setOffset(position|0)},b)}},syncOffset:function(){switch(mode){case E_MODE.GAIN:case E_MODE.MIX:gainMixer.setOffset(this.offsetX);
mixerWidget.setOffset(this.offsetX);break;case E_MODE.AUX:auxWidget.setOffset(this.offsetX);break;case E_MODE.FXSENDS:fxSendsWidget.setOffset(this.offsetX)}},startScroll:function(a,b){scrollLock||mixerTouches!=(settings.oneFingerScroll?1:2)&&b!=mouseID||this.move||(this.touchID=b,this.scrollX=a,this.move=!0,this.velStart())},setScroll:function(a,b){scrollLock||mixerTouches!=(settings.oneFingerScroll?1:2)&&b!=mouseID||this.touchID!=b||(this.offsetX=bound(this.offsetXold-(a-this.scrollX)*SCROLL_SCALE|
0,0,this.maxOffset),this.syncOffset(),regUpdate(this),this.velTrack())},endScroll:function(a){this.touchID==a&&(this.touchID=this.scrollX=-1,this.move=!1,this.offsetXold=this.offsetX,this.velRelease())},setOffset:function(a){this.offsetX=bound(a|0,0,this.maxOffset);this.move||(this.offsetXold=this.offsetX);this.syncOffset();regUpdate(this)},setOffset2:function(a){this.offsetXold=this.offsetX=bound(a|0,0,this.maxOffset);regUpdate(this)},gotoID:function(a){clearInterval(ticker);0>a||(a=this.IDS.indexOf(a),
0<=a&&this.setOffset(a*this.step))},gotoID2:function(a){clearInterval(ticker);0>a||(a=this.IDS.indexOf(a),0<=a&&(a*=this.step,(a-this.offsetX>this.w-this.step||0>a-this.offsetX)&&this.setOffset(a+this.step-this.w)))},gotoID3:function(a){clearInterval(ticker);0>a||(a=this.IDS.indexOf(a),0<=a&&(a*=this.step,(0>a-this.offsetX||a-this.offsetX>this.w)&&this.setOffset(a)))},gotoIDmid:function(a){clearInterval(ticker);0>a||(a=this.IDS.indexOf(a),-1!=a&&(a=measures.mixerStripWidth*a-(this.w-measures.mixerStripWidth)/
2,this.setOffset(a|0),mixerWidget.setOffset(a|0)))},goLeft:function(){this.setOffset(this.offsetX-measures.mixerStripWidth*curSetup.bankSize);this.syncOffset()},goRight:function(){this.setOffset(this.offsetX+measures.mixerStripWidth*curSetup.bankSize);this.syncOffset()},gotoSelected:function(){this.gotoID(selectedStrip.id)},gotoAUX:function(){this.gotoID(auxStrips[0].id)},gotoFX:function(){this.gotoID(fxStrips[0].id)},gotoSUB:function(){this.gotoID(subStrips[0].id)},gotoStart:function(){this.setOffset(0)},
gotoEnd:function(){this.setOffset(this.maxOffset)},calcGeometry:function(){this.w=screenWidth;masterWidget.enabled&&(this.w-=masterWidget.w);fxoutWidget.enabled&&(this.w-=fxoutWidget.w);auxoutWidget.enabled&&(this.w-=auxoutWidget.w);this.x=editStripWidget.enabled?editStripWidget.w:0;this.w-=this.x;slideOutWidget.enabled&&(this.w-=slideOutWidget.w);this.y=screenHeight-this.h;this.maxOffset=this.rw-this.w;0>this.maxOffset&&(this.maxOffset=0);this.offsetX>this.maxOffset&&(this.offsetXold=this.offsetX=
this.maxOffset,this.syncOffset())},paint:function(){ctx.fillStyle=color.botBG;ctx.fillRect(this.offsetX,0,this.w,this.h);var a=this.IDS.length;if(a*measures.mixerStripWidth<this.w)for(var b=a*measures.mixerStripWidth;b<this.w;b+=measures.mixerStripWidth)drawImage(res.blStripLabel,b,0);var b=this.offsetX/this.step|0,c=(this.offsetX+this.w)/this.step|0;ctx.font=font.botChLabel;ctx.textAlign="center";for(var d=0,f=0;f<a;f++)if(!(f<b)){if(f>c)break;var e=this.IDS[f],g=this.step*f;drawImage(res.stripLabel,
g,0);d++;var h=color.labelText;switch(mode){case E_MODE.EDIT:switch(this.strips_arr[e].type){case E_STRIP_TYPE.IN:h="#C97247";break;case E_STRIP_TYPE.AUX:h=color.AUX;break;case E_STRIP_TYPE.FX:h=color.blue;break;case E_STRIP_TYPE.SUB:h="#CC88A2";break;case E_STRIP_TYPE.MEDIA:h="#AB2152";break;case E_STRIP_TYPE.LINEIN:h=color.LINEIN}this.color=editWidget.buttons[editWidget.mode].color;break;case E_MODE.GAIN:this.color=color.red}ctx.fillStyle=h;var l=!1;-1!=e&&1==Math.abs(selectedChannel-e)&&(l=this.strips_arr[e].getNameValue("stereoIndex"),
l=1==l&&selectedChannel==e-1||0==l&&selectedChannel==e+1);var m=selectedChannel==e;mode==E_MODE.GAIN&&(777==this.strips_arr[e].type&&(m=!1,h="#888"),l=!1);if(m||l)ctx.fillStyle=this.ownColor?this.COLORS[f]:this.color,l&&(ctx.fillStyle=hexToRGBA(ctx.fillStyle,.5)),ctx.fillRect(g+2,0,this.step-4,this.h-2),ctx.translate(0,this.h-7),ctx.fillStyle=color.grad4,l||ctx.fillRect(g+3,0,this.step-6,5),ctx.translate(0,-(this.h-7)),ctx.fillStyle=color.labelTextSel;e=-1==e?lang.MASTER:this.strips_arr[e].getName();
ctx.fillStyle=color.black;ctx.fillText(e,g+this.step/2+2|0,25,this.step-6);ctx.fillStyle=m||l?color.labelTextSel:h;ctx.fillText(e,g+this.step/2|0,24,this.step-6)}0<this.maxOffset&&(ctx.fillStyle="#99b",a=this.w-2,ctx.fillRect(this.offsetX+2+(this.offsetX/(this.maxOffset+this.w)*a|0),this.h-3,this.w/(this.maxOffset+this.w)*a|0,2))}}),MainMixer=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MainMixer";this.y=measures.topWidgetHeight;this.needClip=!0;this.mode=0;this.strips=
[];this.muteBackup=[];this.moveX=this.moveTID=-1;this.vis=this.realWidth=0;this.createStrips()},addButtons:function(a){a.mute=new CheckBox(a);a.mute.setPos(4,89);a.mute.setImages(res.bMuteOff,null);a.mute.setSize(50,30);a.solo=new CheckBox(a);a.solo.setPos(57,87);a.solo.setImages(res.bSoloOff,res.bSoloOn);a.solo.setSize(50,30);a.phantom=new CheckBox(a);a.phantom.enabled=!1;a.phantom.setPos(4,89);a.phantom.setImages(res.bPhantomOff,null);a.phantom.setSize(102,30)},setMode:function(a){},createStrips:function(){for(var a=
curSetup.input,b=curSetup.fx,c=curSetup.linein,d=curSetup.sub,f=curSetup.aux,e=0,g=0;g<a;g++){var h=new Strip(this,e,E_STRIP_TYPE.IN,g);0==g&&(h.firstInGroup=!0);g==a-1&&(h.lastInGroup2=h.lastInGroup=!0);h.text="CH "+(g+1);this.strips.push(h);inStrips.push(h);allStrips.push(h);e++}for(g=0;g<c;g++)h=new Strip(this,e,E_STRIP_TYPE.LINEIN,g),0==g&&(h.firstInGroup=!0),g==c-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="LINE IN "+(0==g?"L":"R"),1<g&&(h.text+=" "+Math.floor(g/2+1)),h.label="LINE IN "+(0==
g?"L":"R"),allStrips.push(h),lineinStrips.push(h),this.strips.push(h),e++;h=new Strip(this,e,E_STRIP_TYPE.MEDIA,0);h.firstInGroup=!0;h.lastInGroup=!1;h.text="PLAYER L";h.label="MEDIA L";allStrips.push(h);mediaStrips.push(h);this.strips.push(h);e++;h=new Strip(this,e,E_STRIP_TYPE.MEDIA,1);h.firstInGroup=!1;h.lastInGroup2=h.lastInGroup=!0;h.text="PLAYER R";h.label="MEDIA R";allStrips.push(h);mediaStrips.push(h);this.strips.push(h);e++;for(g=0;g<b;g++)h=new Strip(this,e,E_STRIP_TYPE.FX,g),0==g&&(h.firstInGroup=
!0),g==b-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="FXR "+(g+1),this.strips.push(h),fxStrips.push(h),allStrips.push(h),e++;for(g=0;g<d;g++)h=new Strip(this,e,E_STRIP_TYPE.SUB,g),0==g&&(h.firstInGroup=!0),g==d-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="SUB "+(g+1),h.SGIDX=g,this.strips.push(h),subStrips.push(h),allStrips.push(h),e++;for(g=0;g<f;g++)h=new Strip(this,e,E_STRIP_TYPE.AUX,g),0==g&&(h.firstInGroup=!0),g==f-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="AUX "+(g+1),this.strips.push(h),
auxStrips.push(h),allStrips.push(h),e++;allStripsNoVca=copyObject(allStrips);if(IS_UI_24)for(g=0;6>g;g++)h=new Strip(this,e,E_STRIP_TYPE.VCA,g),0==g&&(h.firstInGroup=!0),g==f-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="VCA "+(g+1),this.strips.push(h),vcaStrips.push(h),allStrips.push(h),e++;this.arrangeStrips("createStrips")},arrangeStrips:function(a){if(mode!=E_MODE.PLAYER){var b=0;a=this.strips;var c=0<=activeViewGroup&&10>activeViewGroup&&inView;settings.mediaFirst&&!c&&(mediaStrips[0].enabled&&
(b+=1),mediaStrips[1].enabled&&(b+=1));for(var d=auxStrips.length-2;d<auxStrips.length;d++)inView&&inView.contains(auxStrips[d].id)?auxStrips[d].enabled=!hideHPAUX:hideHPAUX&&(auxStrips[d].enabled=!1);for(var f=0,d=0;d<a.length;d++){var e=a[d];if(e.enabled){f++;if(c)b=inView.indexOf(e.id),e.firstInGroup=!0,e.lastInGroup=!0;else if(settings.mediaFirst&&e.type==E_STRIP_TYPE.MEDIA){e.x=e.subId*measures.mixerStripWidth;continue}e.x=b*measures.mixerStripWidth;b++}}var b=-1,g=null;if(!c)for(d=0;d<a.length;d++)e=
a[d],e.enabled?(b!=e.type?(e.firstInGroup=!0,e.lastInGroup=!1,null!=g&&(g.lastInGroup=!0),b=e.type):(e.firstInGroup=!1,e.lastInGroup=!1),g=e):(e.firstInGroup=!1,e.lastInGroup=!1);g&&(g.lastInGroup=!0);this.realWidth=f*measures.mixerStripWidth;this.vis=f}},gotoEnd:function(){var a=this.vis*measures.mixerStripWidth-this.w;0>a&&(a=0);this.setOffset(a);this.syncOffset()},gotoStart:function(){this.setOffset(0);this.syncOffset()},gotoIdx:function(a){a>this.strips.length||(this.setOffset(this.strips[a].x),
this.syncOffset())},gotoBank:function(a){var b=curSetup.bankSize*a;0>b||b>this.strips.length-1||(bankIdx=a,this.setOffset(this.strips[b].x),this.syncOffset())},goLeft:function(){this.setOffset(this.offsetX-this.w);this.syncOffset()},goRight:function(){this.setOffset(this.offsetX+this.w);this.syncOffset()},gotoFX:function(){clearInterval(ticker);this.setOffset(fxStrips[fxStrips.length-1].x+measures.mixerStripWidth-this.w,!0);this.syncOffset()},gotoAUX:function(){clearInterval(ticker);this.setOffset((auxStrips[auxStrips.length-
1].id+1)*measures.mixerStripWidth-bottomWidget.w,!0);this.syncOffset()},gotoSUB:function(){clearInterval(ticker);this.setOffset(subStrips[subStrips.length-1].x+measures.mixerStripWidth-this.w,!0);this.syncOffset()},syncOffset:function(){mode!=E_MODE.MODALS&&(bottomWidget.setOffset2(this.offsetX),bottomWidget.offsetX!=this.offsetX&&this.setOffset(bottomWidget.offsetX))},onShow:function(){this.syncOffset()},onDown:function(){clearInterval(ticker)},muteFX:function(){if(isBlocked())showPopupMsg(lang.LOCKED,
1E3);else{for(var a=getValue("mgmask")|1<<MUTEFX_BIT_IDX,b=0;b<fxStrips.length;b++){var c=fxStrips[b];c.setNameValue("forceunmute",0);regUpdate(c)}setValue("mgmask",a);topWidget.led.setMsg(lang.MUTE_FX);showPopupMsg(lang.MUTE_FX,1E3);mode==E_MODE.MODALS&&regUpdate(tvWidget);regUpdate(editWidget);regUpdate(fxoutWidget);regUpdate(auxWidget);checkMutes()}},unMuteFX:function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask"),b=a&~(1<<MUTEFX_BIT_IDX),c=checkBit(a,MUTEALL_BIT_IDX),
d=0;d<fxStrips.length;d++){var f=fxStrips[d],e=f.getNameValue("mgmask");1!=f.getNameValue("forceunmute")||0!=(e&a)||c||(f.setNameValue("forceunmute",0),f.setNameValue("mute",0));regUpdate(f)}setValue("mgmask",b);topWidget.led.setMsg(lang.MUTE_FX_CANCEL);showPopupMsg(lang.MUTE_FX_CANCEL,1E3);mode==E_MODE.MODALS&&regUpdate(tvWidget);regUpdate(editWidget);regUpdate(fxoutWidget);regUpdate(auxWidget);checkMutes()}},clearSolos:function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=0;a<allStrips.length;a++)allStrips[a].setNameValue("solo",
0);checkSolos();topWidget.led.setMsg(lang.CLEAR_ALL_SOLOS);showPopupMsg(lang.CLEAR_ALL_SOLOS,1E3)}},muteAll:function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask")|1<<MUTEALL_BIT_IDX,b=0;b<allStrips.length;b++)allStrips[b].setNameValue("forceunmute",0);setValue("mgmask",a);topWidget.led.setMsg(lang.MUTE_ALL);showPopupMsg(lang.MUTE_ALL,1E3);mode==E_MODE.MODALS&&regUpdate(modalsWidget.pages[0]);regUpdate(this);regUpdate(auxoutWidget);regUpdate(fxoutWidget);regUpdate(editWidget);
regUpdate(auxWidget);regUpdate(playerStrips);regUpdate(editStripWidget);checkMutes()}},cancelMuteAll:function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask"),b=a&~(1<<MUTEALL_BIT_IDX),c=checkBit(a,MUTEFX_BIT_IDX),d=0;d<allStrips.length;d++){var f=allStrips[d],e=f.getNameValue("mgmask");1!=f.getNameValue("forceunmute")||0!=(e&a)||c&&f.type==E_STRIP_TYPE.FX||(f.setNameValue("forceunmute",0),f.setNameValue("mute",0))}setValue("mgmask",b);topWidget.led.setMsg(lang.MUTE_ALL_CANCEL);
showPopupMsg(lang.MUTE_ALL_CANCEL,1E3);mode==E_MODE.MODALS&&regUpdate(modalsWidget.pages[0]);regUpdate(this);regUpdate(auxoutWidget);regUpdate(fxoutWidget);regUpdate(editWidget);regUpdate(auxWidget);regUpdate(playerStrips);regUpdate(editStripWidget);checkMutes()}},hideAll:function(){inView=null;-1!=activeViewGroup&&(activeViewGroup=-1,regUpdate(slideOutWidget));-1!=activeSubGroup&&(activeSubGroup=-1,regUpdate(slideOutWidget));for(var a=0;a<this.strips.length;a++)this.strips[a].enabled=!1},showAll:function(){mode==
E_MODE.EDIT&&editStripWidget.unStrip();for(var a=0;a<this.strips.length;a++)this.strips[a].enabled=!0;inView=null;-1!=activeViewGroup&&(activeViewGroup=-1,regUpdate(slideOutWidget));-1!=activeSubGroup&&(activeSubGroup=-1,regUpdate(slideOutWidget));gainMixer.showAll();this.arrangeStrips("showAll");bottomWidget.upd();slideOutWidget.clearViewButtons();settingsStorage.set("currentViewGroup",-1);mode==E_MODE.EDIT&&editStripWidget.setStrip();mode==E_MODE.GAIN&&mixerWidget.setMode(E_MODE.GAIN);regUpdate(bottomWidget);
regUpdate(this)},showSG:function(a){if(0>a||a>=curSetup.sub)this.showAll(),activeSubGroup=-1;else{for(var b=0,c=0;c<this.strips.length;c++)this.strips[c].getNameValue("subgroup")==a&&b++;if(0==b)this.showAll(),showPopupMsg(lang.NO_ASSIGNED_SUBGROUP.format(a+1),1E3);else{mode==E_MODE.EDIT&&editStripWidget.unStrip();this.hideAll();inView=[];for(c=0;c<this.strips.length;c++)this.strips[c].getNameValue("subgroup")==a&&(this.strips[c].enabled=!0,inView.push(this.strips[c].id));inView.push(subStrips[a].id);
subStrips[a].enabled=!0;activeSubGroup=a;activeViewGroup=200+a;settingsStorage.set("currentViewGroup",activeViewGroup);this.arrangeStrips("showSG");gainMixer.syncVG();bottomWidget.upd();bottomWidget.gotoStart();mode==E_MODE.EDIT&&editStripWidget.setStrip();regUpdate(mixerWidget);regUpdate(bottomWidget);regUpdate(slideOutWidget)}}},showVCA:function(a){for(var b=0,c=0;c<this.strips.length;c++)this.strips[c].getNameValue("vca")==a&&b++;if(0==b)showPopupMsg(lang.NO_ASSIGNED_CHANNELS,1E3);else if(saveLastActiveVG(),
0>a||6<=a||!IS_UI_24)this.showAll();else{mode==E_MODE.EDIT&&editStripWidget.unStrip();this.hideAll();inView=[];for(c=0;c<this.strips.length;c++)b=this.strips[c],b.haveVCA&&b.getNameValue("vca")==a&&(b.show(),inView.push(b.id));inView.push(vcaStrips[a].id);vcaStrips[a].enabled=!0;activeSubGroup=a;activeViewGroup=300+a;settingsStorage.set("currentViewGroup",activeViewGroup);this.arrangeStrips("showVCA");gainMixer.syncVG();bottomWidget.upd();bottomWidget.gotoEnd();mode==E_MODE.EDIT&&editStripWidget.setStrip();
regUpdate(mixerWidget);regUpdate(bottomWidget);regUpdate(slideOutWidget)}},showViewGroup:function(a){if(0>a||5<a)this.showAll(),activeViewGroup=-1,settingsStorage.set("currentViewGroup",-1),regUpdate(slideOutWidget);else{var b=settings.viewGroups[a]||[];0==b.length?(this.showAll(),activeViewGroup=-1,settingsStorage.set("currentViewGroup",-1),regUpdate(slideOutWidget),showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(a+1),1E3)):(activeSubGroup=-1,activeViewGroup=a,settingsStorage.set("currentViewGroup",
a),this.applyVG(b,a),activeViewGroup=a,slideOutWidget.clearGotoButtons(),regUpdate(slideOutWidget))}},applyVG:function(a,b){if(0==a.length)this.showAll(),activeSubGroup=activeViewGroup=-1,settingsStorage.set("currentViewGroup",-1),regUpdate(slideOutWidget);else{this.hideAll();inView=a;for(var c=0;c<a.length;c++){var d=this.strips[a[c]];d&&(d.enabled=!0)}isDefined(b)&&(activeViewGroup=b);this.arrangeStrips("applyVG");gainMixer.syncVG();bottomWidget.upd();bottomWidget.gotoStart();regUpdate(mixerWidget)}},
showInputsGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<inStrips.length;b++)a.push(inStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.INPUTS;settingsStorage.set("currentViewGroup",activeViewGroup)},showFxGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<fxStrips.length;b++)a.push(fxStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.FXS;settingsStorage.set("currentViewGroup",activeViewGroup)},showSubGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<subStrips.length;b++)a.push(subStrips[b].id);
mixerWidget.applyVG(a);activeViewGroup=E_VG.SUBS;settingsStorage.set("currentViewGroup",activeViewGroup)},showAuxGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<auxStrips.length;b++)a.push(auxStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.AUXS;settingsStorage.set("currentViewGroup",activeViewGroup)},showVCAGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<vcaStrips.length;b++)a.push(vcaStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.VCAS;settingsStorage.set("currentViewGroup",
activeViewGroup)},showPresets:function(){this.menu=new PRESET_MENU2(null,"ch",this);this.menu.color=selectedStrip.color;regUpdate(this.menu)},savePreset2:function(){for(var a=".eq.easy .eq.bass .eq.mid .eq.treble .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain .dyn.threshold .dyn.gain .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release .gate.enabled .gate.bypass .gate.thresh .gate.attack .gate.hold .gate.release .gate.depth".split(" "),
b={},c=selectedStrip.name.split("."),c=c[0]+"."+c[1],d=0;d<a.length;d++){var f=getValue(c+a[d]);isDefined(f)&&(b[a[d]]=getValue(c+a[d]))}return b},savePreset:function(){for(var a=selectedStrip.name,b=[],b=b.concat(getKeys(a+"eq.")),b=b.concat(getKeys(a+"dyn.")),b=b.concat(getKeys(a+"gate.")),b=b.filter(function(a){return!a.contains(".enabled")}),b=b.filter(function(a){return!a.contains(".bypass")}),b=b.filter(function(a){return!a.contains(".prmod")}),c={},d=0;d<b.length;d++){var f=b[d],e=b[d].replace(a,
".");c[e]=getValue(f)}return c},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);regUpdate(editWidget)},setOffset:function(a,b){if((this.offsetX|0)!=(a|0)){var c=this.vis*measures.mixerStripWidth-this.w;0>c&&(c=0);this.offsetXold=this.offsetX=bound(a|0,0,c);regUpdate(this)}},calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;slideOutWidget.enabled&&(this.w-=slideOutWidget.w);this.h=screenHeight-this.y-bottomWidget.h},paint:function(){ctx.fillStyle=color.bg;
ctx.fillRect(this.offsetX,0,this.w,this.h);if(this.vis*measures.mixerStripWidth<this.w)for(var a=this.vis*measures.mixerStripWidth;a<this.w;a+=measures.mixerStripWidth)fillVertPattern(res.blStripTile,this.h,a),drawImage(res.blStripBottom,a,this.h-res.blStripBottom.h()),drawImage(res.blStripTop,a,0)}}),GainMixer=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GainMixer";this.y=measures.topWidgetHeight;this.needClip=!0;this.color=color.red;this.strips=[];this.vis=0;this.createStrips()},
onShow:function(){for(var a=0;a<this.strips.length;a++)this.strips[a].onShow()},arrangeStrips:function(){for(var a=0,b=0;b<this.strips.length;b++)this.strips[b].enabled&&(this.strips[b].x=a++*measures.mixerStripWidth);this.vis=a;this.syncLine()},createStrips:function(){for(var a=curSetup.input,b=0,c=0;c<a;c++){var d=inStrips[c],f=new GainStrip(this,d.id);0==c&&(f.firstInGroup=!0);c==a-1&&(f.lastInGroup=!0);f.id=inStrips[c].id;f.color=this.color;f.text=inStrips[c].text;f.st=d;this.strips.push(f);gainStrips.push(f);
b++}if(HAVE_ROUTING)for(c=0;c<a;c++)d=inStrips[c],f=new GainStrip2(this,b,c),f.color=this.color,f.st=d,this.strips.push(f),gainStrips2.push(f),b++;this.arrangeStrips()},showAll:function(){this.strips.each(function(a){a.show()});this.arrangeStrips();regUpdate(this)},setVG:function(a){a&&a.length&&(gainStrips.each(function(b){a.contains(b.id)?b.show():b.hide()}),this.arrangeStrips(),regUpdate(this))},syncLine:function(){for(var a=-1,b=null,c=this.strips,d=0;d<c.length;d++){var f=c[d];f.enabled?(a!=
f.type?(f.firstInGroup=!0,f.lastInGroup=!1,null!=b&&(b.lastInGroup=!0),a=f.type):(f.firstInGroup=!1,f.lastInGroup=!1),b=f):(f.firstInGroup=!1,f.lastInGroup=!1)}null!=b&&(b.lastInGroup=!0)},syncVG:function(){inView&&inView.length?this.setVG(inView):this.showAll()},syncOffset:function(){mode!=E_MODE.MODALS&&(bottomWidget.setOffset2(this.offsetX),bottomWidget.offsetX!=this.offsetX&&this.setOffset(bottomWidget.offsetX))},setOffset:function(a){this.offsetX=a;0>this.offsetX&&(this.offsetX=0);a=this.strips.length*
measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&(this.offsetX=a);this.offsetXold=this.offsetX;regUpdate(this)},calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;slideOutWidget.enabled&&(this.w-=slideOutWidget.w);this.h=screenHeight-this.y-bottomWidget.h;var a=this.strips.length*measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&this.setOffset(this.offsetX)},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(this.offsetX,0,this.w,this.h);if(this.vis*measures.mixerStripWidth<
this.w)for(var a=this.vis*measures.mixerStripWidth;a<this.w;a+=measures.mixerStripWidth)fillVertPattern(res.blStripTile,this.h,a),drawImage(res.blStripBottom,a,this.h-res.blStripBottom.h()),drawImage(res.blStripTop,a,0)}}),SlideOut=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SlideOut";this.y=measures.topWidgetHeight;this.w=measures.mixerStripWidth;this.mode=0;this.cachedStrip=null;this.cachedStripHeight=0;this.initWidgets();this.enabled=!1;this.muteg.click()},calcGeometry:function(){this.x=
screenWidth-this.w;this.y=topWidget.enabled?topWidget.h:0;this.h=screenHeight-this.y},setMode:function(a){this.mode=a},clearGotoButtons:function(){this.inp.state&&this.inp.setState(0);this.fx.state&&this.fx.setState(0);this.aux.state&&this.aux.setState(0);this.sub.state&&this.sub.setState(0)},clearViewButtons:function(){for(var a=0;a<this.buttonsVG.length;a++)this.buttonsVG[a].state&&this.buttonsVG[a].setState(0)},initWidgets:function(){var a=this,b=9;this.inp=new CheckBox(this);this.inp.setPos(6,
b);this.inp.setImages(res.bINPUTS_OFF,res.bINPUTS_ON);this.inp.idx=100;this.inp.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.inp.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showInputsGroup()};this.inp.onToggleDown=function(){resumeLastActiveVG()};this.fx=new CheckBox(this);this.fx.setPos(6,b+=41);this.fx.setImages(res.bFXRet_OFF,res.bFXRet_ON);this.fx.idx=101;this.fx.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.fx.onToggleUp=
function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showFxGroup()};this.fx.onToggleDown=function(){resumeLastActiveVG()};this.sub=new CheckBox(this);this.sub.longClickMark=!0;this.sub.setPos(6,b+=41);this.sub.setImages(res.bSUBGr_OFF,res.bSUBGr_ON);this.sub.getState=function(){this.state=102==activeViewGroup?1:0};this.sub.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showSubGroup()};this.sub.onToggleDown=function(){100>lastActiveViewGroup?mixerWidget.showViewGroup(lastActiveViewGroup):
200<=lastActiveViewGroup&&mixerWidget.showSG(lastActiveViewGroup-200);lastActiveViewGroup=-1};this.sub.onHold=function(){modalsWidget.setMode(E_MODAL_MODE.SUBS);setMode(E_MODE.MODALS)};this.aux=new CheckBox(this);this.aux.setPos(6,b+=41);this.aux.setImages(res.bAUXMast_OFF,res.bAUXMast_ON);this.aux.getState=function(){this.state=103==activeViewGroup?1:0};this.aux.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showAuxGroup()};this.aux.onToggleDown=function(){resumeLastActiveVG()};
this.vca=new CheckBox(this);this.vca.setImages(res.SO_B_BTN_OFF,res.SO_B_BTN_YLW);this.vca.setAnchors(6,b+41);this.vca.textParam.font="11pt open_sans_condensedbold";this.vca.idx=E_VG.VCAS;this.vca.text=formatButtonText(lang.VCA_MASTERS);this.vca.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.vca.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showVCAGroup()};this.vca.onToggleDown=function(){resumeLastActiveVG()};this.vca.hide();this.GOTOS=[this.inp,this.fx,
this.sub,this.aux];this.buttonsB=[];this.buttonsVG=[];this.buttonsMG=[];this.viewg=new EQButton(this);this.viewg.needBG=!1;this.viewg.longClickMark=!0;this.viewg.mode=1;this.viewg.setPos(6,184);this.viewg.setImages(res.bVIEWGr_OFF,res.bVIEWGr_ON);this.viewg.valueFunc=function(){for(var b=0;b<a.buttonsVG.length;b++)a.buttonsVG[b].enabled=!0;for(b=0;b<a.buttonsMG.length;b++)a.buttonsMG[b].enabled=!1};this.viewg.onHold=function(){modalsWidget.setMode(E_MODAL_MODE.VIEWS);setMode(E_MODE.MODALS)};this.muteg=
new EQButton(this);this.muteg.needBG=!1;this.muteg.longClickMark=!0;this.muteg.mode=2;this.muteg.setPos(6,225);this.muteg.setImages(res.bMuteGr_OFF,res.bMuteGr_ON);this.muteg.valueFunc=function(){for(var b=0;b<a.buttonsVG.length;b++)a.buttonsVG[b].enabled=!1;for(b=0;b<a.buttonsMG.length;b++)a.buttonsMG[b].enabled=!0};this.muteg.onHold=function(){modalsWidget.setMode(E_MODAL_MODE.MUTES);setMode(E_MODE.MODALS)};for(b=0;6>b;b++){var c=new CheckBox(this);c.setPos(0==b%2?6:65,273+40*(b/2|0));c.setImages(res["b"+
(b+1)],res["b"+(b+1)+"B"]);c.setSize(40,30);c.idx=b;c.getState=function(){this.state=activeViewGroup==this.idx?1:0};c.onToggleUp=function(){0==settings.viewGroups[this.idx].length?(showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(this.idx+1),800),this.state=0):mixerWidget.showViewGroup(this.idx)};c.onToggleDown=function(){mixerWidget.showAll()};this.buttonsVG.push(c)}for(b=0;6>b;b++)c=new CheckBox(this),c.setPos(0==b%2?6:65,273+40*(b/2|0)),c.setImages(res["b"+(b+1)],res["b"+(b+1)+"R"]),c.setSize(40,
30),c.idx=b,c.getState=function(){this.state=getMGroupState(this.idx)},c.onToggleUp=function(){muteGroupON(this.idx)},c.onToggleDown=function(){muteGroupOFF(this.idx)},this.buttonsMG.push(c);this.tap=new Button(this);this.tap.lastTapTime=0;this.tap.longClickMark=!0;this.tap.setImages(res.bTAP,res.bTAP_Pressed);this.tap.setPos(6,400);this.tap.valueFunc=bpmTapHandler;this.tap.onHold=askBpm;this.mutefx=new CheckBox(this);this.mutefx.setPos(63,458);this.mutefx.setImages(res.bMuteFX_OFF,res.bMuteFX_ON);
this.mutefx.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?1:0};this.mutefx.onToggleUp=function(){mixerWidget.muteFX()};this.mutefx.onToggleDown=function(){mixerWidget.unMuteFX()};this.muteall=new CheckBox(this);this.muteall.setPos(6,458);this.muteall.setImages(res.bMuteAll_OFF,res.bMuteAll_ON);this.muteall.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?1:0};this.muteall.onToggleUp=function(){mixerWidget.muteAll()};this.muteall.onToggleDown=
function(){mixerWidget.cancelMuteAll()};this.MOREME=new Button(this);this.MOREME.setImages(res.MOME_OFF,res.MOME_ON);this.MOREME.setPos(6,518);this.MOREME.onPress=function(){modalsWidget.setMode(E_MODAL_MODE.MOREME);setMode(E_MODE.MODALS)}},onShow:function(){},onHide:function(){},paint:function(){this.cachedStripHeight!=this.w&&this.cachePaint();ctx.drawImage(this.cachedStrip,0,0,this.w,this.h);var a=174;ctx.fillStyle="rgba(0,0,0,0.1)";ctx.fillRect(10,a-1,this.w-20,3);ctx.fillStyle="rgba(255,255,255,0.3)";
ctx.fillRect(10,a,this.w-20,1);a=392;ctx.fillStyle="rgba(0,0,0,0.1)";ctx.fillRect(10,a-1,this.w-20,3);ctx.fillStyle="rgba(255,255,255,0.3)";ctx.fillRect(10,a,this.w-20,1);a=508;ctx.fillStyle="rgba(0,0,0,0.1)";ctx.fillRect(10,a-1,this.w-20,3);ctx.fillStyle="rgba(255,255,255,0.3)";ctx.fillRect(10,a,this.w-20,1);666<this.h&&drawImage(res.soBottom,0,this.h-res.soBottom.h()+(697>this.h?16:0))},cachePaint:function(){null!=this.cachedStrip&&delete this.cachedStrip;this.cachedStrip=document.createElement("canvas");
var a=this.cachedStrip.getContext("2d");isRetina?(this.cachedStrip.width=2*this.w,this.cachedStrip.height=2*this.h,a.scale(2,2)):(this.cachedStrip.width=this.w,this.cachedStrip.height=this.h);fillVertPatternCtx(res.soTile,this.h,a);drawImageCtx(res.soTop,0,0,a);this.cachedStripHeight=this.w}}),SlideOut2=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SlideOut2";this.y=measures.topWidgetHeight;this.w=2*measures.mixerStripWidth;this.view=0;this.color="#1593C0";this.cachedStrip=
null;this.cachedStripHeight=0;this.condensed=740>Math.min(screenHeight,screenWidth);this.initWidgets();this.mode=0;this.enabled=!1},setView:function(a){this.view=a;this.BANKS_B.each(function(a){a.hide()});this.PLAYER_B.each(function(a){a.hide()});this.FUNCS_B.each(function(a){a.hide()});switch(a){case 0:this.BANKS_B.each(function(a){a.show()});break;case 1:this.PLAYER_B.each(function(a){a.show()});break;case 2:this.FUNCS_B.each(function(a){a.show()})}regUpdate(this)},calcGeometry:function(){this.x=
screenWidth-this.w;this.y=topWidget.enabled?topWidget.h:0;this.h=screenHeight-this.y},clearGotoButtons:function(){regUpdate(this)},clearViewButtons:function(){regUpdate(this)},setMode:function(a){this.mode=a;regUpdate(this)},nextMode:function(){for(var a=this.view+1;a<this.buttons.length;a++)if(this.buttons[a].enabled){this.buttons[a].click();return}for(a=0;a<this.view;a++)this.buttons[a].enabled&&this.buttons[a].click()},initWidgets:function(){var a=this,b=6,c=7;this.banks=new CHECKBUTTON(this);
this.banks.text=lang.BANKS;this.banks.setAnchors(c,b);this.banks.w=65;this.banks.color="#1FC8F2";this.banks.bgColor="#2555A4";this.banks.strokeColor="#1AA6C9";this.banks.textColor="#e9e9f9";this.banks.idx=0;this.banks.getState=function(){this.state=a.view==this.idx};this.banks.onToggleUp=function(){a.setView(this.idx)};this.player=new CHECKBUTTON(this);this.player.setAnchors(c+this.banks.w+2,b);this.player.w=65;this.player.text=lang.PLAYER;this.player.color="#1FC8F2";this.player.bgColor="#2555A4";
this.player.strokeColor="#1AA6C9";this.player.textColor="#e9e9f9";this.player.idx=1;this.player.getState=function(){this.state=a.view==this.idx};this.player.onToggleUp=function(){a.setView(this.idx)};this.funcs=new CHECKBUTTON(this);this.funcs.setAnchors(c+this.banks.w+2+this.player.w+2,b);this.funcs.w=76;this.funcs.text=lang.FUNCTIONS;this.funcs.color="#1FC8F2";this.funcs.bgColor="#2555A4";this.funcs.strokeColor="#1AA6C9";this.funcs.textColor="#e9e9f9";this.funcs.idx=2;this.funcs.getState=function(){this.state=
a.view==this.idx};this.funcs.onToggleUp=function(){a.setView(this.idx)};this.buttons=[this.banks,this.player,this.funcs];var b=50,d=41,c=40;this.BANKS_B=[];this.PLAYER_B=[];this.FUNCS_B=[];c=41;this.bank_l=new TButton(this);this.bank_l.setAnchors(c,b+d+1);this.bank_l.setImages(res.FFUNC_B_OFF,res.FFUNC_B_YLW);this.bank_l.text="<";this.bank_l.onPress=function(){mixerWidget.goLeft()};this.bank_r=new TButton(this);this.bank_r.setAnchors(null,b+d+1,c);this.bank_r.setImages(res.FFUNC_B_OFF,res.FFUNC_B_YLW);
this.bank_r.text=">";this.bank_r.onPress=function(){mixerWidget.goRight()};this.bank_s=new TButton(this);this.bank_s.setAnchors(c,b+1);this.bank_s.setImages(res.FFUNC_B_OFF,res.FFUNC_B_YLW);this.bank_s.text=lang.START;this.bank_s.onPress=function(){mixerWidget.gotoStart()};this.bank_e=new TButton(this);this.bank_e.setAnchors(null,b+1,c);this.bank_e.setImages(res.FFUNC_B_OFF,res.FFUNC_B_YLW);this.bank_e.text=lang.END;this.bank_e.onPress=function(){mixerWidget.gotoEnd()};this.BANKS_B.push(this.bank_l);
this.BANKS_B.push(this.bank_r);this.BANKS_B.push(this.bank_s);this.BANKS_B.push(this.bank_e);c=40;this.pl=new CheckBox(this);this.pl.setAnchors(c,b+d);this.pl.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.pl.regKey("var.currentState");this.pl.regKey("var.present");this.pl.getState=function(){this.disabled=0==getValue("var.present");this.state=2==getValue("var.currentState")?1:0};this.pl.onToggle=function(){doFfunc(E_FFUNC.PLAY)};this.rec=new CheckBox(this);this.rec.setAnchors(null,b+d,c);this.rec.setImages(res.RECS_OFF,
res.RECS_STOP);this.rec.regKey("var.recBusy");this.rec.regKey("var.isRecording");this.rec.regKey("var.present");this.rec.getState=function(){this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||.5<getValue("var.recBusy")};this.rec.onToggle=function(){doFfunc(E_FFUNC.REC)};this.mtkpl=new CheckBox(this);this.mtkpl.setAnchors(c,b);this.mtkpl.setImages(res.MTK_PLAY,res.MTK_STOP);this.mtkpl.regKey("var.mtk.currentState");this.mtkpl.regKey("var.mtk.rec.currentState");this.mtkpl.regKey("var.mtk.rec.busy");
this.mtkpl.regKey("var.mtk.present");this.mtkpl.getState=function(){this.state=2==getValue("var.mtk.currentState")?1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")};this.mtkpl.onToggle=function(){doFfunc(E_FFUNC.MTK_PLAY)};this.mtkrec=new CheckBox(this);this.mtkrec.setAnchors(null,b,c);this.mtkrec.setImages(res.MTK_REC_OFF,res.MTK_REC_ON);this.mtkrec.regKey("var.mtk.rec.currentState");this.mtkrec.regKey("var.mtk.rec.busy");
this.mtkrec.regKey("var.mtk.currentState");this.mtkrec.regKey("var.mtk.present");this.mtkrec.getState=function(){this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState")};this.mtkrec.onToggle=function(){doFfunc(E_FFUNC.MTK_REC)};this.PLAYER_B.push(this.pl);this.PLAYER_B.push(this.rec);this.PLAYER_B.push(this.mtkpl);this.PLAYER_B.push(this.mtkrec);this.newsnap=new Button(this);this.newsnap.setAnchors(null,
b,c);this.newsnap.setImages(res.SS_OFF,res.SS_ON);this.newsnap.onPress=function(){doFfunc(E_FFUNC.NEWSNAP)};this.nextsnap=new Button(this);this.nextsnap.setAnchors(null,b+d,c);this.nextsnap.setImages(res.NXT_SNP_OFF,res.NXT_SNP_ON);this.nextsnap.onPress=function(){doFfunc(E_FFUNC.NEXT_SNAP)};this.updsnap=new Button(this);this.updsnap.setAnchors(c,b);this.updsnap.setImages(res.SSUPD_OFF,res.SSUPD_ON);this.updsnap.onPress=function(){doFfunc(E_FFUNC.UPDCURSNAP)};this.prevsnap=new Button(this);this.prevsnap.setAnchors(c,
b+d);this.prevsnap.setImages(res.PRV_SNP_OFF,res.PRV_SNP_ON);this.prevsnap.onPress=function(){doFfunc(E_FFUNC.PREV_SNAP)};this.FUNCS_B.push(this.newsnap);this.FUNCS_B.push(this.nextsnap);this.FUNCS_B.push(this.updsnap);this.FUNCS_B.push(this.prevsnap);this.PLAYER_B.each(function(a){a.hide()});this.FUNCS_B.each(function(a){a.hide()});c=16;b=164;this.condensed&&(b=158);this.views=new CheckBox(this);this.views.setImages(res.SO_M_BTN_OFF,res.SO_M_BTN_TUR);this.views.setAnchors(c,b);this.views.text=lang.VIEWS;
this.views.textParam.offsetY=-3;this.views.getState=function(){this.state=0==a.mode};this.views.onToggleUp=function(){a.setMode(0)};this.mutes=new CheckBox(this);this.mutes.setImages(res.SO_M_BTN_OFF,res.SO_M_BTN_RED);this.mutes.setAnchors(null,b,c);this.mutes.text=lang.MUTES;this.mutes.textParam.offsetY=-3;this.mutes.getState=function(){this.state=1==a.mode};this.mutes.onToggleUp=function(){a.setMode(1)};b=213;this.condensed&&(b=202);for(var d=40,f=0;6>f;f++){var e=new CheckBox(this);e.setImages(res.SO_L_BTN_OFF,
res.SO_L_BTN_RED);e.setPos(c,b+d*f);e.idx=f;e.clickOnUp=!0;e.longClickMark=!0;e.textParam.offsetY=-3;e.text="NAMED GROUP "+f;e.getState=function(){if(0==a.mode){var b=0==(settings.viewGroups[this.idx]||[]).length;this.state=activeViewGroup==this.idx?1:0;var c=settings.viewGroupsNames[this.idx];c||(c=lang.VIEW_GROUP+" "+(this.idx+1));this.text=c;this.textColor=b?color.gray:color.vgText;this.img1=res.SO_L_BTN_TUR}else b=muteGroupEmpty(this.idx),this.state=getMGroupState(this.idx),this.text=getValue("mg."+
this.idx+".name")||lang.MUTE_GROUP+" "+(this.idx+1),this.textColor=b?color.gray:color.mgText,this.img1=res.SO_L_BTN_RED};e.onToggleUp=function(){0==a.mode?0==settings.viewGroups[this.idx].length?(showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(this.idx+1),800),this.state=0):mixerWidget.showViewGroup(this.idx):muteGroupON(this.idx)};e.onToggleDown=function(){0==a.mode?mixerWidget.showAll():muteGroupOFF(this.idx)};e.onHold=function(){0==a.mode?(modalsWidget.setMode(E_MODAL_MODE.VIEWS),modalsWidget.pages[E_MODAL_MODE.VIEWS].setMode(this.idx)):
(modalsWidget.setMode(E_MODAL_MODE.MUTES),modalsWidget.pages[E_MODAL_MODE.MUTES].setMode(this.idx));setMode(E_MODE.MODALS)}}b=462;this.condensed&&(b=450);this.mutefx=new CheckBox(this);this.mutefx.setPos(c,b);this.mutefx.setImages(res.SO_M_BTN_OFF,res.SO_M_BTN_BLU);this.mutefx.text=lang.MUTE_FX;this.mutefx.textParam.offsetY=-3;this.mutefx.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?1:0};this.mutefx.onToggleUp=function(){mixerWidget.muteFX()};this.mutefx.onToggleDown=
function(){mixerWidget.unMuteFX()};this.tap=new Button(this);this.tap.setAnchors(null,b,c);this.tap.lastTapTime=0;this.tap.longClickMark=!0;this.tap.textParam.offsetY=-3;this.tap.setImages(res.SO_M_BTN_OFF,res.SO_M_BTN_RED);this.tap.text=lang.TAP_TEMPO;this.tap.valueFunc=bpmTapHandler;this.tap.onHold=askBpm;b=539;this.condensed&&(b=513);this.inp=new CheckBox(this);this.inp.setImages(res.SO_B_BTN_OFF,res.SO_B_BTN_YLW);this.inp.setAnchors(c,b);this.inp.text=lang.INPUTS;this.inp.textColor=color.INPUT;
this.inp.idx=E_VG.INPUTS;this.inp.textParam.offsetY=-3;this.inp.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.inp.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showInputsGroup()};this.inp.onToggleDown=function(){resumeLastActiveVG()};this.inp.hide();this.fx=new CheckBox(this);this.fx.setImages(res.AUXM_OFF,res.AUXM_ON);this.fx.setAnchors(c,b);this.fx.textColor="#76A8D6";this.fx.text=formatButtonText(lang.FX_MASTERS);this.fx.textParam.font="11pt open_sans_condensedbold";
this.fx.textParam.offsetY=-3;this.fx.idx=E_VG.FXS;this.fx.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.fx.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showFxGroup()};this.fx.onToggleDown=function(){resumeLastActiveVG()};this.fx.contains=function(b,c){if(!this.enabled||!this.visible)return!1;var d=b-a.home.x,e=c-a.home.y,f=a.home.w/2,g=a.home.h/2;return this.enabled&&this.visible?this.x<=b&&this.x+this.w>b&&this.y<=c&&this.y+this.h>c&&!isInCircle(f,
g,24,d,e):!1};this.sub=new CheckBox(this);this.sub.setImages(res.FXM_OFF,res.FXM_ON);this.sub.setAnchors(null,b,c);this.sub.textColor="#D8A5B9";this.sub.textParam.font="11pt open_sans_condensedbold";this.sub.textParam.offsetY=-3;this.sub.idx=E_VG.SUBS;this.sub.text=formatButtonText(lang.SUB_GROUPS);this.sub.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.sub.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showSubGroup()};this.sub.onToggleDown=function(){resumeLastActiveVG()};
this.sub.onHold=function(){modalsWidget.setMode(E_MODAL_MODE.SUBS);setMode(E_MODE.MODALS)};this.sub.contains=function(b,c){if(!this.enabled||!this.visible)return!1;var d=b-a.home.x,e=c-a.home.y,f=a.home.w/2,g=a.home.h/2;return this.enabled&&this.visible?this.x<=b&&this.x+this.w>b&&this.y<=c&&this.y+this.h>c&&!isInCircle(f,g,24,d,e):!1};this.aux=new CheckBox(this);this.aux.setImages(res.SUBG_OFF,res.SUBG_ON);this.aux.setAnchors(c,b+71);this.aux.textColor="#DBCB7A";this.aux.textParam.font="11pt open_sans_condensedbold";
this.aux.textParam.offsetY=-3;this.aux.idx=E_VG.AUXS;this.aux.text=formatButtonText(lang.AUX_MASTERS);this.aux.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.aux.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showAuxGroup()};this.aux.onToggleDown=function(){resumeLastActiveVG()};this.aux.contains=function(b,c){if(!this.enabled||!this.visible)return!1;var d=b-a.home.x,e=c-a.home.y,f=a.home.w/2,g=a.home.h/2;return this.enabled&&this.visible?this.x<=b&&this.x+
this.w>b&&this.y<=c&&this.y+this.h>c&&!isInCircle(f,g,24,d,e):!1};this.vca=new CheckBox(this);this.vca.setImages(res.VCA_OFF,res.VCA_ON);this.vca.setAnchors(null,b+71,c);this.vca.textColor="#8BD08B";this.vca.textParam.font="11pt open_sans_condensedbold";this.vca.textParam.offsetY=-3;this.vca.idx=E_VG.VCAS;this.vca.text=formatButtonText(lang.VCA_MASTERS);this.vca.getState=function(){this.state=activeViewGroup==this.idx?1:0};this.vca.onToggleUp=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showVCAGroup()};
this.vca.onToggleDown=function(){resumeLastActiveVG()};this.vca.contains=function(b,c){if(!this.enabled||!this.visible)return!1;var d=b-a.home.x,e=c-a.home.y,f=a.home.w/2,g=a.home.h/2;return this.enabled&&this.visible?this.x<=b&&this.x+this.w>b&&this.y<=c&&this.y+this.h>c&&!isInCircle(f,g,24,d,e):!1};this.home=new Button(this);this.home.setImages(res.HOME_OFF,res.HOME_ON);this.home.setAnchors(c+71,b+37);this.home.contains=function(a,b){return this.enabled&&this.visible?isInCircle(this.w/2,this.h/
2,24,a-this.x,b-this.y):!1};this.home.onPress=function(){mixerWidget.showAll()}},onShow:function(){},onHide:function(){},paint:function(){this.cachedStripHeight!=this.w&&this.cachePaint();ctx.drawImage(this.cachedStrip,0,0,this.w,this.h)},drawHeader:function(a,b,c){c.font="12pt open_sans_condensedbold";var d=c.measureText(a).width,d=(this.w-d-20-34)/2|0;c.fillStyle="#0A1957";c.fillRect(17,b-2,d,2);c.fillRect(this.w-17,b-2,-d,2);c.fillStyle="#3A88E1";c.fillRect(17,b,d,1);c.fillRect(this.w-17,b,-d,
1);this.condensed&&(b+=10);c.drawText(a,this.w/2,b-6,{shadow:[color.black,0,1,1],color:"#E0E0E0",align:"center",font:"12pt open_sans_condensedbold"})},cachePaint:function(){null!=this.cachedStrip&&delete this.cachedStrip;this.cachedStrip=document.createElement("canvas");var a=this.cachedStrip.getContext("2d");isRetina?(this.cachedStrip.width=2*this.w,this.cachedStrip.height=2*this.h,a.scale(2,2)):(this.cachedStrip.width=this.w,this.cachedStrip.height=this.h);a.fillStyle="#2353A2";a.fillRect(0,0,this.w,
this.h);fillVertPatternCtx(res.SO2_TILE,this.h,a);drawImageCtx(res.SO2_BOTTOM,0,this.h-res.soBottom.h(),a);drawImageCtx(res.SO2_TOP,0,0,a);a.fillStyle="#1FC8F2";a.fillRect(7,37,this.w-14,3);this.condensed?(this.drawHeader(lang.GROUPS,144,a),this.drawHeader(lang.MASTERS,500,a)):(this.drawHeader(lang.GROUPS,151,a),this.drawHeader(lang.MASTERS,527,a));this.cachedStripHeight=this.w}});
function saveLastActiveVG(){100<=activeViewGroup&&200>activeViewGroup||300<=activeViewGroup||(lastActiveViewPosition=mixerWidget.offsetX,lastActiveViewGroup=activeViewGroup)}function resumeLastActiveVG(){100>lastActiveViewGroup?mixerWidget.showViewGroup(lastActiveViewGroup):300<=lastActiveViewGroup?mixerWidget.showVCA(lastActiveViewGroup-300):200<=lastActiveViewGroup&&mixerWidget.showSG(lastActiveViewGroup-200);bottomWidget.setOffset(lastActiveViewPosition);lastActiveViewGroup=-1}
function muteGroupReset(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("mgmask"),c=1<<a;b&c&&muteGroupOFF(a);a=mixerWidget.strips;for(b=0;b<a.length;b++){var d=a[b],f=d.getNameValue("mgmask"),f=f&~c;d.setNameValue("mgmask",f);setValue("var.unsaved.mutegroups",1)}}}function getMGroupState(a){return 0!=(getValue("mgmask")&1<<a)?1:0}
function muteGroupON(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{for(var b=getValue("mgmask"),c=1<<a,b=b|c,d=[],f=mixerWidget.strips,e=0;e<f.length;e++){var g=f[e];if(g.getNameValue("mgmask")&c&&(d.push(g),g.type==E_STRIP_TYPE.VCA))for(var h=0;h<inStrips.length;h++)inStrips[h].getNameValue("vca")==g.subId&&d.push(inStrips[h])}d=d.uniq();c=d.length;for(e=0;e<d.length;e++)g=d[e],g.setNameValue("forceunmute",0);0==c?showPopupMsg(lang.NO_ASSIGNED_MG.format(a+1),700):(setValue("mgmask",
b),showPopupMsg(lang.MUTEGROUP_1_ACTIVATED.format(a+1),700),handle_mgmask(!1))}}
function muteGroupOFF(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("mgmask"),c=b&~(1<<a);checkBit(b,MUTEALL_BIT_IDX);checkBit(b,MUTEFX_BIT_IDX);b=mixerWidget.strips;setValue("mgmask",c);for(c=0;c<b.length;c++){var d=b[c];1!=d.getNameValue("forceunmute")||d.getMuteState(!0,!0)||(d.setNameValue("forceunmute",0),d.setNameValue("mute",0))}showPopupMsg(lang.MUTEGROUP_1_DEACTIVATED.format(a+1),700);handle_mgmask(!1)}}
function muteGroupToggle(a){getMGroupState(a)?muteGroupOFF(a):muteGroupON(a)}function muteGroupEmpty(a){a=1<<a;for(var b=mixerWidget.strips,c=0;c<b.length;c++)if(b[c].getNameValue("mgmask")&a)return!1;return!0}
var STRIPMENU=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="SUBMENU";this.w=200;this.h=380;this.needMoveEvt=!0;this.items=[];this.colors=Array(10);this.subs={};this.title=c.getName();this.titleColor=c.color;this.target=c;this.tID=c.id;switch(c.type){case E_STRIP_TYPE.VCA:this.items=[lang.RENAME,lang.RESET_CHANNEL];break;case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==
c.type&&this.items.push(lang.PASTE_SETTINGS);b=this.target.getNameValue("subgroup");0<=b?(this.subs[this.items.length]=-1,this.items.push(lang.UNASSIGN_SUB_GROUP.format(b+1))):this.items.push(lang.ASSIGN_SUB_GROUP.replace(" {0}",""));this.colors[this.items.length-1]="#40202C";IS_UI_24&&c.haveVCA&&(b=this.target.getNameValue("vca"),null!=b&&0<=b?this.items.push(lang.UNASSIGN_VCA+" "+(b+1)):this.items.push(lang.ASSIGN_VCA),this.colors[this.items.length-1]="#1A401A");-1!=c.getNameValue("stereoIndex")||
c.lastInGroup2||(b=allStrips[c.id+1])&&-1==b.getNameValue("stereoIndex")&&this.items.push(lang.STEREO_LINK);-1!=c.getNameValue("stereoIndex")&&this.items.push(lang.DISABLE_STEREO_LINK);this.items.push(lang.RESET_CHANNEL);c.type==E_STRIP_TYPE.MEDIA&&this.items.push(settings.mediaFirst?lang.PLACE_AFTER_INPUTS:lang.PLACE_BEFORE_INPUTS);settings.me.contains(c.id)?this.items.push(lang.UNASSIGN_ME):this.items.push(lang.ASSIGN_ME);this.colors[this.items.length-1]="#402600";break;case E_STRIP_TYPE.FX:this.items=
[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);IS_UI_24&&c.haveVCA&&(b=this.target.getNameValue("vca"),null!=b&&0<=b?this.items.push(lang.UNASSIGN_VCA+" "+(b+1)):this.items.push(lang.ASSIGN_VCA),this.colors[this.items.length-1]="#1A401A");this.items.push(lang.RESET_CHANNEL);break;case E_STRIP_TYPE.SUB:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);
this.items.push(lang.RESET_CHANNEL);mode!=E_MODE.MIX&&mode!=E_MODE.EDIT||activeSubGroup==c.subId||this.items.push(lang.SUB_GROUP_SPREAD);break;case E_STRIP_TYPE.AUX:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);-1!=c.getNameValue("stereoIndex")||c.lastInGroup2||(b=allStrips[c.id+1],-1==b.getNameValue("stereoIndex")&&this.items.push(lang.STEREO_LINK));-1!=c.getNameValue("stereoIndex")&&this.items.push(lang.DISABLE_STEREO_LINK);
this.items.push(lang.RESET_CHANNEL);HAVE_MATRIX&&(b=c.getNameValue("matrix"),this.items.push(b?lang.SWITCH_TO_AUX:lang.SWITCH_TO_MATRIX));mode==E_MODE.AUX&&HAVE_LATENCY&&(b=VtoLATENCY(c.getNameValue("delay")),this.items.push(lang.SET_OUTPUT_DELAY+" ("+b+")"));this.items.push(settings.meout==c.subId?lang.UNASSIGN_MY_OUT:lang.ASSIGN_MY_OUT);break;case E_STRIP_TYPE.MASTER:this.items=[lang.SET_TO_ZERO_DB,lang.MASTER_PRESETS],IS_UI_24&&this.items.push(lang.TOGGLE_DIM),HAVE_LATENCY&&(b=VtoLATENCY(getValue("m.delayL")),
c=VtoLATENCY(getValue("m.delayR")),this.items.push(lang.SET_OUTPUT_DELAY_LEFT+" ("+b+")"),this.items.push(lang.SET_OUTPUT_DELAY_RIGHT+" ("+c+")"))}!inView||mode!=E_MODE.MIX&&mode!=E_MODE.GAIN&&mode!=E_MODE.EDIT||this.items.push(lang.SHOW_ALL_CHANNELS);this.rh=30;this.h=94+this.rh*this.items.length;this.mstart=50;this.selected=-1;this.startPoint=[-1,-1];this.lastPoint=[-1,-1];this.poplineX=50},onDown:function(a,b){this.startPoint=this.lastPoint=[a,b];var c=Math.floor((b-this.globalY()-this.mstart)/
this.rh);c>=this.items.length||0>c||(this.selected=c,regUpdate(this))},onMove:function(a,b){this.lastPoint=[a,b];if(40<Math.abs(this.lastPoint[0]-this.startPoint[0])||40<Math.abs(this.lastPoint[1]-this.startPoint[1]))this.selected=-1;regUpdate(this)},onUp:function(){if(20<Math.abs(this.lastPoint[0]-this.startPoint[0])||20<Math.abs(this.lastPoint[1]-this.startPoint[1]))this.selected=-1;-1!=this.selected&&this.doFunc()},doFunc:function(){var a=this.items[this.selected];if(a.contains(lang.UNASSIGN_SUB_GROUP.replace(" {0}",
""))){var b=activeSubGroup==this.target.getNameValue("subgroup");this.target.setNameValue("subgroup",-1);b&&mixerWidget.showSG(activeSubGroup);updateByKey(this.target.name+"subgroup")}a.contains(lang.UNASSIGN_VCA)&&(this.target.setNameValue("vca",-1),updateByKey(this.target.name+"vca"));var c=this.target;a.startsWith(lang.SET_OUTPUT_DELAY_LEFT)?askForDelay(masterWidget,MAX_DELAY_OUTPUT,"delayL",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.LEFT+")"):a.startsWith(lang.SET_OUTPUT_DELAY_RIGHT)?askForDelay(masterWidget,
MAX_DELAY_OUTPUT,"delayR",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.RIGHT+")"):a.startsWith(lang.SET_OUTPUT_DELAY)&&askForDelay(c,MAX_DELAY_OUTPUT,"delay",c.getName()+" "+lang.OUTPUT_DELAY);switch(a){case lang.TOGGLE_DIM:setValue("m.dim",getValue("m.dim")?0:1);regUpdate(masterWidget);break;case lang.SWITCH_TO_MATRIX:c.setNameValue("matrix",1);mode==E_MODE.AUX&&auxWidget.upd();break;case lang.SWITCH_TO_AUX:c.setNameValue("matrix",0);mode==E_MODE.AUX&&auxWidget.upd();break;case lang.MASTER_PRESETS:clearModals();
masterWidget.showPresets();return;case lang.SET_TO_ZERO_DB:c.setNameValue("mix",zeroDbPos);regUpdate(c);break;case lang.UNASSIGN_ME:settings.me.deleteItem(this.target.id);switch(this.target.getNameValue("stereoIndex")){case 0:settings.me.deleteItem(this.target.id+1);regUpdate(allStrips[this.target.id+1]);break;case 1:settings.me.deleteItem(this.target.id-1),regUpdate(allStrips[this.target.id-1])}settingsStorage.save();break;case lang.ASSIGN_ME:settings.me.push(this.target.id);switch(this.target.getNameValue("stereoIndex")){case 0:settings.me.push(this.target.id+
1);regUpdate(allStrips[this.target.id+1]);break;case 1:settings.me.push(this.target.id-1),regUpdate(allStrips[this.target.id-1])}settingsStorage.save();break;case lang.UNASSIGN_MY_OUT:settings.meout=-1;settingsStorage.save();drawAll();break;case lang.ASSIGN_MY_OUT:settings.meout=this.target.subId;settingsStorage.save();drawAll();break;case lang.ASSIGN_SUB_GROUP.replace(" {0}",""):clearModals();assignMenu=new ASSIGNSG_MENU(this.target);return;case lang.ASSIGN_VCA:clearModals();assignMenu=new ASSIGN_VCA_MENU(this.target);
return;case lang.RENAME:editOk.valueFunc=function(){var a=editBox2.value.toUpperCase();c.setName(a);drawAll("RENAMING")};a=c.getNameValue("name");showEditBox2(lang.RENAME_CHANNEL.format(c.text),a);break;case lang.COPY_SETTINGS:this.target.copySettings();break;case lang.PASTE_SETTINGS:this.target.pasteSettings();break;case lang.RESET_CHANNEL:confOk.valueFunc=function(){var a=c.getNameValue("subgroup");c.reset();0<=a&&activeSubGroup==a&&mixerWidget.showSG(activeSubGroup);mode==E_MODE.AUX&&(auxWidget.onShow(),
auxWidget.setMode(auxWidget.mode))};showConfBox(lang.RESET_CHANNEL);break;case lang.STEREO_LINK:this.target.setLinked(!0);mode==E_MODE.AUX&&(auxWidget.onShow(),auxWidget.setMode(auxWidget.mode));mode==E_MODE.FXSENDS&&(fxSendsWidget.onShow(),fxSendsWidget.setMode(auxWidget.mode));break;case lang.DISABLE_STEREO_LINK:this.target.setLinked(!1);mode==E_MODE.AUX&&(auxWidget.onShow(),auxWidget.setMode(auxWidget.mode));break;case lang.SUB_GROUP_SPREAD:mixerWidget.showSG(this.target.subId);break;case lang.VCA_GROUP_SPREAD:mixerWidget.showVCA(this.target.subId);
break;case lang.SHOW_ALL_CHANNELS:mixerWidget.showAll();break;case lang.PLACE_AFTER_INPUTS:settingsStorage.set("mediaFirst",0);mode==E_MODE.EDIT&&editStripWidget.unStrip();mixerWidget.arrangeStrips("PLACE_AFTER_INPUTS");bottomWidget.upd();mode==E_MODE.EDIT&&editStripWidget.setStrip();bottomWidget.gotoID2(selectedChannel);break;case lang.PLACE_BEFORE_INPUTS:settingsStorage.set("mediaFirst",1);mode==E_MODE.EDIT&&editStripWidget.unStrip();mixerWidget.arrangeStrips("PLACE_BEFORE_INPUTS");bottomWidget.upd();
mode==E_MODE.EDIT&&editStripWidget.setStrip();bottomWidget.gotoStart();break;case lang.CHANNEL_PRESETS:clearModals();mixerWidget.showPresets();return}clearModals()},onDelete:function(){},calcGeometry:function(){this.x=this.target.globalX()-20;0>this.x&&(this.x=0);this.y=screenHeight-this.h-measures.bottomWidgetHeight},paint:function(){var a=this.w,b=this.h,c=b-20;ctx.fillStyle="#111";ctx.strokeStyle="#BBB";ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(14,0);ctx.arcTo(a,0,a,c,14);ctx.arcTo(a,c,0,c,14);
ctx.lineTo(this.poplineX+20,c);ctx.lineTo(this.poplineX,b);ctx.lineTo(this.poplineX-20,c);ctx.arcTo(0,c,0,0,14);ctx.arcTo(0,0,a,0,14);ctx.closePath();ctx.fill();ctx.stroke();c=ctx.createLinearGradient(0,0,0,this.h);c.addColorStop(0,"rgba(255,255,255,0.1)");c.addColorStop(.2,"rgba(255,255,255,0)");c.addColorStop(1,"rgba(255,255,255,0)");ctx.fillStyle=c;ctx.fill();ctx.font=font.tabTextSel;ctx.textAlign="center";ctx.fillStyle=this.titleColor;ctx.drawText(this.title,this.w/2,30,{max:this.w-6,shadow:[color.black,
0,1,1]});ctx.fillStyle="#f0f0f0";ctx.beginPath();ctx.roundRect(4,50,a-8,b-50-40,6);ctx.closePath();ctx.fill();ctx.fillStyle="black";ctx.textAlign="left";b=this.rh/2|0;ctx.textBaseline="middle";ctx.setShadow(null);for(c=0;c<this.items.length;c++)ctx.fillStyle=this.colors[c]||color.black,this.selected==c&&(ctx.fillStyle="rgba(0,0,0,0.1)",ctx.fillRect(6,this.mstart+c*this.rh,a-12,this.rh),ctx.fillStyle="red"),ctx.fillText(this.items[c],12,this.mstart+c*this.rh+b,this.w-18),ctx.fillStyle="rgba(0,0,0,0.2)",
ctx.fillRect(6,this.mstart+(c+1)*this.rh,a-12,1)}});assignMenu=null;
var ASSIGNSG_MENU=Class.create(Widget,{initialize:function($super,b){$super(-1);this.widgetName="ASSIGNSG_MENU";this.w=190;this.h=130;this.t=b.name;this.tar=b;this.text=lang.ASSIGN_SUB_GROUP.format("("+this.tar.text+")");this.init2();this.initWidgets();this.calcGeometry();regUpdate(this)},init2:function(){this.color=color.sub},valueFunc:function(a){setValue(this.t+"subgroup",a);activeSubGroup==a&&mixerWidget.showSG(activeSubGroup);this.close()},initWidgets:function(){var a=10,b=this,c=0;this.b1=new SButton(this);
this.b1.idx=c++;this.b1.text="1";this.b1.textColor=this.color;this.b1.setPos(a,28);this.b1.setSize(50,40);this.b1.onPress=function(){b.valueFunc(this.idx)};this.b2=new SButton(this);this.b2.idx=c++;this.b2.text="2";this.b2.textColor=this.color;this.b2.setPos(a+=60,28);this.b2.setSize(50,40);this.b2.onPress=function(){b.valueFunc(this.idx)};this.b3=new SButton(this);this.b3.idx=c++;this.b3.text="3";this.b3.textColor=this.color;this.b3.setPos(a+=60,28);this.b3.setSize(50,40);this.b3.onPress=function(){b.valueFunc(this.idx)};
a=10;this.b4=new SButton(this);this.b4.idx=c++;this.b4.text="4";this.b4.textColor=this.color;this.b4.setPos(a,80);this.b4.setSize(50,40);this.b4.onPress=function(){b.valueFunc(this.idx)};this.b5=new SButton(this);this.b5.idx=c++;this.b5.text="5";this.b5.textColor=this.color;this.b5.setPos(a+=60,80);this.b5.setSize(50,40);this.b5.onPress=function(){b.valueFunc(this.idx)};this.b6=new SButton(this);this.b6.idx=c++;this.b6.text="6";this.b6.textColor=this.color;this.b6.setPos(a+=60,80);this.b6.setSize(50,
40);this.b6.onPress=function(){b.valueFunc(this.idx)};3>curSetup.sub&&this.b3.hide();4>curSetup.sub&&this.b4.hide();5>curSetup.sub&&this.b5.hide();6>curSetup.sub&&this.b6.hide()},calcGeometry:function(){this.x=(screenWidth-this.w)/2|0;this.y=(screenHeight-this.h)/2|0},onDelete:function(){},paint:function(){ctx.fillStyle="#111";ctx.fillRoundRect(0,0,this.w,this.h,10);var a=ctx.createLinearGradient(0,0,this.w,this.h);a.addColorStop(0,"rgba(255,255,255,0)");a.addColorStop(.2,"rgba(255,255,255,0)");a.addColorStop(.5,
"rgba(255,255,255,0.15)");a.addColorStop(.8,"rgba(255,255,255,0)");a.addColorStop(1,"rgba(255,255,255,0)");ctx.fillStyle=a;ctx.fillRoundRect(0,0,this.w,this.h,10);ctx.roundRect(0,0,this.w,this.h,10);ctx.strokeStyle="#333";ctx.lineWidth=2;ctx.stroke();ctx.drawText(this.text,this.w/2,13,{font:font.tabText,color:this.color,shadow:Shadow.main,align:"center",valign:"middle"})}}),ASSIGN_VCA_MENU=Class.create(ASSIGNSG_MENU,{init2:function(){this.color=color.green;this.text=lang.ASSIGN_VCA+" ("+this.tar.text+
")"},valueFunc:function(a){setValue(this.t+"vca",a);this.close()}});function hasHIZ(a){switch(a.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.GAIN:case E_STRIP_TYPE.HW:break;default:return!1}if(HAVE_ROUTING){if(a.type==E_STRIP_TYPE.HW)return!!a.hiz;switch(a.getNameValue("src")){case "hw.0":case "hw.1":case "hw.24":case "hw.25":return!0}}else switch(a.subId){case 0:case 1:case 24:case 25:return!0}return!1}
function hasDigi(a){switch(a.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.GAIN:break;default:return!1}switch(a.subId){case 0:case 1:case 24:case 25:return!0}return!1}
var EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EDIT_PAGE";this.buttons=[];this.pages=[];this.mode=-1;this.color=color.white;this.lineOverGrad=null;this.arr=[];this.E_MODE={digi:0,eqch:1,eqaux:2,eqm:3,gate:4,dyn:5,fx:6,aux:7,uix:8,misc:9};this.initWidgets();this.setMode(0)},initWidgets:function(){this.stereo=new STEREOSEL(this);this.stereo.setPos(440,3);this.pages.push(new DIGITECH(this));this.pages.push(new EQChannel(this));this.pages.push(new EQAux(this));
this.pages.push(new EQMaster(this));this.pages.push(new GATE_PAGE(this));this.pages.push(new DYNSubPage(this));this.pages.push(new FX_SENDS_EDIT_PAGE(this));this.pages.push(new AUX_EDIT_PAGE(this));this.pages.push(new UIX_PAGE(this));this.pages.push(new ROUTING_EDIT_PAGE(this));var a=0,b=new TabButton(this);b.textColor=b.color="#A3A1A2";b.mode=a++;b.setImage(res.digitech_logo,5,8);b.setSize(112,30);b.getState=function(){this.state=this.parent.mode==this.mode?1:0;this.it=0==selectedStrip.getNameValue("digitech.enabled")};
this.buttons.push(b);var c=[lang.EQ,lang.EQ,lang.EQ,lang.GATE];c.push(HAVE_GATE?lang.COMP:lang.DYN);c.push(lang.FX_SENDS,lang.AUX_SENDS);var d=[color.EQ,color.EQ,color.EQ,color.GATE,color.DYN,color.FX,color.AUX],f=["#BF4545","#BF4545","#BF4545",color.GATE,color.DYN,color.FX,"#CCB337"];c.push("Ui X");d.push(color.orange);f.push(color.orange);HAVE_ROUTING&&(c.push(lang.PATCHING),d.push(color.purple),f.push("#9A44AB"));for(var e=0;e<f.length;e++)f[e]=LightenDarkenColor(f[e],10);for(e=0;e<c.length;e++)b=
new TabButton(this),b.color=d[e],b.textColor=f[e],b.mode=a++,b.font="13pt open_sans_condensedbold",b.text=c[e],b.setSize(112,30),this.buttons.push(b)},setMode:function(a){if(this.mode!=a)if(-1==a){for(var b=0;b<this.pages.length;b++)this.pages[b].hide();regUpdate(this)}else if("undefined"!=typeof this.buttons&&"undefined"!=typeof this.buttons[a]&&this.buttons[a].enabled){this.mode=a;for(b=0;b<this.pages.length;b++)this.pages[b].enabled&&this.pages[b].hide();this.pages[a].show();this.color=this.buttons[a].color;
topWidget.bEDIT.clr1=this.buttons[a].color;regUpdate(topWidget);regUpdate(bottomWidget);regUpdate(this)}},nextMode:function(){for(var a=this.mode+1;a<this.buttons.length;a++)if(this.buttons[a].enabled){this.buttons[a].click();return}for(a=0;a<this.mode;a++)this.buttons[a].enabled&&this.buttons[a].click()},showPresets:function(){this.pages[this.mode].showPresets&&this.pages[this.mode].showPresets()},onShow:function(){this.upd()},upd:function(){if(null!=selectedStrip){var a=selectedStrip.stereo;a||
(a=1==selectedStrip.getNameValue("stereo")||-1!=selectedStrip.getNameValue("stereoIndex"));for(var b=0;b<this.buttons.length;b++)this.buttons[b].enabled=!1;selectedStrip.getNameValue("src");var c=[];switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:c=[this.E_MODE.eqch,this.E_MODE.dyn];HAVE_GATE&&c.push(this.E_MODE.gate);c.push(this.E_MODE.fx,this.E_MODE.aux);hasDigi(selectedStrip)&&c.push(this.E_MODE.digi);HAVE_ROUTING&&selectedStrip.type!=E_STRIP_TYPE.MEDIA&&
c.push(this.E_MODE.misc);break;case E_STRIP_TYPE.FX:c=[this.E_MODE.eqch,this.E_MODE.dyn];HAVE_GATE&&c.push(this.E_MODE.gate);c.push(this.E_MODE.fx,this.E_MODE.aux);break;case E_STRIP_TYPE.SUB:c=[this.E_MODE.eqch,this.E_MODE.dyn];HAVE_GATE&&c.push(this.E_MODE.gate);c.push(this.E_MODE.fx);break;case E_STRIP_TYPE.AUX:c=[this.E_MODE.eqaux,this.E_MODE.dyn];HAVE_GATE&&c.push(this.E_MODE.gate);c.push(this.E_MODE.fx);break;case E_STRIP_TYPE.MASTER:c=[this.E_MODE.eqm,this.E_MODE.dyn],c.push(this.E_MODE.fx,
this.E_MODE.aux)}for(b=0;b<c.length;b++)this.buttons[c[b]].enabled=!0;0==c.length?this.setMode(-1):(-1==c.indexOf(this.mode)&&this.setMode(c[0]),this.arr=c,this.calcGeometry(),this.pages[this.mode].enabled||this.pages[this.mode].show(),this.pages[this.mode].onShow(),this.stereo.enabled=!(920>this.w&&6<this.arr.length),this.stereo.enabled&&(this.stereo.enabled=a),regUpdate(this))}},calcGeometry:function(){this.x=editStripWidget.w;this.y=topWidget.h;this.w=screenWidth-this.x;masterWidget.enabled&&(this.w-=
masterWidget.w);fxoutWidget.enabled&&(this.w-=fxoutWidget.w);this.h=screenHeight-this.y-bottomWidget.h;var a=0,b=0;this.needClip=700>this.w;for(var c=0;c<this.buttons.length;c++)this.buttons[c].enabled&&b++;(c=selectedStrip.stereo)||(c=1==selectedStrip.getNameValue("stereo")||-1!=selectedStrip.getNameValue("stereoIndex"));this.stereo.enabled=!(920>this.w&&6<this.arr.length);this.stereo.enabled&&(this.stereo.enabled=c);this.stereo.x=this.w-this.stereo.w-10;if(HAVE_ROUTING){for(var b=0,d=112,c=0;c<
this.buttons.length;c++)this.buttons[c].enabled&&b++;this.stereo.enabled&&b++;807>this.w&&6<b&&(d=100);for(c=1;c<this.buttons.length;c++)this.buttons[c].w=d}b=17;for(c=0;c<this.buttons.length;c++)this.buttons[c].enabled&&(this.buttons[c].setPos(b,5),b+=this.buttons[c].w+1,a++)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.color;ctx.fillRect(0,this.h-3,this.w,3);ctx.fillRect(0,35,this.w,4);ctx.fillStyle="#ff0";ctx.font="20pt open_sans_condensedbold";
ctx.textAlign="center";ctx.fillText(lang.NO_CONTROLS_FOR_THIS_CHANNEL,this.w/2|0,this.h/2|0)}}),EDIT_STRIP=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EDIT_STRIP";this.strip=this.buff=null;this.lastClickTime=-1;this.onLabel=!1},onShow:function(){this.setStrip()},onHide:function(){this.unStrip()},setStrip:function(){null!=this.strip&&this.unStrip();-1!=selectedChannel&&(this.strip=mixerWidget.strips[selectedChannel],this.strip.parent=this,this.buff=[this.strip.x,this.strip.enabled,
this.strip.lastInGroup,this.strip.firstInGroup],this.strip.x=0,this.strip.enabled=!0,this.strip.lastInGroup=!0,this.strip.firstInGroup=!0,this.strip.updateGeometry(),this.widgets.push(this.strip))},unStrip:function(){null!=this.strip&&(this.widgets.pop(),this.strip.parent=mixerWidget,this.buff&&(this.strip.x=this.buff[0],this.strip.enabled=this.buff[1],this.strip.lastInGroup=this.buff[2],this.strip.firstInGroup=this.buff[3]),this.buff=this.strip=null)},calcGeometry:function(){this.x=0;this.y=measures.topWidgetHeight;
this.w=measures.mixerStripWidth;this.h=screenHeight-this.y-bottomWidget.h},paint:function(){if(null!=this.strip){ctx.fillStyle=color.bg;ctx.fillRect(0,0,this.w,this.h+bottomWidget.h);ctx.fillStyle=color.botBG;ctx.fillRect(0,0,this.w,this.h);drawImage(res.stripLabel,0,this.h);ctx.fillStyle=this.strip.color;ctx.fillRect(2,this.h,this.w-4,bottomWidget.h-2);ctx.font=font.botChLabel;ctx.textAlign="center";var a=this.strip.getName();ctx.fillStyle=color.black;ctx.fillText(a,this.w/2+2|0,this.h+24+1,this.w-
6);ctx.fillStyle=color.labelText;ctx.fillText(a,this.w/2|0,this.h+24,this.w-6)}else fillVertPattern(res.blStripTile,this.h),drawImage(res.blStripBottom,0,this.h-res.blStripBottom.h()),drawImage(res.blStripLabel,0,this.h),drawImage(res.blStripTop,0,0)}}),USB_SLOTS=22,DAW_SLOTS=32,ROUTING_EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MISC_PAGE";this.needClip=!0;this.y=40;this.enabled=!1;this.color=color.purple;this.inmode=this.scmode=0;this.left=!0;this.offsetY=
0;this.hh=this.maxY=900;this.needMoveEvt=this.needClip=!0;this.BUTTONS=[];this.BUTTONS2=[];this.initWidgets()},onDown:function(a,b,c){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b+this.offsetY]},onMove:function(a,b,c){},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=
b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},setMode:function(a){this.scmode=a;this.inmode=0;this.sync();regUpdate(this)},setInsertMode:function(a){this.scmode=0;this.inmode=a;this.sync();regUpdate(this)},setLeft:function(a){this.left=a;this.sync();regUpdate(this)},sync:function(){var a=1==this.inmode,b=selectedStrip.getNameValue(1==this.scmode?"scsrc":"src"),c=0;if(isString(b))switch(b.split(".")[0]){case "ua":case "uc":c=1;break;case "ub":case "ud":c=2;break;default:c=
0}if(a||!this.insource.enabled)c=2;this.insource.state=c;CASCADE_MODE&&(20>selectedStrip.subId?this.insource.setItems([lang.M_LOCAL,lang.M_USB_A,lang.M_USB_B]):this.insource.setItems([lang.S_LOCAL,lang.S_USB_A,lang.S_USB_B]))},onShow:function(){this.inmode=0;this.left=!0;this.sync()},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5;this.maxY=this.hh-this.h;0>this.maxY&&(this.maxY=0);this.offsetY=bound(this.offsetY,0,this.maxY)},initWidgets:function(){var a=this,b=
60,c=0;this.clrArr=["#D08561","#C35353",color.yellow,color.green];this.overview=new MENUBUTTON(this);this.overview.text=lang.OVERVIEW;this.overview.setPos(15,30);this.overview.setSize(86,40);this.overview.textColor="#e44";this.overview.onPress=function(){settingsWidget.setMode(4);setMode(E_MODE.SETTINGS)};ROUTING_TEST_MODE?(this.clrArr=["#D08561",color.yellow],this.insource=new SWITCHBOX(this),this.insource.setItems([lang.LOCAL,lang.USB_B]),this.insource.setItemWidth(124),this.insource.setPos(381,
30),this.insource.h=40,this.insource.colors=this.clrArr,this.insource.font=font.settingsLabel,this.insource.setState=function(a){this.state=a}):(this.insource=new SWITCHBOX(this),this.insource.setItems([lang.LOCAL,lang.USB_A,lang.USB_B]),this.insource.setItemWidth(124),this.insource.setPos(207,30),this.insource.h=40,this.insource.colors=this.clrArr,this.insource.font=font.settingsLabel,this.insource.setState=function(b){a.inmode&&(b=2);this.state=b});this.insource.valueFunc=function(){regUpdate(a)};
this.none=new CHECKBUTTON(this);this.none.setSize(86,40);ROUTING_TEST_MODE&&this.none.setPos(207,30);this.none.text=lang.NONE;this.none.color=color.gray;this.none.textColor=color.gray;this.none.textColor2=color.white;this.none.font=font.sans13pt;this.none.getState=function(){var b="src";1==a.scmode&&(b="scsrc");this.state="none"==selectedStrip.getNameValue(b)};this.none.onToggleUp=function(){var b="src";1==a.scmode&&(b="scsrc");selectedStrip.setNameValue(b,"none");regUpdate(a)};this.none.onToggleDown=
function(){1==a.scmode&&(selectedStrip.setNameValue("scsrc","none"),regUpdate(a))};this.scheck=new CHECKBUTTON(this);this.scheck.setAnchors(687,30);this.scheck.setSize(86,40);this.scheck.text=formatButtonText(lang.SOUNDCHECK_ASSIGN);this.scheck.font=font.stripChannel;this.scheck.dy=15;this.scheck.textColor=this.scheck.color=color.green;this.scheck.textColor2=color.white;this.scheck.getState=function(){this.state=a.scmode;this.textColor=selectedStrip.getNameValue("scsrc")?color.green:"#888"};this.scheck.onToggleUp=
function(){a.setMode(1)};this.scheck.onToggleDown=function(){a.setMode(0)};for(var b=58,d=0;32>d;d++){var f=new CHECKBUTTON(this);0==d%8&&0!=d&&c++;f.setSize(86,46);f.setPos(15+96*(d-8*c),86+b*c);f.idx=d;f.idx_orig=d;f.text=""+(d+1);f.textColor=color.white;f.textColor2=color.white;f.font=font.sans13pt;f.getState=function(){var b=a.insource.state;ROUTING_TEST_MODE&&(b=a.insource.state?2:0);var c=1==a.scmode;this.state=!1;this.idx=this.idx_orig;CASCADE_MODE&&20<=selectedStrip.subId&&0==b&&(this.idx+=
20);var d="",f="";switch(b){case 0:20<=this.idx_orig?(d=lang.LINE_IN+" "+(this.idx_orig%2?"R":"L"),f="li",this.idx=this.idx_orig%2):(d=lang.INPUT+" "+(this.idx_orig%22+1),f="hw");this.hidden=22<=this.idx_orig;break;case 1:d=lang.SLOT+" "+(this.idx+1);f="ua";this.hidden=this.idx_orig>=USB_SLOTS;break;case 2:d=lang.SLOT+" "+(this.idx+1);this.hidden=this.idx_orig>=DAW_SLOTS;f="ub";break;case 3:d=lang.SLOT+" "+(this.idx+1)}this.color=this.textColor=a.clrArr[a.insource.state];this.text=d;d="src";c&&(d=
"scsrc");c=selectedStrip.getNameValue(d);if(isString(c)){var c=c.split("."),d=parseInt(c[1]),m=-1;switch(c[0]){case "hw":m=E_CH_SRC_TYPE.HARDWARE;break;case "li":m=E_CH_SRC_TYPE.HARDWARE;break;case "ua":m=E_CH_SRC_TYPE.USB_A;break;case "ub":m=E_CH_SRC_TYPE.USB_B;break;case "uc":m=E_CH_SRC_TYPE.USB_A;break;case "ud":m=E_CH_SRC_TYPE.USB_B}CASCADE_MODE&&22<=selectedStrip.subId&&0!=b&&(b+=2);this.state=m==b&&this.idx==d&&f==c[0]}};f.onToggleUp=function(){var b=a.insource.state;ROUTING_TEST_MODE&&(b=a.insource.state?
2:0);var c=1==a.scmode;CASCADE_MODE&&20<=selectedStrip.subId&&0!=b&&(b+=2);var d="";switch(b){case 0:d=20<=this.idx_orig?"li.":"hw.";break;case 1:d="ua.";break;case 2:d="ub.";break;case 3:d="uc.";break;case 4:d="ud."}var b=this.idx,f="src";c&&(f="scsrc");selectedStrip.setNameValue(f,d+b);regUpdate(a)};f.onToggleDown=function(){1==a.scmode?(selectedStrip.setNameValue("scsrc","none"),regUpdate(a)):ROUTING_TEST_MODE&&(selectedStrip.setNameValue("src","none"),regUpdate(a))};this.BUTTONS.push(f)}c++;ROUTING_TEST_MODE||
this.none.setPos(687,86+b*c);this.reset=new MENUBUTTON(this);this.reset.text=lang.RESET;this.reset.setAnchors(15,86+b*c,null,null);this.reset.color=color.purple;this.reset.w=86;this.reset.h=40;this.reset.onPress=function(){var b=1==a.scmode,c=selectedStrip,d=c.subId;c.type==E_STRIP_TYPE.IN&&(c.setNameValue("src","hw."+c.subId),c.setNameValue("scsrc",ROUTING_TEST_MODE?"ub."+c.subId:"ua."+c.subId));c.type==E_STRIP_TYPE.LINEIN&&(c.setNameValue("src","li."+c.subId),d+=20,c.setNameValue("scsrc",ROUTING_TEST_MODE?
"ub."+d:"ua."+d));a.insource.state=b?ROUTING_TEST_MODE?2:1:0;regUpdate(a)};this.hh=86+b*c+b-10},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,this.offsetY,this.w,this.h);this.scmode&&(ctx.fillStyle="rgba(0,255,0,0.1)",ctx.fillRect(3,3,this.w-6,this.none.y+this.none.h+3));this.inmode&&(ctx.fillStyle="rgba(255,100,0,0.1)",ctx.fillRect(9,this.offsetY+75,770,231));ctx.textAlign="center";ctx.font=font.settingsLabel;var a=lang.CHANNEL_SOURCE+":";ctx.fillStyle=color.white;this.insource.enabled&&
ctx.fillText(a,this.insource.x+this.insource.w/2,this.insource.y-8)}}),UIX_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="UIX_PAGE";this.needClip=!0;this.y=40;this.enabled=!1;this.color=color.orange;this.initWidgets()},onShow:function(){this.sync()},sync:function(){},initWidgets:function(){},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5},paint:function(){ctx.fillStyle="#0B0B0B";ctx.fillRect(0,this.offsetY,this.w,this.h);getValue("settings.demo")&&
drawImage(res.UIX,(this.w-res.UIX.w())/2,(this.h-res.UIX.h())/2)}});function formatValue(a,b,c,d,f){d=d||!1;c=c||"";if(isDefined(f)&&a<=f)return"-∞";b=""+precision(a,b)+c;d&&0<a&&(b="+"+b);return b}function VtoGATE_THRESH(a){return 96*a-90}function VtoGATE_ATTACK(a){return 1*Math.pow(400,desqr(a))}function VtoGATE_RELEASE(a){return 5*Math.pow(400,desqr(a))}function VtoGATE_HOLD(a){return 1*Math.pow(2E3,desqr(a))}function VtoGATE_DEPTH(a){return 60*a-60}
var GATE_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GATE_PAGE";this.y=40;this.enabled=!1;this.color=color.GATE;this.initWidgets()},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5},onShow:function(){this.syncSliders()},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);
2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},syncSliders:function(){this.enabled&&null!=selectedStrip&&(this.keyPrefix=selectedStrip.name,this.led_thresh.setKeyPrefix(this.keyPrefix),this.led_attack.setKeyPrefix(this.keyPrefix),this.led_release.setKeyPrefix(this.keyPrefix),this.led_hold.setKeyPrefix(this.keyPrefix),this.led_depth.setKeyPrefix(this.keyPrefix),
this.slTHRESH.setKeyPrefix(this.keyPrefix),this.slATTACK.setKeyPrefix(this.keyPrefix),this.slRELEASE.setKeyPrefix(this.keyPrefix),this.slHOLD.setKeyPrefix(this.keyPrefix),this.slDEPTH.setKeyPrefix(this.keyPrefix),this.bypass.setKeyPrefix(this.keyPrefix))},initWidgets:function(){var a=this;this.gate=new GATE_WIDGET(this);this.gate.setAnchors(40,32,396,86);this.vuIN=new DYNVU(this);this.vuIN.setAnchors(null,30,370,86);this.vuIN.needGate=!0;this.vuOUT=new DYNVU(this);this.vuOUT.setAnchors(null,30,346,
86);this.led_thresh=new FXLEDPlain(this);this.led_thresh.setAnchors(null,null,336,13);this.led_thresh.keyPart="gate.thresh";this.led_thresh.label=lang.THRESHOLD;this.led_thresh.sign=lang.DB;this.led_thresh.formatValue=function(a){return formatValue(VtoGATE_THRESH(a),1,"",!1,-90)};this.slTHRESH=new EQHSlider2(this);this.slTHRESH.setAnchors(16,null,416,-1);this.slTHRESH.keyPart="gate.thresh";this.slTHRESH.defaultValue=-1;this.slTHRESH.valueFunc=function(){regUpdate(a.gate);regUpdate(a.vuIN);regUpdate(a.led_thresh);
selectedStrip.setNameValue("gate.prmod",1)};this.led_attack=new FXLEDPlain(this);this.led_attack.setAnchors(null,46,261,null);this.led_attack.w=60;this.led_attack.keyPart="gate.attack";this.led_attack.label=lang.ATTACK;this.led_attack.sign=lang.MS;this.led_attack.formatValue=function(a){return formatValue(VtoGATE_ATTACK(a),0)};this.slATTACK=new EQSlider(this);this.slATTACK.setAnchors(null,90,267,87);this.slATTACK.keyPart="gate.attack";this.slATTACK.textBot=lang.ATTACK;this.slATTACK.mV=[1,findV(VtoGATE_ATTACK,
10),findV(VtoGATE_ATTACK,50),findV(VtoGATE_ATTACK,100),findV(VtoGATE_ATTACK,200),findV(VtoGATE_ATTACK,300),0];this.slATTACK.valueFunc=function(){regUpdate(a.led_attack);0==selectedStrip.getNameValue("gate.prmod")&&(selectedStrip.setNameValue("gate.prmod",1),regUpdate(a.gate))};this.led_release=new FXLEDPlain(this);this.led_release.setAnchors(null,46,95,null);this.led_release.w=60;this.led_release.keyPart="gate.release";this.led_release.label=lang.RELEASE;this.led_release.sign=lang.MS;this.led_release.formatValue=
function(a){return formatValue(VtoGATE_RELEASE(a),0)};this.slRELEASE=new EQSlider(this);this.slRELEASE.setAnchors(null,90,101,87);this.slRELEASE.keyPart="gate.release";this.slRELEASE.textBot=lang.RELEASE;this.slRELEASE.mV=[1,findV(VtoGATE_RELEASE,10),findV(VtoGATE_RELEASE,50),findV(VtoGATE_RELEASE,100),findV(VtoGATE_RELEASE,200),findV(VtoGATE_RELEASE,500),findV(VtoGATE_RELEASE,1E3),0];this.slRELEASE.valueFunc=function(){regUpdate(a.led_release);0==selectedStrip.getNameValue("gate.prmod")&&(selectedStrip.setNameValue("gate.prmod",
1),regUpdate(a.gate))};this.led_hold=new FXLEDPlain(this);this.led_hold.setAnchors(null,46,178,null);this.led_hold.w=60;this.led_hold.keyPart="gate.hold";this.led_hold.label=lang.HOLD;this.led_hold.sign=lang.MS;this.led_hold.formatValue=function(a){return formatValue(VtoGATE_HOLD(a),0)};this.slHOLD=new EQSlider(this);this.slHOLD.setAnchors(null,90,184,87);this.slHOLD.keyPart="gate.hold";this.slHOLD.textBot=lang.HOLD;this.slHOLD.mV=[1,findV(VtoGATE_HOLD,10),findV(VtoGATE_HOLD,100),findV(VtoGATE_HOLD,
200),findV(VtoGATE_HOLD,500),findV(VtoGATE_HOLD,1E3),0];this.slHOLD.valueFunc=function(){regUpdate(a.led_hold);0==selectedStrip.getNameValue("gate.prmod")&&(selectedStrip.setNameValue("gate.prmod",1),regUpdate(a.gate))};this.led_depth=new FXLEDPlain(this);this.led_depth.setAnchors(null,46,12,null);this.led_depth.w=60;this.led_depth.keyPart="gate.depth";this.led_depth.label=lang.DEPTH;this.led_depth.sign=lang.DB;this.led_depth.formatValue=function(a){return formatValue(VtoGATE_DEPTH(a),1,"",!1,-60)};
this.slDEPTH=new EQSlider(this);this.slDEPTH.setAnchors(null,90,18,87);this.slDEPTH.keyPart="gate.depth";this.slDEPTH.textBot=lang.DEPTH;this.slDEPTH.mV=[1,findV(VtoGATE_DEPTH,-10),findV(VtoGATE_DEPTH,-20),findV(VtoGATE_DEPTH,-30),findV(VtoGATE_DEPTH,-40),findV(VtoGATE_DEPTH,-50),0];this.slDEPTH.valueFunc=function(){regUpdate(a.gate);regUpdate(a.led_depth);0==selectedStrip.getNameValue("gate.prmod")&&selectedStrip.setNameValue("gate.prmod",1)};this.bypass=new CheckBox(this);this.bypass.keyPart="gate.bypass";
this.bypass.setAnchors(null,null,18,10);this.bypass.setImages(res.bBYPASS_OFF,res.bBYPASS_ON);this.bypass.onToggleUp=function(){regUpdate(a)};this.bypass.onToggleDown=function(){regUpdate(a)};this.reset=new Button(this);this.reset.setAnchors(null,null,244,10);this.reset.setImages(res.bRESET_OFF,res.bRESET_ON);this.reset.valueFunc=function(){a.doReset()};this.preset=new MENUBUTTON(this);this.preset.setSize(130,29);this.preset.setAnchors(null,10,10,null);this.preset.text=lang.PRESETS;this.preset.color=
color.green;this.preset.onPress=function(){a.showPresets()}},resetVUs:function(){this.vuIN.reset();this.vuOUT.reset()},doReset:function(){resetGate(selectedChID);regUpdate(this)},showPresets:function(){this.menu=new PRESET_MENU2(null,"gate",this,this.parent.color);regUpdate(this.menu)},savePreset:function(a){var b=[".gate.thresh",".gate.attack",".gate.release",".gate.hold",".gate.depth"],c={},d=this.keyPrefix.split(".");key=d[0]+"."+d[1];for(d=0;d<b.length;d++)c[b[d]]=getValue(key+b[d]);selectedStrip.setNameValue("gate.prmod",
0);selectedStrip.setNameValue("gate.prname",a||"");return c},loadPreset:function(a,b){log(a);var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);selectedStrip.setNameValue("gate.prmod",0);selectedStrip.setNameValue("gate.prname",b||"");regUpdate(this)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);drawImage(res.dbx,this.preset.x-48,13);ctx.fillStyle="#101115";ctx.fillRect(16,10,this.w-16-335,this.h-10-60);ctx.translate(16,10);ctx.fillStyle=color.grad1;ctx.fillRect(1,
0,this.w-16-335-2,7);ctx.translate(-16,-10);ctx.textAlign="center";ctx.font="10px open_sans_condensedbold";ctx.fillStyle="#747577";ctx.fillText("IN",this.vuIN.x+4,this.vuIN.y+this.vuIN.h+15);ctx.fillText("OUT",this.vuOUT.x+4,this.vuOUT.y+this.vuOUT.h+15);var a=this.gate.h,b=this.gate.w,c=b/96,d=a/96;ctx.font=font.eqMarks;ctx.fillStyle=color.graphMarks;var f="-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");ctx.save();ctx.translate(this.gate.x,this.gate.y);ctx.textAlign="left";ctx.fillText("-90",
0,a+15);ctx.fillText("+6",b-10,a+15);ctx.textAlign="center";for(var b=1,e=10;90>=e;e+=10)ctx.fillText(f[b++],c*e,a+15);b=1;ctx.textAlign="right";ctx.fillText("-90",-5,a-2);ctx.fillText("+6",-5,9);for(e=10;90>=e;e+=10)ctx.fillText(f[b++],-5,a-d*e+4);ctx.restore()}}),GATE_WIDGET=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GATE_WIDGET";this.needMoveEvt=this.needClip=!0;this.grad=null;this.bypass=!1;this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=
0;this.lineColor="#5ada72";this.gradColor1="#0a3a24";this.gradColor2="#00eb58";this.touchRadius=32;this.idx=2;this.showPreset=!0;this.lastClickIdx=-1;this.lastClickPos=[-1,-1];this.clickPos=[-1,-1];this.lastClickTime=-1;this.lastP=!1},calcGeometry:function(){var a=0<this.w?this.w:1,b=0<this.h?this.h:1;this.grad=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grad.addColorStop(0,"rgba(255,255,255,0.2)");this.grad.addColorStop(1,"rgba(255,255,255,0)");this.grad_active=ctx.createLinearGradient(0,
b,a/2,0);this.grad_active.addColorStop(0,this.gradColor2);this.grad_active.addColorStop(1,this.gradColor1);this.grad_bypass=ctx.createLinearGradient(0,b,a/2,0);this.grad_bypass.addColorStop(0,"#A0A0A0");this.grad_bypass.addColorStop(1,"#505050")},onDown:function(a,b,c){if(!this.pressed){a-=this.globalX();b-=this.globalY();this.clickPos=[a,b];this.touchID=c;this.pressed=!1;this.delta=[0,0];c=this.w;var d=this.h,f=this.h/96,e=selectedStrip.getNameValue("gate.thresh"),g=selectedStrip.getNameValue("gate.depth");
c*=e;d*=1-e;f=bound(d+-(60*g-60)*f,d,this.h-7);g=this.touchRadius+5;e=this.touchRadius+5;if(20>c||c>this.w-20||20>d||d>this.h-20)g=this.touchRadius+14;if(20>c||c>this.w-20||20>f||f>this.h-20)e=this.touchRadius+14;isInCircle(c,d,g,a,b)?(this.idx=0,this.delta=[c-a,d-b],this.pressed=!0):isInCircle(c,f,e,a,b)&&(this.idx=1,this.delta=[c-a,f-b],this.pressed=!0);regUpdate(this)}},onMove:function(a,b,c){if(this.pressed&&this.touchID==c){a+=this.delta[0];b+=this.delta[1];a=bound(a-this.globalX(),0,this.w);
b=bound(b-this.globalY(),0,this.h);var d=this.h;c=this.h/96;var f=selectedStrip.getNameValue("gate.thresh");selectedStrip.getNameValue("gate.depth");d*=1-f;switch(this.idx){case 0:a=bound(a/this.w,0,1);selectedStrip.setNameValue("gate.thresh",a);regUpdate(this.parent);break;case 1:a=b>this.h-4?0:(60-bound(b-d,0,this.h-d)/c)/60,a=bound(a,0,1),selectedStrip.setNameValue("gate.depth",a),regUpdate(this.parent)}regUpdate(this)}},onUp:function(a){if(this.touchID==a){this.delta=[0,0];a=Date.now();var b=
Math.abs(this.lastClickPos[0]-this.clickPos[0]),c=Math.abs(this.lastClickPos[1]-this.clickPos[1]);a-this.lastClickTime<DBL_CLK_TIME&&30>b&&30>c&&this.lastClickIdx==this.idx&&this.lastP==!this.pressed&&setMode(E_MODE.MIX);this.moved||(this.lastClickTime=a);this.lastClickPos=this.clickPos;this.lastClickIdx=this.idx;this.lastP=!this.peakGrab;this.pressed=!1;this.touchID=-1}},drawCircle:function(a,b,c,d,f){d=d||"#fff";c=c||!1;ctx.lineWidth=c?3:2;ctx.fillStyle=d;ctx.strokeStyle=d;this.bypass&&(ctx.fillStyle=
"rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)");ctx.beginPath();ctx.arc(a,b,13,0,2*Math.PI);ctx.fill();ctx.beginPath();ctx.arc(a,b,this.touchRadius+0,0,2*Math.PI);ctx.globalAlpha=.38;ctx.fill();ctx.globalAlpha=1;c&&ctx.stroke();ctx.drawText(f,a,b,{align:"center",valign:"middle",font:"bold 14px open_sans_condensedbold",color:"#f0f0f0",shadow:["#060606",0,1,1]})},paint:function(){ctx.shadowColor="transparent";var a=selectedStrip.getNameValue("gate.bypass"),b=selectedStrip.getNameValue("gate.enabled"),
c=selectedStrip.getNameValue("gate.thresh"),d=selectedStrip.getNameValue("gate.depth");this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);var f=this.w,e=this.h,g=this.w/96,h=this.h/96;!a&&b?(ctx.fillStyle=this.grad_active,ctx.strokeStyle=this.lineColor):(ctx.fillStyle=this.grad_bypass,ctx.strokeStyle="#555");ctx.lineWidth=2;ctx.lineCap="round";var l=c*f,b=c*e,g=-(60*d-60)*g,h=-(60*d-60)*h;ctx.beginPath();.001<d?(ctx.moveTo(g,e),ctx.lineTo(l,
e-b+h)):ctx.moveTo(l,e);ctx.lineTo(l,e-b);ctx.lineTo(f,0);ctx.stroke();ctx.lineTo(f,e);ctx.closePath();ctx.globalAlpha=.4;ctx.fill();ctx.globalAlpha=1;l=c*f;c=(1-c)*e;g=l;b=e-b+h;l=bound(l,7,this.w-7);c=bound(c,7,this.h-7);g=bound(g,7,this.w-7);b=bound(b,c,this.h-7);this.drawCircle(g,b,1==this.idx,a?"#666":1E-4>d?"#8a8":"#00eb58","D");this.drawCircle(l,c,0==this.idx,a?"#666":"#00eb58","T");ctx.lineWidth=1;ctx.strokeStyle="#222";ctx.strokeRect(.5,.5,f-1,e-1);this.showPreset&&(a=1==selectedStrip.getNameValue("gate.prmod"),
d=selectedStrip.getNameValue("gate.prname"),ctx.textAlign="left",ctx.fillStyle=a?"#444":color.green,ctx.font="18px open_sans_condensedbold",ctx.fillText(d,4,18,this.w-10))},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/96,f=this.h/
96;a.fillStyle="#0A0B0C";a.fillRect(0,0,b,c);isSmall||(a.fillStyle=this.grad,a.fillRect(0,0,b,c));a.strokeStyle="rgba(255,255,255,0.04)";a.lineWidth=1;a.beginPath();for(var e=0;90>=e;e+=10)a.moveTo((d*e|0)+.5,0),a.lineTo((d*e|0)+.5,c),a.moveTo(0,(c-f*e|0)+.5),a.lineTo(b,(c-f*e|0)+.5);a.stroke();a.lineWidth=1;a.strokeStyle="#222";a.strokeRect(.5,.5,b-1,c-1);this.cachedBgW=this.w;this.cachedBgH=this.h}}),DIGITECH=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="DIGITECH";
this.y=this.x=0;this.bgColor=color.eqBg;this.bgColor2="#000";this.setAnchors(0,40,0,5);this.needClip=!0;this.color=color.DIGI;this.mode=0;this.initWidgets();this.PEDALS[0].onDown()},onShow:function(){this.connectKeys()},connectKeys:function(){var a=selectedStrip.name;this.SWITCHER.setKey(a+"digitech.enabled");HAVE_ROUTING||this.hiz.setKey(a+"hiz",!0);this.sl1.setKey(a+"digitech.gain");this.sl2.setKey(a+"digitech.level");this.sl3.setKey(a+"digitech.bass");this.sl4.setKey(a+"digitech.mid");this.sl5.setKey(a+
"digitech.treble");this.led1.setKey(a+"digitech.gain");this.led2.setKey(a+"digitech.level");this.led3.setKey(a+"digitech.bass");this.led4.setKey(a+"digitech.mid");this.led5.setKey(a+"digitech.treble")},onDown:function(a,b){},setMode:function(a){this.mode=a;regUpdate(this)},initWidgets:function(){var a=this,b=this.parent,c=10;this.SWITCHER=new SWITCHBOX(this);this.SWITCHER.setItems([lang.OFF,lang.ON]);this.SWITCHER.setAnchors(null,c,10,null);this.SWITCHER.valueFunc=function(){regUpdate(b)};this.hiz=
new CHECKBUTTON(this);this.hiz.setAnchors(null,c,160,null);this.hiz.w=50;this.hiz.text=lang.HI_Z;this.hiz.color=this.hiz.textColor=color.yellow;this.hiz.textColor2=color.white;this.hiz.onToggleUp=function(){1==selectedStrip.getNameValue("phantom")&&(selectedStrip.setNameValue("phantom",0),blockStrip(selectedStrip.id,PHANTOM_OFF_DELAY))};if(HAVE_ROUTING){this.hiz.regKey("i.0.src");this.hiz.regKey("i.1.src");for(var d=0;d<gainStrips2.length;d++)this.hiz.regKey(gainStrips2[d].gainName+"hiz");this.hiz.onToggleUp=
function(){};this.hiz.getState=function(){this.state=0;this.disabled=!hasHIZ(selectedStrip);if(!this.disabled){var a=selectedStrip.getNameValue("src");this.state=getValue(a+".hiz")}};this.hiz.onToggle=function(){var a=gainStrips[selectedStrip.subId];a.updGain();a.hiz.enabled&&a.hiz.doClick()}}this.preset=new MENUBUTTON(this);this.preset.setSize(130,30);this.preset.text=lang.PRESETS;this.preset.setAnchors(null,c,262,null);this.preset.onPress=function(){a.showPresets()};this.PEDALS=[];c=[{name:"FX 1 REVERB",
color:color.blue,regKeys:["f.0.fxtype"],getState:function(){this.text=fxStrips[0].getName();this.state=selectedStrip.getNameValue("fx.0.mute")?0:1;1==this.state&&(this.state=.001<selectedStrip.getNameValue("fx.0.value"))},func:function(){a.l1.hide();a.s1.hide();a.l2.show();a.s2.show();a.l2.label=lang.FX_SEND;a.l2.sign=lang.DB;a.l2.formatValue=VtoDB2;a.l2.setKey(selectedStrip.name+"fx.0.value");a.s2.setKey(selectedStrip.name+"fx.0.value");var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};
a.s2.dbMarks=!0;a.s2.fader=res.eqVFaderBlue;a.s2.maxValue=1;a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}}];2<=curSetup.fx&&c.push({name:"FX 2",color:color.orange,regKeys:["f.1.fxtype"],getState:function(){this.text=fxStrips[1].getName();this.state=selectedStrip.getNameValue("fx.1.mute")?0:1;1==this.state&&(this.state=.001<selectedStrip.getNameValue("fx.1.value"))},func:function(){a.l2.show();a.s2.show();a.l2.label=lang.FX_SEND;a.l2.sign=lang.DB;a.l2.formatValue=
VtoDB2;a.l2.setKey(selectedStrip.name+"fx.1.value");a.s2.setKey(selectedStrip.name+"fx.1.value");a.s2.dbMarks=!0;a.s2.fader=res.eqVFaderOrange;var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}});3<=curSetup.fx&&c.push({name:"FX 3",color:color.purple,regKeys:["f.2.fxtype"],getState:function(){this.text=fxStrips[2].getName();this.state=selectedStrip.getNameValue("fx.2.mute")?
0:1;1==this.state&&(this.state=.001<selectedStrip.getNameValue("fx.2.value"))},func:function(){a.l2.show();a.s2.show();a.l2.label=lang.FX_SEND;a.l2.sign=lang.DB;a.l2.formatValue=VtoDB2;a.l2.setKey(selectedStrip.name+"fx.2.value");a.s2.setKey(selectedStrip.name+"fx.2.value");a.s2.dbMarks=!0;a.s2.fader=res.eqVFaderPurple;a.s2.maxValue=1;var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}});
4<=curSetup.fx&&c.push({name:"FX 4",regKeys:["f.3.fxtype"],color:color.green,getState:function(){this.text=fxStrips[3].getName();this.state=selectedStrip.getNameValue("fx.3.mute")?0:1;1==this.state&&(this.state=.001<selectedStrip.getNameValue("fx.3.value"))},func:function(){a.l2.show();a.s2.show();a.l2.label=lang.FX_SEND;a.l2.sign=lang.DB;a.l2.formatValue=VtoDB2;a.l2.setKey(selectedStrip.name+"fx.3.value");a.s2.setKey(selectedStrip.name+"fx.3.value");a.s2.dbMarks=!0;a.s2.fader=res.eqVFaderGreen;a.s2.maxValue=
1;var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}});c.push({name:lang.HPF,color:color.red,getState:function(){this.state=0<selectedStrip.getNameValue("eq.hpf.freq")},func:function(){a.l2.show();a.s2.show();a.l2.label=lang.HPF_FREQ;a.l2.sign="hZ";a.l2.formatValue=VtoHPFfreq;a.l2.setKey(selectedStrip.name+"eq.hpf.freq");a.s2.setKey(selectedStrip.name+"eq.hpf.freq");
a.s2.dbMarks=!1;a.s2.fader=res.eqVFaderGray;a.s2.maxValue=FREQtoV(1E3);a.s2.mV=[0,findV(VtoFREQ,50),findV(VtoFREQ,100),findV(VtoFREQ,200),findV(VtoFREQ,500),findV(VtoFREQ,1E3)];a.s2.setDefaultValue(null);var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}},{name:lang.NOTCH_F,color:color.red,getState:function(){var a=selectedStrip.name+"eq.b4.";if(this.state=isNear(getValue(a+
"q"),1))this.state=isNear(getValue(a+"gain"),0)},func:function(){a.l2.show();a.s2.show();a.l2.label=lang.NOTCH_FREQ;a.l2.sign="hZ";a.l2.setKey(selectedStrip.name+"eq.b4.freq");a.l2.formatValue=VtoFREQ;a.s2.setKey(selectedStrip.name+"eq.b4.freq");a.s2.dbMarks=!1;a.s2.fader=res.eqVFaderPurple;a.s2.maxValue=1;a.s2.mV=[0,findV(VtoFREQ,50),findV(VtoFREQ,100),findV(VtoFREQ,200),findV(VtoFREQ,500),findV(VtoFREQ,1E3),findV(VtoFREQ,2E3),findV(VtoFREQ,5E3),findV(VtoFREQ,1E4),1];a.s2.setDefaultValue(null);var b=
this;a.s2.valueFunc=function(c){var d=selectedStrip.name+"eq.b4.";setValue(d+"freq",c);setValue(d+"q",1);setValue(d+"gain",0);regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}},{name:lang.COMPRESSOR,color:color.DYN,getState:function(){this.state=selectedStrip.getNameValue("dyn.bypass")?0:1},func:function(){a.l4.show();a.s4.show();a.l4.label=lang.THRESHOLD;a.l4.sign=lang.DB;a.l4.setKey(selectedStrip.name+
"dyn.threshold");a.l4.formatValue=function(a){a=VtoTHRESH(a)+"";-1==a.indexOf(".")&&(a+=".0");return a};a.s4.setKey(selectedStrip.name+"dyn.threshold");a.s4.dbMarks=!1;a.s4.mV=[0,findV(VtoTHRESH,0),findV(VtoTHRESH,-10),findV(VtoTHRESH,-20),findV(VtoTHRESH,-30),findV(VtoTHRESH,-40),findV(VtoTHRESH,-50),findV(VtoTHRESH,-60),findV(VtoTHRESH,-70),findV(VtoTHRESH,-80),1];a.s4.setDefaultValue(findV(VtoTHRESH,-6),!1);a.s4.fader=res.eqVFaderGray;a.l1.show();a.s1.show();a.l1.label=lang.RATIO;a.l1.sign="";
a.l1.setKey(selectedStrip.name+"dyn.ratio");a.l1.formatValue=function(a){a=VtoRATIO(a);return a=60<a?"inf":2>a?precision(a,2)+"":precision(a,1)+""};a.s1.setKey(selectedStrip.name+"dyn.ratio");a.s1.dbMarks=!1;a.s1.mV=[1,1/1.2,.625,.5,1/3,.2,.1,0];a.s1.setDefaultValue(1,!1);a.s1.fader=res.eqVFaderYellow;a.l2.show();a.s1.show();a.l2.label=lang.ATTACK;a.l2.sign=lang.MS;a.l2.setKey(selectedStrip.name+"dyn.attack");a.l2.formatValue=VtoATTACK;a.s2.setKey(selectedStrip.name+"dyn.attack");a.s2.dbMarks=!1;
a.s2.maxValue=1;a.s2.mV=[1,findV(VtoATTACK,300),findV(VtoATTACK,200),findV(VtoATTACK,100),findV(VtoATTACK,20),0];a.s2.setDefaultValue(findV(VtoATTACK,30),!1);a.s2.fader=res.eqVFaderGray;a.l3.show();a.s3.show();a.l3.label=lang.RELEASE;a.l3.sign=lang.MS;a.l3.formatValue=VtoREL;a.l3.setKey(selectedStrip.name+"dyn.release");a.s3.setKey(selectedStrip.name+"dyn.release");a.s3.dbMarks=!1;a.s3.mV=[1,findV(VtoREL,100),findV(VtoREL,500),findV(VtoREL,1E3),findV(VtoREL,1500),0];a.s3.setDefaultValue(findV(VtoREL,
500),!1);a.s3.fader=res.eqVFaderGray;a.l5.show();a.s5.show();a.l5.label=lang.GAIN;a.l5.sign=lang.DB;a.l5.setKey(selectedStrip.name+"dyn.outgain");a.l5.formatValue=function(a){return precision(VtoDYNOUTGAIN(a),1)};a.s5.setKey(selectedStrip.name+"dyn.outgain");a.s5.dbMarks=!1;a.s5.fader=res.eqVFaderRed;a.s5.setDefaultValue(findV(VtoDYNOUTGAIN,0));a.s5.mV=[1,findV(VtoDYNOUTGAIN,-12),findV(VtoDYNOUTGAIN,12),findV(VtoDYNOUTGAIN,24),findV(VtoDYNOUTGAIN,36),0];a.setMode(this.idx)}});HAVE_GATE?c.push({name:lang.GATE,
color:color.GATE,getState:function(){this.state=selectedStrip.getNameValue("gate.enabled")&&!selectedStrip.getNameValue("gate.bypass")},func:function(){var b=this;a.l4.show();a.s4.show();a.l4.label=lang.THRESHOLD;a.l4.sign=lang.DB;a.l4.setKey(selectedStrip.name+"gate.thresh");a.l4.formatValue=function(a){return formatValue(VtoGATE_THRESH(a),1,"",!1,-90)};a.s4.setKey(selectedStrip.name+"gate.thresh");a.s4.dbMarks=!1;a.s4.maxValue=1;a.s4.setDefaultValue(0,!1);a.s4.mV=[0,findV(VtoGATE_THRESH,0),findV(VtoGATE_THRESH,
-10),findV(VtoGATE_THRESH,-20),findV(VtoGATE_THRESH,-30),findV(VtoGATE_THRESH,-40),findV(VtoGATE_THRESH,-50),findV(VtoGATE_THRESH,-60),findV(VtoGATE_THRESH,-70),findV(VtoGATE_THRESH,-80),1];a.s4.fader=res.eqVFaderGray;a.s4.valueFunc=function(){regUpdate(a.l4);regUpdate(b);selectedStrip.setNameValue("gate.prmod",1)};a.l1.show();a.s1.show();a.l1.label=lang.ATTACK;a.l1.sign=lang.MS;a.l1.setKey(selectedStrip.name+"gate.attack");a.l1.formatValue=function(a){return formatValue(VtoGATE_ATTACK(a),0)};a.s1.setKey(selectedStrip.name+
"gate.attack");a.s1.dbMarks=!1;a.s1.maxValue=1;a.s1.mV=[1,findV(VtoGATE_ATTACK,10),findV(VtoGATE_ATTACK,50),findV(VtoGATE_ATTACK,100),findV(VtoGATE_ATTACK,200),findV(VtoGATE_ATTACK,300),0];a.s1.fader=res.eqVFaderGray;a.s1.valueFunc=function(){regUpdate(a.l1);regUpdate(b);selectedStrip.setNameValue("gate.prmod",1)};a.l2.show();a.s2.show();a.l2.label=lang.HOLD;a.l2.sign=lang.MS;a.l2.setKey(selectedStrip.name+"gate.hold");a.l2.formatValue=function(a){return formatValue(VtoGATE_HOLD(a),0)};a.s2.setKey(selectedStrip.name+
"gate.hold");a.s2.dbMarks=!1;a.s2.maxValue=1;a.s2.mV=[1,findV(VtoGATE_HOLD,10),findV(VtoGATE_HOLD,100),findV(VtoGATE_HOLD,200),findV(VtoGATE_HOLD,500),findV(VtoGATE_HOLD,1E3),0];a.s2.fader=res.eqVFaderGray;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b);selectedStrip.setNameValue("gate.prmod",1)};a.l3.show();a.s3.show();a.l3.label=lang.RELEASE;a.l3.sign=lang.MS;a.l3.setKey(selectedStrip.name+"gate.release");a.l3.formatValue=function(a){return formatValue(VtoGATE_RELEASE(a),0)};a.s3.setKey(selectedStrip.name+
"gate.release");a.s3.dbMarks=!1;a.s3.maxValue=1;a.s3.mV=[1,findV(VtoGATE_RELEASE,10),findV(VtoGATE_RELEASE,50),findV(VtoGATE_RELEASE,100),findV(VtoGATE_RELEASE,200),findV(VtoGATE_RELEASE,500),findV(VtoGATE_RELEASE,1E3),0];a.s3.fader=res.eqVFaderGray;a.s3.valueFunc=function(){regUpdate(a.l3);regUpdate(b);selectedStrip.setNameValue("gate.prmod",1)};a.l5.show();a.s5.show();a.l5.label=lang.DEPTH;a.l5.sign=lang.DB;a.l5.setKey(selectedStrip.name+"gate.depth");a.l5.formatValue=function(a){return formatValue(VtoGATE_DEPTH(a),
1,"",!1,-60)};a.s5.setKey(selectedStrip.name+"gate.depth");a.s5.dbMarks=!1;a.s5.maxValue=1;a.s5.mV=[1,findV(VtoGATE_DEPTH,-10),findV(VtoGATE_DEPTH,-20),findV(VtoGATE_DEPTH,-30),findV(VtoGATE_DEPTH,-40),findV(VtoGATE_DEPTH,-50),0];a.s5.fader=res.eqVFaderGray;a.s5.valueFunc=function(){regUpdate(a.l5);regUpdate(b);selectedStrip.setNameValue("gate.prmod",1)};a.setMode(this.idx)}}):c.push({name:lang.GATE,color:color.GATE,getState:function(){this.state=.001<selectedStrip.getNameValue("gate.thresh")},func:function(){a.l2.show();
a.s2.show();a.l2.label=lang.THRESHOLD;a.l2.sign=lang.DB;a.l2.setKey(selectedStrip.name+"gate.thresh");a.l2.formatValue=function(a){return formatValue(VtoGATE_THRESH(a),1,"",!1,-90)};a.s2.setKey(selectedStrip.name+"gate.thresh");a.s2.dbMarks=!1;a.s2.maxValue=1;a.s2.setDefaultValue(0,!1);a.s2.mV=[0,findV(VtoGATE_THRESH,0),findV(VtoGATE_THRESH,-10),findV(VtoGATE_THRESH,-20),findV(VtoGATE_THRESH,-30),findV(VtoGATE_THRESH,-40),findV(VtoGATE_THRESH,-50),findV(VtoGATE_THRESH,-60),findV(VtoGATE_THRESH,-70),
findV(VtoGATE_THRESH,-80),1];a.s2.fader=res.eqVFaderGreen;var b=this;a.s2.valueFunc=function(){regUpdate(a.l2);regUpdate(b)};a.l1.hide();a.s1.hide();a.l3.hide();a.s3.hide();a.l4.hide();a.s4.hide();a.l5.hide();a.s5.hide();a.setMode(this.idx)}});for(var f=0,d=0;d<c.length;d++){var e=c[d],g=new PEDAL(this);g.setAnchors(10+d%5*(g.w+10),55+90*(d/5|0),null,null);g.text=e.name;g.idx=d;g.color=e.color;e.onLong&&(g.onLong=e.onLong);(e.regKeys||[]).each(function(a){g.regKey(a)});g.onDown=e.func;g.getState=
e.getState;this.PEDALS.push(g);0<d&&0==d%5&&f++}this.CABS=new DIGI_CAB(this);this.AMPS=new DIGI_AMP(this);d=11;f=d-11;e=73;c=280;this.s1=new EQSlider(this);this.s1.setAnchors(d+1*e,330,null,10);this.s1.fader=res.eqVFaderGreen;this.s1.valueFunc=function(b){regUpdate(a.l1)};this.l1=new FXLEDPlain(this);this.l1.setAnchors(f+1*e,c,null,null);this.l1.label="PAR1";this.l1.sign="%";this.l1.formatValue=VtoPERCENT;this.s2=new EQSlider(this);this.s2.setAnchors(d+2*e,330,null,10);this.s2.fader=res.eqVFaderBlue;
this.s2.valueFunc=function(b){regUpdate(a.l2)};this.l2=new FXLEDPlain(this);this.l2.setAnchors(f+2*e,c,null,null);this.l2.label="PAR2";this.l2.sign="%";this.l2.formatValue=VtoPERCENT;this.s3=new EQSlider(this);this.s3.setAnchors(d+3*e,330,null,10);this.s3.fader=res.eqVFaderYellow;this.s3.valueFunc=function(b){regUpdate(a.l3)};this.l3=new FXLEDPlain(this);this.l3.setAnchors(f+3*e,c,null,null);this.l3.label="PAR3";this.l3.sign="%";this.l3.formatValue=VtoPERCENT;this.s4=new EQSlider(this);this.s4.setAnchors(d+
0*e,330,null,10);this.s4.fader=res.eqVFaderYellow;this.s4.valueFunc=function(b){regUpdate(a.l4)};this.l4=new FXLEDPlain(this);this.l4.setAnchors(f+0*e,c,null,null);this.l4.label="PAR4";this.l4.sign="%";this.l4.formatValue=VtoPERCENT;this.s5=new EQSlider(this);this.s5.setAnchors(d+4*e,330,null,10);this.s5.fader=res.eqVFaderYellow;this.s5.valueFunc=function(b){regUpdate(a.l5)};this.l5=new FXLEDPlain(this);this.l5.setAnchors(f+4*e,c,null,null);this.l5.label="PAR5";this.l5.sign="%";this.l5.formatValue=
VtoPERCENT;d=15;f=d-11;e=80;this.sl5=new EQSlider(this);this.sl5.setAnchors(null,330,d+0*e,10);this.sl5.setDefaultValue(.5);this.sl5.fader=res.eqVFaderPurple;this.sl5.valueFunc=function(b){regUpdate(a.led5)};this.sl5.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led5=new FXLEDPlain(this);this.led5.setAnchors(null,c,f+0*e,null);this.led5.label=lang.TREBLE;this.led5.sign="%";this.led5.formatValue=function(a){return(.5<a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};
this.sl4=new EQSlider(this);this.sl4.setAnchors(null,330,d+1*e,10);this.sl4.setDefaultValue(.5);this.sl4.fader=res.eqVFaderRed;this.sl4.valueFunc=function(b){regUpdate(a.led4)};this.sl4.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led4=new FXLEDPlain(this);this.led4.setAnchors(null,c,f+1*e,null);this.led4.label=lang.MID;this.led4.sign="%";this.led4.formatValue=function(a){return(.5<a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};this.sl3=new EQSlider(this);this.sl3.setAnchors(null,
330,d+2*e,10);this.sl3.setDefaultValue(.5);this.sl3.fader=res.eqVFaderGreen;this.sl3.valueFunc=function(b){regUpdate(a.led3)};this.sl3.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led3=new FXLEDPlain(this);this.led3.setAnchors(null,c,f+2*e,null);this.led3.label=lang.BASS;this.led3.sign="%";this.led3.formatValue=function(a){return(.5<a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};this.sl2=new EQSlider(this);this.sl2.setAnchors(null,330,d+3*e,10);this.sl2.valueFunc=
function(b){regUpdate(a.led2)};this.sl2.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led2=new FXLEDPlain(this);this.led2.setAnchors(null,c,f+3*e,null);this.led2.label=lang.LEVEL;this.led2.sign="%";this.led2.formatValue=function(a){return VtoPERCENT(a)};this.sl1=new EQSlider(this);this.sl1.setAnchors(null,330,d+4*e,10);this.sl1.fader=res.eqVFaderOrange;this.sl1.valueFunc=function(b){regUpdate(a.led1)};this.sl1.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};
this.led1=new FXLEDPlain(this);this.led1.setAnchors(null,c,f+4*e,null);this.led1.label=lang.GAIN;this.led1.sign="%";this.led1.formatValue=function(a){return VtoPERCENT(a)}},calcGeometry:function(){res.AMP_D.h();res.CAB_D.h();var a=this.w-res.CAB_D.w()+10,b=a+36,c=50+res.AMP_D.h();this.CABS.setPos(a,c);this.AMPS.setPos(b,50)},showPresets:function(){var a=selectedStrip.getNameValue("digitech.prname");this.menu=new PRESET_MENU2(null,"digi",this,"#999",a);regUpdate(this.menu)},savePreset:function(){for(var a=
".digitech.amp .digitech.bass .digitech.cab .digitech.gain .digitech.level .digitech.mid .digitech.treble .eq.hpf.freq .gate.thresh .dyn.threshold .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release".split(" "),b={},c=selectedStrip.name.split("."),c=c[0]+"."+c[1],d=0;d<a.length;d++)b[a[d]]=getValue(c+a[d]);return b},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);isDefined(b)&&setValue(c+".digitech.prname",b);regUpdate(this)},paint:function(){ctx.fillStyle=
this.bgColor;ctx.fillRect(0,0,this.w,this.h);drawText(lang.SHORTCUTS+":",12,36,{color:color.white,font:"15pt open_sans_condensedbold",align:"left"})}}),DIGI_CAB=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="DIGI_CAB";this.w=res.CAB_D.w();this.h=86;this.needClip=!0;this.mode=0;this.ena=!1;this.data=E_CABS2;this.keys=Object.keys(E_CABS2);this.vals=Object.keys(E_CABS2).map(function(b){return E_CABS2[b]})},onDown:function(){var a=this;this.ena&&(this.modal=new LIST(-1),
this.modal.setItems(this.vals),this.modal.setGeometry(this.globalX(),this.globalY(),this.w,400),this.modal.keys=this.keys,this.modal.getActiveItem=function(){var a=""+getValue(selectedStrip.name+"digitech.cab");this.selected=this.keys.indexOf(a)},this.modal.onSelect=function(){setValue(selectedStrip.name+"digitech.cab",(this.keys[this.selected]||0)|0);regUpdate(a);clearModals()},this.modal.getActiveItem(),this.modal.gotoSelected())},getState:function(){this.mode=""+getValue(selectedStrip.name+"digitech.cab");
this.ena=getValue(selectedStrip.name+"digitech.enabled")},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.ena?drawImage(res.CAB_D,0,0):drawImage(res.CAB_G,0,0);this.ena&&ctx.drawText(this.data[this.mode],this.w/2,this.h/2,{font:font.botChLabel,align:"center",valign:"middle",color:"#B7B7B7",shadow:Shadow.main})}}),DIGI_AMP=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="DIGI_AMP";this.w=res.AMP_D.w();this.h=res.AMP_D.h();
this.mode=0;this.ena=!1;this.data=E_AMPS2;this.keys=Object.keys(E_AMPS2);this.vals=Object.keys(E_AMPS2).map(function(b){return E_AMPS2[b]})},onDown:function(){var a=this;this.ena&&(this.modal=new LIST(-1),this.modal.setItems(this.vals),this.modal.keys=this.keys,this.modal.setGeometry(this.globalX(),this.globalY(),this.w,400),this.modal.getActiveItem=function(){var a=""+getValue(selectedStrip.name+"digitech.amp");this.selected=this.keys.indexOf(a)},this.modal.onSelect=function(){setValue(selectedStrip.name+
"digitech.amp",(this.keys[this.selected]||0)|0);regUpdate(a);clearModals()},this.modal.getActiveItem(),this.modal.gotoSelected())},getState:function(){this.mode=""+getValue(selectedStrip.name+"digitech.amp");this.ena=getValue(selectedStrip.name+"digitech.enabled")},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.ena?drawImage(res.AMP_D,0,0):drawImage(res.AMP_G,0,0);this.ena&&ctx.drawText(this.data[this.mode],this.w/2,this.h/2+9,{font:font.botChLabel,
align:"center",valign:"middle",color:"#B7B7B7",shadow:Shadow.main})}}),RadialKnob=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="RadialKnob";this.h=this.w=60;this.needMoveEvt=!0;this.value=.4;this.slide=this.pressed=!1;this.touchID=-1;this.lastPressPoint=[-1,-1];this.d=0;this.holdTimer=null},onDown:function(a,b,c){clearTimeout(this.holdTimer);this.d=this.value;regUpdate(this)},onMove:function(a,b,c){a=b-this.globalY();this.value=bound(this.d-a/1E3,0,1);regUpdate(this)},
onUp:function(a){},onhold:function(){},onDouble:function(){},onWheel:function(a){if(!this.master||!settings.masterLock){var b=this.getVal(),b=bound(b+a/120/30,0,1);this.setVal(b);regUpdate(this.parent)}},setValue:function(a){this.setVal(a);this.onValue();regUpdate(this.parent)},onFocus:function(){},onValue:function(){},paint:function(){var a=this.w/2;ctx.strokeStyle="rgba(255,255,255,0.2)";ctx.lineWidth=1;ctx.fillStyle="#000";ctx.circle(a,a,a);ctx.fill();ctx.fillStyle="#911";ctx.beginPath();ctx.arc(a,
a,a-2,Math.PI,Math.PI+2*Math.PI*this.value,!1);ctx.lineTo(a,a);ctx.closePath();ctx.fill()}}),PEDAL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PEDAL";this.w=62;this.h=76;this.mode=this.idx=0;this.text="PEDAL XXX";this.color="#999";this.state=0},setMode:function(a){this.mode=bound(a|0,0,3);regUpdate(this)},onDown:function(a,b,c){this.globalX();this.globalY()},getState:function(){},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);
ctx.globalAlpha=this.parent.mode==this.idx?1:.7;drawImage(res.pedal_grey,0,0);this.state&&drawImage(res.pedal_light,2,3);drawText(this.text,this.w/2|0,21,{max:this.w-6,font:"9pt open_sans_condensedbold",align:"center",valign:"middle",color:"#161616",sColor:"#aaa",sX:1,sY:1,sBlur:0})}}),TButton=Class.create(Button,{initialize:function($super,b){$super(b);this.text="0 ms";this.font="14px open_sans_condensedbold";this.textColorActive=this.textColor=color.black2;this.textParam={font:"14px open_sans_condensedbold",
x:null,y:null,offsetX:0,offsetY:-2,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:20}}}),TCheckBox=Class.create(Button,{initialize:function($super,b){$super(b);this.font="14px open_sans_condensedbold";this.textColorActive=this.textColor=color.black2;this.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:0,offsetY:-2,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:20}}}),PerfGraph=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="PerfGraph";this.w=200;this.h=60;this.timer=null;this.bgColor=color.black;this.color="rgba(255,255,0,0.6)";this.color2="rgba(0,255,0,0.6)";this.data=Util.filledArray(200);this.data2=Util.filledArray(200);regTick(this)},tick:function(){this.data.shift();this.data.push(0);this.data2.shift();this.data2.push(0);regUpdate(this);regTick(this)},addValue:function(a){this.data[this.data.length-1]+=a},addValue2:function(a){this.data2[this.data.length-1]+=a},paint:function(){ctx.fillStyle=
this.bgColor;ctx.fillRect(0,0,this.w,this.h);for(var a=Math.max(this.data.max(),this.data2.max()),b=this.data.avg()+this.data2.avg(),c=a-0,d=0,f=this.data.length;d<f;d++){var e=this.data[d];.01<e&&(e=(e-0)/c,e*=this.h,ctx.fillStyle=this.color,ctx.fillRect(d,this.h,1,-e|0));e=this.data2[d];.01<e&&(e=(e-0)/c,e*=this.h,ctx.fillStyle=this.color2,ctx.fillRect(d,this.h,1,-e|0))}ctx.fillStyle=color.white;ctx.font=font.stripMarks;ctx.textAlign="right";ctx.fillText(precision(a,2)+"ms max",this.w-2,10);ctx.fillText(precision(b,
2)+"ms avg",this.w-2,20)}});function VtoLINRANGE(a,b,c){return a*(c-b)+b}function VtoLOGRANGE(a,b,c){return Math.round(b*Math.pow(c,a))}function VtoRATIO_DE(a){return 1/a}function VtoFREQ(a){return Math.round(20*Math.pow(1102.5,a))}function VtoFREQ20(a){return Math.round(20*Math.pow(1E3,a))}function VtoQ(a){return.05*Math.pow(300,a)}function VtoEQGAIN20(a){return 40*a-20}function VtoEQGAIN15(a){return precision(30*a-15,1)}function VtoPERCENT(a){return 100*a|0}
function QtoV(a){return bound(Math.log(a/.05)/Math.log(300),0,1)}function VtoHPFfreq(a){return 0==a?lang.OFF:VtoFREQ(a)}function VtoLPFfreq(a){return 1==a?lang.OFF:VtoFREQ(a)}function VtoDS_RATIO(a){1E-5>a&&(a=1E-5);a=VtoRATIO_DE(a);return a=60<a?"∞":2>a?precision(a,2)+"":precision(a,1)+""}function addDotZero1(a){a+="";return-1==a.indexOf(".")?a+".0":a}function addDotZero2(a){return parseInt(a)+"."+parseInt(10*a)%10+""+parseInt(100*a)%10}
function formatFreq(a){return 1E3>a?a|0:1E4>a?addDotZero2(a/1E3)+"k":addDotZero1(precision(a/1E3,1))+"k"}function DeesserVtoFREQ(a){return 2E3*Math.pow(7.5,a)}function FREQtoX(a,b){return(b-1)*Math.log(a/20)/Math.log(1102.5)}function chopLastDot(a){if(null==a||""==a)return a;a+="";return a.endsWith(".")?a.substr(0,a.length-1):a}
var EQChannel=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQChannel";this.y=40;this.enabled=!1;this.buttons=[];this.mode=1;this.bypass=!1;this.keyPrefix=null;this.initWidgets()},setMode:function(a){this.mode=a;77==a&&0==this.SWITCHER.state&&this.SWITCHER.setState(1);77!=a&&1==this.SWITCHER.state&&this.SWITCHER.setState(0);var b=selectedStrip.name+"eq.";77==a?this.SWITCHER.setState(1):this.SWITCHER.setState(0);switch(this.mode){case 0:b+="hpf.";break;case 1:b+="b1.";
break;case 2:b+="b2.";break;case 3:b+="b3.";break;case 4:b+="b4.";break;case 5:b+="lpf."}this.led_kp=b;this.slFREQ.setKeyPrefix(b);this.slQ.setKeyPrefix(b);this.slGAIN.setKeyPrefix(b);this.checkState();regUpdate(this)},onShow:function(){this.eq.isClipping=!1;this.syncSliders();this.calcGeometry()},connectKeys:function(){if(null!=selectedStrip){var a=selectedStrip.name+"eq.";this.keyPrefix2=this.keyPrefix=a;this.bBYPASS.setKeyPrefix(this.keyPrefix);this.bDESSER.setKeyPrefix(selectedStrip.name);this.BASS.setKeyPrefix(a);
this.MID.setKeyPrefix(a);this.TREBLE.setKeyPrefix(a);this.D1.setKeyPrefix(selectedStrip.name);this.D2.setKeyPrefix(selectedStrip.name);this.D3.setKeyPrefix(selectedStrip.name);switch(this.mode){case 0:a+="hpf.";break;case 1:a+="b1.";break;case 2:a+="b2.";break;case 3:a+="b3.";break;case 4:a+="b4.";break;case 5:a+="lpf."}this.led_kp=a;this.slFREQ.setKeyPrefix(a);this.slQ.setKeyPrefix(a);this.slGAIN.setKeyPrefix(a);this.polarity&&this.polarity.setKey(selectedStrip.name+"invert");this.eq.rta=null;this.checkState();
this.bypass=toBool(getValue(this.keyPrefix+"bypass"))}},checkState:function(){IS_UI_24&&selectedStrip.type==E_STRIP_TYPE.IN||5!=this.mode||this.setMode(1);var a=getValue(this.keyPrefix+"easy");this.dbu1.hide();this.dbu2.hide();this.dbu3.hide();if(a)this.led_bass.show(),this.led_mid.show(),this.led_high.show(),this.led_freq.hide(),this.led_q.hide(),this.led_gain.hide(),this.BASS.show(),this.MID.show(),this.TREBLE.show(),this.slFREQ.hide(),this.slQ.hide(),this.slGAIN.hide();else if(this.led_freq.show(),
this.led_q.show(),this.led_gain.show(),this.led_bass.hide(),this.led_mid.hide(),this.led_high.hide(),this.BASS.hide(),this.MID.hide(),this.TREBLE.hide(),this.slFREQ.show(),this.slQ.show(),this.slGAIN.show(),0==this.mode||5==this.mode)this.slQ.hide(),this.slGAIN.hide();if(0==this.SWITCHER.state)this.D1.hide(),this.D2.hide(),this.D3.hide(),this.led_d1.hide(),this.led_d2.hide(),this.led_d3.hide();else{this.D1.show();this.D2.show();this.D3.show();this.led_d1.show();this.led_d2.show();this.led_d3.show();
for(var b=0;b<this.LEDS.length;b++)this.LEDS[b].hide();for(b=0;b<this.SLIDERS.length;b++)this.SLIDERS[b].hide()}selectedStrip.type==E_STRIP_TYPE.IN?(this.bDESSER.show(),this.SWITCHER.show(),this.polarity&&this.polarity.show()):(1==this.SWITCHER.state&&this.SWITCHER.setState(0),this.SWITCHER.hide(),this.bDESSER.hide(),this.polarity&&this.polarity.hide());0==this.SWITCHER.state&&0==a&&(0==this.mode||5==this.mode?(this.slQ.hide(),this.slGAIN.hide(),this.led_q.hide(),this.led_gain.hide(),IS_UI_24&&(this.dbu1.show(),
this.dbu2.show(),this.dbu3.show())):(this.slQ.show(),this.slGAIN.show(),this.led_q.show(),this.led_gain.show()))},syncSliders:function(){this.enabled&&this.connectKeys()},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5;if(isDefined(this.slFREQ)){this.eq.setSize(this.w-this.eq.x-240,this.h-this.eq.y-66);var a=-208;this.led_freq.setPos(this.w+a-9,46);this.led_q.setPos(this.w+a-9+70,46);this.led_gain.setPos(this.w+a-9+140,46);this.led_bass.setPos(this.w+a-9,46);this.led_mid.setPos(this.w+
a-9+70,46);this.led_high.setPos(this.w+a-9+140,46);this.led_d1.setPos(this.w+a-9+0,46);this.led_d2.setPos(this.w+a-9+70,46);this.led_d3.setPos(this.w+a-9+140,46);this.slFREQ.x=this.w+a+0;this.slQ.x=this.w+a+70;this.slGAIN.x=this.w+a+140;this.BASS.x=this.w+a+0;this.MID.x=this.w+a+70;this.TREBLE.x=this.w+a+140;this.D1.x=this.w+a+0|0;this.D2.x=this.w+a+70|0;this.D3.x=this.w+a+140|0;this.slFREQ.y=this.slQ.y=this.slGAIN.y=this.BASS.y=this.MID.y=this.TREBLE.y=this.D1.y=this.D2.y=this.D3.y=130;this.slGAIN.h=
this.slQ.h=this.slFREQ.h=this.BASS.h=this.MID.h=this.TREBLE.h=this.h-this.slGAIN.y-41-30;this.D1.h=this.D2.h=this.D3.h=this.h-this.slGAIN.y-41-30;for(var b=this.h-41,a=this.eq.x,c=[],d=0;d<this.btns.length;d++)this.btns[d].enabled&&c.push(this.btns[d]);for(var f=(this.eq.w-this.btns[2].w)/(c.length-1),d=0;d<c.length;d++)c[d].setPos(a+d*f|0,b)}},initWidgets:function(){var a=this;this.preset=new MENUBUTTON(this);this.preset.setSize(130,29);this.preset.setAnchors(null,10,10,null);this.preset.text=lang.PRESETS;
this.preset.color=color.red;this.preset.onPress=function(){a.showPresets()};this.eq=new EQParamWidget(this);this.eq.setPos(40,23);var b=this.eq;this.led_freq=new FXLEDPlain(this);this.led_freq.label="FREQ";this.led_freq.sign="hZ";this.led_freq.getState=function(){return getValue(a.led_kp+"freq")};this.led_freq.formatValue=function(b){var c=VtoFREQ(b),c=formatFreq(c)+"";0==a.mode&&0==b&&(c=lang.OFF);return c};this.led_q=new FXLEDPlain(this);this.led_q.label="Q";this.led_q.sign="";this.led_q.getState=
function(){return getValue(a.led_kp+"q")};this.led_q.formatValue=function(a){var b="...";0!=this.parent.mode&&(b=VtoQ(a),b=addDotZero2(b+1E-5)+"");return b};this.led_gain=new FXLEDPlain(this);this.led_gain.label="GAIN";this.led_gain.sign="dB";this.led_gain.getState=function(){return getValue(a.led_kp+"gain")};this.led_gain.formatValue=function(a){var b="...";0!=this.parent.mode&&(b=VtoEQGAIN20(a),b=(0<b?"+":"")+addDotZero1(precision(b,1))+"");return b};this.led_bass=new FXLEDPlain(this);this.led_bass.label=
"BASS";this.led_bass.sign="dB";this.led_bass.getState=function(){return getValue(a.keyPrefix+"b1.gain")};this.led_bass.formatValue=function(a){a=VtoEQGAIN20(a);return a=(0<a?"+":"")+addDotZero1(precision(a,1))+""};this.led_mid=new FXLEDPlain(this);this.led_mid.label="MID";this.led_mid.sign="dB";this.led_mid.getState=function(){return getValue(a.keyPrefix+"b2.gain")};this.led_mid.formatValue=function(a){a=VtoEQGAIN20(a);return a=(0<a?"+":"")+addDotZero1(precision(a,1))+""};this.led_high=new FXLEDPlain(this);
this.led_high.label="TREBLE";this.led_high.sign="dB";this.led_high.getState=function(){return getValue(a.keyPrefix+"b3.gain")};this.led_high.formatValue=function(a){a=VtoEQGAIN20(a);return a=(0<a?"+":"")+addDotZero1(precision(a,1))+""};this.LEDS=[this.led_freq,this.led_q,this.led_gain,this.led_bass,this.led_mid,this.led_high];this.slFREQ=new EQSlider(this);this.slFREQ.keyPart="freq";this.slFREQ.setPos(600,100);this.slFREQ.textUp="22kHz";this.slFREQ.textBot="20Hz";this.slFREQ.mV=[1,findV(VtoFREQ,50),
findV(VtoFREQ,100),findV(VtoFREQ,200),findV(VtoFREQ,500),findV(VtoFREQ,1E3),findV(VtoFREQ,2E3),findV(VtoFREQ,5E3),findV(VtoFREQ,1E4),0];this.slFREQ.onDouble=function(){switch(this.parent.mode){case 1:this.setValue(FREQtoV(200));break;case 2:this.setValue(FREQtoV(1E3));break;case 3:this.setValue(FREQtoV(4E3));break;case 4:this.setValue(FREQtoV(1E4))}};this.slFREQ.setVal=function(b){0==a.mode&&b>FREQtoV(1E3)&&(b=FREQtoV(1E3));5==a.mode&&b<FREQtoV(1E3)&&(b=FREQtoV(1E3));null!=this.key?setValue(this.key,
b):log("setVal: "+this.name+" no PARAM-KEY!")};this.slFREQ.valueFunc=function(){selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);regUpdate(a.led_freq)};this.slQ=new EQSlider(this);this.slQ.keyPart="q";this.slQ.setPos(660,100);this.slQ.textUp="15";this.slQ.textBot="0.05";this.slQ.setDefaultValue(findV(VtoQ,1));this.slQ.mV=[1,findV(VtoQ,10),findV(VtoQ,5),findV(VtoQ,2),findV(VtoQ,.5),findV(VtoQ,.2),findV(VtoQ,.1),0];this.slQ.valueFunc=function(){selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);
regUpdate(a.led_q)};this.slGAIN=new EQSlider(this);this.slGAIN.keyPart="gain";this.slGAIN.fader=res.eqVFaderRed;this.slGAIN.setPos(720,100);this.slGAIN.textUp="+20dB";this.slGAIN.textBot="-20dB";this.slGAIN.setDefaultValue(.5);this.slGAIN.mV=[1,findV(VtoEQGAIN20,15),findV(VtoEQGAIN20,10),findV(VtoEQGAIN20,5),findV(VtoEQGAIN20,-5),findV(VtoEQGAIN20,-10),findV(VtoEQGAIN20,-15),0];this.slGAIN.valueFunc=function(){selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);regUpdate(a.led_gain)};this.BASS=
new EQSlider(this);this.BASS.keyPart="b1.gain";this.BASS.setPos(600,100);this.BASS.textUp="+20dB";this.BASS.textBot="-20dB";this.BASS.fader=res.eqVFaderGreen;this.BASS.setDefaultValue(.5);this.BASS.valueFunc=function(c){var d=a.keyPrefix2+"b1.";setValue(d+"gain",c);setValue(d+"q",.16);setValue(d+"freq",FREQtoV(20));selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);regUpdate(a.led_bass)};this.MID=new EQSlider(this);this.MID.keyPart="b2.gain";this.MID.setPos(660,100);this.MID.textUp="+20dB";this.MID.textBot=
"-20dB";this.MID.fader=res.eqVFaderRed;this.MID.setDefaultValue(.5);this.MID.valueFunc=function(c){var d=a.keyPrefix2+"b2.";setValue(d+"gain",c);setValue(d+"q",.222);setValue(d+"freq",FREQtoV(1E3));selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);regUpdate(a.led_mid)};this.TREBLE=new EQSlider(this);this.TREBLE.keyPart="b3.gain";this.TREBLE.setPos(720,100);this.TREBLE.textUp="+20dB";this.TREBLE.textBot="-20dB";this.TREBLE.fader=res.eqVFaderPurple;this.TREBLE.setDefaultValue(.5);this.TREBLE.valueFunc=
function(c){var d=a.keyPrefix2+"b3.";setValue(d+"gain",c);setValue(d+"q",.33);setValue(d+"freq",FREQtoV(22050));selectedStrip.setNameValue("eq.prmod",1);regUpdate(b);regUpdate(a.led_high)};this.SLIDERS=[this.BASS,this.MID,this.TREBLE,this.slFREQ,this.slQ,this.slGAIN];this.bRTA=new CheckBox(this);this.bRTA.setSize(70,30);this.bRTA.setImages(res.RTA_OFF,res.RTA_ON);this.bRTA.getState=function(){var a=selectedStrip.name,b=getValue("var.rta")+".";this.state=a==b?1:0};this.bRTA.onToggleUp=function(){setValue("var.rta",
chopLastDot(selectedStrip.name))};this.bRTA.onToggleDown=function(){setValue("var.rta","");a.eq.rta=null;regUpdate(a.eq)};this.bRESET=new Button(this);this.bRESET.setSize(70,30);this.bRESET.setImages(res.bRESET_OFF,res.bRESET_ON);this.bRESET.valueFunc=function(){resetParEQ(selectedChID);a.checkState();regUpdate(this)};this.bEASY=new CheckBox(this);this.bEASY.needBG=!0;this.bEASY.setSize(70,30);this.bEASY.setImages(res.bEZEQ_OFF,res.bEZEQ_ON);this.bEASY.getState=function(){this.state=getValue(a.keyPrefix+
"easy")};this.bEASY.onToggleUp=function(){var b=!1;isNear(getValue(a.keyPrefix2+"hpf.freq"),0)?IS_UI_24&&!isNear(getValue(a.keyPrefix2+"lpf.freq"),1)?b=!0:isNear(getValue(a.keyPrefix2+"b4.gain"),.5)?isNear(getValue(a.keyPrefix2+"b1.freq"),FREQtoV(20))?isNear(getValue(a.keyPrefix2+"b2.freq"),FREQtoV(1E3))?isNear(getValue(a.keyPrefix2+"b3.freq"),FREQtoV(22050))||(b=!0):b=!0:b=!0:b=!0:b=!0;b?(confOk.valueFunc=function(){resetParEQ(selectedChID,!0);setValue(a.keyPrefix2+"b1.freq",FREQtoV(20));setValue(a.keyPrefix2+
"b2.freq",FREQtoV(1E3));setValue(a.keyPrefix2+"b3.freq",FREQtoV(22050));setValue(a.keyPrefix2+"b1.gain",.5);setValue(a.keyPrefix2+"b2.gain",.5);setValue(a.keyPrefix2+"b3.gain",.5);setValue(a.keyPrefix2+"b1.q",.16);setValue(a.keyPrefix2+"b2.q",.222);setValue(a.keyPrefix2+"b3.q",.33);setValue(a.keyPrefix+"easy",1);a.checkState();regUpdate(a)},showConfBox(lang.CURRENT_VALUES_WILL_BE_LOST)):(setValue(a.keyPrefix+"easy",1),a.checkState(),regUpdate(this))};this.bEASY.onToggleDown=function(){setValue(a.keyPrefix+
"easy",0);a.checkState();regUpdate(this)};this.bDESSER=new CheckBox(this);this.bDESSER.setSize(70,30);this.bDESSER.keyPart="deesser.enabled";this.bDESSER.setImages(res.DESS_OFF,res.DESS_ON);this.bDESSER.onToggleUp=function(){a.SWITCHER.setState(1);a.checkState();regUpdate(a)};this.bDESSER.onToggleDown=function(){a.SWITCHER.setState(0);a.checkState();regUpdate(a)};this.bBYPASS=new CheckBox(this);this.bBYPASS.keyPart="bypass";this.bBYPASS.setSize(70,30);this.bBYPASS.setImages(res.bBYPASS_OFF,res.bBYPASS_ON);
this.bBYPASS.onToggleUp=function(){a.bypass=!0;regUpdate(a)};this.bBYPASS.onToggleDown=function(){a.bypass=!1;regUpdate(a)};IS_UI_24?(this.polarity=new CheckBox(this),this.polarity.setPos(37,7),this.polarity.setImages(res.bPIOff,res.bPIOn),this.btns=[this.polarity,this.bEASY,this.bRTA,this.bDESSER,this.bRESET,this.bBYPASS]):this.btns=[this.bEASY,this.bRTA,this.bDESSER,this.bRESET,this.bBYPASS];this.SWITCHER=new SWITCHBOX(this);this.SWITCHER.setItems([lang.EQ,lang.DEESSER]);this.SWITCHER.setItemWidth(96);
this.SWITCHER.setAnchors(null,null,17,9);this.SWITCHER.valueFunc=function(){a.checkState();regUpdate(a)};this.led_d1=new FXLEDPlain(this);this.led_d1.label="FREQ";this.led_d1.sign="hZ";this.led_d1.getState=function(){return getValue(selectedStrip.name+"deesser.freq")};this.led_d1.formatValue=function(a){return formatFreq(DeesserVtoFREQ(a))+""};this.led_d2=new FXLEDPlain(this);this.led_d2.label="THRESH";this.led_d2.sign="dB";this.led_d2.getState=function(){return getValue(selectedStrip.name+"deesser.threshold")};
this.led_d2.formatValue=VtoTHRESH;this.led_d3=new FXLEDPlain(this);this.led_d3.label="RATIO";this.led_d3.sign="";this.led_d3.getState=function(){return getValue(selectedStrip.name+"deesser.ratio")};this.led_d3.formatValue=VtoDS_RATIO;this.D1=new EQSlider(this);this.D1.keyPart="deesser.freq";this.D1.setPos(720,100);this.D1.textUp="15kHz";this.D1.textBot="2000Hz";this.D1.fader=res.eqVFaderGreen;this.D1.valueFunc=function(){regUpdate(b);regUpdate(a.led_d1)};this.D2=new EQSlider(this);this.D2.keyPart=
"deesser.threshold";this.D2.setPos(720,100);this.D2.textUp="6 dB";this.D2.textBot="-90";this.D2.fader=res.eqVFaderYellow;this.D2.valueFunc=function(){regUpdate(b);regUpdate(a.led_d2)};this.D3=new EQSlider(this);this.D3.keyPart="deesser.ratio";this.D3.setPos(720,100);this.D3.fader=res.eqVFaderYellow;this.D3.textUp="1:1";this.D3.textBot="∞:1";this.D3.valueFunc=function(){regUpdate(b);regUpdate(a.led_d3)};this.dbu1=new CHECKBUTTON(this);this.dbu1.setAnchors(null,100,33,null);this.dbu1.setSize(90,30);
this.dbu1.text="12 dBu";this.dbu1.idx=0;this.dbu1.color=color.orange;this.dbu1.getState=function(){this.state=getValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope")==this.idx};this.dbu1.onToggleUp=function(){setValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope",this.idx);regUpdate(a)};this.dbu2=new CHECKBUTTON(this);this.dbu2.setAnchors(null,140,33,null);this.dbu2.setSize(90,30);this.dbu2.text="24 dBu";this.dbu2.idx=1;this.dbu2.color=color.orange;this.dbu2.getState=function(){this.state=
getValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope")==this.idx};this.dbu2.onToggleUp=function(){setValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope",this.idx);regUpdate(a)};this.dbu3=new CHECKBUTTON(this);this.dbu3.setAnchors(null,180,33,null);this.dbu3.setSize(90,30);this.dbu3.text="36 dBu";this.dbu3.idx=2;this.dbu3.color=color.orange;this.dbu3.getState=function(){this.state=getValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope")==this.idx};this.dbu3.onToggleUp=
function(){setValue(selectedStrip.name+"eq."+(5==a.mode?"lpf.":"hpf.")+"slope",this.idx);regUpdate(a)};this.dbu1.hide();this.dbu2.hide();this.dbu3.hide()},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),
this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},showPresets:function(){this.menu=new PRESET_MENU2(null,"eqch",this,this.parent.color);regUpdate(this.menu)},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);selectedStrip.setNameValue("eq.prmod",0);isDefined(b)&&selectedStrip.setNameValue("eq.prname",b);this.checkState()},savePreset:function(a){var b=".eq.easy .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain .deesser.enabled .deesser.freq .deesser.threshold .deesser.ratio".split(" ");
IS_UI_24&&(b.push(".eq.lpf.freq"),b.push(".eq.lpf.slope"),b.push(".eq.hpf.slope"));for(var c={},d=this.keyPrefix.split("."),d=d[0]+"."+d[1],f=0;f<b.length;f++)null!=getValue(d+b[f])&&(c[b[f]]=getValue(d+b[f]));selectedStrip.setNameValue("eq.prmod",0);isDefined(a)&&selectedStrip.setNameValue("eq.prname",a);return c},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.paintMarks();this.dbu1.enabled&&drawText(lang.SLOPE,this.dbu1.x+this.dbu1.w/2,this.dbu1.y-20,{font:font.tabText,
color:color.white,align:"center",valign:"middle"});this.preset&&drawImage(res.dbx,this.preset.x-48,13)},paintMarks:function(){ctx.font=font.eqMarks;ctx.textAlign="center";var a=this.eq.h,b=this.eq.w,c=a/4,d=a/2|0,f=[50,100,200,500,1E3,2E3,5E3,1E4],e="50 100 200 500 1k 2k 5k 10k".split(" ");ctx.fillStyle="#101115";ctx.fillRect(16,this.eq.y-12,this.w-16-230,this.eq.h+34);ctx.translate(16,this.eq.y-12);ctx.fillStyle=color.grad1;ctx.fillRect(0,0,this.w-16-230,7);ctx.translate(-16,-(this.eq.y-12));ctx.save();
ctx.translate(this.eq.x,this.eq.y);ctx.fillStyle=color.graphMarks;ctx.textAlign="right";ctx.fillText("+20",-4,9);ctx.fillText("+10",-4,c+4);ctx.fillText("0",-4,d+3);ctx.fillText("-10",-4,3*c+4);ctx.fillText("-20",-4,a-1);ctx.textAlign="left";ctx.fillText("20",0,a+15);ctx.fillText("22k",b-18,a+15);ctx.textAlign="center";for(c=0;c<f.length;c++)ctx.fillText(e[c],FREQtoX(f[c],b),a+15);ctx.restore()}}),EQAux=Class.create(EQChannel,{initialize:function($super,b){$super(b);this.widgetName="EQAux";this.keyPrefixAfs=
this.keyPrefix="";this.idx=0},connectKeys:function(){if(null!=selectedStrip){var a=selectedStrip.name;this.keyPrefix=a+"eq.peak.";this.keyPrefixAfs=a;this.eq.setKey(a);this.eq.haveFilters=IS_UI_24&&2>selectedStrip.subId;this.connectIdx();this.AFS_OFF.setKey(selectedStrip.name+"afs.enabled");this.bBYPASS.setKeyPrefix(a+"eq.");this.bypass=toBool(getValue(a+"eq.bypass"));this.polarity&&this.polarity.setKey(selectedStrip.name+"invert")}},connectIdx:function(){if(0<=this.eq.idx){var a=this.keyPrefix+this.eq.idx;
this.led.setKey(a);this.slGAIN.setKeyPrefix(a);regUpdate(this.slGAIN)}},syncSliders:function(){this.enabled&&selectedStrip.type==E_STRIP_TYPE.AUX&&(this.eq.rta=null,this.connectKeys())},onShow:function(){this.eq.isClipping=!1;this.syncSliders()},calcGeometry:function($super){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5;for(var b=this.h-40,c=(this.w-276-160)/2,d=80,f=0;f<this.btns.length;f++)switch(this.btns[f].setPos(d|0,b),f){case 0:d+=this.btns[0].w+10;break;case 1:d+=c;break;case 2:d+=
c;break;case 3:d+=this.btns[0].w+10}},initWidgets:function(){var a=this;this.preset=new MENUBUTTON(this);this.preset.setSize(130,29);this.preset.setAnchors(null,10,10,null);this.preset.text=lang.PRESETS;this.preset.color=color.red;this.preset.onPress=function(){a.showPresets()};this.sEQ=new GEQ_SMALL(this);this.sEQ.setAnchors(40,6);this.eq=new GEQ_GRAPH(this);this.eq.setAnchors(40,78,120,64);this.eq.onSelect=function(b){a.connectIdx()};this.eq.onChange=function(){regUpdate(this);regUpdate(a.slGAIN);
regUpdate(a.led);regUpdate(a.sEQ)};this.led=new FXLEDPlain(this);this.led.setAnchors(null,56,26,null);this.led.w=60;this.led.label=lang.GAIN;this.led.sign="dB";this.led.formatValue=function(a){a=VtoEQGAIN15(a);return a=(0<a?"+":"")+precision(a,1)+""};this.slGAIN=new EQSlider(this);this.slGAIN.keyPart="";this.slGAIN.fader=res.eqVFaderRed;this.slGAIN.setAnchors(null,144,32,41);this.slGAIN.textUp="+15dB";this.slGAIN.textBot="-15dB";this.slGAIN.setDefaultValue(.5);this.slGAIN.mV=[1,findV(VtoEQGAIN15,
10),findV(VtoEQGAIN15,5),findV(VtoEQGAIN15,-5),findV(VtoEQGAIN15,-10),0];this.slGAIN.valueFunc=function(){regUpdate(a.eq);regUpdate(a.led);regUpdate(a.sEQ);selectedStrip.setNameValue("eq.prmod",1)};this.AFS_SETTINGS=new Button(this);this.AFS_SETTINGS.setImages(res.SETUP_OFF,res.SETUP_ON);this.AFS_SETTINGS.onPress=function(){var b=new AFS_POPUP(null,a),c=a.eq.globalX()+a.eq.w,d=a.eq.globalY(),f=a.globalX(),e=a.globalY()+a.h;b.setSize(c-f,e-d);b.setPos(f,d);b.updateGeometry();regUpdate(b)};this.AFS_OFF=
new CheckBox(this);this.AFS_OFF.setImages(res.OFF_OFF,res.ON_ON);this.AFS_OFF.getState=function(){this.disabled=0==getValue("afs.enabled")};this.bRTA=new CheckBox(this);this.bRTA.setSize(70,30);this.bRTA.setImages(res.RTA_OFF,res.RTA_ON);this.bRTA.getState=function(){var a=selectedStrip.name,c=getValue("var.rta")+".";this.state=a==c?1:0};this.bRTA.onToggleUp=function(){setValue("var.rta",chopLastDot(selectedStrip.name))};this.bRTA.onToggleDown=function(){setValue("var.rta","");a.eq.rta=null;regUpdate(a.eq)};
this.bRESET=new Button(this);this.bRESET.setImages(res.bRESET_OFF,res.bRESET_ON);this.bRESET.valueFunc=function(){resetGraphEQ(selectedChID);regUpdate(this)};this.bBYPASS=new CheckBox(this);this.bBYPASS.keyPart="bypass";this.bBYPASS.setImages(res.bBYPASS_OFF,res.bBYPASS_ON);this.bBYPASS.onToggleUp=function(){a.bypass=!0;regUpdate(a)};this.bBYPASS.onToggleDown=function(){a.bypass=!1;regUpdate(a)};IS_UI_24&&(this.polarity=new CheckBox(this),this.polarity.setAnchors(260,null,null,3),this.polarity.setImages(res.bPIOff,
res.bPIOn));this.btns=[this.AFS_SETTINGS,this.AFS_OFF,this.bRTA,this.bRESET,this.bBYPASS]},paintMarks:function(){ctx.font=font.eqMarks;ctx.textAlign="center";var a=this.eq.h,b=a/6,c=a/2|0;ctx.fillStyle="#101115";ctx.fillRect(16,this.eq.y-20,this.eq.w+35,this.eq.h+20+20);ctx.translate(16,this.eq.y-20);ctx.fillStyle=color.grad1;ctx.fillRect(1,0,this.w-16-110-2+2,7);ctx.translate(-16,-(this.eq.y-20));ctx.save();ctx.translate(this.eq.x,this.eq.y);ctx.textAlign="right";ctx.fillStyle=color.graphMarks;ctx.fillText("+15",
-3,9);ctx.fillText("+10",-3,c-2*b+3);ctx.fillText("+5",-3,c-b+3);ctx.fillText("0",-3,c+3);ctx.fillText("-5",-3,c+b+3);ctx.fillText("-10",-3,c+2*b+3);ctx.fillText("-15",-3,a-3);ctx.restore()},showPresets:function(){this.menu=new PRESET_MENU2(null,"eqaux",this,this.parent.color);regUpdate(this.menu)},savePreset:function(a){for(var b=[],c=0;c<this.eq.bands;c++)b.push(".eq.peak."+c);IS_UI_24&&(b.push(".eq.lpf"),b.push(".eq.hpf"));for(var d={},c=this.keyPrefix.split("."),f=c[0]+"."+c[1],c=0;c<b.length;c++)null!=
getValue(f+b[c])&&(d[b[c]]=getValue(f+b[c]));selectedStrip.setNameValue("eq.prmod",0);isDefined(a)&&selectedStrip.setNameValue("eq.prname",a);return d},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);selectedStrip.setNameValue("eq.prmod",0);isDefined(b)&&selectedStrip.setNameValue("eq.prname",b);regUpdate(this)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.paintMarks();this.preset&&drawImage(res.dbx,this.preset.x-48,13);drawImage(res.AFS2LOGO,
30,this.h-35);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRoundRect(16,this.h-42,this.AFS_OFF.x+this.AFS_OFF.w+12-16,40,4)}}),EQMaster=Class.create(EQAux,{initialize:function($super,b){$super(b);this.widgetName="EQMaster";this.left=!0},setLeft:function(a){this.left=a;this.eq.setRight(!a);this.syncSliders();regUpdate(this);regUpdate(this.parent.stereo)},setLinked:function(a){var b=this.left?"l":"r",c=this.left?"r":"l";if(a)for(var d=0;31>d;d++)setValue("m.eq.peak."+c+"."+d,getValue("m.eq.peak."+
b+"."+d));setValue("m.eq.hpf."+c,getValue("m.eq.hpf."+b));setValue("m.eq.lpf."+c,getValue("m.eq.lpf."+b));setValue("m.eq.linked",a?1:0);this.setLeft(!0)},connectKeys:function(){this.keyPrefix="m.eq.peak.";this.kp="m.eq.";this.keyPrefixAfs="m.";this.idx=this.eq.idx;this.connectIdx()},connectIdx:function(){if(0<=this.eq.idx){var a=this.keyPrefix+(this.left?"l.":"r.")+this.eq.idx;this.led.setKey(a);this.slGAIN.setKeyPrefix(a);regUpdate(this.slGAIN)}},doReset:function(){resetGraphEQ("m");regUpdate(editWidget)},
syncSliders:function(){this.enabled&&(this.eq.rta=null,this.connectKeys())},onShow:function(){this.eq.isClipping=!1;this.syncSliders()},calcGeometry:function($super){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5;for(var b=this.h-40,c=(this.w-276-160)/2,d=80,f=0;f<this.btns.length;f++)switch(this.btns[f].setPos(d|0,b),f){case 0:d+=this.btns[0].w+10;break;case 1:d+=c;break;case 2:d+=c;break;case 3:d+=this.btns[0].w+10}},initWidgets:function(){var a=this;this.preset=new MENUBUTTON(this);
this.preset.setSize(130,29);this.preset.setAnchors(null,10,10,null);this.preset.text=lang.PRESETS;this.preset.color=color.red;this.preset.onPress=function(){a.showPresets()};this.sEQ=new GEQ_SMALL(this);this.sEQ.setAnchors(40,6);this.sEQ.master=!0;this.sEQ.left=!0;this.sEQ2=new GEQ_SMALL(this);this.sEQ2.setAnchors(40+this.sEQ.w+2,6);this.sEQ2.master=!0;this.sEQ2.left=!1;this.eq=new GEQ_GRAPH(this);this.eq.setAnchors(40,78,120,64);this.eq.stereo=!0;this.eq.setKey("m.");this.eq.haveFilters=IS_UI_24;
this.eq.onSelect=function(b){a.connectIdx()};this.eq.onChange=function(){regUpdate(this);regUpdate(a.slGAIN);regUpdate(a.led);regUpdate(a.sEQ);regUpdate(a.sEQ2)};this.led=new FXLEDPlain(this);this.led.setAnchors(null,56,26,null);this.led.w=60;this.led.label=lang.GAIN;this.led.sign="dB";this.led.formatValue=function(a){a=VtoEQGAIN15(a);return a=(0<a?"+":"")+precision(a,1)+""};this.slGAIN=new EQSlider(this);this.slGAIN.keyPart="";this.slGAIN.fader=res.eqVFaderRed;this.slGAIN.setAnchors(null,144,32,
41);this.slGAIN.textUp="+15dB";this.slGAIN.textBot="-15dB";this.slGAIN.setDefaultValue(.5);this.slGAIN.mV=[1,findV(VtoEQGAIN15,10),findV(VtoEQGAIN15,5),findV(VtoEQGAIN15,-5),findV(VtoEQGAIN15,-10),0];this.slGAIN.valueFunc=function(b){1==getValue("m.eq.linked")&&setValue(this.key.replace(".l.",".r."),b);selectedStrip.setNameValue("eq.prmod",1);regUpdate(a.eq);regUpdate(a.led);regUpdate(a.sEQ);regUpdate(a.sEQ2)};this.AFS_SETTINGS=new Button(this);this.AFS_SETTINGS.setImages(res.SETUP_OFF,res.SETUP_ON);
this.AFS_SETTINGS.onPress=function(){var b=new AFS_POPUP(null,a),c=a.eq.globalX()+a.eq.w,d=a.eq.globalY(),f=a.globalX(),e=a.globalY()+a.h;b.setSize(c-f,e-d);b.setPos(f,d);b.updateGeometry();regUpdate(b)};this.AFS_OFF=new CheckBox(this);this.AFS_OFF.setImages(res.OFF_OFF,res.ON_ON);this.AFS_OFF.setKey("m.afs.enabled");this.AFS_OFF.getState=function(){this.disabled=0==getValue("afs.enabled")};this.bRTA=new CheckBox(this);this.bRTA.setSize(70,30);this.bRTA.setImages(res.RTA_OFF,res.RTA_ON);this.bRTA.getState=
function(){var a=selectedStrip.name,c=getValue("var.rta")+".";this.state=a==c?1:0};this.bRTA.onToggleUp=function(){setValue("var.rta",chopLastDot(selectedStrip.name))};this.bRTA.onToggleDown=function(){setValue("var.rta","");a.eq.rta=null;regUpdate(a.eq)};this.bRESET=new Button(this);this.bRESET.setSize(70,30);this.bRESET.setImages(res.bRESET_OFF,res.bRESET_ON);this.bRESET.valueFunc=function(){a.doReset()};this.bBYPASS=new CheckBox(this);this.bBYPASS.keyPart="bypass";this.bBYPASS.setKeyPrefix("m.eq.");
this.bBYPASS.setSize(70,30);this.bBYPASS.setImages(res.bBYPASS_OFF,res.bBYPASS_ON);this.bBYPASS.onToggle=function(){regUpdate(a)};IS_UI_24&&(this.polarity_l=new CheckBox(this),this.polarity_l.setAnchors(260,null,null,3),this.polarity_l.setImages(res.bPIOff,res.bPIOn),this.polarity_l.setKey("m.l.invert"),this.polarity_r=new CheckBox(this),this.polarity_r.setAnchors(null,null,300,3),this.polarity_r.setImages(res.bPIOff,res.bPIOn),this.polarity_r.setKey("m.r.invert"));this.btns=[this.AFS_SETTINGS,this.AFS_OFF,
this.bRTA,this.bRESET,this.bBYPASS]},paintMarks:function(){ctx.textAlign="center";var a=this.eq.h,b=a/6,c=a/2|0;ctx.fillStyle="#101115";ctx.fillRect(16,this.eq.y-20,this.eq.w+35,this.eq.h+20+20);ctx.fillStyle="#999";ctx.setShadow(color.black,4,1,1);ctx.font="23px open_sans_condensedbold";ctx.fillText(lang.L,this.sEQ.x-13,this.sEQ.y+31);ctx.fillText(lang.R,this.sEQ2.x+this.sEQ2.w+13,this.sEQ.y+31);IS_UI_24&&(ctx.fillText(lang.L,this.polarity_l.x-6,this.polarity_l.y+24),ctx.fillText(lang.R,this.polarity_r.x+
56,this.polarity_r.y+24));ctx.shadowColor="transparent";ctx.font=font.eqMarks;ctx.translate(16,this.eq.y-20);ctx.fillStyle=color.grad1;ctx.fillRect(1,0,this.w-16-110-2+2,7);ctx.translate(-16,-(this.eq.y-20));ctx.save();ctx.translate(this.eq.x,this.eq.y);ctx.textAlign="right";ctx.fillStyle=color.graphMarks;ctx.fillText("+15",-3,9);ctx.fillText("+10",-3,c-2*b+3);ctx.fillText("+5",-3,c-b+3);ctx.fillText("0",-3,c+3);ctx.fillText("-5",-3,c+b+3);ctx.fillText("-10",-3,c+2*b+3);ctx.fillText("-15",-3,a-3);
ctx.restore()},showPresets:function(){this.menu=new PRESET_MENU2(null,"eqm",this,this.parent.color);regUpdate(this.menu)},savePreset:function(a){var b=[];b.push(".eq.linked");for(var c=0;c<this.eq.bands;c++)b.push(".eq.peak.l."+c),b.push(".eq.peak.r."+c);IS_UI_24&&(b.push(".eq.lpf.l"),b.push(".eq.lpf.r"),b.push(".eq.hpf.l"),b.push(".eq.hpf.r"));for(var d={},c=0;c<b.length;c++)null!=getValue("m"+b[c])&&(d[b[c]]=getValue("m"+b[c]));selectedStrip.setNameValue("eq.prmod",0);isDefined(a)&&selectedStrip.setNameValue("eq.prname",
a);return d},loadPreset:function(a,b){applyPreset("m",a);selectedStrip.setNameValue("eq.prmod",0);isDefined(b)&&selectedStrip.setNameValue("eq.prname",b);regUpdate(editWidget)}}),EQParamWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQParamWidget";this.needMoveEvt=this.needClip=!0;this.touchRadius=32;this.RATE=48E3;this.pressed=!1;this.touchID=-1;this.peaks=this.grd=null;this.bypass=!1;this.bands=5;this.colors=["#2D5EAA","#2c8f29","#b23535","#752E99","#C7AB35",
color.orange];this.isClipping=!1;this.timer=null;this.point1=[-1,-1];this.point1id=-1;this.point2=[-1,-1];this.point2id=-2;this.p1=[-1,-1];this.p2=[-1,-1];this.tn=0;this.dist=-1;this.moved=this.easy=!1;this.stY=-1;this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.lastP=!1;this.arr="hpf b1 b2 b3 b4 lpf".split(" ");this.rtaTimer=this.rta=this.egrad=null;this.delta=[0,0];this.ds=!1;this.lp_slope=this.hp_slope=this.ds_thr=this.ds_ratio=this.ds_freq=0;this.showPreset=!0;this.showCurrentCurve=
!isLocal},calcGeometry:function(){var a=this.w;this.grd=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0)")},getValues:function(){this.peaks=[];var a=this.parent.keyPrefix;this.bypass=toBool(getValue(a+"bypass"));this.easy=toBool(getValue(a+"easy"));selectedStrip.type==E_STRIP_TYPE.IN?(this.ds=1==selectedStrip.getNameValue("deesser.enabled"),this.ds_freq=selectedStrip.getNameValue("deesser.freq"),this.ds_ratio=
selectedStrip.getNameValue("deesser.ratio"),this.ds_thr=selectedStrip.getNameValue("deesser.threshold")):this.ds=!1;var b="hpf b1 b2 b3 b4 lpf".split(" ");this.bands=IS_UI_24&&selectedStrip.type==E_STRIP_TYPE.IN?6:5;IS_UI_24&&(this.hp_slope=selectedStrip.getNameValue("eq.hpf.slope"),this.lp_slope=selectedStrip.getNameValue("eq.lpf.slope"));for(var c=0;c<this.bands;c++){var d=a+b[c],f=VtoFREQ(getValue(d+".freq"));if(0==c||5==c)this.peaks.push([f,1,0]);else{var e=VtoQ(getValue(d+".q")),d=VtoEQGAIN20(getValue(d+
".gain"));this.peaks.push([f,e,d])}}},onDown:function(a,b,c){a-=this.globalX();var d=b-this.globalY();this.stY=b;this.moved=!1;switch(this.tn){case 0:this.point1id=c;this.point1=[a,d];break;case 1:this.point2id=c,this.point2=[a,d]}this.tn++;if(!this.pressed){b=.5*this.h/20;var f=this.h/2|0;this.getValues();for(var e=0;e<this.bands;e++){if(this.easy){if(0==e)continue;if(4==e)continue;if(5==e)continue}var g=this.freqToX(this.peaks[e][0]),h=f-this.peaks[e][2]*b;this.easy&&(1==e&&(g+=this.w/6),3==e&&
(g-=this.w/6));var l=this.touchRadius;if(20>g||g>this.w-20||20>h||h>this.h-20)l+=this.touchRadius;if(isInCircle(g,h,l,a,d)){this.parent.setMode(e);this.pressed=!0;this.touchID=c;this.delta=[g-a,h-d];return}}this.ds&&(g=this.freqToX(DeesserVtoFREQ(this.ds_freq)),h=3+(1-this.ds_thr/2)*(this.h-6)|0,isInCircle(g,h,this.touchRadius,a,d)&&(this.parent.setMode(77),this.pressed=!0,this.touchID=c,this.delta=[g-a,h-d],regUpdate(this)))}},onMove:function(a,b,c){var d=this.parent;5<Math.abs(b-this.stY)&&(this.moved=
!0);this.pressed&&this.touchID==c&&(a+=this.delta[0],b+=this.delta[1]);a=bound(a-this.globalX(),0,this.w);b=bound(b-this.globalY(),0,this.h);switch(c){case this.point1id:this.point1=[a,b];break;case this.point2id:this.point2=[a,b]}if(2==this.tn){c=Math.sqrt(Math.pow(this.point1[0]-this.point2[0],2)+Math.pow(this.point1[1]-this.point2[1],2));b=bound(c-this.dist,-20,20)/this.w*.6;if(0<this.dist)switch(d.mode){case 1:case 2:case 3:case 4:a=this.parent.slQ.getVal();a=bound(a-b,0,1);this.parent.slQ.setValue(a);
regUpdate(this);regUpdate(d.led_q);regUpdate(d.slQ);selectedStrip.setNameValue("eq.prmod",1);break;case 77:a=selectedStrip.getNameValue("deesser.ratio"),a=bound(a-b,0,1),selectedStrip.setNameValue("deesser.ratio",a),regUpdate(this),regUpdate(d.led_d3),regUpdate(d.D3)}this.dist=c}else if(this.pressed&&this.touchID==c){switch(d.mode){case 0:d.slFREQ.setValue(bound(a/this.w,0,.5588));selectedStrip.setNameValue("eq.prmod",1);break;case 5:d.slFREQ.setValue(bound(a/this.w,.5588,1));selectedStrip.setNameValue("eq.prmod",
1);break;case 1:case 2:case 3:case 4:if(this.easy){a=1-b/this.h;switch(d.mode){case 1:d.BASS.setValue(a);break;case 2:d.MID.setValue(a);break;case 3:d.TREBLE.setValue(a)}regUpdate(this)}else d.slFREQ.setValue(a/this.w),d.slGAIN.setValue(1-b/this.h);selectedStrip.setNameValue("eq.prmod",1);break;case 77:c=bound(a,this.freqToX(2E3)|0,this.freqToX(15E3)|0)-this.freqToX(2E3);a=this.freqToX(15E3)-this.freqToX(2E3);b=bound(b,this.h/2|0,this.h)-this.h/2|0;var f=this.h/2|0;d.D1.setValue(c/a);d.D2.setValue(1-
b/f)}regUpdate(this);regUpdate(d.led)}},onUp:function(a){this.dist=-1;switch(this.tn){case 1:this.point1=[-1,-1];break;case 2:this.point2=[-1,-1],this.lastClickTime=0}this.tn--;a=this.parent;var b=Date.now();if(b-this.lastClickTime<DBL_CLK_TIME&&this.lastClickIdx==a.mode&&this.lastP==this.pressed){if(this.pressed)if(77==a.mode)a.D1.setValue(.773310034),a.D2.setValue(.46875),a.D3.setValue(.4);else if(this.easy)switch(a.mode){case 1:a.BASS.setValue(.5);break;case 2:a.MID.setValue(.5);break;case 3:a.TREBLE.setValue(.5)}else{if(0!=
a.mode&&5!=a.mode)a.slGAIN.setValue(.5);else if(a.dbu1&&a.dbu1.enabled)a.dbu1.onDown();switch(a.mode){case 0:a.slFREQ.setValue(0);break;case 1:a.slFREQ.setValue(FREQtoV(200));break;case 2:a.slFREQ.setValue(FREQtoV(1E3));break;case 3:a.slFREQ.setValue(FREQtoV(4E3));break;case 4:a.slFREQ.setValue(FREQtoV(1E4));break;case 5:a.slFREQ.setValue(1)}}else setMode(E_MODE.MIX);regUpdate(this)}this.lastP=this.pressed;this.pressed=!1;this.moved||0!=this.tn||(this.lastClickTime=b);this.lastClickIdx=a.mode;this.touchID=
-1},onWheel:function(a){var b=this.parent;switch(b.mode){case 0:case 5:var c=selectedStrip.name+"eq."+(5==b.mode?"lpf.":"hpf.")+"slope",d=getValue(c);0<a?d--:d++;d=bound(d,0,2);setValue(c,d);regUpdate(b);break;case 1:case 2:case 3:case 4:if(this.easy)break;c="eq."+this.arr[this.parent.mode]+".q";d=selectedStrip.getNameValue(c);d=bound(d+a/120/30,0,1);selectedStrip.setNameValue(c,d);regUpdate(this);regUpdate(b.led_q);regUpdate(b.slQ);break;case 77:d=selectedStrip.getNameValue("deesser.ratio"),d=bound(d+
a/120/30,0,1),selectedStrip.setNameValue("deesser.ratio",d),regUpdate(this),regUpdate(b.led_d3),regUpdate(b.D3)}},freqToX:function(a){return(this.w-1)*Math.log(a/20)/Math.log(1102.5)},designPeak:function(a,b,c,d){if(-.001<=d&&.001>=d)return[1,0,0,1,0,0];d=Math.pow(10,d/40);b=2*Math.PI*b/a;a=Math.cos(b);c=b*(2*Math.PI-b)/(c*(4*Math.PI-b));b=1+c/d;var f=Math.pow(10,0)/b;return[(1+c*d)*f,-(2*a)*f,(1-c*d)*f,1,-(2*a)/b,(1-c/d)/b]},designHP:function(a,b,c){if(20.1>b)return[1,0,0,1,0,0];b=2*Math.PI*b/a;
a=Math.cos(b);c=Math.sin(b)/(2*c);b=1+c;var d=Math.pow(10,0)/b;return[.5*(1+a)*d,-(1+a)*d,.5*(1+a)*d,1,-(2*a)/b,(1-c)/b]},designLP:function(a,b,c){if(22049.9<b)return[1,0,0,1,0,0];b=2*Math.PI*b/a;a=Math.cos(b);c=Math.sin(b)/(2*c);b=1+c;var d=Math.pow(10,0)/b;return[.5*(1-a)*d,(1-a)*d,.5*(1-a)*d,1,-(2*a)/b,(1-c)/b]},showClip:function(){this.isClipping=!0;regUpdate(this);var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.isClipping=!1;regUpdate(a)},3E3)},setRTA:function(a){this.rta=
a;var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta=null;regUpdate(b)},1E3);regUpdate(this)},paint:function(){this.getValues();this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(0,0,this.w,this.h));null!=this.rta&&this.drawRTA();this.easy&&(ctx.globalAlpha=.07,ctx.fillStyle=this.egrad,ctx.fillRect(0,0,this.w,this.h),ctx.globalAlpha=1);var a=
this.w,b=this.h,c=this.peaks,d=.5*b/20,f=b/2|0;if(null==this.freqPlot||this.freqPlot.length!=a){this.freqPlot=Array(a);this.freqPlot2=Array(a);this.xToFreq=Array(a);this.xToAngular=Array(a);this.xCos1=Array(a);this.xCos2=Array(a);for(var e=0;e<a;e++){var b=20*Math.pow(1102.5,1*e/a),g=2*b*Math.PI/this.RATE,h=Math.cos(g),l=Math.cos(2*g);this.xToFreq[e]=b;this.xToAngular[e]=g;this.xCos1[e]=h;this.xCos2[e]=l}}for(b=0;b<a;b++)this.freqPlot[b]=0,this.freqPlot2[b]=0;for(b=0;b<this.bands;b++){var m,g=1;switch(b){case 0:m=
this.designHP(this.RATE,bound(c[b][0],20,1E3),Math.sqrt(2)/2);g=this.hp_slope+1;break;case 5:m=this.designLP(this.RATE,bound(c[b][0],1E3,22050),Math.sqrt(2)/2);g=this.lp_slope+1;break;default:m=this.designPeak(this.RATE,c[b][0],c[b][1],c[b][2])}var e=m[3],n=m[0],p=m[1],r=m[2],q=m[4],h=m[5];m=n*n+p*p+r*r;for(var p=2*p*(n+r),n=2*n*r,r=e*e+q*q+h*h,q=2*q*(e+h),t=2*e*h,e=0;e<a;e++)h=this.xCos1[e],l=this.xCos2[e],h=4.3429448190325175*Math.log((m+p*h+n*l)/(r+q*h+t*l)),h*=g|0,this.freqPlot[e]+=h,b==this.parent.mode&&
(this.freqPlot2[e]+=h)}ctx.lineWidth=2;ctx.lineJoin="round";if(this.showCurrentCurve){ctx.beginPath();for(e=0;e<a;e++)if(!(1==(e&1)&&e<a-1)||this.freqPlot2[e]>this.freqPlot2[e-1]&&this.freqPlot2[e]>this.freqPlot2[e+1]||this.freqPlot2[e]<this.freqPlot2[e-1]&&this.freqPlot2[e]<this.freqPlot2[e+1])g=f-d*this.freqPlot2[e],0==e&&ctx.moveTo(e,g),ctx.lineTo(e,g);ctx.lineWidth=1;ctx.strokeStyle=this.colors[this.parent.mode];ctx.fillStyle=hexToRGBA(this.colors[this.parent.mode],.1);ctx.stroke();ctx.lineTo(a,
f);ctx.lineTo(0,f);ctx.closePath();ctx.fill()}ctx.fillStyle="#666";ctx.fillRect(0,f-1,a,2);ctx.beginPath();ctx.fillStyle="rgba(255,255,255,0.12)";ctx.strokeStyle="#ffffff";ctx.lineWidth=2;for(e=0;e<a;e++)if(!(1==(e&1)&&e<a-1)||this.freqPlot[e]>this.freqPlot[e-1]&&this.freqPlot[e]>this.freqPlot[e+1]||this.freqPlot[e]<this.freqPlot[e-1]&&this.freqPlot[e]<this.freqPlot[e+1])g=f-d*this.freqPlot[e],0==e&&ctx.moveTo(e,g),ctx.lineTo(e,g);ctx.stroke();ctx.lineTo(a,f);ctx.lineTo(0,f);ctx.closePath();ctx.fill();
ctx.textAlign="center";if(this.easy)for(ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.font="bold 15px open_sans_condensedbold",p=["B","M","T"],a=[1,2,3],m=0;m<p.length;m++)b=a[m],e=this.freqToX(c[b][0]),1==b&&(e+=this.w/6),3==b&&(e-=this.w/6),g=f-c[b][2]*d,ctx.lineWidth="3",this.bypass&&0!=b?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):(ctx.fillStyle=this.colors[b],ctx.strokeStyle=this.colors[b]),ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(e,g,16,0,2*Math.PI),ctx.fill(),
ctx.globalAlpha=1,ctx.beginPath(),ctx.arc(e,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,this.mode==b&&ctx.stroke(),ctx.fillStyle="#060606",ctx.fillText(p[m],e-(0==b?1:0)+1,g+5+1),ctx.fillStyle="#F0F0F0",ctx.fillText(p[m],e-(0==b?1:0),g+5);else for(ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.font="bold 14px open_sans_condensedbold",p="HPF 1 2 3 4 LPF".split(" "),b=0;b<this.bands;b++)e=this.freqToX(c[b][0]),g=f-c[b][2]*d,ctx.lineWidth="3",this.bypass&&0!=b&&5!=b?
(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):(ctx.fillStyle=this.colors[b],ctx.strokeStyle=this.colors[b]),ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(e,g,13,0,2*Math.PI),ctx.fill(),ctx.globalAlpha=1,ctx.beginPath(),ctx.arc(e,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,this.parent.mode==b&&ctx.stroke(),ctx.fillStyle="#060606",ctx.fillText(p[b],e+1,g+6),ctx.fillStyle="#F0F0F0",ctx.fillText(p[b],e,g+5);this.easy&&(ctx.font="21px open_sans_condensedbold",
ctx.fillStyle=color.white,ctx.textAlign="center",ctx.fillText(lang.BASS,this.freqToX(50)|0,this.h-20),ctx.fillText(lang.MID,this.freqToX(1E3)|0,this.h-20),ctx.fillText(lang.TREBLE,this.freqToX(8E3)|0,this.h-20));this.ds&&(ctx.strokeStyle="rgba(0,250,0,0.2)",ctx.lineWidth=2,c=this.freqToX(DeesserVtoFREQ(this.ds_freq))|0,d=3+(1-this.ds_thr)*(this.h-6)|0,ctx.beginPath(),ctx.dashedLine(c,0,c,this.h,10),ctx.stroke(),f=this.freqToX(5E3)-this.freqToX(2E3),ctx.beginPath(),ctx.moveTo(c-f,this.h),ctx.quadraticCurveTo(c,
d,c+f,this.h),ctx.closePath(),d=precision(.07*this.ds_ratio,4),ctx.fillStyle="rgba(0,255,0,"+d+")",ctx.fill(),ctx.stroke(),e=c,g=3+(1-this.ds_thr/2)*(this.h-6)|0,ctx.lineWidth=3,ctx.strokeStyle="rgba(100,255,100,0.3)",ctx.fillStyle="rgba(100,255,100,0.4)",ctx.globalAlpha=1,ctx.beginPath(),ctx.arc(e,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,77==this.parent.mode&&ctx.stroke(),ctx.fillStyle="rgba(0,0,0,0.4)",ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(e,g,13,0,2*
Math.PI),ctx.fill(),ctx.fillStyle="#F0F0F0",ctx.font="bold 15px open_sans_condensedbold",ctx.fillText("DS",e-(0==b?1:0),g+5),ctx.shadowColor="transparent");ctx.lineWidth=1;ctx.strokeStyle="#222";ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("eq.prmod")?"#444":color.red,ctx.setShadow(color.black,0,2,2),ctx.font="18px open_sans_condensedbold",ctx.fillText(selectedStrip.getNameValue("eq.prname"),4,18))},drawRTA:function(){var a=
this.w,b=this.h-2,c=this.rta,d=FREQtoX(20.6,a),f=FREQtoX(22350.6,a)/(c.length-1);ctx.strokeStyle="#0f0";ctx.lineWidth=1;ctx.lineCap="round";ctx.fillStyle="rgba(255,255,255,0.1)";ctx.beginPath();var e=c[0];ctx.moveTo(0,b*(1-e)|0);for(var g=0;g<c.length;g++){e=c[g];e=b*(1-e)|0;ctx.lineTo(d,e);if(d>=a)break;d+=f}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();ctx.fill()},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");
isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=.5*c/20,f=c/2|0;a.fillStyle="#0A0B0C";a.fillRect(0,0,this.w,this.h);isSmall||(a.fillStyle=this.grd,a.fillRect(0,0,b,c));a.font=font.eqMarks;a.textAlign="center";a.lineWidth=1;a.fillStyle="rgba(255,255,255,0.1)";a.fillRect(0,f-10*d|0,b,.5);a.fillRect(0,f+10*d|0,b,.5);a.strokeStyle="rgba(255,255,255,0.15)";a.lineWidth=.5;a.beginPath();a.moveTo(0,
f-1);a.lineTo(b,f-1);a.fillStyle=color.labelText;for(b=30;100>=b;b+=10)d=(this.freqToX(b)|0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);for(b=100;1E3>=b;b+=100)d=(this.freqToX(b)|0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);for(b=1E3;1E4>=b;b+=1E3)d=(this.freqToX(b)|0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);a.stroke();this.egrad=ctx.createLinearGradient(0,0,this.w,0);this.egrad.addColorStop(0,this.colors[1]);this.egrad.addColorStop(.5,this.colors[2]);this.egrad.addColorStop(1,this.colors[3]);this.cachedBgW=this.w;this.cachedBgH=
this.h}}),EQGraphicWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQGraphicWidget";this.needMoveEvt=this.needClip=!0;this.master=!1;this.left=!0;this.selecting=this.pressed=!1;this.idx=0;this.touchID=-1;this.grd=null;this.bands=31;this.vBands=16;this.moved=this.isClipping=this.bankB=!1;this.stY=-1;this.bypass=!1;this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.lastP=!1;this.rtaTimer=this.rta=null;this.delta=[0,0];this.afsEnabled=!1;
this.afs=[];this.barColors="#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ");this.showPreset=!0},onDown:function(a,b,c){if(!this.pressed){this.stY=b;this.moved=!1;var d=a-this.globalX(),f=b-this.globalY(),e=this.w/this.vBands,g=this.h/2|0;this.selecting=!0;for(var h=0;h<this.vBands;h++){var l=
2*(-this.getPeak(h)+.5)*g|0,m=e*h,l=g+l;isInRect(m,l-e,e,2*e,d,f)&&(this.pressed=!0,this.selecting=!1,this.idx=h,this.delta=[m-d,l-f],this.parent.connectKeys(),this.onMove(a,b,c))}this.selecting&&(this.idx=bound(d/e|0,0,this.vBands),this.parent.connectKeys());this.touchID=c;regUpdate(this.parent.sEQ);this.master&&regUpdate(this.parent.sEQ2);regUpdate(this)}},onMove:function(a,b,c){this.selecting&&(a=bound(a-this.globalX(),0,this.w-1),a=bound(a/(this.w/this.vBands)|0,0,this.vBands),this.idx!=a&&(this.idx=
a,this.parent.connectKeys(),regUpdate(this.parent.sEQ),this.master&&regUpdate(this.parent.sEQ2),regUpdate(this)));this.pressed&&this.touchID==c&&(b+=this.delta[1],5<Math.abs(b-this.stY)&&(this.moved=!0),b=bound(b-this.globalY(),0,this.h),b=bound(1-b/this.h,0,1),this.setPeak(this.idx,b),regUpdate(this.parent.slGAIN),regUpdate(this.parent.led),regUpdate(this.parent.sEQ),this.master&&regUpdate(this.parent.sEQ2),regUpdate(this))},onUp:function(a){this.touchID!=a?this.lastClickTime=0:(this.delta=[0,0],
a=Date.now(),a-this.lastClickTime<DBL_CLK_TIME&&this.lastClickIdx==this.idx&&this.lastP==!this.selecting&&(this.pressed?(this.setPeak(this.idx,.5),this.pressed=!1,this.touchID=-1,regUpdate(this),regUpdate(this.parent.sEQ),this.master&&regUpdate(this.parent.sEQ2),regUpdate(this.parent.slGAIN)):setMode(E_MODE.MIX)),this.moved||(this.lastClickTime=a),this.lastClickIdx=this.idx,this.lastP=!this.selecting,this.pressed=!1,this.touchID=-1)},onWheel:function(a){if(!this.easy){var b=this.getPeak(this.idx),
b=bound(b+a/120/30,0,1);this.setPeak(this.idx,b);regUpdate(this.parent.slGAIN);regUpdate(this.parent.led);regUpdate(this.parent.sEQ);this.master&&regUpdate(this.parent.sEQ2);regUpdate(this)}},calcGeometry:function(){var a=this.w;this.grd=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0)")},getPeak:function(a){if(0>a||a>=this.bands)return log("peak out of bounds"),0;this.bankB&&(a+=15);return this.master?
getValue("m.eq.peak."+(this.left?"l.":"r.")+a):getValue(this.parent.keyPrefix+a)},setPeak:function(a,b){if(0>a||a>=this.bands)log("peak out of bounds");else{this.bankB&&(a+=15);if(this.master){var c="m.eq.peak."+(this.left?"l.":"r.")+a;setValue(c,b);1==getValue("m.eq.linked")&&setValue(c.replace(".l.",".r."),b)}else setValue(this.parent.keyPrefix+a,b);selectedStrip.setNameValue("eq.prmod",1)}},setRTA:function(a){this.rta=a;var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta=
null;regUpdate(b)},1E3);regUpdate(this)},showClip:function(){this.isClipping=!0;regUpdate(this);var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.isClipping=!1;regUpdate(a)},3E3)},paint:function(){this.bypass=1==selectedStrip.getNameValue("eq.bypass");if(this.afsEnabled=1==getValue("afs.enabled"))this.afsEnabled=0!=selectedStrip.getNameValue("afs.enabled");this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);this.bypass&&
(ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(0,0,this.w,this.h));null!=this.rta&&this.drawRTA();var a=this.w/this.vBands,b=this.h/2|0;this.afsEnabled&&this.drawAFS(a,b);ctx.fillStyle="#51608C";ctx.lineWidth=2;ctx.strokeStyle="rgba(255,255,255,0.5)";for(var c=0;c<this.vBands;c++){this.idx==c&&(ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(a*c|0,0,a,this.h));var d=2*(-1*this.getPeak(c)+.5)*b|0;ctx.globalAlpha=.4;this.bypass?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):
ctx.strokeStyle=ctx.fillStyle=this.barColors[c+(this.bankB?15:0)];ctx.fillRect(a*c+2|0,b,a-3|0,d);ctx.lineWidth=this.idx==c?3:2;10<a&&(ctx.beginPath(),ctx.arc(a*c+a/2,b+d,a/2-3,0,2*Math.PI),ctx.fill(),this.idx==c&&(ctx.globalAlpha=1),ctx.stroke());ctx.globalAlpha=1}ctx.fillStyle="#0A0B0C";ctx.fillRect(0,b-2,this.w,4);ctx.fillStyle="#9D9D9D";ctx.fillRect(0,b-1,this.w,2);ctx.lineWidth=1;ctx.strokeStyle="#222";ctx.strokeRect(.5,.5,this.w-1,this.h-1);ctx.fillStyle="rgba(255,255,255,0.1)";this.bankB?ctx.fillTriangle2(1,
10,9,2,9,18):ctx.fillTriangle2(this.w-1,10,this.w-9,2,this.w-9,18);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("eq.prmod")?"#444":color.red,ctx.setShadow(color.black,0,1,1),ctx.font="18px open_sans_condensedbold",ctx.fillText(selectedStrip.getNameValue("eq.prname"),4,18))},drawAFS:function(a,b){ctx.lineWidth=3;for(var c=this.parent.keyPrefixAfs+"afs.eq.",d=0;12>d;d++){var f=getValue(c+d),e=JSON.parse("["+f+"]"),f=e[3];if(2!=f){var g=e[0],e=bound(e[2],-15,0);
0!=e&&(g=FREQtoX(g,31*this.w/16),this.bankB&&(g-=this.w/16*15),e=b-e/15*b,e=bound(e,b,this.h),ctx.strokeStyle=2==f?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,e),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke())}}for(d=0;12>d;d++)f=getValue(c+d),e=JSON.parse("["+f+"]"),f=e[3],2==f&&(g=e[0],e=bound(e[2],-15,0),0!=e&&(g=FREQtoX(g,31*this.w/16),this.bankB&&(g-=this.w/16*15),e=b-e/15*b,e=bound(e,b,this.h),ctx.strokeStyle=
2==f?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,e),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke()))},drawRTA:function(){var a=this.w,b=this.h-2,c=this.rta;ctx.strokeStyle="#0f0";ctx.lineWidth=1;ctx.lineCap="round";ctx.fillStyle="rgba(255,255,255,0.1)";ctx.beginPath();var d=0,f=c.length/31*16|0;this.bankB&&(d=c.length/31*15|0,f=c.length);var e=FREQtoX(20.6,a),g=FREQtoX(22350.6,a)/(f-d-1),h=c[0];for(ctx.moveTo(0,
b*(1-h)|0);d<f;d++){h=c[d];h=b*(1-h)|0;ctx.lineTo(e,h);if(e>=a)break;e+=g}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();ctx.fill()},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/this.vBands,f=this.h/6;a.fillStyle="#0A0B0C";a.fillRect(0,
0,b,c);isSmall||(a.fillStyle=this.grd,a.fillRect(0,0,b,c));a.lineWidth=.5;a.strokeStyle="rgba(255,255,255,0.1)";a.beginPath();for(b=0;b<this.vBands;b++)a.moveTo(.5+(d*b|0),0),a.lineTo(.5+(d*b|0),this.h);for(b=0;6>b;b++)a.moveTo(0,.5+(f*b|0)),a.lineTo(this.w,.5+(f*b|0));a.stroke();this.cachedBgW=this.w;this.cachedBgH=this.h}}),Scroller2=Class.create({initialize:function(a){this.timeStamp=this.lastPos=this.amplitude=this.velocity=0;this.trackParamName="vOffset";this.setPositionName="setOffset";this.setFunc=
function(b){a.dx=b;a.update()};this.maxPosName="";this.maxPosFunc=function(){return 9999};this.target=a;this.ticker=null;this.scaleFactor=.3;this.timeConstant=1E3/fps;this.step=this.position=0},velStart:function(){this.amplitude=this.velocity=0;this.timeStamp=Date.now();clearInterval(this.ticker);this.target&&(this.lastPos=this.target[this.trackParamName]);var a=this;this.ticker=setInterval(function(){a.velTrack()},1E3/fps)},velTrack:function(){var a=Date.now(),b=a-this.timeStamp;this.timeStamp=a;
a=this.target[this.trackParamName]-this.lastPos;this.lastPos=this.target[this.trackParamName];b=1E3*a/(1+b);this.velocity=0==this.velocity?b:.3*b+.7*this.velocity},velRelease:function(){Date.now()-this.timestamp<1E3/fps&&this.velTrack();clearInterval(this.ticker);60<Math.abs(this.velocity)&&this.startScroll(this.velocity)},startScroll:function(a){GLOBAL_STOP_SCROLL=!1;this.position=this.target[this.trackParamName];this.amplitude=a*this.scaleFactor;this.step=0;var b=this;clearInterval(this.ticker);
this.ticker=setInterval(function(){b.scrollTick()},1E3/fps)},scrollTick:function(){GLOBAL_STOP_SCROLL&&(clearInterval(this.ticker),GLOBAL_STOP_SCROLL=!1);var a=this.amplitude/this.timeConstant*2;this.position+=a;this.amplitude-=a;this.step+=1;.5>Math.abs(a)&&clearInterval(this.ticker);this.step>3*fps&&clearInterval(this.ticker);a=this.maxPosFunc();if(0>=this.position||this.position>this.maxPosFunc())clearInterval(this.ticker),this.position=bound(this.position,0,a);this.target[this.trackParamName]!=
(this.position|0)&&this.setFunc(this.position|0)},stop:function(){this.scrollStop()},scrollStop:function(){clearInterval(this.ticker)}}),GEQ_GRAPH=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GEQ_GRAPH";this.needClip=!0;this.w=600;this.h=400;this.selected=0;this.bands=31;this.vBands=16;this.right=!1;this.needMoveEvt=!0;this.bypass=!1;this.rtaTimer=this.rta=null;this.bgColor="#111";this.bandWidth=50;this.r=this.bandWidth/2;this.rw=this.bands*this.bandWidth;this.maxdx=
0;this.gain=15;this.barColors="#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ");this.freqs="20 25 32 40 50 63 80 100 125 160 200 250 315 400 500 630 800 1000 1.25k 1.6k 2k 2.5k 3.15k 4k 5k 6.3k 8k 10k 12.5k 16k 20k 22k".split(" ");this.idx=this.offsetX=0;this.right=this.stereo=!1;this.scroller=
new Scroller2(this);this.scroller.trackParamName="offsetX";this.scroller.setFunc=this.setScroll.bind(this);this.peakGrab=!1;this.lastClickIdx=-1;this.moved=this.lastP=!1;this.lastClickPos=[-1,-1];this.clickPos=[-1,-1];this.haveFilters=!0;this.hpf_freq=.16274;this.lpf_freq=.9},setBandWidth:function(a){this.bandWidth=a;this.r=this.bandWidth/2;this.rw=this.bands*this.bandWidth;this.onResize();regUpdate(this)},setKey:function(a){this.unRegAllKeys();this.key=a;this.regKey(a+"eq.bypass");this.regKey(a+
"eq.enabled");this.haveFilters&&(this.stereo?(this.regKey(a+"eq.hpf"),this.regKey(a+"eq.lpf")):(this.regKey(a+"eq.hpf.l"),this.regKey(a+"eq.hpf.r"),this.regKey(a+"eq.lpf.l"),this.regKey(a+"eq.lpf.r")));for(var b=0;b<this.bands;b++)this.stereo?this.regKey(a+"eq.peak."+b):(this.regKey(a+"eq.peak.l."+b),this.regKey(a+"eq.peak.r."+b))},setLeft:function(a){this.right=!a;regUpdate(this)},setRight:function(a){this.right=a;regUpdate(this)},getState:function(){this.bypass=null!=this.key?getValue(this.key+
"eq.bypass"):!1},getPeak:function(a){return null==this.key?.03*a:getValue(this.key+(this.stereo?this.right?"eq.peak.r.":"eq.peak.l.":"eq.peak.")+a)},setPeak:function(a){null!=this.key&&(a=bound(a,0,1),this.setPeakIdx(this.selected,a))},setPeakIdx:function(a,b){null!=this.key&&(b=bound(b,0,1),getValue(this.key+"eq.linked")?(setValue(this.key+"eq.peak.l."+a,b),setValue(this.key+"eq.peak.r."+a,b)):setValue(this.key+(this.stereo?this.right?"eq.peak.r.":"eq.peak.l.":"eq.peak.")+a,b),regUpdate(this),this.onChange())},
onChange:function(){},reset:function(){var a=this.key;setValue(a+"eq.enabled",0);setValue(a+"eq.linked",1);for(var b=0;b<this.bands;b++)this.stereo?(setValue(a+"eq.peak.l."+b,.5),setValue(a+"eq.peak.r."+b,.5)):setValue(a+"eq.peak."+b,.5);regUpdate(this)},onDown:function(a,b,c){if(!this.pressed){this.pressed=!0;this.touchID=c;this.stY=b;this.peakGrab=this.moved=!1;a-=this.globalX();b-=this.globalY();this.clickPos=[a,b];c=(this.offsetX+a)/this.bandWidth|0;var d=this.getPeak(c),d=this.h*(1-d)|0,f=this.rw*
this.hpf_freq|0,e=this.rw*this.lpf_freq|0;this.haveFilters&&isInRect(f-this.offsetX,0,2*this.r,2*this.r,a,b)?(this.peakGrab=!0,this.idx=-1,this.ddx=f-a):this.haveFilters&&isInRect(e-2*this.r-this.offsetX,0,2*this.r,2*this.r,a,b)?(this.peakGrab=!0,this.idx=-2,this.ddx=e-a):b>=d-this.r&&b<=d+this.r?(this.peakGrab=!0,this.idx=this.selected=c,this.ddy=d-b,this.onSelect(c),regUpdate(this)):(this.peakGrab=!1,this.ddx=this.offsetX+a,this.scroller&&this.scroller.velStart())}},onMove:function(a,b,c){this.touchID==
c&&(a-=this.globalX(),c=b-this.globalY(),this.peakGrab?this.haveFilters&&-1==this.idx?(b=this.ddx+a,a=bound(b/this.rw,0,.97),this.stereo&&getValue(this.key+"eq.linked")?(setValue(this.key+"eq.hpf.r",a),setValue(this.key+"eq.hpf.l",a)):setValue(this.key+"eq.hpf"+(this.stereo?this.right?".r":".l":""),a),regUpdate(this)):this.haveFilters&&-2==this.idx?(b=this.ddx+a,a=bound(b/this.rw,.03,1),this.stereo&&getValue(this.key+"eq.linked")?(setValue(this.key+"eq.lpf.r",a),setValue(this.key+"eq.lpf.l",a)):setValue(this.key+
"eq.lpf"+(this.stereo?this.right?".r":".l":""),a),regUpdate(this)):(a=bound(1-(this.ddy+c)/this.h,0,1),this.setPeak(a),5<Math.abs(b-this.stY)&&(this.moved=!0)):this.setScroll(this.ddx-a))},onUp:function(a){if(this.touchID==a){this.peakGrab||this.scroller&&this.scroller.velRelease();this.delta=[0,0];a=Date.now();var b=Math.abs(this.lastClickPos[0]-this.clickPos[0]),c=Math.abs(this.lastClickPos[1]-this.clickPos[1]);a-this.lastClickTime<DBL_CLK_TIME&&30>b&&30>c&&this.lastClickIdx==this.idx&&this.lastP==
!this.peakGrab&&(this.peakGrab?(this.setPeak(.5),this.onChange()):setMode(E_MODE.MIX));this.moved||(this.lastClickTime=a);this.lastClickPos=this.clickPos;this.lastClickIdx=this.idx;this.lastP=!this.peakGrab;this.pressed=!1;this.touchID=-1}},onDouble:function(){this.peakGrab?this.setPeak(.5):modeBack()},onWheel:function(a,b,c){b-=this.globalX();this.globalY();b=(this.offsetX+b)/this.bandWidth|0;c=this.getPeak(b);c=bound(c+a/120/30,0,1);this.setPeakIdx(b,c)},onSelect:function(a){},setScroll:function(a){a=
bound(a,0,this.maxdx);this.offsetX!=a&&(this.offsetX=a,regUpdate(this))},setRTA:function(a){this.rta=a;regUpdate(this);var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta&&(b.rta=null,regUpdate(b))},200)},calcGeometry:function(){1500<this.w?this.setBandWidth(this.w/this.bands):this.setBandWidth(50)},onResize:function(){var a=this.rw-this.w;0>a&&(a=0);this.maxdx=a;this.offsetX>a&&this.setScroll(a);this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,
"rgba(255,255,255,0.0)");this.grd.addColorStop(.1,"rgba(255,255,255,0.0)");this.grd.addColorStop(.5,"rgba(255,255,255,0.25)");this.grd.addColorStop(.9,"rgba(255,255,255,0.0)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},prePaint:function(){if(this.visible){ctx.save();ctx.translate(this.x,this.y);this.enabled||(ctx.globalAlpha=.3);ctx.font="11px open_sans_condensedbold";ctx.textAlign="center";ctx.fillStyle="#aaa";var a={shadow:["#000",0,1,1]},b=this.h,c=b/2|0;ctx.textAlign="right";ctx.drawText("+15",
-5,9,a);ctx.drawText("0 ",-5,c+3,a);ctx.drawText("-15",-5,b-1,a);ctx.restore()}},paintBg:function(){},paint:function(){var a=this.w,b=this.h,c=this.bypass=getValue(this.key+"eq.bypass");if(this.afsEnabled=1==getValue("afs.enabled"))this.afsEnabled=0!=selectedStrip.getNameValue("afs.enabled");ctx.fillStyle="#101115";ctx.fillRect(this.offsetX,0,this.w,b);null!=this.rta&&this.drawRTA();this.afsEnabled&&this.drawAFS();ctx.fillStyle=this.grd;ctx.fillRect(0,0,this.rw,b);var d=b/2|0;if(this.haveFilters){this.hpf_freq=
getValue(this.key+"eq.hpf"+(this.stereo?this.right?".r":".l":""));this.lpf_freq=getValue(this.key+"eq.lpf"+(this.stereo?this.right?".r":".l":""));var f=this.hpf_freq*this.rw,e=this.lpf_freq*this.rw;ctx.fillStyle="rgba(255,255,255,0.07)";var g=this.rw/12.5,h=this.rw/10,l=this.rw/20;0<this.hpf_freq&&(ctx.beginPath(),ctx.moveTo(-g,d),ctx.lineTo(-g,b),ctx.lineTo(f-g,b),ctx.quadraticCurveTo(f-l,d,f+h,d),ctx.lineWidth=1,ctx.strokeStyle="rgba(255,255,255,0.1)",ctx.stroke(),ctx.closePath(),ctx.fill());1>
this.lpf_freq&&(ctx.beginPath(),ctx.moveTo(this.rw+g,d),ctx.lineTo(this.rw+g,b),ctx.lineTo(e+g,b),ctx.quadraticCurveTo(e+l,d,e-h,d),ctx.lineWidth=1,ctx.strokeStyle="rgba(255,255,255,0.1)",ctx.stroke(),ctx.closePath(),ctx.fill())}ctx.strokeStyle="rgba(0,0,0,0.2)";ctx.lineWidth=1;for(f=0;f<this.bands;f++)e=f*this.bandWidth,e>this.offsetX+a||e<this.offsetX-this.bandWidth||(h=c?"#aaaaaa":this.barColors[f],f%2&&(ctx.fillStyle="rgba(255,255,255,0.01)",ctx.fillRect(e,0,this.bandWidth,b)),this.selected==
f&&(ctx.fillStyle=hexToRGBA(h,.07),ctx.fillRect(e,0,this.bandWidth,b)),g=this.getPeak(f),l=-d*(g-.5)*2,ctx.fillStyle=hexToRGBA(h,c?.35:.66),ctx.fillRect(e,d,this.bandWidth,l),ctx.fillStyle=hexToRGBA(h,.38),ctx.fillRect(e,d+l-this.r,2*this.r,2*this.r),ctx.strokeRect(e+.5,d+l-this.r+.5,2*this.r-1,2*this.r),ctx.drawText(this.freqs[f]+"hz",e+this.r,(1-g)*b+13|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1],align:"center",valign:"middle",font:"14px open_sans_condensedbold"}),h=precision(VtoLINRANGE(g,
-this.gain,this.gain),1),h=(0<h?"+":"")+h+lang.DB,ctx.drawText(h,e+this.r,(1-g)*b-12|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1]}));this.haveFilters&&(f=this.hpf_freq*this.rw,e=this.lpf_freq*this.rw,this.drawRect(f+this.r,this.r,"#405C66",0<this.hpf_freq?formatFreq(VtoFREQ20(this.hpf_freq))+"hz":"OFF","HPF"),this.drawRect(e-this.r,this.r,"#7A6346",1>this.lpf_freq?formatFreq(VtoFREQ20(this.lpf_freq))+"hz":"OFF","LPF"));ctx.lineWidth=1;ctx.strokeStyle="#333";ctx.drawLine(this.offsetX,
d,this.offsetX+a,d);1<this.maxdx&&(ctx.fillStyle="rgba(0,0,0,0.15)",ctx.fillRect(this.offsetX,b-12,a,12),ctx.fillStyle="rgba(255,255,255,0.15)",g=a/this.rw*a,ctx.fillRect(this.offsetX+2+this.offsetX/this.maxdx*(a-4-g),b-12+1,g,9));ctx.strokeStyle="#333";ctx.strokeRect(this.offsetX+.5,.5,a-1,b-1)},drawRect:function(a,b,c,d,f){ctx.fillStyle=c;ctx.strokeStyle="rgba(0,0,0,0.2)";ctx.lineWidth=1;ctx.fillRect(a-this.r,b-this.r,2*this.r,2*this.r);ctx.strokeRect(a+.5-this.r,b-this.r+.5,2*this.r-1,2*this.r);
ctx.drawText(d,a,b-12|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1],align:"center",valign:"middle",font:"14px open_sans_condensedbold"});ctx.drawText(f,a,b+13|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1]})},freqToX:function(a){return FREQtoX(a,this.rw)},drawAFS:function(){var a=this.bandWidth,b=this.h/2+1|0;ctx.lineWidth=2;for(var c=this.parent.keyPrefixAfs+"afs.eq.",d=0;12>d;d++){var f=getValue(c+d),e=JSON.parse("["+f+"]"),f=e[3];if(2!=f){var g=e[0],e=bound(e[2],-15,0);0!=
e&&(g=FREQtoX(g,this.rw),e=b-e/15*b,e=bound(e,b,this.h),ctx.strokeStyle=2==f?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,e),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke())}}for(d=0;12>d;d++)f=getValue(c+d),e=JSON.parse("["+f+"]"),f=e[3],2==f&&(g=e[0],e=bound(e[2],-15,0),0!=e&&(g=FREQtoX(g,this.rw),e=b-e/15*b,e=bound(e,b,this.h),ctx.strokeStyle=2==f?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-
a/2,b),ctx.quadraticCurveTo(g,b,g,e),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke()))},drawRTA:function(){var a=this.rw,b=this.h-2,c=this.rta,d=this.freqToX(20.6),f=this.freqToX(22350.6)/(c.length-1);ctx.lineCap="butt";ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.15)";ctx.fillStyle="rgba(255,255,255,0.1)";ctx.beginPath();var e=c[0];ctx.moveTo(0,b*(1-e)|0);for(var g=0;g<c.length;g++){e=c[g];e=b*(1-e)|0;ctx.lineTo(d,e);if(d>=a)break;d+=f}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();
ctx.fill()}}),GEQ_SMALL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQ-PARAM-WIDGET";this.bands=31;this.master=!1;this.left=!0;this.barColors="#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ");this.w=248;this.h=46;this.afsEnabled=!1},getPeak:function(a){return this.master?
getValue("m.eq.peak"+(this.left?".l":".r")+"."+a):getValue(this.parent.keyPrefix+a)},paint:function(){if(this.afsEnabled=1==getValue("afs.enabled"))this.afsEnabled=0!=selectedStrip.getNameValue("afs.enabled");this.bypass=this.master?toBool(getValue("m.eq.bypass")):toBool(selectedStrip.getNameValue("eq.bypass"));ctx.fillStyle="#101115";ctx.fillRect(0,0,this.w,this.h);ctx.lineWidth=.5;ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.beginPath();for(var a=this.w/this.bands|0,b=this.h/2|0,c=0;c<this.bands;c++)0!=
c&&(ctx.moveTo(a*c|0,0),ctx.lineTo(a*c|0,this.h));ctx.stroke();if(this.afsEnabled)for(c=0;12>c;c++){var d=getValue(selectedStrip.name+"afs.eq."+c),f=JSON.parse("["+d+"]"),e=f[0],d=bound(f[2],-15,0),f=f[3];0!=d&&(e=FREQtoX(e,this.w),e=bound(e,1,this.w-1),d=b-d/15*b,d=bound(d,b,this.h-1),0>e||e>this.w||(ctx.fillStyle=2==f?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.fillRect(e-1,d-1,2,2)))}ctx.globalAlpha=.4;for(c=0;c<this.bands;c++)ctx.fillStyle=this.barColors[c+(this.bankB?15:0)],this.bypass?
(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):ctx.strokeStyle=ctx.fillStyle=this.barColors[c+(this.bankB?15:0)],d=2*(-1*this.getPeak(c)+.5)*b|0,ctx.fillRect(a*c,b,a,d);ctx.globalAlpha=1;ctx.fillStyle="#666";ctx.fillRect(0,b,this.w,1);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.lineWidth=1;ctx.strokeStyle="#333";ctx.strokeRect(.5,.5,this.w-1,this.h-1)}});afsPopup=null;
var AFS_POPUP=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="AFS_POPUP";this.title=lang.PRESETS;this.color="#eee";this.bg="#31323A";this.borderColor="#676869";this.rh=150;this.rw=570;this.bx=70;this.by=10;this.bw=420;this.bh=200;this.target=c;this.initWidgets();this.updateGeometry();afsPopup=this;mWidgets.push(widgets.pop())},initWidgets:function(){var a=this;this.AFS_SETTINGS=new Button(this);this.AFS_SETTINGS.setImages(res.SETUP_ON,res.SETUP_OFF);this.AFS_SETTINGS.onPress=
function(){a.close()};this.AFS_SETTINGS.setAnchors(80,null,null,3);this.AFS_OFF=new CheckBox(this);this.AFS_OFF.setImages(res.OFF_OFF,res.ON_ON);this.AFS_OFF.setKey(selectedStrip.name+"afs.enabled");this.AFS_OFF.getState=function(){this.disabled=0==getValue("afs.enabled")};this.AFS_OFF.setAnchors(162,null,null,3);this.bAFS=new CheckBox(this);this.bAFS.setAnchors(510,null,null,3);this.bAFS.setImages(res.AFSON_OFF,res.AFSON_ON);this.bAFS.setKey("afs.enabled");this.bAFS.onToggle=function(){regUpdate(editWidget)};
this.SL1=new EQHSlider2(this);this.SL1.setAnchors(20,null,null,50);this.SL1.bg=this.bg;this.SL1.w=320;this.SL1.setDefaultValue(.5);this.SL1.setKey(selectedStrip.name+"afs.sensitivity");this.led1=new FXLEDPlain(this);this.led1.setAnchors(276,null,null,104);this.led1.h=24;this.led1.label="";this.led1.oneLine=!0;this.led1.bgColor=this.bg;this.led1.sign="dB";this.led1.setKey(selectedStrip.name+"afs.sensitivity");this.led1.formatValue=function(a){return precision(VtoLINRANGE(a,-6,6),1)};this.FMODE=new SWITCHBOX(this);
this.FMODE.setItems([lang.FIXED,lang.LIVE,lang.LOCK]);this.FMODE.setItemWidth(65);this.FMODE.setAnchors(360,null,null,69);this.FMODE.getState=function(){var a=selectedStrip.name;this.state=0==(getValue(a+"afs.logic")|0)?2:0==(getValue(a+"afs.fmode")|0)?0:1};this.FMODE.valueFunc=function(){var a=selectedStrip.name;setValue(a+"afs.logic",2==this.state?0:1);2>this.state&&setValue(a+"afs.fmode",this.state)};this.AFS_CLEAR_FIXED=new SButton(this);this.AFS_CLEAR_FIXED.text=lang.CLEAR_FIXED;this.AFS_CLEAR_FIXED.onPress=
function(){setValue(selectedStrip.name+"afs.clearfixed",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearfixed",0)},500)};this.AFS_CLEAR_ALL=new SButton(this);this.AFS_CLEAR_ALL.text=lang.CLEAR_ALL;this.AFS_CLEAR_ALL.onPress=function(){setValue(selectedStrip.name+"afs.clearall",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearall",0)},500)};this.AFS_PRESETS=new SButton(this);this.AFS_PRESETS.text=lang.PRESETS;this.AFS_PRESETS.onPress=function(){if(selectedStrip.type==E_STRIP_TYPE.AUX&&
isBlocked("auxproc",selectedStrip.subId))showPopupMsg(lang.LOCKED,1E3);else if(selectedStrip.type==E_STRIP_TYPE.MASTER&&isBlocked("mproc"))showPopupMsg(lang.LOCKED,1E3);else{clearModals();sendMessage("AFSUPDATEVAR");var a=new PRESET_MENU2(null,"afs",{savePreset:function(){var a=selectedStrip.subId+1;selectedStrip.type==E_STRIP_TYPE.AUX&&a++;a={afs:getValue("var.afsdata").split("/")[a]};a.sens=selectedStrip.getNameValue("afs.sensitivity");a.mode=selectedStrip.getNameValue("afs.fmode");a.logic=selectedStrip.getNameValue("afs.logic");
return a},loadPreset:function(a){var b=selectedStrip.subId+1;selectedStrip.type==E_STRIP_TYPE.AUX&&b++;var c=a.afs;c&&(sendMessage("AFSLOADCHAN^"+b+"^"+c),selectedStrip.setNameValue("afs.sensitivity",a.sens),selectedStrip.setNameValue("afs.logic",a.logic),selectedStrip.setNameValue("afs.fmode",a.mode),regUpdate(this),drawAll())}},"#888");a.center=!0;a.updateGeometry();regUpdate(a)}};this.AFS_CLEAR_LIVE=new SButton(this);this.AFS_CLEAR_LIVE.text=lang.CLEAR_LIVE;this.AFS_CLEAR_LIVE.onPress=function(){setValue(selectedStrip.name+
"afs.clearlive",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearlive",0)},500)}},onDown:function(a,b){var c=a-this.globalX(),d=b-this.globalY();isInRect(0,this.h-this.rh,this.rw,this.rh,c,d)||isInRect(this.bx,this.by,this.bw,this.bh,c,d)||this.close()},close:function(){this.enabled=!1;clearModals()},onDelete:function(){afsPopup=null},calcGeometry:function(){this.AFS_CLEAR_FIXED.setPos(100,164);this.AFS_CLEAR_ALL.setPos(235,164);this.AFS_PRESETS.setPos(235,116);this.AFS_CLEAR_LIVE.setPos(370,
164);this.grd=ctx.createLinearGradient(0,this.h-this.rh,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(.1,"rgba(255,255,255,0.0)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;ctx.lineWidth=2;ctx.roundRect(0,this.h-this.rh,this.rw,this.rh,14);ctx.fill();ctx.fillStyle=this.grd;ctx.fill();drawImage(res.AFS2LOGO,30,this.h-35);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRoundRect(16,this.h-
42,this.AFS_OFF.x+this.AFS_OFF.w+12-16,40,4);0==this.FMODE.state&&(ctx.font="12px open_sans_condensedbold",ctx.fillStyle=color.white,ctx.textAlign="left",drawText(lang.AFS_FIXED_INFO,260,this.h-34,{dy:14}));ctx.font="15pt open_sans_condensedbold";ctx.textAlign="center";ctx.fillStyle=color.white;ctx.fillText(lang.SENSITIVITY,180,this.h-110);ctx.fillText(lang.MODE,457,this.h-110);ctx.setShadow(null);ctx.fillStyle="#161718";ctx.roundRect(70,10,420,200,14);ctx.fill();ctx.stroke();ctx.fillStyle="#7F81FF";
ctx.fillText(lang.FIXED,this.AFS_CLEAR_FIXED.x+44,40);ctx.fillStyle=color.afsLive;ctx.fillText(lang.LIVE,this.AFS_CLEAR_LIVE.x+45,40);var a=-16;drawImage(res.AFS2LOGO,this.AFS_CLEAR_ALL.x+30,40+a);ctx.font="14pt open_sans_condensedbold";ctx.fillStyle="#D8D8D8";ctx.fillText(lang.FILTER,this.AFS_CLEAR_ALL.x+45,40+a+47);ctx.fillText(lang.DISPLAY,this.AFS_CLEAR_ALL.x+45,40+a+47+24);ctx.font="12pt open_sans_condensedbold";for(var b=selectedStrip.name+"afs.eq.",c=64,d=c,f=0;12>f;f++){var e=getValue(b+f),
a=JSON.parse("["+e+"]"),e=a[3],g=a[0]+.1|0,h=a[1],l=bound(a[2],-24,0);if(!(0==e||.001>Math.abs(l))){l=(10*l|0)/10+"";0>l.indexOf(".")&&(l+=".0");var h=h|0,m=1==e?this.AFS_CLEAR_FIXED.x+24:this.AFS_CLEAR_LIVE.x+24;ctx.textAlign="right";ctx.fillStyle=1==e?"#7F81FF":color.afsLive;a=1==e?c:d;ctx.fillText(g+"",m,a);ctx.fillText(l+"dB",m+80,a);ctx.globalAlpha=.6;ctx.textAlign="center";ctx.fillText("q"+h,m+20,a);ctx.globalAlpha=1;1==e?c+=17:d+=17}}}}),EQSlider=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="EQ_SLIDER";this.needMoveEvt=!0;this.lastClickTime=0;this.background=color.eqBg;this.w=50;this.h=260;this.minValue=0;this.maxValue=1;this.oldValue=this.value=0;this.defaultValue=-1;this.fader=res.eqVFaderGray;this.faderCenterY=14;this.faderH=this.fader.h()-this.faderCenterY;this.faderW=this.fader.w();this.faderX=10;this.fadd=20;this.textBot=this.textUp="";this.bigMark=-1;this.keyPart=null;this.dbMarks=this.slide=!1;this.mV=[1,.9,.8,.7,.6,.5,.4,.3,.2,.1,0];this.smV=[];
this.moved=!1;this.aclr="#fff";this.disabled=this.rightArrow=this.leftArrow=!1},contains:function(a,b,c){if(!this.enabled||!this.visible)return!1;if(c)return this.x<=a&&this.x+this.w>a&&this.y<=b&&this.y+this.h>b;c=this.x;var d=this.y+(this.h-this.faderH)*(1-this.getVal()),d=d|0;return c<=a&&c+this.w>a&&d-10<=b&&d+this.faderH+10>b},setFader:function(a,b){this.fader=a;this.faderCenterY=b;this.faderH=this.fader.h()-this.faderCenterY;this.faderW=this.fader.w()},setDefaultValue:function(a,b){isDefined(b)||
(b=!0);null!=a&&0<=a?(this.defaultValue=bound(a,0,1),this.bigMark=b?this.defaultValue:-1):this.bigMark=this.defaultValue=-1},setValue:function(a){a=bound(a,0,1);this.setVal(a);this.valueFunc(a);regUpdate(this)},onDown:function(a,b){if(!this.disabled){this.pressPoint=[a,b];this.moved=!1;var c=this.globalX()+10,d=this.globalY()+(this.h-this.faderH)*(1-this.getVal()),d=d|0;if(this.slide=c-10<=a&&c+this.faderW+10>=a&&d-10<=b&&d+this.faderH+10>=b)this.oldValue=this.getVal(),this.onFocus()}},onMove:function(a,
b){if(this.slide){var c=b-this.pressPoint[1];5<Math.abs(c)&&(this.moved=!0);c=bound(this.oldValue-c/(this.h-this.faderH),this.minValue,this.maxValue);this.innerSet(c)}},innerSet:function(a){this.setVal(a);this.onValueChange(a);this.valueFunc(a);regUpdate(this)},onUp:function(){this.oldValue=0;this.pressPoint=[-1,-1];this.slide=!1;var a=Date.now();if(a-this.lastClickTime<DBL_CLK_TIME)this.onDouble();this.moved||(this.lastClickTime=a)},onWheel:function(a){if(!this.disabled){var b=this.getVal(),b=bound(b+
a/120/30,0,1);this.setVal(b);this.onValueChange();this.valueFunc(b);regUpdate(this.parent)}},onDouble:function(){0>this.defaultValue||(this.setVal(this.defaultValue),this.onValueChange(),this.valueFunc(this.defaultValue),regUpdate(this.parent))},onValueChange:function(){},onFocus:function(){},valueFunc:function(a){},getState:function(){},paint:function(){this.getState();ctx.fillStyle=this.background;ctx.fillRect(0,0,this.w,this.h+10);this.disabled&&(ctx.globalAlpha=.15);ctx.beginPath();ctx.lineWidth=
5;ctx.lineCap="round";var a=this.w/2|0;this.disabled||(ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.beginPath(),ctx.moveTo(a+.5,4.6),ctx.lineTo(a+.5,this.h-8+.5),ctx.stroke());ctx.strokeStyle=color.black;ctx.beginPath();ctx.moveTo(a,4);ctx.lineTo(a,this.h-8);ctx.stroke();this.drawMarks();a=(this.h-this.faderH)*(1-this.getVal());drawImage(this.fader,this.faderX,a|0);a=a+20+this.faderCenterY;this.rightArrow&&(ctx.fillStyle=this.aclr,ctx.fillTriangle2(this.w,a-10,this.w-8,a,this.w,a+10));this.leftArrow&&
(ctx.fillStyle=this.aclr,ctx.fillTriangle2(0,a-10,8,a,0,a+10))},drawMarks:function(){var a=this.h-this.faderH,b=this.fadd+this.faderCenterY,c=this.w/2;if(this.dbMarks){for(var c=[1,.8945,.634,.52941,.3752,.18,.0567,0],d=0;d<c.length;d++){var f=a*(1-c[d])+b,f=f|0;ctx.fillStyle="rgba(0,0,0,0.6)";ctx.fillRect(0,f,18,1);ctx.fillRect(32,f,18,1);ctx.fillStyle="rgba(255,255,255,0.2)";ctx.fillRect(0,f+1,18,1);ctx.fillRect(32,f+1,18,1)}f=a*(1-zeroDbPos)+b;ctx.fillStyle="#939394";ctx.fillRect(0,f,18,3);ctx.fillRect(32,
f,18,3)}else{for(d=0;d<this.mV.length;d++)f=a*(1-this.mV[d])+b,f|=0,ctx.fillStyle="rgba(0,0,0,0.6)",ctx.fillRect(c+6,f,18,1),ctx.fillRect(c-6,f,-18,1),ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(c-6,f+1,-18,1),ctx.fillRect(c+6,f+1,18,1);for(d=0;d<this.smV.length;d++)f=a*(1-this.smV[d])+b,f|=0,ctx.fillStyle="rgba(0,0,0,0.6)",ctx.fillRect(6,f,12,1),ctx.fillRect(32,f,12,1),ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(6,f+1,12,1),ctx.fillRect(32,f+1,12,1);0<this.bigMark&&(f=a*(1-this.bigMark)+
b,f|=0,ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(0,f,18,3),ctx.fillRect(32,f,18,3))}ctx.font=font.eqSlText;ctx.textAlign="center";0<this.textUp.length&&(ctx.fillStyle=this.background,ctx.fillRect(0,-35,this.w,20),ctx.fillStyle="#000",ctx.fillText(this.textUp,this.w/2+1,-19),ctx.fillStyle=color.tabText,ctx.fillText(this.textUp,this.w/2,-20));if(0<this.textBot.length)for(a=this.textBot.split(" "),d=0;d<a.length;d++)ctx.fillStyle=this.background,ctx.fillRect(-4,this.h+8+16*d,this.w+8,16),ctx.fillStyle=
"#000",ctx.fillText(a[d],this.w/2+1,this.h+23+16*d+1,this.w+6),ctx.fillStyle=color.tabText,ctx.fillText(a[d],this.w/2,this.h+23+16*d,this.w+6)}}),EQHSlider2=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQHSlider2";this.needMoveEvt=!0;this.lastClickTime=0;this.w=300;this.h=56;this.laneY=25;this.faderY=9;this.defaultValue=this.oldValue=this.value=0;this.fader=res.eqHFaderGray;this.faderW=this.fader.w();this.faderH=this.fader.h();this.faderCX=36;this.keyPart=null;this.bg=
color.eqBg;this.haveMarks=this.disableWheel=!1;this.marksArr=[0,.25,.5,.75,1]},setDefaultValue:function(a){this.defaultValue=bound(a,0,1)},setValue:function(a){this.setVal(bound(a,0,1));regUpdate(this)},innerSet:function(a){this.setVal(a);this.value=a;this.onValueChange();this.valueFunc(a);regUpdate(this)},onDown:function(a,b){this.pressPoint=[a,b];var c=this.globalX()+(this.w-this.faderW)*this.getVal(),d=this.globalY()+9,c=c|0;if(this.slide=c-10<=a&&c+this.faderW+10>=a&&d-10<=b&&d+this.faderH+10>=
b)this.oldValue=this.getVal(),this.onFocus()},onMove:function(a,b){if(this.slide){var c=bound(this.oldValue+(a-this.pressPoint[0])/(this.w-this.faderW),0,1);this.innerSet(c)}},onUp:function(){this.oldValue=this.value;this.pressPoint=[-1,-1];this.slide=!1;if(!(0>this.defaultValue)){var a=Date.now();a-this.lastClickTime<DBL_CLK_TIME&&(this.setVal(this.defaultValue),this.onValueChange(),this.valueFunc(),regUpdate(this.parent));this.lastClickTime=a}},onWheel:function(a){if(!this.disableWheel){var b=this.getVal(),
b=bound(b+a/120/30,0,1);this.setVal(b);this.onValueChange();this.valueFunc(b);regUpdate(this.parent)}},onValueChange:function(){},onFocus:function(){},valueFunc:function(){},getState:function(){this.value=this.getVal()},paint:function(){this.getState();ctx.fillStyle=this.bg;ctx.fillRect(0,0,this.w,this.h);if(this.haveMarks){ctx.lineWidth=1;ctx.strokeStyle="rgba(0,0,0,0.35)";ctx.beginPath();for(var a=0;a<this.marksArr.length;a++){var b=this.faderCX+(this.w-this.faderW)*this.marksArr[a]|0;ctx.moveTo(b+
.5,3);ctx.lineTo(b+.5,12);ctx.moveTo(b+.5,this.h-3-9);ctx.lineTo(b+.5,this.h-3)}ctx.stroke();ctx.beginPath();ctx.strokeStyle="rgba(255,255,255,0.25)";for(a=0;a<this.marksArr.length;a++)b=this.faderCX+(this.w-this.faderW)*this.marksArr[a]|0,ctx.moveTo(b-.5,3),ctx.lineTo(b-.5,12),ctx.moveTo(b-.5,this.h-3-9),ctx.lineTo(b-.5,this.h-3);ctx.stroke()}ctx.lineWidth=5;ctx.lineCap="round";a=this.w-4;this.disabled||(ctx.strokeStyle="#AAA",ctx.beginPath(),ctx.moveTo(4.5,this.laneY+.5),ctx.lineTo(a+.5,this.laneY+
.5),ctx.stroke());ctx.strokeStyle=color.black;ctx.beginPath();ctx.moveTo(4,this.laneY);ctx.lineTo(a,this.laneY);ctx.stroke();drawImage(this.fader,(this.w-this.faderW)*this.value|0,this.faderY)}}),EQButton=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="TabButton";this.w=70;this.h=30;this.mode=this.state=0;this.color=color.purple;this.img1=this.img0=this.text=null;this.needBG=!0;this.invertedValue=this.longClickMark=!1;this.holdTimer=null},setImages:function(a,b){this.img0=
a;this.img1=b;this.w=this.img0.w();this.h=this.img0.h()},onDown:function(){0==this.state&&(this.state=1,"undefined"!=typeof this.parent.setMode&&this.parent.setMode(this.mode));var a=this;this.holdTimer=setTimeout(function(){a.onHold()},HOLD_TIME);this.valueFunc();regUpdate(this.parent)},onUp:function(){clearTimeout(this.holdTimer)},onHold:function(){},getState:function(){"undefined"!=typeof this.parent.mode&&(this.state=this.parent.mode==this.mode?1:0)},valueFunc:function(){},paint:function(){this.needBG&&
(ctx.fillStyle=color.bg,ctx.fillRect(0,0,this.w,this.h));this.getState();0==this.state?null!=this.img0?drawImage(this.img0,0,0):(ctx.strokeStyle=color.tabStroke,ctx.strokeRect(.5,.5,this.w-1,this.h-2),ctx.font=font.tabText,ctx.fillStyle=color.tabText,ctx.textAlign="center",ctx.setShadow(color.shadow,3,1,1),ctx.fillText(this.text,this.w/2|0,22,this.w)):null!=this.img1?drawImage(this.img1,0,0):(ctx.fillStyle=this.color,ctx.fillRect(0,0,this.w,this.h),ctx.font=font.tabText,ctx.fillStyle=color.tabTextSel,
ctx.textAlign="center",ctx.setShadow(color.shadow,3,1,1),ctx.fillText(this.text,this.w/2|0,22,this.w));if(this.text){var a={align:"center",valign:"middle",color:this.state?"#eee":"#222",shadow:["#bbb",0,1,1],font:"15px open_sans_condensedbold"};this.state&&(a.shadow[0]="#333");ctx.drawText(this.text,this.w/2|0,this.h/2|0,a)}if(this.longClickMark){a=4;if(this.invertedValue&&!this.state||!this.invertedValue&&this.state)a+=1;ctx.fillStyle=color.longClickMark2;ctx.fillCircle(this.w-6,a+1,3);ctx.fillStyle=
color.longClickMark;ctx.fillCircle(this.w-6,a+1,2)}}}),STEREOSEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="STEREOSEL";this.w=120;this.h=30;this.color=color.purple;this.stereo=!1;this.indicatorMode=this.left=this.link=!0},onDown:function(a){if(this.visible&&!this.indicatorMode){a-=this.globalX();var b=this.parent;!this.link&&(80<a||40>a)&&(this.left=!this.left,b.pages[b.mode].setLeft&&b.pages[b.mode].setLeft(this.left));40<a&&80>a&&(this.link=!this.link,this.left=
!0,b.pages[b.mode].setLinked&&b.pages[b.mode].setLinked(this.link));regUpdate(this)}},getState:function(){var a=this.parent;this.indicatorMode=!0;switch(selectedStrip.type){case E_STRIP_TYPE.MASTER:switch(a.mode){case a.E_MODE.eqm:case a.E_MODE.dyn:case a.E_MODE.misc:this.indicatorMode=!1}break;case E_STRIP_TYPE.SUB:switch(a.mode){case a.E_MODE.misc:this.indicatorMode=!1}}a.mode==a.E_MODE.misc?(this.link=!1,this.left=a.pages[a.E_MODE.misc].left):a.mode==a.E_MODE.eqm?(this.link=getValue("m.eq.linked"),
this.left=a.pages[a.E_MODE.eqm].left):a.mode==a.E_MODE.dyn&&(this.link=getValue("m.dyn.linked"),this.left=a.pages[a.E_MODE.dyn].left)},paint:function(){this.getState();this.color=editWidget.buttons[editWidget.mode].color;ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.strokeStyle="rgba(200,200,200,0.1)";ctx.lineWidth=1;var a=!1,b=!1;this.indicatorMode&&(this.link=!0);this.link?(ctx.strokeStyle="#fff",a=b=!0):(ctx.strokeStyle="#888",this.left?a=!0:b=!0);ctx.lineWidth=2;ctx.beginPath();
ctx.arc(55,15,10,0,2*Math.PI);ctx.stroke();ctx.beginPath();ctx.arc(65,15,10,0,2*Math.PI);ctx.stroke();ctx.beginPath();this.indicatorMode||(ctx.fillStyle=a?this.color:"#444",ctx.fillRect(0,0,40,this.h),ctx.fillStyle=b?this.color:"#444",ctx.fillRect(80,0,40,this.h));ctx.font=font.settingsLabel;ctx.fillStyle=color.tabTextSel;ctx.textAlign="center";ctx.setShadow(color.black,3,1,1);ctx.fillText(lang.L,20,21);ctx.fillText(lang.R,this.w-20,21);ctx.shadowColor="transparent"}});
function VtoRATIO(a){return 1/a}function desqr(a){return 1-(1-a)*(1-a)}function idesqr(a){return 1-Math.sqrt(Math.abs(1-a))}function VtoATTACK(a){return 1*Math.pow(400,desqr(a))|0}function VtoREL(a){return 10*Math.pow(200,desqr(a))|0}function VtoDYNGAIN(a){return 96*a-72|0}function VtoDYNOUTGAIN(a){return 72*a-24}function VtoDYNGATE(a){return precision(-90+96*a,1)}function VtoTHRESH(a){return precision(-90+96*a,1)}function RATIOtoV(a){return 1E-4>a?1:bound(1/a,0,1)}
function modVu(a,b){if(.001>b||.001>a)return 0;var c=a+.09047801706317746*(-8.22581937262139+Math.log(Math.exp(b*(23.90844819639692+b*(-26.23877598214595+(12.195249692570245-.4878099877028098*b)*b)))*(.055>b?Math.sin(28.559933214452666*b):1)));0>c?c=0:2<c&&(c=2);return c}
var AUXSendsPage=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="AUXSendsPage";this.mode=-1;this.y=measures.topWidgetHeight;this.enabled=!1;this.auxNum=curSetup.aux;this.buttons=[];this.color=color.AUX;this.bww=6<curSetup.aux?92:111;this.initWidgets();this.setMode(0)},setOffset:function(a){this.page.enabled&&this.page.setOffset(a);this.page2&&this.page2.enabled&&this.page2.setOffset(a)},syncOffset:function(){HAVE_MATRIX&&this.page2&&this.page2.enabled?bottomWidget.setOffset2(this.page2.offsetX):
bottomWidget.setOffset2(this.page.offsetX)},setVU:function(a,b){1<=b&&this.page.strips[a].clip.clip();this.page.strips[a].vu.setValue(b)},onShow:function(){this.page.arrangeStrips();bottomWidget.setOffset2(this.page.offsetX);for(var a=0;a<this.buttons.length;a++)this.buttons[a].getState();this.upd()},upd:function(){this.setMode(this.mode,!0)},setMode:function(a,b){if(!(this.mode==a&&!b||0>a||a>=curSetup.aux||hideHPAUX&&a>curSetup.aux-3)){this.mode=a;auxoutWidget.setAux(a);if(HAVE_MATRIX&&auxStrips[this.mode].getNameValue("matrix")){this.page.hide();
this.page2.show();this.page2.auxID=a;for(var c=0;c<mtxSendStrips.length;c++)mtxSendStrips[c].setMode(a);this.page2.arrangeStrips()}else{this.page.show();HAVE_MATRIX&&this.page2.hide();this.page.auxID=a;for(c=0;c<this.page.strips.length;c++)this.page.strips[c].setMode(a);this.page.arrangeStrips();HAVE_MATRIX&&this.page2.arrangeStrips()}bottomWidget.upd();this.syncOffset();bottomWidget.update();regUpdate(this)}},nextMode:function(){this.mode==this.buttons.length-1||hideHPAUX&&this.mode==this.buttons.length-
3?this.setMode(0):this.setMode(this.mode+1)},initWidgets:function(){this.page=new AUXMixer(this,0);HAVE_MATRIX&&(this.page2=new MTXMixer(this,0));for(var a=0;a<auxStrips.length;a++){var b=new TabButton(this);b.textColor=b.color=this.color;b.mode=a;b.text="NULL";b.setSize(this.bww,30);b.getState=function(){this.mode>curSetup.aux-3&&(this.dsbld=hideHPAUX);var a=auxStrips[this.mode],b=a.getNameValue("matrix")||0;HAVE_MATRIX||(b=!1);a=a.getName();60>this.w&&(a=b?lang.MTX+" "+(this.mode+1):lang.AUX+" "+
(this.mode+1));this.text=a.truncate(12);this.cosmetic=!1;this.state=this.parent.mode==this.mode?1:0;this.textColor=this.color=b?color.MATRIX:color.AUX;b=auxStrips[this.parent.mode].getNameValue("stereoIndex");0==b&&this.parent.mode+1==this.mode&&(this.cosmetic=!0,this.state=1);1==b&&this.parent.mode-1==this.mode&&(this.cosmetic=!0,this.state=1)};this.buttons.push(b)}},calcGeometry:function(){this.w=screenWidth-this.x;masterWidget.enabled&&(this.w-=masterWidget.w);auxoutWidget.enabled&&(this.w-=masterWidget.w);
slideOutWidget.enabled&&(this.w-=slideOutWidget.w);this.h=screenHeight-this.y-bottomWidget.h;var a=92;770>this.w&&6<this.buttons.length&&(a=81);16==this.buttons.length&&(a=Math.floor(this.w/this.buttons.length)-1);this.buttons.length*a>this.w&&(a=this.w/this.buttons.length-1|0);for(var b=0;b<this.buttons.length;b++)this.buttons[b].w=a,this.buttons[b].setPos(this.w-(this.buttons[b].w+1)*(this.buttons.length-b),5)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);var a=auxStrips[this.mode].getNameValue("matrix")||
0;ctx.fillStyle=a?color.MATRIX:color.AUX;ctx.fillRect(0,35,this.w,4)}}),AUXMixer=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="AUX_MIXER";this.y=40;this.needClip=!0;this.color=color.AUX;this.auxID=c;this.strips=[];this.regKey("settings.auxmutelink");this.createStrips()},arrangeStrips:function(){for(var a=0;a<this.strips.length;a++);},createStrips:function(){for(var a=curSetup.input,b=curSetup.fx,c=curSetup.linein,d=0,f="aux."+this.auxID+".",e=0;e<a;e++){var g="i."+
e+".",h=inStrips[e],g=new AUXStrip(this,h.id,g,f);0==e&&(g.firstInGroup=!0);e==a-1&&(g.lastInGroup=!0);g.id=inStrips[e].id;g.color=this.color;g.text=inStrips[e].text;g.st=h;this.strips.push(g);auxSendStrips.push(g);inStrips[e].AUXS.push(g);d++}for(e=0;e<c;e++)g="l."+e+".",h=lineinStrips[e],g=new AUXStrip(this,h.id,g,f),0==e&&(g.firstInGroup=!0),e==c-1&&(g.lastInGroup=!0),g.id=h.id,g.color=h.color,g.text=h.text,g.st=h,this.strips.push(g),auxSendStrips.push(g),h.AUXS.push(g),d++;h=mediaStrips[0];g=
new AUXStrip(this,h.id,"p.0.",f);g.firstInGroup=!0;g.id=mediaStrips[0].id;g.color=color.media;g.sl.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[0].text;g.st=h;this.strips.push(g);mediaStrips[0].AUXS.push(g);auxSendStrips.push(g);d++;h=mediaStrips[1];g=new AUXStrip(this,h.id,"p.1.",f);g.lastInGroup=!0;g.id=mediaStrips[1].id;g.color=color.media;g.sl.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[1].text;g.st=h;this.strips.push(g);mediaStrips[1].AUXS.push(g);auxSendStrips.push(g);
d++;for(e=0;e<b;e++)g="f."+e+".",h=fxStrips[e],g=new AUXStrip(this,h.id,g,f),0==e&&(g.firstInGroup=!0),e==b-1&&(g.lastInGroup=!0),g.id=fxStrips[e].id,g.color=color.blue,g.sl.color=color.blue,g.sl.fader=res.blueFader,g.text=fxStrips[e].text,g.st=h,this.strips.push(g),fxStrips[e].AUXS.push(g),auxSendStrips.push(g),d++},setOffset:function(a){this.offsetX=a;0>this.offsetX&&(this.offsetX=0);a=this.strips.length*measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&(this.offsetX=a);this.offsetXold=
this.offsetX;regUpdate(this)},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;var a=this.strips.length*measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&this.setOffset(this.offsetX)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h)}}),AUX_EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CH_AUX_PAGE";this.y=40;this.color=color.AUX;this.needClip=this.needMoveEvt=!0;this.mode=0;this.SLIDERS=[];this.LEDS=
[];this.MUTES=[];this.POSTS=[];this.PROCS=[];this.VUS=[];this.CLIPS=[];this.maxX=600;this.initWidgets();this.setMode(0);this.onShow()},setMode:function(a){this.mode=a;regUpdate(this)},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b];this.ppx=this.offsetX+a},onMove:function(a,b,c){2<mouseTargets.length||isDefined(tHash[c])&&2<tHash[c].length||this.setOffset(this.ppx-a)},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-
this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},setOffset:function(a){this.offsetX=bound(a|0,0,this.maxX);regUpdate(this)},onShow:function(){this.syncSliders()},syncSliders:function(){if(null!=selectedStrip){switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.FX:this.keyPrefix=
selectedStrip.name+"aux.";for(var a=0;a<this.SLIDERS.length;a++){var b=selectedStrip.name+"aux."+a+".";this.SLIDERS[a].setKey(b+"value");this.SLIDERS[a].bigMark=-1;this.LEDS[a].setKey(b+"value");this.MUTES[a].setKey(b+"mute");this.MUTES[a].img0=res.bMuteOff;this.MUTES[a].kp=b;this.MUTES[a].st=selectedStrip;this.MUTES[a].getState=function(){if(1==auxStrips[this.mode].getNameValue("matrix"))this.state=0,this.disabled=!0;else{this.state=getValue(this.kp+"mute");var a=getValue("settings.auxmutelink"),
b=getValue(this.kp+"post");this.disabled=!1;(a||b)&&this.st.getMuteState()&&(this.state=1,this.disabled=!0)}};this.MUTES[a].onToggle=function(){};this.MUTES[a].onToggleUp=function(){};this.MUTES[a].onToggleDown=function(){};this.POSTS[a].show();this.POSTS[a].setKey(b+"post");this.PROCS[a]&&(this.PROCS[a].show(),this.PROCS[a].setKey(b+"postproc"));this.VUS[a].hide();this.CLIPS[a].hide();this.SLIDERS[a].setFader(res.gainFader,13);this.SLIDERS[a].background=color.eqBg}break;case E_STRIP_TYPE.MASTER:for(a=
0;a<this.SLIDERS.length;a++)this.keyPrefix="a."+a,b=auxStrips[a],this.SLIDERS[a].setKey(this.keyPrefix+".mix"),this.SLIDERS[a].bigMark=zeroDbPos,this.LEDS[a].setKey(this.keyPrefix+".mix"),this.MUTES[a].setKey(this.keyPrefix+".mute"),this.MUTES[a].kkk=this.keyPrefix,this.MUTES[a].st=b,this.MUTES[a].getState=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&(this.state=this.st.getMuteState(),this.img0=this.st.getNameValue("forceunmute")?res.bMuteOff_F:res.bMuteOff)},this.MUTES[a].onToggle=function(){selectedStrip.type==
E_STRIP_TYPE.MASTER&&checkMutes()},this.MUTES[a].onToggleUp=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,a=checkBit(a,MUTEALL_BIT_IDX),f=!1;if(IS_UI_24&&this.type==E_STRIP_TYPE.IN){var e=this.st.getNameValue("vca");vcaStrips[e]&&(f=vcaStrips[e].getMuteState())}b||a||f||this.st.setNameValue("mute",1);this.st.setNameValue("forceunmute",0)}},this.MUTES[a].onToggleDown=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&(this.st.getMuteState(!0,
!0)?this.st.setNameValue("forceunmute",1):this.st.setNameValue("mute",0))},this.POSTS[a].hide(),this.VUS[a].show(),this.CLIPS[a].show(),this.PROCS[a]&&this.PROCS[a].hide(),this.SLIDERS[a].setFader(res.auxFader,13),this.SLIDERS[a].background=color.eqBg}this.calcGeometry()}},initWidgets:function(){this.regKey("settings.auxmutelink");for(var a=this,b=0;b<auxStrips.length;b++){var c=new AUX_LED(this);c.mode=b;c.getState=function(){this.dsbld=1==auxStrips[this.mode].getNameValue("matrix")};this.LEDS.push(c);
c=new CheckBox(this);c.setImages(res.bMuteOff,res.bMuteOn);c.mode=b;c.getState=function(){this.disabled=1==auxStrips[this.mode].getNameValue("matrix");selectedStrip.type==E_STRIP_TYPE.MASTER&&(this.disabled=!1)};this.MUTES.push(c);c=new VUMeter(this);c.calcGeometry=function(){};this.VUS.push(c);c=new ClipBulb(this);this.CLIPS.push(c);c=new EQSlider(this);c.fader=res.eqVFaderGray;c.dbMarks=!0;c.mode=b;c.aclr=color.AUX;c.onFocus=function(){a.setMode(this.mode)};c.onValueChange=function(){regUpdate(a.LEDS[this.mode])};
c.getState=function(){var a=1==auxStrips[this.mode].getNameValue("matrix");selectedStrip.type==E_STRIP_TYPE.MASTER?(this.disabled=!1,this.fader=a?res.mtxFader:res.auxFader):(this.disabled=a,this.fader=res.auxFader);switch(auxStrips[this.mode].getNameValue("stereoIndex")){case 0:this.leftArrow=!1;this.rightArrow=!0;break;case 1:this.rightArrow=!1;this.leftArrow=!0;break;default:this.rightArrow=this.leftArrow=!1}};this.SLIDERS.push(c);c=new CheckBox(this);c.mode=b;c.setImages(res.bPre,res.bPost);c.setSize(70,
30);c.getState=function(){this.disabled=1==auxStrips[this.mode].getNameValue("matrix")};this.POSTS.push(c)}},sync:function(){for(var a=this.SLIDERS.length-2;a<this.SLIDERS.length;a++)this.LEDS[a].dsbld=hideHPAUX,this.SLIDERS[a].disabled=hideHPAUX,this.MUTES[a].disabled=hideHPAUX,this.POSTS[a].disabled=hideHPAUX},calcGeometry:function(){this.w=this.parent.w;this.h=this.parent.h-this.y-5;var a=(this.w-90*this.SLIDERS.length+this.SLIDERS[0].w)/2|0;0>a&&(a=30);for(var b=selectedStrip.type==E_STRIP_TYPE.MASTER,
c=0,d=0;d<this.SLIDERS.length;d++)c=a+90*d,this.LEDS[d].setPos(c-15,38),this.MUTES[d].setPos(c,76),this.SLIDERS[d].setPos(c+(b?10:0),118),this.SLIDERS[d].h=this.h-this.SLIDERS[d].y-(b?50:100),this.POSTS[d].setPos(c,this.h-86),b&&(this.VUS[d].setPos(c-16+(b?10:0),this.SLIDERS[d].y+18),this.VUS[d].setSize(11,this.SLIDERS[d].h-20),this.CLIPS[d].setPos(c-22+(b?10:0),this.SLIDERS[d].y-4));this.maxX=c+70-this.w;0>this.maxX&&(this.maxX=0)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(this.offsetX,
0,this.w,this.h);var a=ctx.createLinearGradient(this.offsetX+0,0,this.offsetX+this.w,0);a.addColorStop(0,"transparent");a.addColorStop(.5,color.AUX);a.addColorStop(1,"transparent");ctx.fillStyle=a;selectedStrip.type==E_STRIP_TYPE.MASTER&&ctx.fillRect(this.offsetX,0,this.w,32);ctx.font="bold 16pt open_sans_condensedbold";ctx.textAlign="center";ctx.setShadow(color.black,4,2,2);if(selectedStrip.type==E_STRIP_TYPE.MASTER)ctx.fillStyle=color.black,ctx.fillText(lang.AUX_MASTER_LEVELS,this.offsetX+Math.floor(this.w/
2+1),24),ctx.fillStyle=color.labelText,ctx.fillText(lang.AUX_MASTER_LEVELS,this.offsetX+Math.floor(this.w/2),23);else{var a=lang.AUX_SENDS_FOR.format(selectedStrip.getName()),b=this.offsetX+Math.floor((this.w-textWidth(a))/2);ctx.textAlign="left";ctx.fillStyle=color.labelText;a=lang.AUX_SENDS_FOR.format("");ctx.fillText(a,b,23);ctx.fillStyle=selectedStrip.color;ctx.fillText(selectedStrip.getName(),b+textWidth(a),23)}40<this.maxX&&(ctx.fillStyle=color.labelText,ctx.fillText(">>",this.offsetX+this.w-
40,23),ctx.fillText("<<",this.offsetX+30,23));ctx.textAlign="center";for(a=0;a<this.POSTS.length;a++){if(0==auxStrips[a].getNameValue("stereoIndex")){ctx.shadowColor="transparent";ctx.fillStyle=color.AUX;var b=this.POSTS[a].x-16,c=this.h-9,d=b+171;ctx.fillRect(b,c,171,3);ctx.fillTriangle2(b,c,b+16-3,c,b,c-16+3);ctx.fillTriangle2(d,c,d-16+3,c,d,c-16+3);c=69;ctx.fillRect(b,c,171,3);ctx.fillTriangle2(b,c,b+16,c,b,c+16);ctx.fillTriangle2(d,c,d-16,c,d,c+16)}ctx.fillStyle="rgb(183,183,183)";hideHPAUX&&
a>=curSetup.aux-2&&(ctx.fillStyle="#555");ctx.setShadow(color.black,4,2,2);auxStrips[a].getNameValue("matrix")?ctx.fillText(lang.MTX+" "+(a+1),this.POSTS[a].x+26,this.h-16):ctx.fillText(lang.AUX+" "+(a+1),this.POSTS[a].x+26,this.h-16)}ctx.shadowColor="transparent"}}),AUX_LED=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="AUX-LED";this.bg=res.auxsLED;this.w=this.bg.w();this.h=this.bg.h();this.dsbld=!1;this.text="...";this.bgColor=PATTERNED?color.black:color.eqBg2},getState:function(){},
paint:function(){this.getState();this.dsbld&&(ctx.globalAlpha=.4);ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);this.bg&&drawImage(this.bg,0,0,this.w,this.h);null!=this.key&&(this.text=VtoDB(getValue(this.key)));ctx.fillStyle=color.ledText;ctx.textAlign="center";ctx.font="16px umixled";ctx.fillText(this.text,this.w/2|0,21);this.dsbld&&(ctx.globalAlpha=1)}}),MTXMixer=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="MTX_MIXER";this.y=40;this.needClip=!0;this.color=
color.MATRIX;this.auxID=c;this.vis=0;this.strips=[];this.createStrips()},onShow:function(){this.maxOffs=this.vis*measures.mixerStripWidth-this.w;0>this.maxOffs&&(this.maxOffs=0);this.offsetX>this.maxOffs&&this.setOffset(this.offsetX)},arrangeStrips:function(){for(var a=0,b=this.vis=0;b<curSetup.aux;b++)auxStrips[b].getNameValue("matrix")?this.strips[b].enabled=!1:this.strips[b].enabled=!0;for(var c=0,b=0;b<mtxSendStrips.length;b++){var d=mtxSendStrips[b];d.enabled&&(c++,d.x=a*measures.mixerStripWidth,
a++)}for(var a=-1,f=null,b=0;b<mtxSendStrips.length;b++)d=mtxSendStrips[b],d.enabled?(a!=d.type?(d.firstInGroup=!0,d.lastInGroup=!1,null!=f&&(f.lastInGroup=!0),a=d.type):(d.firstInGroup=!1,d.lastInGroup=!1),f=d):(d.firstInGroup=!1,d.lastInGroup=!1);null!=f&&(f.lastInGroup=!0);this.realWidth=c*measures.mixerStripWidth;this.vis=c;this.setOffset(this.offsetX)},createStrips:function(){for(var a=curSetup.aux,b=curSetup.sub,c=0,d="mtx."+this.auxID+".",f=0;f<a;f++){var e="a."+f+".",g=auxStrips[f],e=new MTXStrip(this,
c,e,d);0==f&&(e.firstInGroup=!0);f==a-1&&(e.lastInGroup=!0);e.id=g.id;e.type=0;e.color=this.color;e.text=g.text;e.sl.fader=res.auxFader;g.MTX=e;this.strips.push(e);mtxSendStrips.push(e);c++}for(f=0;f<b;f++)e="s."+f+".",g=subStrips[f],e=new MTXStrip(this,c,e,d),0==f&&(e.firstInGroup=!0),f==b-1&&(e.lastInGroup=!0),e.type=1,e.id=g.id,e.stereo=!0,e.color=this.color,e.sl.fader=res.subFader,e.text=g.text,g.MTX=e,this.strips.push(e),mtxSendStrips.push(e),c++;g=masterWidget;e=new MTXStrip(this,c,"m.",d);
e.firstInGroup=!0;e.lastInGroup=!0;e.type=2;e.id=g.id;e.color=this.color;e.sl.fader=res.redFader;e.text=g.text;g.MTX=e;this.strips.push(e);mtxSendStrips.push(e)},setOffset:function(a){this.offsetX==a||a>this.maxOffs||(this.offsetX=a,0>this.offsetX&&(this.offsetX=0),this.offsetX>this.maxOffs&&(this.offsetX=this.maxOffs),this.offsetXold=this.offsetX,regUpdate(this))},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;this.maxOffs=this.vis*measures.mixerStripWidth-this.w;
0>this.maxOffs&&(this.maxOffs=0);this.offsetX>this.maxOffs&&this.setOffset(this.offsetX)},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(this.offsetX,0,this.w,this.h);if(this.vis*measures.mixerStripWidth<this.w)for(var a=this.vis*measures.mixerStripWidth;a<this.w;a+=measures.mixerStripWidth)fillVertPattern(res.blStripTile,this.h,a),drawImage(res.blStripBottom,a,this.h-res.blStripBottom.h()),drawImage(res.blStripTop,a,0)}}),DYNSubPage=Class.create(Widget,{initialize:function($super,b){$super(b);
this.widgetName="DYN_SUBPAGE";this.y=40;this.mode=0;this.master=!1;this.left=!0;this.bypass=!1;this.keyPrefix="";this.prType="dynch";this.timer=null;this.initWidgets()},setMode:function(a){this.mode=a},setLeft:function(a){this.left=a;this.dyn.left=a;this.syncSliders();regUpdate(this)},setLinked:function(a){if(a)for(var b=this.left?"l":"r",c=this.left?"r":"l",d="threshold gain outgain ratio softknee attack hold release".split(" "),f=0;f<d.length;f++)setValue("m.dyn."+c+"."+d[f],getValue("m.dyn."+b+
"."+d[f]));setValue("m.dyn.linked",a?1:0);this.setLeft(!0)},setVU:function(a,b,c){this.vuIN.setValue(a);this.vuOUT.setValue(b);this.vuCOMP.setValue(c)},resetVUs:function(){this.vuIN.reset();this.vuOUT.reset();this.vuCOMP.reset()},onShow:function(){this.resetVUs();var a=selectedChID,b=this;switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:this.prType="dynch";break;case E_STRIP_TYPE.AUX:this.prType="dynaux";break;case E_STRIP_TYPE.MASTER:this.prType=
"dynm"}clearInterval(this.timer);this.timer=setInterval(function(){b.enabled&&a==selectedChID&&sendMessage("DYN^"+a)},1E3);this.syncSliders()},onHide:function(){clearInterval(this.timer)},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<
DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},syncSliders:function(){this.enabled&&null!=selectedStrip&&(this.bBYPASS.setKeyPrefix(selectedStrip.name+"dyn."),this.keyPrefix=selectedStrip.name+"dyn.",selectedStrip.type==E_STRIP_TYPE.MASTER&&(this.keyPrefix+=this.left?"l.":"r."),this.led_tre.setKeyPrefix(this.keyPrefix),this.led_gate.setKey(selectedStrip.name+"gate.thresh"),this.led_ratio.setKeyPrefix(this.keyPrefix),
this.led_attack.setKeyPrefix(this.keyPrefix),this.led_release.setKeyPrefix(this.keyPrefix),this.led_gain.setKeyPrefix(this.keyPrefix),this.slTRE.setKeyPrefix(this.keyPrefix),this.slGATE.setKey(selectedStrip.name+"gate.thresh"),this.slRATIO.setKeyPrefix(this.keyPrefix),this.slATTACK.setKeyPrefix(this.keyPrefix),this.slGAIN.setKeyPrefix(this.keyPrefix),this.slRELEASE.setKeyPrefix(this.keyPrefix),this.bSOFTKNEE.setKeyPrefix(this.keyPrefix),this.mode=getValue(this.keyPrefix+"softknee")|0)},doReset:function(){resetDyn(selectedChID,
!HAVE_GATE);regUpdate(this)},initWidgets:function(){this.preset=new MENUBUTTON(this);this.preset.setSize(130,29);this.preset.setAnchors(null,10,10,null);this.preset.text=lang.PRESETS;this.preset.color=color.green;this.preset.onPress=function(){a.showPresets()};this.dyn=new DYN_GRAPH(this);this.dyn.setPos(40,32);this.vuIN=new DYNVU(this);this.vuIN.setPos(0,30);this.vuIN.needGate=!0;this.vuOUT=new DYNVU(this);this.vuOUT.setPos(0,30);this.vuCOMP=new DYNVU(this);this.vuCOMP.setPos(0,30);this.vuCOMP.invert=
!0;var a=this,b=this.dyn;this.slTRE=new EQHSlider2(this);this.slTRE.keyPart="threshold";this.slTRE.defaultValue=-1;this.slTRE.setPos(16,600);this.slTRE.valueFunc=function(c){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),c);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(b);regUpdate(a.vuIN);regUpdate(a.led_tre)};this.slTRE.onFocus=function(){1!=b.idx&&(b.idx=1);regUpdate(b);regUpdate(a.led)};this.led_tre=new FXLEDPlain(this);this.led_tre.keyPart=
"threshold";this.led_tre.label=lang.THRESHOLD;this.led_tre.sign="dB";this.led_tre.formatValue=function(a){a=VtoTHRESH(a)+"";-1==a.indexOf(".")&&(a+=".0");return a};this.led_gate=new FXLEDPlain(this);this.led_gate.w=60;this.led_gate.label=lang.GATE;this.led_gate.sign="dB";this.led_gate.formatValue=function(a){a=VtoDYNGATE(a);-89>a&&(a="-inf");return a+""};this.slGATE=new EQSlider(this);this.slGATE.fader=res.eqVFaderGreen;this.slGATE.setPos(500,60);this.slGATE.textBot=lang.GATE;this.slGATE.mV=[1,.7827,
.5239,.2556,0];this.slGATE.valueFunc=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);a.vuIN.gateValue=b;selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.vuIN);regUpdate(a.led_gate);regUpdate(a.dyn)};HAVE_GATE&&(this.led_gate.hide(),this.slGATE.hide());this.led_ratio=new FXLEDPlain(this);this.led_ratio.w=60;this.led_ratio.keyPart="ratio";this.led_ratio.label=lang.RATIO;this.led_ratio.sign="";this.led_ratio.formatValue=
function(a){a=VtoRATIO(a);return a=60<a?"inf":2>a?precision(a,2)+"":precision(a,1)+""};this.slRATIO=new EQSlider(this);this.slRATIO.keyPart="ratio";this.slRATIO.setPos(570,60);this.slRATIO.fader=res.eqVFaderYellow;this.slRATIO.mV=[1,1/1.2,.625,.5,1/3,.2,.1,0];this.slRATIO.textBot=lang.RATIO;this.slRATIO.valueFunc=function(c){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),c);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(b);regUpdate(a.led_ratio)};
this.slRATIO.onFocus=function(){2!=b.idx&&(b.idx=2);regUpdate(b)};this.led_attack=new FXLEDPlain(this);this.led_attack.w=60;this.led_attack.keyPart="attack";this.led_attack.label=lang.ATTACK;this.led_attack.sign="ms";this.led_attack.formatValue=VtoATTACK;this.slATTACK=new EQSlider(this);this.slATTACK.keyPart="attack";this.slATTACK.setPos(640,60);this.slATTACK.textBot=lang.ATTACK;this.slATTACK.mV=[1,findV(VtoATTACK,300),findV(VtoATTACK,200),findV(VtoATTACK,100),findV(VtoATTACK,20),0];this.slATTACK.valueFunc=
function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_attack);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_release=new FXLEDPlain(this);this.led_release.w=60;this.led_release.keyPart="release";this.led_release.label=lang.RELEASE;this.led_release.sign="ms";this.led_release.formatValue=VtoREL;this.slRELEASE=new EQSlider(this);this.slRELEASE.keyPart="release";this.slRELEASE.setPos(780,60);this.slRELEASE.textBot=
lang.RELEASE;this.slRELEASE.mV=[1,.7668,.6397,.4896,.25,0];this.slRELEASE.valueFunc=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_release);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_gain=new FXLEDPlain(this);this.led_gain.w=60;this.led_gain.keyPart="outgain";this.led_gain.label=lang.GAIN;this.led_gain.sign="dB";this.led_gain.formatValue=function(a){return precision(VtoDYNOUTGAIN(a),
1)};this.slGAIN=new EQSlider(this);this.slGAIN.fader=res.eqVFaderRed;this.slGAIN.keyPart="outgain";this.slGAIN.setPos(710,60);this.slGAIN.textBot=lang.GAIN;this.slGAIN.setDefaultValue(findV(VtoDYNOUTGAIN,0));this.slGAIN.mV=[1,findV(VtoDYNOUTGAIN,36),findV(VtoDYNOUTGAIN,24),findV(VtoDYNOUTGAIN,12),findV(VtoDYNOUTGAIN,-12),0];this.slGAIN.valueFunc=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_gain);selectedStrip.setNameValue("dyn.prmod",
1);regUpdate(a.dyn)};this.bBYPASS=new CheckBox(this);this.bBYPASS.keyPart="bypass";this.bBYPASS.setPos(40,350);this.bBYPASS.setSize(70,30);this.bBYPASS.setImages(res.bBYPASS_OFF,res.bBYPASS_ON);this.bBYPASS.onToggleUp=function(){regUpdate(a)};this.bBYPASS.onToggleDown=function(){regUpdate(a)};this.bRESET=new Button(this);this.bRESET.setPos(40,350);this.bRESET.setSize(70,30);this.bRESET.setImages(res.bRESET_OFF,res.bRESET_ON);this.bRESET.valueFunc=function(){a.doReset()};this.bSOFTKNEE=new CheckBox(this);
this.bSOFTKNEE.setPos(40,350);this.bSOFTKNEE.keyPart="softknee";this.bSOFTKNEE.setSize(70,30);this.bSOFTKNEE.setImages(res.bHARDKNEE_OFF,res.bSOFTKNEE_ON);this.bSOFTKNEE.valueFunc=function(a){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),a);selectedStrip.setNameValue("dyn.prmod",1)};this.syncSliders()},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5;this.dyn.setSize(this.w-this.dyn.x-416,this.h-this.dyn.y-
86);this.vuCOMP.x=this.w-356;this.vuOUT.x=this.w-380;this.vuIN.x=this.w-404;this.vuIN.h=this.vuOUT.h=this.vuCOMP.h=this.h-this.vuIN.y-86;var a=this.h-47;this.led_tre.setPos(this.w-406,a-6);this.bSOFTKNEE.setPos(this.w-316,a);this.bRESET.setPos(this.w-202,a);this.bBYPASS.setPos(this.w-90,a);a=HAVE_GATE?83:66;this.led_gate.x=this.w-(68+4*a)-4;this.led_ratio.x=this.w-(68+3*a)-4;this.led_attack.x=this.w-(68+2*a)-4;this.led_release.x=this.w-(68+1*a)-4;this.led_gain.x=this.w-(68+0*a)-4;this.led_gate.y=
this.led_ratio.y=this.led_attack.y=this.led_release.y=this.led_gain.y=46;this.slGAIN.x=this.w-(68+0*a);this.slRELEASE.x=this.w-(68+1*a);this.slATTACK.x=this.w-(68+2*a);this.slRATIO.x=this.w-(68+3*a);this.slGATE.x=this.w-(68+4*a);this.slGAIN.y=this.slRELEASE.y=this.slATTACK.y=this.slRATIO.y=this.slGATE.y=90;this.slATTACK.h=this.slRELEASE.h=this.slGAIN.h=this.slGATE.h=this.slRATIO.h=this.h-this.slGATE.y-55-32;this.slTRE.y=this.h-55;this.slTRE.w=this.w-this.slTRE.x-416},paint:function(){ctx.fillStyle=
color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.paintMarks();drawImage(res.dbx,this.preset.x-48,13)},paintMarks:function(){ctx.fillStyle="#101115";ctx.fillRect(16,10,this.w-16-335,this.h-10-60);ctx.translate(16,10);ctx.fillStyle=color.grad1;ctx.fillRect(1,0,this.w-16-335-2,7);ctx.translate(-16,-10);ctx.textAlign="center";ctx.font="10px open_sans_condensedbold";ctx.fillStyle="#747577";ctx.fillText("IN",this.vuIN.x+4,this.vuIN.y+this.vuIN.h+15);ctx.fillText("OUT",this.vuOUT.x+4,this.vuOUT.y+this.vuOUT.h+
15);ctx.fillText("COMP",this.vuCOMP.x+4,this.vuCOMP.y+this.vuCOMP.h+15);ctx.fillStyle=color.tabText;ctx.font=font.eqSlText;ctx.textAlign="left";var a=this.dyn.h,b=this.dyn.w,c=b/96,d=a/96;ctx.font=font.eqMarks;ctx.fillStyle=color.graphMarks;var f="-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");ctx.save();ctx.translate(this.dyn.x,this.dyn.y);ctx.fillText("-90",0,a+15);ctx.fillText("+6",b-10,a+15);ctx.textAlign="center";for(var b=1,e=10;90>=e;e+=10)ctx.fillText(f[b++],c*e,a+15);b=1;ctx.textAlign=
"right";ctx.fillText("-90",-5,a-2);ctx.fillText("+6",-5,9);for(e=10;90>=e;e+=10)ctx.fillText(f[b++],-5,a-d*e+4);ctx.restore()},paintMarks2:function(){var a=this.dyn.h,b=this.dyn.w,c=b/96;ctx.font=font.eqMarks;ctx.fillStyle=color.graphMarks;getValue(this.keyPrefix+"gain");var d=[-90,-80,-70,-60,-50,-40,-30,-20,-10,0,6];ctx.save();ctx.translate(this.dyn.x,this.dyn.y);ctx.fillStyle="#101115";ctx.fillRect(-10,a,b+20,20);ctx.fillStyle=color.graphMarks;ctx.textAlign="center";ctx.fillText("6",b,a+15);for(var f=
b=0;90>=f;f+=10)ctx.fillText(d[b++]-0+"",c*f,a+15);ctx.restore()},showPresets:function(){this.menu=new PRESET_MENU2(null,this.prType,this,this.parent.color);regUpdate(this.menu)},savePreset:function(a){var b=".dyn.threshold .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release".split(" ");HAVE_GATE||b.push(".gate.thresh");var c={},d;"dynm"==this.prType?(b=".dyn.linked .dyn.l.threshold .dyn.l.ratio .dyn.l.softknee .dyn.l.attack .dyn.l.release .dyn.l.outgain .dyn.r.threshold .dyn.r.ratio .dyn.r.softknee .dyn.r.attack .dyn.r.release .dyn.r.outgain".split(" "),
HAVE_GATE||b.push(".gate.thresh"),d="m"):(d=this.keyPrefix.split("."),d=d[0]+"."+d[1]);for(var f=0;f<b.length;f++){var e=getValue(d+b[f]);null!=e&&(c[b[f]]=e)}selectedStrip.setNameValue("dyn.prmod",0);isDefined(a)&&selectedStrip.setNameValue("dyn.prname",a);return c},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);"dynm"==this.prType&&(c="m");applyPreset(c,a);selectedStrip.setNameValue("dyn.prmod",0);isDefined(b)&&selectedStrip.setNameValue("dyn.prname",b);regUpdate(this)}}),DYNVU=Class.create(Widget,
{initialize:function($super,b){$super(b);this.w=measures.vuWidth-1;this.ignoreEvents=!0;this.invert=!1;this.fallVelocity=this.curPos=this.valueBg=this.value=0;this.treValue=this.gateValue=-1;this.needGate=!1;this.timer=null;this.isClipping=!1;null==vuPattern&&(vuPattern=createPattern(res.vuTexture,"repeat-y"));this.fillTexture=vuPattern;this.isTicking=!1;this.vuGrad=null;this.vuGradH=-1},setValue:function(a){if(this.globalEnabled()){this.valueBg=bound(a,0,4);var b=!1,c=!1;this.value<this.valueBg?
(this.value=this.valueBg,c=!0):(this.fallVelocity=GLOBAL_VU_FALL_SPEED,b=!0);if(1<=a&&!this.invert){this.isClipping=!0;var d=this;clearTimeout(this.timer);this.timer=setTimeout(function(){d.isClipping=!1;regUpdate(d)},1500)}b&&!this.isTicking&&(this.isTicking=!0,regTick(this));c&&regUpdate(this)}else this.value=this.valueBg=bound(a,0,4)},reset:function(){this.valueBg=this.value=0;regUpdate(this)},tick:function(){var a=!1,b=!1;if(this.value<=this.valueBg)this.value=this.valueBg;else{this.value-=this.fallVelocity;
this.fallVelocity+=GLOBAL_VU_FALL_SPEED/fps;this.value<this.valueBg?this.value=this.valueBg:a=!0;var c=this.h*this.value|0;c>this.h%12&&(c=12*(c/12|0)+this.h%12);this.curPos!=c&&(b=!0)}a?regTick(this):this.isTicking=!1;b&&regUpdate(this)},calcGeometry:function(){},createGradient:function(){this.vuGradH==this.h||1>this.h||(this.vuGrad=this.invert?ctx.createLinearGradient(0,0,0,this.h):ctx.createLinearGradient(0,this.h,0,0),this.vuGrad.addColorStop(0,"green"),this.vuGrad.addColorStop(.5,"yellow"),this.vuGrad.addColorStop(1,
"red"),this.vuGradH=this.h)},paint:function(){this.needGate&&(this.gateValue=selectedStrip.getNameValue("gate.thresh"),this.treValue=getValue(this.parent.keyPrefix+"threshold"));this.createGradient();ctx.fillStyle="#101115";ctx.fillRect(-6,-4,this.w+12,this.h+8);ctx.fillStyle=color.vuBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.isClipping?"#E83B45":this.vuGrad;var a=this.h*this.value|0;a>this.h%12&&(a=a-a%12+(this.invert?0:this.h%12));this.curPos=a;a>this.h&&(a=this.h);this.invert?ctx.fillRect(0,
0,this.w,a):ctx.fillRect(0,this.h,this.w,-a);if(selectedStrip.getNameValue("gate.enabled")&&!selectedStrip.getNameValue("gate.bypass")&&.015<=this.gateValue){1<this.gateValue&&(this.gateValue=1);ctx.fillStyle=color.green;var b=(VtoDYNGATE(this.gateValue)+VU_RANGE)/VU_RANGE,a=this.h*(1-b)|0;0<=b&&1>b&&1<=a&&a<this.h&&(ctx.fillTriangle2(-6,a-5,-1,a,-6,a+5),ctx.fillTriangle2(this.w+6,a-5,this.w+1,a,this.w+6,a+5));a=this.h*b|0;a>this.h&&(a=this.h);0<a&&(ctx.fillStyle="rgba(0,0,0,0.6)",ctx.fillRect(0,
this.h,this.w,-a))}this.needGate&&(ctx.fillStyle="rgba(150,150,255,0.55)",b=(VtoTHRESH(this.treValue)+VU_RANGE)/VU_RANGE,a=this.h*(1-b)|0,0<=b&&1>b&&1<=a&&a<this.h&&(ctx.fillTriangle2(-6,a-4,-1,a,-6,a+4),ctx.fillTriangle2(this.w+6,a-4,this.w+1,a,this.w+6,a+4)));ctx.fillStyle=this.fillTexture;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#090C12";ctx.fillRect(0,this.h-3,this.w,3);ctx.fillRect(0,0,this.w,3)}}),DYN_GRAPH=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="DYN_GRAPH";
this.needMoveEvt=this.needClip=!0;this.pressed=this.master=!1;this.idx=1;this.touchID=-1;this.left=!0;this.touchRadius=32;this.grad=null;this.gradW=0;this.grad3=this.grad2=null;this.points={G:[0,0],T:[0,0],R:[0,0]};this.bypass=!1;this.colors=["#b23535","#c27a2a","#c7ab35","#2c8f29"];this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.lastP=!1;this.delta=[0,0];this.showPreset=!0},calcGeometry:function(){var a=this.w,b=this.h;this.grad=ctx.createRadialGradient(a/2,-10,a/10,a/
2,-10,a/2+10);this.grad.addColorStop(0,"rgba(255,255,255,0.2)");this.grad.addColorStop(1,"rgba(255,255,255,0)");this.grad2=ctx.createLinearGradient(0,b,a/2,0);this.grad2.addColorStop(0,"rgba(0,160,255,0.4)");this.grad2.addColorStop(.5,"rgba(0,160,255,0.33)");this.grad2.addColorStop(1,"rgba(0,80,176,0.26)");this.grad3=ctx.createLinearGradient(0,b,a/2,0);this.grad3.addColorStop(0,"rgba(160,160,160,0.4)");this.grad3.addColorStop(.5,"rgba(160,160,160,0.33)");this.grad3.addColorStop(1,"rgba(80,80,80,0.26)")},
onDown:function(a,b,c){this.pressed||(a-=this.globalX(),b-=this.globalY(),this.idx=0,this.touchID=c,this.pressed=!0,this.delta=[0,0],this.calcPoints(),isInCircle(this.points.R[0],this.points.R[1],2*this.touchRadius,a,b)&&(this.idx=2,this.delta=[this.points.R[0]-a,this.points.R[1]-b]),isInCircle(this.points.T[0],this.points.T[1],2*this.touchRadius,a,b)&&(this.idx=1,this.delta=[this.points.T[0]-a,this.points.T[1]-b]),0!=this.idx&&regUpdate(this))},onMove:function(a,b,c){if(this.pressed&&this.touchID==
c&&0!=this.idx){a+=this.delta[0];b+=this.delta[1];a=bound(a-this.globalX(),0,this.w);b=bound(b-this.globalY(),0,this.h);switch(this.idx){case 1:b=bound(a/this.w,0,1);this.parent.slTRE.innerSet(b);regUpdate(this.parent.vuIN);regUpdate(this.parent.led_tre);selectedStrip.setNameValue("dyn.prmod",1);break;case 2:if(1>this.points.T[1])return;b=bound(b,0,this.points.T[1]);b=bound(1-b/this.points.T[1],0,1);this.parent.slRATIO.innerSet(b);regUpdate(this.parent.led_ratio)}regUpdate(this)}},onUp:function(a){this.touchID==
a&&(this.delta=[0,0],a=Date.now(),a-this.lastClickTime<DBL_CLK_TIME&&this.lastP==this.idx&&(0==this.idx&&setMode(E_MODE.MIX),regUpdate(this)),this.lastP=this.idx,this.lastClickTime=a,this.pressed=!1,this.touchID=-1)},calcPoints:function(){var a=this.w,b=this.h,c=getValue(this.parent.keyPrefix+"threshold"),d=getValue(this.parent.keyPrefix+"ratio"),f=0*b;this.points.G[0]=0;this.points.G[1]=bound(b-f,0,b);f=b*(1-c)-f;this.points.T[0]=bound(a*c,0,a);this.points.T[1]=bound(f,0,b);this.points.R[0]=a;this.points.R[1]=
bound(f-b*(1-c)*d,0,b)},paint:function(){ctx.shadowColor="transparent";this.bypass=selectedStrip.type==E_STRIP_TYPE.MASTER?toBool(getValue("m.dyn.bypass")):toBool(getValue(this.parent.keyPrefix+"bypass"));this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();drawImage(this.cachedBg,0,0,this.w,this.h);var a=this.w,b=this.h,c=this.h/96,d=getValue(this.parent.keyPrefix+"threshold"),f=getValue(this.parent.keyPrefix+"ratio"),e=getValue(this.parent.keyPrefix+"softknee"),g=a*d;1>g&&(g=1);var h=
b*(1-d)-0;h>b-2&&(h=b-2);var l=b-b*(0+d+(1-d)*f);l>b-2&&(l=b-2);ctx.strokeStyle="rgba(255,255,250,0.15)";ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(a*d,b);ctx.lineTo(a*d,0);ctx.stroke();ctx.strokeStyle="rgba(117,206,210,1.0)";this.bypass&&(ctx.strokeStyle="#999");ctx.lineWidth=2;if(e){var e=a*d*1,d=b*(1-1*d)-0,m=g+.01*(a-g),f=h-(b-h-0)*f*.01;ctx.strokeStyle="rgba(255,255,255,0.3)";ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(0,b);ctx.lineTo(g,h);ctx.stroke();ctx.beginPath();ctx.moveTo(g,h);ctx.lineTo(a,
l);ctx.stroke();ctx.strokeStyle="rgba(117,206,210,1.0)";ctx.lineWidth=2;this.bypass&&(ctx.strokeStyle="white");ctx.beginPath();ctx.moveTo(0,b);ctx.bezierCurveTo(e,d,m,f,a,l)}else ctx.beginPath(),ctx.moveTo(0,b),ctx.lineTo(g,h),ctx.stroke(),ctx.beginPath(),ctx.moveTo(g,h),ctx.lineTo(a,l);ctx.stroke();ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.fillStyle=this.bypass?this.grad3:this.grad2;ctx.fill();this.drawCircle(g,bound(h,0,this.h),1==this.idx,1,!1);this.drawCircle(a-6,bound(l,0,this.h-0),2==this.idx,2,!1);
ctx.textAlign="center";ctx.font="bold 14px open_sans_condensedbold";ctx.fillStyle="#060606";ctx.fillText("T",g+1,bound(h,0,this.h)+5+1);ctx.fillText("R",a-8+1,bound(l,0,this.h-0)+5+1);ctx.fillStyle="#f0f0f0";ctx.fillText("T",g,bound(h,0,this.h)+5);ctx.fillText("R",a-8,bound(l,0,this.h-0)+5);selectedStrip.getNameValue("gate.enabled")&&!selectedStrip.getNameValue("gate.bypass")&&(a=selectedStrip.getNameValue("gate.thresh"),b=selectedStrip.getNameValue("gate.depth"),a=VtoGATE_THRESH(a),b=VtoGATE_DEPTH(b),
g=c*(90+a),ctx.fillStyle="rgba(10,58,36,0.3)",ctx.fillRect(0,this.h,this.w,-g),h=bound(c*-b,0,g),-59.9999>=b&&(h=g),ctx.fillStyle="rgba(10,58,36,0.5)",ctx.fillRect(0,this.h,this.w,-h),ctx.fillStyle="rgba(90,218,114,0.4)",ctx.fillRect(0,this.h-c*(90+a),this.w,2));ctx.lineWidth=1;ctx.strokeStyle="#222";ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("dyn.prmod")?"#444":color.green,ctx.font="18px open_sans_condensedbold",ctx.fillText(selectedStrip.getNameValue("dyn.prname"),
4,18,this.w-10))},drawCircle:function(a,b,c,d,f){c?(ctx.fillStyle="rgba(255,80,80,0.95)",ctx.strokeStyle="rgba(200,0,0,0.6)",ctx.lineWidth=3):(ctx.fillStyle="rgba(80,255,80,0.95)",ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.lineWidth=2);ctx.fillStyle=this.colors[d];ctx.strokeStyle=this.colors[d];this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)");ctx.beginPath();ctx.arc(a,b,13+(f?10:0),0,2*Math.PI);ctx.fill();ctx.beginPath();ctx.arc(a,b,this.touchRadius+(f?
12:0),0,2*Math.PI);ctx.globalAlpha=.38;ctx.fill();ctx.globalAlpha=1;c&&ctx.stroke()},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/96,f=this.h/96;a.fillStyle="#0A0B0C";a.fillRect(0,0,b,c);isSmall||(a.fillStyle=this.grad,a.fillRect(0,
0,b,c));a.strokeStyle="rgba(255,255,255,0.04)";a.lineWidth=1;a.beginPath();for(var e=0;90>=e;e+=10)a.moveTo((d*e|0)+.5,0),a.lineTo((d*e|0)+.5,c),a.moveTo(0,(c-f*e|0)+.5),a.lineTo(b,(c-f*e|0)+.5);a.stroke();this.cachedBgW=this.w;this.cachedBgH=this.h}});percentFormula=function(a){return 100*a|0};percent2Formula=function(a){return 200*a|0};maxxRangeFormula=function(a){return 60*a+20|0};hertzFormula=function(a){return formatFreq(20*Math.pow(1102.5,a))};
hertzFormula320=function(a){return formatFreq(20*Math.pow(16,a))};hpfFormula=function(a){return formatFreq(20*Math.pow(250,a))};lpfFormula=function(a){return formatFreq(400*Math.pow(55.125,a))};lenFormula=function(a){return 300*Math.pow(8/.3,a)|0};lenFormulaRoom=function(a){return 100*Math.pow(10,a)|0};function VtoDETUNE(a){return-100+200*a|0}
function strDelayRatio(a){if(.01>Math.abs(a-1))return"1/1";if(.01>Math.abs(a-2))return"2/1";if(.01>Math.abs(a-.333))return"1/3";if(.01>Math.abs(a-.666))return"2/3";if(.01>Math.abs(a-1.333))return"4/3";for(var b=[1,2,3,4,6,8,12,16,18,32,0],c=1;3>=c;c++)for(var d=0;0!=b[d];d++){var f=b[d];if(.005>Math.abs(a-c/f))return c+"/"+f}a=""+(1E3*a|0)/10;-1==a.indexOf(".")&&(a+=".0");return a+"%"}
var FX_SENDS_EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX_SENDS_EDIT_PAGE";this.y=40;this.color=color.blue;this.mode=0;this.SLIDERS=[];this.LEDS=[];this.BUTTONS=[];this.MUTES=[];this.VUS=[];this.VUS2=[];this.CLIPS=[];this.CLIPS2=[];this.initWidgets();this.setMode(0)},calcGeometry:function(){this.w=this.parent.w;this.h=this.parent.h-this.y-5;for(var a=selectedStrip.type==E_STRIP_TYPE.MASTER,b=0;b<this.SLIDERS.length;b++){var c=30+90*b;this.SLIDERS[b].x=
c+(a?13:0);this.SLIDERS[b].h=this.h-this.SLIDERS[b].y-66;this.BUTTONS[b].y=this.h-50;this.VUS[b].setPos(c-14+(a?13:0),this.SLIDERS[b].y+18);this.VUS[b].setSize(11,this.SLIDERS[b].h-20);this.VUS2[b].setPos(c-27+(a?13:0),this.SLIDERS[b].y+18);this.VUS2[b].setSize(11,this.SLIDERS[b].h-20);this.CLIPS[b].setPos(c-19+(a?13:0),this.SLIDERS[b].y-4);this.CLIPS2[b].setPos(c-33+(a?13:0),this.SLIDERS[b].y-4)}},setMode:function(a){this.mode=a;fxoutWidget.setFx(a);fxSendsWidget.setMode(a);this.fx.setMode(a);regUpdate(this)},
onShow:function(){this.syncSliders()},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},syncSliders:function(){if(null!=
selectedStrip){this.setMode(this.mode);for(var a=0;a<this.SLIDERS.length;a++)this.VUS[a].enabled=!1,this.VUS2[a].enabled=!1,this.CLIPS[a].enabled=!1,this.CLIPS2[a].enabled=!1;switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.LINEIN:for(a=0;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=this.LEDS[a].enabled=this.MUTES[a].enabled=this.BUTTONS[a].enabled=!0;this.keyPrefix=selectedStrip.name+"fx.";for(a=0;a<this.SLIDERS.length;a++)this.SLIDERS[a].setKey(this.keyPrefix+
a+".value"),this.LEDS[a].setKey(this.keyPrefix+a+".value"),this.MUTES[a].setKey(this.keyPrefix+a+".mute"),this.MUTES[a].img0=res.bMuteOff,this.SLIDERS[a].fader=this.SLIDERS[a].defaultFader,this.VUS[a].enabled=!1,this.VUS2[a].enabled=!1,this.CLIPS[a].enabled=!1,this.CLIPS2[a].enabled=!1;break;case E_STRIP_TYPE.FX:for(a=0;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=this.LEDS[a].enabled=this.MUTES[a].enabled=this.BUTTONS[a].enabled=!1;isDefined(this.BUTTONS[selectedStrip.subId])&&(this.BUTTONS[selectedStrip.subId].enabled=
!0);var b=bound(selectedStrip.id-fxStrips[0].id,0,curSetup.fx-1);this.setMode(b);break;case E_STRIP_TYPE.AUX:for(a=0;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=this.LEDS[a].enabled=this.MUTES[a].enabled=this.BUTTONS[a].enabled=!0;b=bound(selectedStrip.id-auxStrips[0].id,0,curSetup.aux-1);for(a=0;a<this.SLIDERS.length;a++)this.keyPrefix="f."+a+".aux."+b,this.SLIDERS[a].setKey(this.keyPrefix+".value"),this.LEDS[a].setKey(this.keyPrefix+".value"),this.MUTES[a].setKey(this.keyPrefix+".mute"),this.MUTES[a].img0=
res.bMuteOff,this.SLIDERS[a].fader=this.SLIDERS[a].defaultFader;break;case E_STRIP_TYPE.MASTER:for(a=0;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=this.LEDS[a].enabled=this.MUTES[a].enabled=this.BUTTONS[a].enabled=!0;for(a=0;a<this.SLIDERS.length;a++)this.keyPrefix="f."+a,this.SLIDERS[a].setKey(this.keyPrefix+".mix"),this.LEDS[a].setKey(this.keyPrefix+".mix"),this.MUTES[a].setKey(this.keyPrefix+".mute"),this.MUTES[a].kkk=this.keyPrefix,this.MUTES[a].getState=function(){if(selectedStrip.type==
E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),f=checkBit(a,MUTEFX_BIT_IDX),e=checkBit(a,MUTEALL_BIT_IDX);if(a&b||e||f)this.state=1;1==getValue(this.kkk+".forceunmute")?(this.state=0,this.img0=res.bMuteOff_F):this.img0=res.bMuteOff}},this.MUTES[a].onToggleUp=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,f=checkBit(a,MUTEALL_BIT_IDX),a=checkBit(a,MUTEFX_BIT_IDX);b||f||a||setValue(this.kkk+".mute",1);
setValue(this.kkk+".forceunmute",0)}},this.MUTES[a].onToggleDown=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,f=checkBit(a,MUTEALL_BIT_IDX),a=checkBit(a,MUTEFX_BIT_IDX);b||f||a?setValue(this.kkk+".forceunmute",1):setValue(this.kkk+".mute",0)}},this.MUTES[a].onToggle=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&checkMutes()},this.SLIDERS[a].fader=res.blueFader,this.VUS[a].enabled=!0,this.VUS2[a].enabled=!0,this.CLIPS[a].enabled=
!0,this.CLIPS2[a].enabled=!0}this.calcGeometry()}},initWidgets:function(){var a=this;this.fx=new FX_SETUP(this);for(var b=0;b<fxStrips.length;b++){var c=new AUX_LED(this);c.setPos(20+90*b-5,38);this.LEDS.push(c);c=new CheckBox(this);c.setPos(90*b+30,76);c.setImages(res.bMuteOff,res.bMuteOn);c.getState=function(){this.disabled=1==selectedStrip.getNameValue("matrix")};this.MUTES.push(c);c=new VUMeter(this);c.setPos(30+90*b,118);c.calcGeometry=function(){};this.VUS.push(c);c=new VUMeter(this);c.calcGeometry=
function(){};this.VUS2.push(c);c=new ClipBulb(this);this.CLIPS.push(c);c=new ClipBulb(this);this.CLIPS2.push(c);c=new EQSlider(this);switch(b){case 0:c.fader=res.eqVFaderBlue;break;case 1:c.fader=res.eqVFaderOrange;break;case 2:c.fader=res.eqVFaderPurple;break;case 3:c.fader=res.eqVFaderGreen}c.defaultFader=c.fader;c.dbMarks=!0;c.setPos(30+90*b,118);c.mode=b;c.onFocus=function(){a.setMode(this.mode)};c.onValueChange=function(){regUpdate(a.LEDS[this.mode])};HAVE_MATRIX&&(c.getState=function(){this.disabled=
1==selectedStrip.getNameValue("matrix")});this.SLIDERS.push(c);c=new EQButton(this);c.mode=b;c.setPos(20+90*b,89);c.getState=function(){if("undefined"!=typeof this.parent.mode){this.state=this.parent.mode==this.mode;switch(this.mode){case 0:this.setImages(res.FX_BTN_OFF,res.FX_BTN_BLU);break;case 1:this.setImages(res.FX_BTN_OFF,res.FX_BTN_OR);break;case 2:this.setImages(res.FX_BTN_OFF,res.FX_BTN_PUR);break;case 3:this.setImages(res.FX_BTN_OFF,res.FX_BTN_GR)}switch(fxStrips[this.mode].getNameValue("fxtype")){case E_FX.REVERB:this.text=
lang.REVERB;break;case E_FX.DELAY:this.text=lang.DELAY;break;case E_FX.CHORUS:this.text=lang.CHORUS;break;case E_FX.ROOM:this.text=lang.ROOM}}};c.setSize(70,30);var d=[[E_FX.REVERB],[E_FX.DELAY],[E_FX.CHORUS],[E_FX.ROOM,E_FX.DELAY]];IS_UI_24&&(d=[[E_FX.REVERB],[E_FX.REVERB,E_FX.DELAY],[E_FX.DELAY,E_FX.CHORUS],[E_FX.ROOM,E_FX.DELAY]]);var f=[lang.REVERB,lang.DELAY,lang.CHORUS,lang.ROOM],d=d[b];1<d.length&&(c.longClickMark=!0,c.fxs=d,c.onHold=function(){for(var b=[],c=0;c<this.fxs.length;c++)b.push(f[this.fxs[c]]);
c=new CONTEXT_MENU(null);c.fxs=this.fxs;c.setItems(b);c.setPos(this.globalX(),this.globalY()-c.h);c.valueFunc=function(b){var c=fxStrips[a.mode].name;b=this.fxs[b];setValue(c+"bypass",1);setValue(c+"fxtype",b);resetFX(c.slice(0,-1));setValue(c+"bypass",0);regUpdate(a);a.onShow()};regUpdate(c)});this.BUTTONS.push(c)}},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);var a=ctx.createLinearGradient(0,0,this.w,0);a.addColorStop(0,color.blue);a.addColorStop(.4,"transparent");a.addColorStop(.6,
"transparent");a.addColorStop(1,color.blue);ctx.fillStyle=a;a=this.w/2|0;selectedStrip.type==E_STRIP_TYPE.MASTER&&ctx.fillRect(0,0,a,32);ctx.fillStyle=color.labelText;ctx.font="bold 16pt open_sans_condensedbold";ctx.textAlign="start";a=selectedStrip.getName();switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.LINEIN:ctx.fillStyle=color.labelText;var b=lang.FX_SENDS+": ";ctx.fillText(b,15,24);ctx.fillStyle=selectedStrip.color;ctx.fillText(a,
15+textWidth(b),24,260);break;case E_STRIP_TYPE.AUX:ctx.fillStyle=color.labelText;b=lang.FX_RETURNS_TO_AUX.format("");ctx.fillText(b,15,24);ctx.fillStyle=color.AUX;ctx.fillText(a,15+textWidth(b),24,220);break;case E_STRIP_TYPE.MASTER:b=lang.MASTER,ctx.fillStyle=color.black,ctx.fillText(b,16,25),ctx.fillStyle="#D07979",ctx.fillText(b,15,24),a=15+textWidth(b)+6,ctx.fillStyle=color.black,ctx.fillText(lang.FX_RETURNS,a+1,25),ctx.fillStyle=color.labelText,ctx.fillText(lang.FX_RETURNS,a,24)}}}),FX_SETUP=
Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX_SETUP";this.w=400;this.bgColor2="#25262A";this.st=null;this.type=this.mode=0;this.setAnchors(null,0,0,0);this.initWidgets()},setMode:function(a){this.mode=a;var b=res.eqVFaderBlue;switch(a){case 0:b=res.fxFader_b;this.color=color.blue;break;case 1:b=res.fxFader_o;this.color=color.orange;break;case 2:b=res.fxFader_p;this.color=color.purple;break;case 3:b=res.fxFader_g,this.color=color.green}for(var c=0;c<this.PARAM_SLIDERS.length;c++)this.PARAM_SLIDERS[c].fader=
b;this.rack.setMode(a);this.st=fxStrips[a];a=this.st.getNameValue("fxtype");this.viewParams(a);regUpdate(this)},viewParams:function(a){var b=this;this.type=a;var c=[lang.REVERB_TIME,lang.HF_DAMPING,lang.BASS_GAIN,lang.LOWPASS_FILTER,lang.HIGHPASS_FILTER],d=["ms","%","%","HZ","HZ"],f=["TIME","HF","BASS","LPF","HPF"],e=[lang.DELAY_LENGTH,lang.LENGTH_SUBDIVISION,lang.FEEDBACK_AMOUNT,lang.LOWPASS_FILTER],g=["","","%","HZ"],h=["TIME","DIV","FBACK","LPF"],l=[lang.DETUNE,lang.DENSITY,lang.LOWPASS_FILTER],
m=["c","%","HZ"],n=["DETUNE","DENSITY","LPF"];this.bTAP.hide();this.TAP_LED.hide();this.MS_LED.hide();this.PARAM_LEDS[1].clickMark=!1;this.PARAM_LEDS[1].onDown=function(){};for(var p=0;p<this.PARAM_SLIDERS.length;p++)this.PARAM_SLIDERS[p].hide(),this.PARAM_LEDS[p].hide();switch(a){case E_FX.REVERB:case E_FX.ROOM:for(p=0;p<c.length;p++)this.PARAM_SLIDERS[p].textBot=c[p],this.PARAM_SLIDERS[p].show(),this.PARAM_LEDS[p].label=f[p],this.PARAM_LEDS[p].sign=d[p],this.PARAM_LEDS[p].show();this.PARAM_LEDS[0].formatValue=
a==E_FX.ROOM?lenFormulaRoom:lenFormula;this.PARAM_LEDS[1].formatValue=percentFormula;this.PARAM_LEDS[2].formatValue=percentFormula;this.PARAM_LEDS[3].formatValue=lpfFormula;this.PARAM_LEDS[4].formatValue=hpfFormula;break;case E_FX.DELAY:for(p=0;p<e.length;p++)this.PARAM_SLIDERS[p].textBot=e[p],this.PARAM_SLIDERS[p].show(),this.PARAM_LEDS[p].label=h[p],this.PARAM_LEDS[p].sign=g[p],this.PARAM_LEDS[p].show();this.TAP_LED.show();this.MS_LED.show();this.PARAM_LEDS[0].formatValue=function(a){regUpdate(b.PARAM_LEDS[1]);
return 0===a?"*DIV*":(100*Math.pow(10,desqr(a))|0)+"MS"};this.PARAM_LEDS[1].formatValue=function(a){return 0==getValue(b.st.name+"par1")?strDelayRatio(2*a):"---"};this.PARAM_LEDS[1].clickMark=!0;this.PARAM_LEDS[1].onDown=function(){var a=new CONTEXT_MENU(null);a.setItems("2/1 1/1 3/4 2/3 1/2 1/3 1/4 1/6 1/8 1/16 1/32".split(" "));a.w=47;a.setPos(this.globalX()+13,this.globalY()+this.h+1);a.doFunc=function(a){a=eval(a);a=bound(a/2,0,1);setValue(b.st.name+"par2",a);setValue(b.st.name+"par1",0);regUpdate(b)};
regUpdate(a)};this.PARAM_LEDS[2].formatValue=percentFormula;this.PARAM_LEDS[3].formatValue=hertzFormula;this.TAP_LED.setKey("f."+this.mode+".bpm");this.MS_LED.key2="f."+this.mode+".";this.MS_LED.unRegAllKeys();this.MS_LED.regKey("f."+this.mode+".bpm");break;case E_FX.CHORUS:for(p=0;p<l.length;p++)this.PARAM_SLIDERS[p].textBot=l[p],this.PARAM_SLIDERS[p].show(),this.PARAM_LEDS[p].label=n[p],this.PARAM_LEDS[p].sign=m[p],this.PARAM_LEDS[p].show();this.PARAM_LEDS[0].formatValue=VtoDETUNE;this.PARAM_LEDS[1].formatValue=
percentFormula;this.PARAM_LEDS[2].formatValue=lpfFormula;break;default:regUpdate(this);return}a=fxStrips[this.mode].name;for(p=0;p<this.PARAM_SLIDERS.length;p++)this.PARAM_SLIDERS[p].setKeyPrefix(a),this.PARAM_LEDS[p].setKeyPrefix(a);regUpdate(this)},initWidgets:function(){var a=this;this.rack=new FXRACK(this);this.rack.y=34;this.bTAP=new Button(this);this.bTAP.setImages(res.bTAPT_OFF,res.bTAPT_ON);this.bTAP.setPos(400,7);this.bTAP.hide();this.bTAP.idx=1;this.bTAP.valueFunc=function(){bpmTapHandler(a.mode)};
this.bTAP.longClickMark=!0;this.bTAP.onHold=function(){askBpm(a.mode)};this.TAP_LED=new FXLED2(this);this.TAP_LED.formatValue=function(a){return a|0};this.TAP_LED.label="BPM";this.TAP_LED.sign="";this.TAP_LED.hide();this.MS_LED=new FXLED2(this);this.MS_LED.formatValue=function(a){return precision(a,1)};this.MS_LED.label="MS";this.MS_LED.sign="";this.MS_LED.key2="";this.MS_LED.getState=function(){this.value=6E4/getValue(this.key2+"bpm")};this.MS_LED.hide();this.PARAM_LEDS=[];this.PARAM_SLIDERS=[];
for(var b=0;5>b;b++){var c=new EQSlider(this);c.keyPart="par"+(b+1);c.w+=2;c.faderX=0;c.fadd=0;PATTERNED||(c.background=this.bgColor2);c.setFader(res.fxFader,11);c.setPos(0,100);c.idx=b;c.valueFunc=function(){regUpdate(a.PARAM_LEDS[this.idx]);switch(a.type){case E_FX.DELAY:0===this.idx&&regUpdate(a.PARAM_LEDS[1])}};this.PARAM_SLIDERS.push(c);c=new FXLED2(this);c.keyPart="par"+(b+1);this.PARAM_LEDS.push(c)}},calcGeometry:function(){this.rack.setPos(this.w-this.rack.w,34);for(var a=0;a<this.PARAM_LEDS.length;a++)this.PARAM_LEDS[a].setPos(this.w-
80*(this.PARAM_LEDS.length-a)-11+15,127),this.PARAM_SLIDERS[a].setPos(this.w-80*(this.PARAM_SLIDERS.length-a)+15,172),this.PARAM_SLIDERS[a].h=this.h-this.PARAM_SLIDERS[a].y-60;this.TAP_LED.setPos(this.w-80-1+5,127);this.MS_LED.setPos(this.w-80-1+5,177);this.bTAP.setPos(this.w-80-13,172)},showPresets:function(){var a="fxrev";switch(this.st.getNameValue("fxtype")){case E_FX.REVERB:a="fxrev";break;case E_FX.DELAY:a="fxdel";break;case E_FX.CHORUS:a="fxcho";break;case E_FX.ROOM:a="fxroom"}this.menu=new PRESET_MENU2(null,
a,this,this.color);this.menu.center=!0;this.menu.calcGeometry();regUpdate(this.menu)},loadPreset:function(a,b){var c=this.st.name.slice(0,-1);applyPreset(c,a);this.st.setNameValue("prname",b);regUpdate(this)},savePreset:function(a){for(var b=this.st.name.slice(0,-1),c=".par1 .par2 .par3 .par4 .par5 .par6".split(" "),d={},f=0;f<c.length;f++)d[c[f]]=getValue(b+c[f]);this.st.setNameValue("prname",a);return d},paint:function(){ctx.fillStyle=PATTERNED?color.eqBg:"#25262A";ctx.fillRect(0,0,this.w,this.h);
ctx.textAlign="right";ctx.font="bold 16pt open_sans_condensedbold";var a=lang.PARAM_GLOBAL.format("");ctx.fillStyle=color.black;ctx.fillText(a,this.w-18+1,25);ctx.fillStyle=color.labelText;ctx.fillText(a,this.w-18,24);var b=fxStrips[this.mode].getName(),a=this.w-18-textWidth(a);ctx.fillStyle=color.black;ctx.fillText(b,a+1,25);ctx.fillStyle="#76A8D6";ctx.fillText(b,a,24);ctx.textAlign="start"}}),CONTEXT_MENU=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CONTEXT_MENU";
this.items=[];this.w=100;this.h=90;this.needClip=!0;this.ih=36;this.font="16px open_sans_condensedbold";this.bg="#262728";this.borderColor="#676869";this.selected=-1;mWidgets.push(widgets.pop())},setItems:function(a){this.items=a;this.h=this.items.length*this.ih;regUpdate(this)},doFunc:function(a){log(this.widgetName+" DOFUNC: "+a)},valueFunc:function(a){},onDown:function(a,b){var c=b-this.globalY();this.selected=bound(Math.floor(c/this.ih),0,this.items.length-1);regUpdate(this)},onUp:function(){this.doFunc(this.items[this.selected]);
this.valueFunc(this.selected);this.close()},calcGeometry:function(){},close:function(){this.enabled=!1;clearModals()},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.font=this.font;ctx.textAlign="left";ctx.textBaseline="middle";for(var a=this.ih/2|0,b=0;b<this.items.length;b++){var c=b*this.ih;ctx.fillStyle=this.selected==b?color.red:color.white;ctx.fillText(this.items[b],8,c+a,this.w-10);b<this.items.length-1&&
(ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(0,c+this.ih,this.w,-1))}}}),FXLED2=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX-LED2";this.bg=res.fxLEDb;this.w=this.bg.w();this.h=this.bg.h();this.label="PAR";this.sign="%";this.v1="0";this.clickMark=!1;this.value="";this.bgColor=PATTERNED?color.black:color.eqBg2},setValue:function(a,b){switch(a){case 1:this.v1=precision(b,1)+""}regUpdate(this)},formatValue:function(a){return 100*a|0},standartFormat:function(a){return 100*
a|0},getState:function(){this.value=getValue(this.key)},paint:function(){this.getState();ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);drawImage(this.bg,0,0);this.clickMark&&(ctx.fillStyle=color.white,ctx.fillTriangle(this.w-12,5,3,4));var a=this.w/2|0;ctx.fillStyle=color.ledText;ctx.textAlign="center";ctx.font="16px umixled";ctx.fillText(this.label,a,18);ctx.fillText(this.formatValue(this.value)+this.sign,a,35,this.w-10)}}),FXLEDPlain=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="FX-LED2";this.bgColor=color.eqBg;this.bg=res.fxLEDb;this.w=this.bg.w();this.h=this.bg.h();this.label="PAR";this.sign="%";this.v1="0";this.oneLine=this.clickMark=!1},setValue:function(a,b){switch(a){case 1:this.v1=precision(b,1)+""}regUpdate(this)},formatValue:function(a){return 100*a|0},standartFormat:function(a){return 100*a|0},getState:function(){return getValue(this.key)},paint:function(){this.paintedMe=!0;ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);
this.clickMark&&(ctx.fillStyle=color.white,ctx.fillTriangle(this.w-12,5,3,4));var a=this.w/2|0;ctx.setShadow("#0a0a0a",0,2,2);this.oneLine||(ctx.fillStyle="#999",ctx.textAlign="center",ctx.font=font.eqSlText,ctx.fillText(this.label,a,17));ctx.textAlign="start";var a=this.getState(),b=this.formatValue(a)+"";ctx.font="17px open_sansbold";var c=ctx.measureText(b).width;ctx.font="14px open_sans_condensedbold";var d=ctx.measureText(this.sign).width,a=(this.w-c-d-1)/2|0;ctx.fillStyle="#EEE";ctx.font="17px open_sansbold";
ctx.fillText(b,a,this.oneLine?17:36,this.w-10);this.w-(a+c+1)>d&&(ctx.fillStyle="#777",ctx.font="14px open_sans_condensedbold",ctx.textAlign="end",ctx.fillText(this.sign,a+c+1+d,this.oneLine?17:36,this.w-10))}}),FXRACK=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FXRACK";this.w=res.lex_reverb.w();this.h=res.lex_reverb.h();this.mode=0;this.tap=new Button(this);this.tap.setImages(res.lex_tap_off,res.lex_tap_on);this.tap.setPos(262,33);this.tap.valueFunc=function(){bpmTapHandler(b.mode);
updateByKey("f."+b.mode+".bpm")};this.tap.onHold=function(){askBpm(b.mode)};this.tap.hide();this.holdTimer=null},setMode:function(a){this.mode=a;a=fxStrips[this.mode].getNameValue("fxtype");this.tap.enabled=a==E_FX.DELAY;regUpdate(this)},onDown:function(a,b,c){a-=this.globalX();b-=this.globalY();b=isInRect(this.tap.x-15,this.tap.y-15,this.tap.w+30,this.tap.h+30,a,b);var d=this;this.tap.enabled&&b?this.holdTimer=setTimeout(function(){askBpm(d.mode)},HOLD_TIME):this.parent.showPresets()},onUp:function(){clearTimeout(this.holdTimer)},
paint:function(){var a=170;switch(fxStrips[this.mode].getNameValue("fxtype")){case E_FX.REVERB:a=198;drawImage(res.lex_reverb,0,0);break;case E_FX.DELAY:a=174;drawImage(res.lex_delay_a,0,0);break;case E_FX.CHORUS:a=198;drawImage(res.lex_chorus,0,0);break;case E_FX.ROOM:a=198,drawImage(res.lex_room,0,0)}fxStrips[this.mode].getNameValue("fxmode");var b=fxStrips[this.mode].getNameValue("prname"),c=fxStrips[this.mode].getNameValue("prmod");""==b&&(b="---");ctx.drawText(b,a,48,{font:font.botChLabel,align:"center",
valign:"middle",color:0==c?"#FFFB89":"#f00",shadow:[color.black,0,1,1]})}}),FXSENDSPage=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX_EDIT_PAGE";this.mode=-1;this.y=measures.topWidgetHeight;this.enabled=!1;this.buttons=[];this.color=color.blue;this.pages=[];this.initWidgets();this.setMode(0)},onShow:function(){this.page.arrangeStrips();bottomWidget.setOffset2(this.page.offsetX)},setOffset:function(a){this.page.setOffset(a)},setVU:function(a,b){this.page.strips[a].vu.setValue(b);
var c=this.page.strips[a].clip;1<=b?c.clip():c.state&&!c.releasing&&c.release()},resetVUs:function(){for(var a=this.page.strips,b=0;b<a.length;b++)a[b].vu.reset()},syncSliders:function(){},setMode:function(a){this.mode!=a&&(this.mode=a,fxoutWidget.setFx(a),this.page.setMode(a),this.resetVUs(),regUpdate(this),bottomWidget.upd(),regUpdate(bottomWidget))},nextMode:function(){this.mode==curSetup.fx-1?this.setMode(0):this.setMode(this.mode+1)},initWidgets:function(){for(var a=[color.blue,color.brown,color.purple,
color.green],b=0;b<fxStrips.length;b++){var c=new TabButton(this);c.textColor=LightenDarkenColor(a[b],10);c.color=a[b];c.mode=b;c.text="NULL";c.setSize(111,30);c.getState=function(){this.cosmetic||(this.state=this.parent.mode==this.mode?1:0,this.text=fxStrips[this.mode].getName())};this.buttons.push(c)}this.page=new FXMixer(this,0,color.blue)},calcGeometry:function(){this.w=screenWidth;masterWidget.enabled&&(this.w-=masterWidget.w);fxoutWidget.enabled&&(this.w-=fxoutWidget.w);slideOutWidget.enabled&&
(this.w-=slideOutWidget.w);this.h=screenHeight-this.y-bottomWidget.h;for(var a=0;a<this.buttons.length;a++)this.buttons[a].setPos(this.w-(this.buttons[a].w+1)*(this.buttons.length-a),5)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=[color.blue,color.brown,color.purple,color.green][this.mode];ctx.fillRect(0,35,this.w,4)}}),FXMixer=Class.create(Widget,{initialize:function($super,b,c,d){$super(b);this.widgetName="FX_MIXER";this.y=40;this.mode=0;this.needClip=
!0;isDefined(d)?this.color=d:this.color=color.blue;this.fxID=c;this.strips=[];this.createStrips()},setMode:function(a){for(var b=this.mode=0;b<this.strips.length;b++)this.strips[b].setMode(a)},createStrips:function(){for(var a=curSetup.input,b=curSetup.sub,c=curSetup.linein,d=0,f="fx."+this.fxID+".",e=0;e<a;e++){var g="i."+e+".",h=inStrips[e],g=new FXStrip(this,d,g,f);0==e&&(g.firstInGroup=!0);e==a-1&&(g.lastInGroup=!0);g.id=h.id;g.color=this.color;g.sl.color=this.color;g.text=h.text;this.strips.push(g);
fxSendStrips.push(g);h.FXS.push(g);d++}for(e=0;e<c;e++)g="l."+e+".",h=lineinStrips[e],g=new FXStrip(this,d,g,f),0==e&&(g.firstInGroup=!0),e==c-1&&(g.lastInGroup=!0),g.id=h.id,g.color=h.color,g.sl.color=this.color,g.text=h.text,this.strips.push(g),fxSendStrips.push(g),h.FXS.push(g),d++;h=mediaStrips[0];g=new FXStrip(this,d,"p.0.",f);g.firstInGroup=!0;g.id=h.id;g.color=color.media;g.sl.color=this.color;g.sl.fader=res.fader;g.text=h.text;this.strips.push(g);fxSendStrips.push(g);h.FXS.push(g);d++;h=mediaStrips[1];
g=new FXStrip(this,d,"p.1.",f);g.lastInGroup=!0;g.id=h.id;g.color=color.media;g.sl.color=this.color;g.sl.fader=res.fader;g.text=h.text;this.strips.push(g);fxSendStrips.push(g);h.FXS.push(g);d++;for(e=0;e<b;e++)g="s."+e+".",h=subStrips[e],g=new FXStrip(this,d,g,f),0==e&&(g.firstInGroup=!0),e==b-1&&(g.lastInGroup=!0),g.id=h.id,g.color=color.sub,g.sl.color=this.color,g.sl.fader=res.subFader,g.text=h.text,this.strips.push(g),fxSendStrips.push(g),h.FXS.push(g),d++},arrangeStrips:function(){for(var a=0;a<
this.strips.length;a++);},setOffset:function(a){this.offsetX=a;0>this.offsetX&&(this.offsetX=0);a=this.strips.length*measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&(this.offsetX=a);this.offsetXold=this.offsetX;regUpdate(this)},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;var a=this.strips.length*measures.mixerStripWidth-this.w;0>a&&(a=0);this.offsetX>a&&this.setOffset(this.offsetX)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h)}});
chSafesPage=showsPage=null;
var SETTINGS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SETTINGS";this.y=measures.topWidgetHeight;this.needClip=!0;this.mode=0;this.color=color.red;this.tabButtons=[];this.initWidgets();this.setMode(3)},showIsoPage:function(){if(this.iso_page){for(var a=0;a<this.pages.length;a++)this.pages[a].hide();this.iso_page.show();regUpdate(this)}},hideIsoPage:function(){this.iso_page&&this.setMode(2)},onShow:function(){if(isDefined(this.pages[this.mode]))this.pages[this.mode].onShow()},onHide:function(){for(var a=
0;a<this.pages.length;a++)if(this.pages[a].enabled)this.pages[a].onHide()},setMode:function(a){this.mode=a;this.iso_page&&this.iso_page.hide();for(a=0;a<this.pages.length;a++)this.pages[a].hide();this.mode<this.pages.length&&this.pages[this.mode].show();regUpdate(this)},nextMode:function(){this.mode==this.pages.length-1?this.setMode(0):this.setMode(this.mode+1)},initWidgets:function(){var a=[lang.NETWORK,lang.ACCESS,lang.SHOWS,lang.SETTINGS];HAVE_ROUTING&&a.push(lang.PATCHING);CASCADE_MODE&&a.push(lang.CASCADE);
a.push(lang.ABOUT);for(var b=0;b<a.length;b++){var c=new TabButton(this);c.color=c.textColor="hsl("+32*(b+1)+",50%,45%)";c.mode=b;c.text=a[b];c.setSize(100,30);this.tabButtons.push(c)}this.pages=[];this.pages.push(new NETWORK_PAGE(this));this.pages.push(new PERM_PAGE(this));this.pages.push(new SHOWS_PAGE(this));this.pages.push(new CONFIG_PAGE(this));HAVE_ROUTING&&this.pages.push(new ROUTING_PAGE(this));CASCADE_MODE&&this.pages.push(new CASCADE_SUBPAGE(this));this.pages.push(new ABOUTPage(this));this.iso_page=
null;this.iso_page=new ISO_PAGE(this);this.iso_page.hide()},calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;this.h=screenHeight-this.y;for(var a=0;a<this.tabButtons.length;a++)this.tabButtons[a].setPos(this.w-(this.tabButtons[a].w+1)*(this.tabButtons.length-a),5)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.tabButtons[this.mode].color;ctx.fillRect(4,35,this.w-4,4)}}),SETTINGS_SUBPAGE=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="SETTINGS_SUBPAGE";this.y=40;this.enabled=!1;this.bgColor=color.eqBg},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=
b)},onDouble:function(){setMode(E_MODE.MIX)},initWidgets:function(){},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h)}}),NETWORK_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="NETWORK_PAGE";this.timer=null;this.initWidgets()},onShow:function(){sendMessage("NETCONFIG");clearInterval(this.timer);this.timer=setInterval(function(){sendMessage("NETCONFIG")},
2E3)},onHide:function(){clearInterval(this.timer)},initWidgets:function(){this.bCONFIG=new MENUBUTTON(this);this.bCONFIG.setPos(60,300);this.bCONFIG.setSize(100,36);this.bCONFIG.text=lang.CONFIG;this.bCONFIG.textColor="#d66";this.bCONFIG.color="#d66";this.bCONFIG.onPress=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isLocal?(editOk.valueFunc=function(){var a=editBox2.value;if(a){var b=netConfig.adminPassword,c=b.slice(0,32),d=md5(c+a+c);c+d==b?(b=document.URL,b=b.replace(/:\/\//,"://admin:"+
a+"@"),b=b.replace(/\/mixer\.html/,"/config.html"),document.location=b):showPopupMsg(lang.WRONG_PASSWORD)}},showEditBox2(lang.PASSWORD,"")):document.location="/config.html"}},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.white;ctx.fillText(lang.WIRELESS_NETWORK,60,50);ctx.fillText(lang.ETHERNET,660,50);JSON.stringify(netConfig);ctx.textAlign="left";var a=color.yellow+lang.HOTSPOT+"<br>{0}<br>{1}<br>#C8C9C9"+
lang.CHANNEL+": {2}<br>SSID: {3}",a=a.format(netConfig.ap_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.ap_up?color.green+lang.UP:color.red+lang.DOWN,netConfig.wlan_up?lang.OVERRIDDEN_BY_WIFI:netConfig.ap_channel,netConfig.ap_ssid);netConfig.ap_mac&&(a+="<br>MAC: "+netConfig.ap_mac);drawText(a,60,110,{dy:30});a=color.yellow+"WI-FI<br>{0}<br>{1}".format(netConfig.wlan_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.wlan_up?color.green+lang.UP:color.red+lang.DOWN);
netConfig.wlan_up&&(a+="<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(0==netConfig.wlan_mode?netConfig.wlan_dhcp_ip+" (DHCP)":netConfig.wlan_ip,0==netConfig.wlan_mode?netConfig.wlan_dhcp_netmask:netConfig.wlan_netmask));netConfig.wlan_mac&&(a+="<br>#C8C9C9MAC: "+netConfig.wlan_mac);drawText(a,360,110,{dy:30});a=color.yellow+"LAN<br>{0}<br>{1}".format(netConfig.eth_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.eth_up?color.green+lang.UP:color.red+lang.DOWN);netConfig.eth_up&&(a+=
"<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(0==netConfig.eth_mode?netConfig.eth_dhcp_ip+" (DHCP)":netConfig.eth_ip,0==netConfig.eth_mode?netConfig.eth_dhcp_netmask:netConfig.eth_netmask));netConfig.eth_mac&&(a+="<br>#C8C9C9MAC: "+netConfig.eth_mac);drawText(a,660,110,{dy:30})}});function saveToCurrentShow(){var a=getValue("var.currentShow");a&&(sendMessage(E_COMMANDS.SAVESHOW+"^"+a),setValue("var.unsaved.chsafes",0))}
var ISO_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="ISO_PAGE";this.color="#22aa22";this.offsetY=0;this.hh=this.maxY=900;this.needMoveEvt=this.needClip=!0;this.buttons=[];this.initWidgets();chSafesPage=this},setOffset:function(a){this.offsetY=bound(a|0,0,this.maxY);regUpdate(this)},onDown:function(a,b,c){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b+this.offsetY];this.ppy=this.offsetY+b;this.d=this.offsetY},onMove:function(a,b,c){2<mouseTargets.length||
isDefined(tHash[c])&&2<tHash[c].length||this.setOffset(this.ppy-b)},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]),f=Math.abs(this.d-this.offsetY);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(10>f&&30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onWheel:function(a){clearInterval(ticker);this.setOffset(this.offsetY-
Math.round(a/3))},onShow:function(){},initWidgets:function(){var a=this,b=40;this.back=new MENUBUTTON(this);this.back.setAnchors(b+200,19,null,null);this.back.setSize(90,40);this.back.text=lang.BACK;this.back.onPress=function(){a.parent.hideIsoPage()};this.bRESET=new MENUBUTTON(this);this.bRESET.setAnchors(b+700,19,null,null);this.bRESET.setSize(90,40);this.bRESET.text=lang.RESET;this.bRESET.onPress=function(){for(var b=0;b<allStrips.length;b++)allStrips[b].setNameValue("safe",0);masterWidget.setNameValue("safe",
0);for(b=0;b<a.buttons.length;b++)a.buttons[b].setState(0);setValue("var.unsaved.chsafes",1);regUpdate(a)};this.bSAVE=new MENUBUTTON(this);this.bSAVE.setAnchors(b+400,19,null,null);this.bSAVE.setSize(190,40);this.bSAVE.text=lang.SAVE_TO_SHOW;this.bSAVE.textColor=color.yellow;this.bSAVE.regKey("var.unsaved.chsafes");this.bSAVE.getState=function(){this.disabled=0==getValue("var.unsaved.chsafes")};this.bSAVE.onPress=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("var.currentShow");
b&&(sendMessage(E_COMMANDS.SAVESHOW+"^"+b),setValue("var.unsaved.chsafes",0),regUpdate(a.bSAVE))}};var c=50,d=0,f=0;this.BUTTONS=[];this.B1=[];this.B2=[];this.B3=[];this.B4=[];this.B5=[];this.B6=[];this.regKey("iso.ch");this.regKey("iso.bus");this.regKey("iso.mtx");this.regKey("iso.m");this.regKey("iso.fx");this.regKey("iso.gr");for(var e=0;e<allStrips.length;e++){var g=new CHECKBUTTON(this);g.setSize(90,40);0==e%8&&0!=e&&d++;var h=80+c*d,f=h;g.setPos(b+(g.w+10)*(e-8*d),h);g.key=allStrips[e].name+
"safe";g.id=allStrips[e].id;g.text=allStrips[e].text;g.textColor=allStrips[e].color;g.getState=function(){this.state=1==this.state};g.onToggle=function(){isBlocked("shows")||(setValue("var.unsaved.chsafes",1),regUpdate(a.bSAVE))};this.BUTTONS.push(g)}g=new CHECKBUTTON(this);g.setSize(90,40);0==e%8&&0!=e&&d++;f=h=80+c*d;g.setPos(b+(g.w+10)*(e-8*d),h);g.key="m.safe";g.id=masterWidget.id;g.text=lang.MASTER;g.textColor=masterWidget.color;g.getState=function(){this.state=1==this.state};g.onToggle=function(){isBlocked("shows")||
(setValue("var.unsaved.chsafes",1),regUpdate(a.bSAVE))};this.BUTTONS.push(g);if(HAVE_ISOLATION){for(var l="iso.ch",m=[lang.MIC_GAIN,"+48V",lang.PHASE,lang.DELAY,lang.NAME,lang.HPF,lang.DIGITECH,lang.EQ,lang.DEESSER,lang.COMP,lang.GATE,lang.PANNING,lang.ROUTING,lang.MUTES,lang.FADER_POSITION,lang.FX_SEND_LEVELS,lang.AUX_MTX_SEND_LEVELS],n="micgain 48v phase delay names hpf digi eq deesser comp gate pan routing mutes mix fxsends auxmtxlvls".split(" "),b=40,c=60,f=f+110,e=d=0;e<m.length;e++)g=new CHECKBUTTON(this),
0==e%8&&0!=e&&d++,g.setSize(90,46),g.setPos(b+e%8*100,f+c*d),g.font="12pt open_sans_condensedbold",g.idx=e,g.text=formatButtonText(m[e]),g.id=n[e],g.key2=l,g.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},g.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},
this.buttons.push(g),this.B1.push(g);d++;d++;l="iso.bus";m=[lang.PHASE,lang.DELAY,lang.NAME,lang.GEQ,lang.COMP,lang.GATE,lang.CONTRIB_PANNING,lang.CONTRIB_BUS_POINTS,lang.MUTES,lang.AUX_CONTRIB,lang.MATRIX_CONTRIB,lang.MATRIX_CONTRIB_PANNING];n="phase delay name geq comp gate pan buspoints mutes aux mtxcontrib mtxcontribpan".split(" ");for(e=0;e<m.length;e++)g=new CHECKBUTTON(this),0==e%8&&0!=e&&d++,g.setSize(90,46),g.setPos(b+e%8*100,f+c*d),g.idx=e,g.text=formatButtonText(m[e]),g.id=n[e],g.key2=
l,g.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},g.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(g),this.B2.push(g);d++;d++;l="iso.m";m=[lang.GEQ,lang.COMP,lang.GATE,lang.BALANCE,lang.MUTES,lang.MASTER_LEVEL];n="geq comp gate balpan mutes mix".split(" ");
for(e=0;e<m.length;e++)g=new CHECKBUTTON(this),0==e%8&&0!=e&&d++,g.setSize(90,46),g.setPos(b+e%8*100,f+c*d),g.idx=e,g.text=formatButtonText(m[e]),g.id=n[e],g.key2=l,g.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},g.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},
this.buttons.push(g),this.B4.push(g);d++;d++;l="iso.fx";m=[lang.FX+" 1",lang.FX+" 2",lang.FX+" 3",lang.FX+" 4"];n=["fx1","fx2","fx3","fx4"];for(e=0;e<m.length;e++)g=new CHECKBUTTON(this),0==e%8&&0!=e&&d++,g.setSize(90,46),g.setPos(b+e%8*100,f+c*d),g.idx=e,g.text=m[e],g.id=n[e],g.key2=l,g.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},g.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+
","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(g),this.B5.push(g),h=f+c*d,this.hh=h+80;d++;d++;l="iso.gr";m=[lang.MUTE_GROUPS];n=["mg"];for(e=0;e<m.length;e++)g=new CHECKBUTTON(this),0==e%8&&0!=e&&d++,g.setSize(90,46),g.setPos(b+e%8*100,f+c*d),g.idx=e,g.text=m[e].replace(" ","\n"),g.id=n[e],g.key2=l,g.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},g.onToggle=
function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(g),this.B6.push(g),h=f+c*d,this.hh=h+80}},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;this.maxY=this.hh-this.h;0>this.maxY&&(this.maxY=0);this.offsetY=bound(this.offsetY,0,this.maxY)},paint:function(){ctx.fillStyle=
color.eqBg;ctx.fillRect(0,this.offsetY,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.yellow;ctx.fillText(lang.CHANNEL_SAFES,42,this.BUTTONS[0].y+-12);HAVE_ISOLATION&&(ctx.fillText(lang.CHANNELS,42,this.B1[0].y+-12),ctx.fillText(lang.BUSSES,42,this.B2[0].y+-12),ctx.fillText(lang.MASTER,42,this.B4[0].y+-12),ctx.fillText(lang.FX,42,this.B5[0].y+-12),ctx.fillText(lang.GROUPS,42,this.B6[0].y+-12));if(1<this.maxY){ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRoundRect(this.w-
11,this.offsetY+2,10,this.h-4,4);ctx.fillStyle="rgba(255,255,255,0.4)";var a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-11,this.offsetY+(2+this.offsetY/this.maxY*(this.h-4-a)|0),10,a,4)}}}),SHOWS_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="SHOWS_PAGE";this.color=color.red;this.initWidgets();showsPage=this},updLists:function(){this.showsListUpdate();this.snapsListUpdate()},onShow:function(){if(EMULATE)this.SHOWS.setItems($A($R("SHOW A",
"SHOW Z"))),this.SNAPS.setItems($A($R("SNAPSHOT A","SNAPSHOT Z")));else{this.showsListUpdate();var a=getValue("var.currentShow");a&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}},showsListUpdate:function(){EMULATE||sendMessage(E_COMMANDS.SHOW_LIST)},snapsListUpdate:function(){if(!EMULATE){var a=this.SHOWS.selItem();null==a&&(a=getValue("var.currentShow"));null!=a&&0!=a.length&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}},refresh:function(){},initWidgets:function(){var a=this;this.bSAFES=new MENUBUTTON(this);
this.bSAFES.setPos(250,20);this.bSAFES.setSize(130,40);this.bSAFES.color=color.green;this.bSAFES.text=IS_UI_24?lang.ISOLATE:lang.CHANNEL_SAFES;this.bSAFES.onPress=function(){a.parent.showIsoPage()};this.SHOWS=new LIST(this);this.SHOWS.setPos(40,80);this.SHOWS.setSize(340,320);this.SHOWS.showList=!0;this.SHOWS.getActiveItem=function(){var a=getValue("var.currentShow");this.activeItemIdx=this.items.indexOf(a)};this.SHOWS.onDClick=function(){a.bSHOWLOAD.click()};this.SHOWS.onSelect=function(){if(!EMULATE)if(isBlocked("shows"))showPopupMsg(lang.LOCKED,
800);else{var b=this.selItem();null==b?0<=this.activeItemIdx&&this.select(this.activeItemIdx):(a.SNAPS.clear(),a.SNAPS.showName=b,sendMessage(E_COMMANDS.SNAP_LIST+"^"+b))}};this.bNEWSHOW=new MENUBUTTON(this);this.bNEWSHOW.setPos(390,130);this.bNEWSHOW.text=lang.NEW;this.bNEWSHOW.onPress=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("shows")?showPopupMsg(lang.LOCKED,800):(editOk.valueFunc=function(){var b=editBox2.value;null!=b&&0!=b.length&&(b=b.replace(/\^/g,"_"),-1!=a.SHOWS.items.indexOf(b)?
showPopupMsg(lang.SHOW_ALREADY_EXISTS,800):(sendMessage(E_COMMANDS.SHOW_CREATE+"^"+b),sendMessage(E_COMMANDS.SHOW_LOAD+"^"+b),a.showsListUpdate(),a.SHOWS.clearSelection()))},showEditBox2(lang.SAVE_SHOW_WITH_NAME,""))};this.bSHOWLOAD=new MENUBUTTON(this);this.bSHOWLOAD.text=lang.LOAD;this.bSHOWLOAD.setPos(390,80);this.bSHOWLOAD.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SHOWS.selItem();null!=b&&(a.SNAPS.clear(),
sendMessage(E_COMMANDS.SHOW_LOAD+"^"+b),sendMessage(E_COMMANDS.SNAP_LIST+"^"+b),regUpdate(topWidget))}};this.bSHOWREN=new MENUBUTTON(this);this.bSHOWREN.text=lang.RENAME;this.bSHOWREN.setPos(390,180);this.bSHOWREN.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SHOWS.selItem();null!=b&&(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),sendMessage(E_COMMANDS.SHOW_RENAME+
"^"+b+"^"+c),b==getValue("var.currentShow")&&setValue("var.currentShow",c),a.showsListUpdate(),a.SHOWS.onSetItems=function(){this.selectByName(c)})},showEditBox2(lang.NEW_SHOW_NAME,b))}};this.bSHOWIMPORT=new MENUBUTTON(this);this.bSHOWIMPORT.setPos(390,250);this.bSHOWIMPORT.text=lang.IMPORT;this.bSHOWIMPORT.onPress=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var a=new MODAL_LIST(null,E_COMMANDS.IMPORT_LIST);a.title=lang.IMPORT_SHOW_FROM_USB;a.valueFunc=function(a){sendMessage(E_COMMANDS.IMPORT_SHOW+
"^"+a)}}};this.bSHOWEXPORT=new MENUBUTTON(this);this.bSHOWEXPORT.setPos(390,300);this.bSHOWEXPORT.text=lang.EXPORT;this.bSHOWEXPORT.onPress=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SHOWS.selItem();if(null==b)showPopupMsg(lang.NO_SHOW_SELECTED);else{var d=new MODAL_LIST(null,E_COMMANDS.USB_LIST);d.title=lang.EXPORT_SHOW_TO_USB.format(b);d.valueFunc=function(a){sendMessage(E_COMMANDS.EXPORT_SHOW+"^"+a+"^"+b)}}}};this.bSHOWDEL=new MENUBUTTON(this);this.bSHOWDEL.text=
lang.DELETE;this.bSHOWDEL.setPos(390,370);this.bSHOWDEL.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SHOWS.selItem();null!=b&&(confOk.valueFunc=function(){sendMessage(E_COMMANDS.SHOW_DEL+"^"+b);a.showsListUpdate();a.SHOWS.clearSelection()},confCancel.valueFunc=function(){},showConfBox(lang.DELETE_SHOW.format(b)))}};var b=1020>screenWidth?756:810;this.SNAPS=new LIST(this);this.SNAPS.setPos(1020>screenWidth?470:490,
80);this.SNAPS.setSize(1020>screenWidth?280:310,320);this.SNAPS.snapList=!0;this.SNAPS.showName="";this.SNAPS.getActiveItem=function(){var a=getValue("var.currentShow");this.showName!=a?this.activeItemIdx=-1:(a=getValue("var.currentSnapshot"),this.activeItemIdx=this.items.indexOf(a))};this.SNAPS.onDClick=function(){a.bSNAPLOAD.click()};this.bSNAPLOAD=new MENUBUTTON(this);this.bSNAPLOAD.text=lang.LOAD;this.bSNAPLOAD.setPos(b,80);this.bSNAPLOAD.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);
else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SNAPS.selItem();if(null!=b){var d=a.SHOWS.selItem();null==d&&(d=getValue("var.currentShow"));null!=d&&(getValue("var.currentShow")!=d&&sendMessage(E_COMMANDS.SHOW_LOAD+"^"+d),sendMessage(E_COMMANDS.SNAP_LOAD+"^"+d+"^"+b))}}};this.bSNAPSAVE=new MENUBUTTON(this);this.bSNAPSAVE.text=lang.SAVE;this.bSNAPSAVE.setPos(b,130);this.bSNAPSAVE.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,
800);else{var b=a.SNAPS.selItem();null==b&&(b="");var d=getValue("var.currentShow");null==d||0==d.length?showPopupMsg(lang.NO_ACTIVE_SHOW):(editOk.valueFunc=function(){var a=editBox2.value;null!=a&&0!=a.length&&(a=a.replace(/\^/g,"_"),-1!=showsPage.SNAPS.items.indexOf(a)?(confOk.valueFunc=function(){sendMessage(E_COMMANDS.SNAP_SAVE+"^"+d+"^"+a);showsPage.snapsListUpdate();showsPage.SNAPS.clearSelection();showPopupMsg(lang.SAVED,800)},confCancel.valueFunc=function(){},showConfBox(lang.REPLACE_SNAPSHOT.format(a))):
(sendMessage(E_COMMANDS.SNAP_SAVE+"^"+d+"^"+a),setValue("var.currentSnapshot",a),regUpdate(topWidget),showsPage.SHOWS.select(d),showsPage.snapsListUpdate(),showsPage.SNAPS.clearSelection(),showPopupMsg(lang.SAVED,800)))},showEditBox2(lang.SAVE_SNAPSHOT_WITH_NAME,b))}};this.bSNAPREN=new MENUBUTTON(this);this.bSNAPREN.text=lang.RENAME;this.bSNAPREN.setPos(b,180);this.bSNAPREN.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=
a.SNAPS.selItem();if(null!=b){var d=a.SHOWS.selItem();null==d&&(d=getValue("var.currentShow"));null!=d&&0!=d.length&&(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),sendMessage(E_COMMANDS.SNAP_RENAME+"^"+d+"^"+b+"^"+d+"^"+c),b==getValue("var.currentSnapshot")&&d==getValue("var.currentShow")&&setValue("var.currentSnapshot",c),a.snapsListUpdate(),regUpdate(topWidget))},showEditBox2(lang.NEW_SNAPSHOT_NAME,b))}}};this.bSNAPDEL=new MENUBUTTON(this);this.bSNAPDEL.text=
lang.DELETE;this.bSNAPDEL.setPos(b,370);this.bSNAPDEL.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SNAPS.selItem();if(b){var d=getValue("var.currentShow");confOk.valueFunc=function(){sendMessage(E_COMMANDS.SNAP_DEL+"^"+d+"^"+b);a.snapsListUpdate();a.SNAPS.clearSelection()};confCancel.valueFunc=function(){};showConfBox(lang.DELETE_SNAPSHOT.format(b))}}};this.MRESET=new MENUBUTTON(this);this.MRESET.setPos(40,this.SHOWS.y+
this.SHOWS.h+10);this.MRESET.w=110;this.MRESET.text=lang.MIXER_RESET;this.MRESET.onPress=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked()?showPopupMsg(lang.LOCKED,800):(confOk.valueFunc=function(){sendMessage(E_COMMANDS.MIXER_RESET)},showConfBox(lang.LOAD_THE_INITIAL_MIXER_STATE))}},calcGeometry:function($super){$super()},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.tabTextSel;ctx.fillText(lang.SHOWS,
40,46);ctx.fillText(lang.SNAPSHOTS,490,46)}}),CONFIG_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CONFIG";this.y=40;this.enabled=!1;this.offsetY=0;this.hh=this.maxY=900;this.needMoveEvt=this.needClip=!0;this.color=color.red;this.scrollID=-1;this.mouseCaptured=!1;this.initWidgets()},setOffset:function(a){this.offsetY=bound(a|0,0,this.maxY);regUpdate(this)},onShow:function(){this.setOffset(0)},onDown:function(a,b,c){2<mouseTargets.length||isDefined(tHash[c])&&2<
tHash[c].length||(this.mouseCaptured=!0,this.lastPressPoint=this.pressPoint,this.pressPoint=[a,b+this.offsetY],this.ppy=this.offsetY+b,this.d=this.offsetY,this.scrollID=c)},onMove:function(a,b,c){this.scrollID==c&&this.mouseCaptured&&this.setOffset(this.ppy-b)},onUp:function(a){if(this.mouseCaptured){this.mouseCaptured=!1;var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]),f=Math.abs(this.d-this.offsetY);2<mouseTargets.length||
isDefined(tHash[a])&&2<tHash[a].length||(10>f&&30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)}},onDouble:function(){setMode(E_MODE.MIX)},onWheel:function(a,b){clearInterval(ticker);this.setOffset(this.offsetY-Math.round(a/3))},initWidgets:function(){var a=0,b=this;HAVE_HP&&(this.HPOUT=new SWITCHBOX(this),this.HPOUT.label=lang.HEADPHONES_OUT+":",this.HPOUT.setPos(250,50+50*a++),this.HPOUT.setItemWidth(120),this.HPOUT.setItems([lang.MASTER+
"/"+lang.SOLO,lang.AUX]),this.HPOUT.getState=function(){this.state=getValue("var.hpaux")},this.HPOUT.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):(setValue("var.hpaux",this.state),syncHPAUX())});this.SOLOROUTE=new SWITCHBOX(this);this.SOLOROUTE.label=lang.SOLO_ROUTING+":";this.SOLOROUTE.setPos(250,50+50*a++);this.SOLOROUTE.setItemWidth(120);this.SOLOROUTE.setItems([lang.HEADPHONES,lang.MASTER+" + "+lang.HP]);this.SOLOROUTE.getState=function(){this.state=getValue("settings.soloMode");
1!=getValue("var.hpaux")&&IS_UI_24?this.items=[lang.HEADPHONES,lang.MASTER+" + "+lang.HP]:this.items=[lang.DISABLED,lang.MASTER]};this.SOLOROUTE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.soloMode",this.state)};IS_UI_24&&(this.HPSIGNAL=new SWITCHBOX(this),this.HPSIGNAL.label=lang.HEADPHONE_SIGNAL_DIRECTION+":",this.HPSIGNAL.setPos(250,50+50*a++),this.HPSIGNAL.setItems([lang.L+" / "+lang.R,lang.R+" / "+lang.L]),this.HPSIGNAL.setItemWidth(120),this.HPSIGNAL.getState=
function(){this.state=getValue("settings.hpswap")},this.HPSIGNAL.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.hpswap",this.state)});this.SOLOMODE=new SWITCHBOX(this);this.SOLOMODE.label=lang.SOLO_MODE+":";this.SOLOMODE.setPos(250,50+50*a++);this.SOLOMODE.setItems([lang.SINGLE,lang.MULTIPLE]);this.SOLOMODE.setItemWidth(120);this.SOLOMODE.getState=function(){this.state=getValue("settings.multiplesolo")};this.SOLOMODE.valueFunc=function(){isBlocked("gsettings")?
showPopupMsg(lang.LOCKED,800):setValue("settings.multiplesolo",this.state)};this.SOLOTYPE=new SWITCHBOX(this);this.SOLOTYPE.label=lang.SOLO_TYPE+":";this.SOLOTYPE.setPos(250,50+50*a++);this.SOLOTYPE.setItems([lang.AFL,lang.PFL]);this.SOLOTYPE.setItemWidth(120);this.SOLOTYPE.getState=function(){this.state=getValue("settings.solotype")};this.SOLOTYPE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.solotype",this.state)};curSetup.rec&&(this.RECMODE=new SWITCHBOX(this),
this.RECMODE.label=lang.RECORD_MODE+":",this.RECMODE.setPos(250,50+50*a++),this.RECMODE.setItems([lang.BIT_32,lang.BIT_24,lang.BIT_16]),this.RECMODE.setItemWidth(80),this.RECMODE.getState=function(){this.state=getValue("settings.recordMode")},this.RECMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.recordMode",this.state)},IS_UI_24&&(this.MTKMODE=new SWITCHBOX(this),this.MTKMODE.label=lang.MULTITRACK_MODE+":",this.MTKMODE.setPos(250,50+50*a++),this.MTKMODE.setItems(["FLAC 24",
"FLAC 16","WAV 24","WAV 16"]),this.MTKMODE.setItemWidth(80),this.MTKMODE.getState=function(){this.state=getValue("settings.mtk.format")},this.MTKMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.mtk.format",this.state)}));this.AUXMUTE=new SWITCHBOX(this);this.AUXMUTE.label=lang.AUX_SEND_MUTE_INHERITANCE+":";this.AUXMUTE.setPos(250,50+50*a++);this.AUXMUTE.setItems([lang.OFF,lang.ON]);this.AUXMUTE.setItemWidth(120);this.AUXMUTE.getState=function(){this.state=
getValue("settings.auxmutelink")};this.AUXMUTE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.auxmutelink",this.state)};IS_UI_24?(this.MTXSENDP=new SWITCHBOX(this),this.MTXSENDP.label=lang.MASTER_MTX_SEND_POINT+":",this.MTXSENDP.setPos(250,50+50*a++),this.MTXSENDP.setItems([lang.PRE,lang.POST]),this.MTXSENDP.setItemWidth(120),this.MTXSENDP.getState=function(){this.state=getValue("settings.mtxsendpoint")},this.MTXSENDP.valueFunc=function(){isBlocked("gsettings")?
showPopupMsg(lang.LOCKED,800):setValue("settings.mtxsendpoint",this.state)}):(this.PREPROC=new SWITCHBOX(this),this.PREPROC.label=lang.GLOBAL_PRE_FADE_AUX_SEND_POINT+":",this.PREPROC.setPos(250,50+50*a++),this.PREPROC.setItems([lang.PRE_PROCESSING,lang.POST_PROCESSING]),this.PREPROC.setItemWidth(120),this.PREPROC.getState=function(){this.state=getValue("settings.auxsendpoint")},this.PREPROC.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.auxsendpoint",
this.state)});var c=[0,1,2,3,4],d=[lang.MUTE_FX,lang.MUTE_ALL,lang.PLAY,lang.RECORD,lang.TAP_TEMPO];IS_UI_24&&(d.push(lang.MTK_PLAY),d.push(lang.MTK_RECORD),c.push(5),c.push(6));this.PEDAL=new RADIO(this);this.PEDAL.setPos(728,50);this.PEDAL.setLabels(d);this.PEDAL.setKey("settings.footswitchfunc");this.PEDAL.regKey("settings.footswitchfunc");this.PEDAL.setItems(c);IS_UI_24&&(this.SOLO_VOL=new EQHSlider2(this),this.SOLO_VOL.disableWheel=!0,this.SOLO_VOL.w=570,this.SOLO_VOL.defaultValue=-1,this.SOLO_VOL.haveMarks=
!0,this.SOLO_VOL.setKey("settings.solovol"),this.SOLO_VOL.regKey("settings.solovol"),this.SOLO_VOL.setAnchors(250,50+50*a++,null,null),this.HP_L=new EQHSlider2(this),this.HP_L.disableWheel=!0,this.HP_L.w=570,this.HP_L.defaultValue=-1,this.HP_L.haveMarks=!0,this.HP_L.setKey("settings.hpvol.0"),this.HP_L.regKey("settings.hpvol.0"),this.HP_L.setAnchors(250,50*a++ +56,null,null),this.HP_R=new EQHSlider2(this),this.HP_R.disableWheel=!0,this.HP_R.w=570,this.HP_R.defaultValue=-1,this.HP_R.haveMarks=!0,this.HP_R.setKey("settings.hpvol.1"),
this.HP_R.regKey("settings.hpvol.1"),this.HP_R.setAnchors(250,50*a++ +62,null,null));a+=1;HAVE_SYNC&&(this.SYNC=new SWITCHBOX(this),this.SYNC.setPos(640,50+50*(a+(IS_UI_24?1:0))),this.SYNC.setItems([lang.OFF,lang.ON]),this.SYNC.setItemWidth(90),this.SYNC.getState=function(){this.state=settings.sync?1:0},this.SYNC.valueFunc=function(){settingsStorage.set("sync",1==this.state)},this.SYNC_ID=new INPUTBOX(this),this.SYNC_ID.setPos(640,50+50*(a+1+(IS_UI_24?1:0))),this.SYNC_ID.label=lang.SYNC_ID+":",this.SYNC_ID.w=
this.SYNC.w,this.SYNC_ID.getState=function(){this.text=settings.sync_id},this.SYNC_ID.valueFunc=function(a){settingsStorage.set("sync_id",a);regUpdate(this)});this.DRAWRATE=new SWITCHBOX(this);this.DRAWRATE.label=lang.FRAME_RATE+":";this.DRAWRATE.setPos(250,50+50*a++);this.DRAWRATE.setItems([lang.FULL,"1/2","1/3","1/4"]);this.DRAWRATE.getState=function(){this.state=settings.drawRate-1|0};this.DRAWRATE.valueFunc=function(){settingsStorage.set("drawRate",this.state+1)};1.5<=window.devicePixelRatio&&
(this.DISABLERETINA=new SWITCHBOX(this),this.DISABLERETINA.label=lang.DISABLE_RETINA+":",this.DISABLERETINA.setPos(250,50+50*a++),this.DISABLERETINA.setItems([lang.OFF,lang.ON]),this.DISABLERETINA.setItemWidth(90),this.DISABLERETINA.getState=function(){this.state=settings.disableRetina?1:0},this.DISABLERETINA.valueFunc=function(){settingsStorage.set("disableRetina",1==this.state);confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)});this.DISABLESCALE=new SWITCHBOX(this);this.DISABLESCALE.label=
lang.DISABLE_RESCALING+":";this.DISABLESCALE.setPos(250,50+50*a++);this.DISABLESCALE.setItems([lang.OFF,lang.ON]);this.DISABLESCALE.getState=function(){this.state=settings.disableScaling?1:0};this.DISABLESCALE.valueFunc=function(){settingsStorage.set("disableScaling",1==this.state);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};this.DISABLEVU=new SWITCHBOX(this);this.DISABLEVU.label=lang.DISABLE_LED_METERS+":";this.DISABLEVU.setPos(250,50+50*a++);
this.DISABLEVU.setItems([lang.OFF,lang.ON]);this.DISABLEVU.getState=function(){this.state=settings.disableVUs?1:0};this.DISABLEVU.valueFunc=function(){settingsStorage.set("disableVUs",1==this.state);regUpdate(masterWidget)};a+=.5;this.MASTERLOCK=new SWITCHBOX(this);this.MASTERLOCK.label=lang.MASTER_LOCK+":";this.MASTERLOCK.setPos(250,50+50*a++);this.MASTERLOCK.setItems([lang.OFF,lang.ON]);this.MASTERLOCK.setItemWidth(90);this.MASTERLOCK.getState=function(){this.state=settings.masterLock?1:0};this.MASTERLOCK.valueFunc=
function(){settingsStorage.set("masterLock",1==this.state);masterWidget.sl.locked=1==this.state;regUpdate(masterWidget)};IS_UI_24&&(this.BIGSO=new SWITCHBOX(this),this.BIGSO.label=lang.BIGGER_SLIDEOUT+":",this.BIGSO.setPos(250,50+50*a++),this.BIGSO.setItems([lang.OFF,lang.ON]),this.BIGSO.setItemWidth(120),this.BIGSO.getState=function(){this.state=settings.bigSlideOut?1:0},this.BIGSO.valueFunc=function(){settingsStorage.set("bigSlideOut",1==this.state);settingsStorage.save();confOk.valueFunc=function(){location.reload()};
showConfBox(lang.RELOAD_UI)});this.NUDGE=new SWITCHBOX(this);this.NUDGE.label=lang.HOLD_FADER_FOR_FINE_TUNING+":";this.NUDGE.setPos(250,50+50*a++);this.NUDGE.setItems([lang.OFF,lang.ON]);this.NUDGE.getState=function(){this.state=settings.nudge?1:0};this.NUDGE.valueFunc=function(){settingsStorage.set("nudge",1==this.state)};this.VUQUANTIZE=new SWITCHBOX(this);this.VUQUANTIZE.label=lang.METER_QUANTISATION+":";this.VUQUANTIZE.setPos(250,50+50*a++);this.VUQUANTIZE.setItems([lang.OFF,lang.ON]);this.VUQUANTIZE.getState=
function(){this.state=settings.vuquantise?1:0};this.VUQUANTIZE.valueFunc=function(){settingsStorage.set("vuquantise",1==this.state)};this.LANES=new SWITCHBOX(this);this.LANES.label=lang.FADER_GLOW+":";this.LANES.setPos(250,50+50*a++);this.LANES.setItems([lang.OFF,lang.THIN,lang.NORM]);this.LANES.getState=function(){this.state=settings.lanes};this.LANES.valueFunc=function(){settingsStorage.set("lanes",this.state);regUpdate(masterWidget);allStrips.forEach(function(a){a.UPDATE_CACHE()})};this.DISABLEVUGHOST=
new SWITCHBOX(this);this.DISABLEVUGHOST.label=lang.DISABLE_VU_INPUT_LEVEL+":";this.DISABLEVUGHOST.setPos(250,50+50*a++);this.DISABLEVUGHOST.setItems([lang.OFF,lang.ON]);this.DISABLEVUGHOST.getState=function(){this.state=settings.disableVUghost?1:0};this.DISABLEVUGHOST.valueFunc=function(){settingsStorage.set("disableVUghost",1==this.state)};this.DISABLEVUPEAK=new SWITCHBOX(this);this.DISABLEVUPEAK.label=lang.DISABLE_VU_PEAK+":";this.DISABLEVUPEAK.setPos(250,50+50*a++);this.DISABLEVUPEAK.setItems([lang.OFF,
lang.ON]);this.DISABLEVUPEAK.getState=function(){this.state=settings.disableVUpeak?1:0};this.DISABLEVUPEAK.valueFunc=function(){settingsStorage.set("disableVUpeak",1==this.state)};this.DISABLEVU2=new SWITCHBOX(this);this.DISABLEVU2.label=lang.HIDE_COMP_GATE+":";this.DISABLEVU2.setPos(250,50+50*a++);this.DISABLEVU2.setItems([lang.OFF,lang.ON]);this.DISABLEVU2.getState=function(){this.state=settings.disableVUs2?1:0};this.DISABLEVU2.valueFunc=function(){settingsStorage.put("disableVUs2",1==this.state);
confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};this.DIMVU=new SWITCHBOX(this);this.DIMVU.label=lang.DIM_LED_METERS+":";this.DIMVU.setPos(250,50+50*a++);this.DIMVU.setItems([lang.OFF,lang.ON]);this.DIMVU.getState=function(){this.state=settings.dimVUs?1:0};this.DIMVU.valueFunc=function(){settingsStorage.set("dimVUs",1==this.state);regUpdate(masterWidget)};this.PINSO=new SWITCHBOX(this);this.PINSO.label=lang.PIN_SLIDEOUT_IN_MIX_MODE+":";this.PINSO.setPos(250,50+50*a++);this.PINSO.setItems([lang.OFF,
lang.ON]);this.PINSO.getState=function(){this.state=settings.pinSlideOut?1:0};this.PINSO.valueFunc=function(){settingsStorage.set("pinSlideOut",1==this.state)};this.PINSOX=new SWITCHBOX(this);this.PINSOX.label=lang.PIN_SO_FOR_AUX_FX_SENDS+":";this.PINSOX.setPos(250,50+50*a++);this.PINSOX.setItems([lang.OFF,lang.ON]);this.PINSOX.getState=function(){this.state=settings.pinSlideOutX?1:0};this.PINSOX.valueFunc=function(){settingsStorage.set("pinSlideOutX",1==this.state)};this.KINETIC=new SWITCHBOX(this);
this.KINETIC.label=lang.KINETIC_SCROLL+":";this.KINETIC.setPos(250,50+50*a++);this.KINETIC.setItems([lang.OFF,lang.ON]);this.KINETIC.getState=function(){this.state=settings.kinetic?0:1};this.KINETIC.valueFunc=function(){settingsStorage.set("kinetic",0==this.state)};this.SWIPE=new SWITCHBOX(this);this.SWIPE.label=lang.MIXER_SCROLLING+":";this.SWIPE.setPos(250,50+50*a++);this.SWIPE.setItems([lang.ONE_FINGER,lang.TWO_FINGERS]);this.SWIPE.setItemWidth(90);this.SWIPE.getState=function(){this.state=settings.oneFingerScroll?
0:1};this.SWIPE.valueFunc=function(){settingsStorage.set("oneFingerScroll",0==this.state)};isLocal||(this.PATTERNED=new SWITCHBOX(this),this.PATTERNED.label=lang.PATTERNED_BACKGROUND+":",this.PATTERNED.setPos(250,50+50*a++),this.PATTERNED.setItems([lang.OFF,lang.ON]),this.PATTERNED.getState=function(){this.state=settings.patterned?1:0},this.PATTERNED.valueFunc=function(){settingsStorage.set("patterned",1==this.state);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)});
this.MOREMEPORTRAIT=new SWITCHBOX(this);this.MOREMEPORTRAIT.label=lang.MOREME_PORTRAIT_MODE+":";this.MOREMEPORTRAIT.setPos(250,50+50*a++);this.MOREMEPORTRAIT.setItems([lang.OFF,lang.ON]);this.MOREMEPORTRAIT.getState=function(){this.state=settings.moremeportrait?1:0};this.MOREMEPORTRAIT.valueFunc=function(){settingsStorage.set("moremeportrait",1==this.state);settingsStorage.save()};d=[this.DRAWRATE,this.DISABLESCALE,this.DISABLERETINA,this.DISABLEVU,this.MASTERLOCK,this.NUDGE,this.VUQUANTIZE,this.LANES,
this.DISABLEVU2,this.DISABLEVUGHOST,this.DISABLEVUPEAK,this.DIMVU,this.PINSO,this.PINSOX,this.KINETIC,this.SWIPE,this.PATTERNED,this.MOREMEPORTRAIT];for(c=0;c<d.length;c++)isDefined(d[c])&&d[c].setItemWidth(120);this.DRAWRATE.setItemWidth(60);this.LANES.setItemWidth(80);for(c=0;c<this.widgets.length;c++)this.widgets[c].labelColor="hsl("+20*c+",20%,78%)";var d=[lang.NEW_SNAPSHOT,lang.UPDATE_CURRENT_SNAPSHOT,lang.NEXT_SNAPSHOT,lang.PREVIOUS_SNAPSHOT,lang.PLAY],f=[E_FFUNC.NEWSNAP,E_FFUNC.UPDCURSNAP,
E_FFUNC.NEXT_SNAP,E_FFUNC.PREV_SNAP,E_FFUNC.PLAY];curSetup.rec&&(d.push(lang.RECORD),f.push(E_FFUNC.REC));HAVE_MTK&&(d.push(lang.MTK_PLAY,lang.MTK_RECORD),f.push(E_FFUNC.MTK_PLAY,E_FFUNC.MTK_REC));d.push(lang.MUTE_ALL,lang.DIM);f.push(E_FFUNC.MUTE_ALL,E_FFUNC.DIM);for(var e=[],c=0;c<d.length;c++)e.push("");this.F1FUNC=new RADIO(this);this.F1FUNC.setPos(720,this.MASTERLOCK.y+11+60);this.F1FUNC.setLabels(d);this.F1FUNC.getState=function(){var a=f.indexOf(settings.f1func);-1==a&&(settingsStorage.set("f1func",
E_FFUNC.PLAY),a=f.indexOf(settings.f1func));this.state=a};this.F1FUNC.onSelect=function(){settingsStorage.set("f1func",f[this.state]);prepareF1F2()};this.F2FUNC=new RADIO(this);this.F2FUNC.setPos(780,this.MASTERLOCK.y+11+60);this.F2FUNC.setLabels(e);this.F2FUNC.getState=function(){var a=f.indexOf(settings.f2func);-1==a&&(settingsStorage.set("f1func",E_FFUNC.PLAY),a=f.indexOf(settings.f2func));this.state=a};this.F2FUNC.onSelect=function(){settingsStorage.set("f2func",f[this.state]);prepareF1F2()};
this.LANG=new RADIO(this);this.LANG.setPos(720,this.F1FUNC.y+40*d.length+70);c=[langBase.en.lang,langBase.cn.lang];ENGLISH_ONLY&&c.pop();this.LANG.setLabels(c);this.LANG.getState=function(){switch(settings.lang){case "en":this.state=0;break;case "cn":this.state=1;break;case "de":this.state=2;break;case "fr":this.state=3;break;case "es":this.state=4;break;case "ru":this.state=5}};this.LANG.onSelect=function(){var a="en";switch(this.state){case 0:a="en";break;case 1:a="cn";break;case 2:a="de";break;
case 3:a="fr";break;case 4:a="es";break;case 5:a="ru"}settingsStorage.set("lang",a);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};a+=.5;this.IMPORTPRESETS=new MENUBUTTON(this);this.IMPORTPRESETS.setPos(250,50+50*a++);this.IMPORTPRESETS.w=180;this.IMPORTPRESETS.text=lang.IMPORT_ALL_PRESETS;this.IMPORTPRESETS.onPress=function(){confOk.valueFunc=function(){sendMessage(E_COMMANDS.IMPORT_PRESETS)};showConfBox(lang.IMPORT_ALL_PRESETS+"?")};this.EXPORTPRESETS=
new MENUBUTTON(this);this.EXPORTPRESETS.setPos(250,50+50*a++);this.EXPORTPRESETS.w=180;this.EXPORTPRESETS.text=lang.EXPORT_ALL_PRESETS;this.EXPORTPRESETS.onPress=function(){var a=new MODAL_LIST(null,E_COMMANDS.USB_LIST);a.title=lang.EXPORT_ALL_PRESETS;a.valueFunc=function(a){a?sendMessage(E_COMMANDS.EXPORT_PRESETS+"^"+a):showPopupMsg(lang.NO_USB_DEVICE_SELECTED)}};this.preset=new MENUBUTTON(this);this.preset.setSize(180,29);this.preset.setAnchors(250,50+50*a++);this.preset.text=lang.LOCAL_SETTINGS_PRESETS;
this.preset.color=color.red;this.preset.onPress=function(){b.showPresets()};this.reset=new MENUBUTTON(this);this.reset.setSize(180,29);this.reset.setAnchors(250,50+50*a++);this.reset.text=lang.RESET_LOCAL_SETTINGS;this.reset.color=color.red;this.reset.onPress=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,700):(localStorage.clear(),confOk.valueFunc=function(){location.reload()},showConfBox(lang.RELOAD_UI))};this.hh=50+50*a++},showPresets:function(){this.menu=new PRESET_MENU2(null,"ux",
this,this.color);regUpdate(this.menu)},savePreset:function(a){a=JSON.stringify(settings);log(a);return a},loadPreset:function(a,b){settings=JSON.parse(a);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI);drawAll()},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;this.maxY=this.hh-this.h;0>this.maxY&&(this.maxY=0);this.offsetY=bound(this.offsetY,0,this.maxY)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,this.offsetY,
this.w,this.h);ctx.textAlign="right";var a={shadow:Shadow.main};IS_UI_24&&(ctx.font=font.settings,ctx.fillStyle="#aba",this.SOLO_VOL&&ctx.drawText(lang.SOLO_LEVEL+":",this.SOLO_VOL.x-25,this.SOLO_VOL.y+29,a),ctx.drawText(lang.HP_VOLUME.format(1)+":",this.HP_L.x-25,this.HP_L.y+29,a),ctx.drawText(lang.HP_VOLUME.format(2)+":",this.HP_R.x-25,this.HP_R.y+29,a));ctx.font=font.editbox;ctx.fillStyle=color.yellow;this.PEDAL&&ctx.drawText(lang.PEDAL_FUNCTION,this.PEDAL.x+34,this.PEDAL.y-11,a);ctx.drawText(lang.BUTTON_FUNCTION,
this.F1FUNC.x-26,this.F1FUNC.y-18,a);ctx.drawText(lang.LANGUAGE,this.LANG.x-26,this.LANG.y-18,a);ctx.drawText(lang.GUI_PERFORMANCE+":",this.DRAWRATE.x-25,this.DRAWRATE.y-11,a);ctx.drawText(lang.SYNC_SELECTED_CH,this.SYNC.x+this.SYNC.w,this.SYNC.y-11,a);ctx.drawText(lang.GLOBAL+":",225,39,a);ctx.drawText(lang.LOCAL+":",this.MASTERLOCK.x-25,this.MASTERLOCK.y-13,a);ctx.drawText(lang.UTILITY+":",this.IMPORTPRESETS.x-25,this.IMPORTPRESETS.y-13,a);ctx.textAlign="left";ctx.fillStyle=color.tabText;ctx.drawText("F1",
this.F1FUNC.x+7,this.F1FUNC.y-18,a);ctx.drawText("F2",this.F2FUNC.x+7,this.F2FUNC.y-18,a);ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRoundRect(this.w-11,this.offsetY+2,10,this.h-4,4);ctx.fillStyle="rgba(255,255,255,0.4)";a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-11,this.offsetY+(2+this.offsetY/this.maxY*(this.h-4-a)|0),10,a,4)}}),PERM_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="PERM_PAGE";this.color=color.red;this.buttons=
[];this.auxs=[];this.initWidgets()},onShow:function(){},initWidgets:function(){var a=this,b=0;this.SETPASS=new CHECKBUTTON(this);this.SETPASS.setSize(160,40);this.SETPASS.setPos(60,70);this.SETPASS.getState=function(){this.text=(this.state=!!getValue("settings.block.pass"))?lang.DISABLE:lang.ENABLE};this.SETPASS.onToggleUp=function(){editOk.valueFunc=function(){var b=editBox2.value;b&&(setValue("settings.block.pass",b),settingsStorage.set("master_pass",b),regUpdate(a))};showEditBox2(lang.SET_MASTER_PASS,
"")};this.SETPASS.onToggleDown=function(){editOk.valueFunc=function(){var b=editBox2.value;b&&(getValue("settings.block.pass")==b?(setValue("settings.block.pass",""),setValue("settings.block.mode",0),settingsStorage.set("master_pass",""),showPopupMsg(lang.UNLOCKED)):showPopupMsg(lang.WRONG_PASSWORD),regUpdate(a))};showEditBox2(lang.ENTER_PASS_TO_UNLOCK,"")};this.LOGIN=new CHECKBUTTON(this);this.LOGIN.setSize(160,40);this.LOGIN.setPos(250,70);this.LOGIN.text=lang.LOG_IN;this.LOGIN.color=color.green;
this.LOGIN.getState=function(){var a=getValue("settings.block.pass");this.disabled=!a;this.text=lang.LOG_IN;if(a){if(this.state=a==settings.master_pass)this.text=lang.LOG_OUT}else this.state=0};this.LOGIN.onToggleUp=function(){editOk.valueFunc=function(){var b=editBox2.value;b&&(getValue("settings.block.pass")==b?(settingsStorage.set("master_pass",b),showPopupMsg(lang.LOGGED_IN)):showPopupMsg(lang.WRONG_PASSWORD),regUpdate(a))};showEditBox2(lang.ENTER_PASS,"")};this.LOGIN.onToggleDown=function(){settingsStorage.set("master_pass",
"");regUpdate(a);showPopupMsg(lang.LOGGED_OUT)};for(var c=[lang.AUX_LEVELS,lang.AUX_PROCESSING,lang.MIX_LEVELS,lang.MIX_PROCESSING,lang.MIX_GAIN,lang.PLAYER,lang.MASTER_LEVEL,lang.MASTER_PROCESSING,lang.SHOWS,lang.GLOBAL_SETTINGS],d="auxlvl auxproc mixlvl mixproc mixgain player mlvl mproc shows gsettings".split(" "),f=0;f<c.length;f++){var e=new SCheckBox(this);e.setSize(111,50);e.setPos(60+f%5*(e.w+15),180+80*(b+(5<=f)?1:0));e.font="14pt open_sans_condensedbold";e.mline=!0;e.text=c[f].replace(" ",
"<br>");e.kkk="settings.block."+d[f];e.color=color.green;e.getState=function(){this.state=getValue(this.kkk)||0;var a=getValue("settings.block.pass");this.disabled=!a||a!=settings.master_pass};e.onToggle=function(){setValue(this.kkk,this.state)};this.buttons.push(e)}for(f=b=0;f<curSetup.aux;f++)e=new SCheckBox(this),e.setSize(90,50),e.font="14pt open_sans_condensedbold",8==f&&b++,e.setPos(60+f%8*(e.w+15),390+80*b),e.text=lang.AUX+" "+(f+1),e.idx=f,e.kkk="perm_aux"+(f+1),e.color=color.green,e.getState=
function(){this.state=settingsStorage.get("perm_aux"+(this.idx+1));var a=getValue("settings.block.pass"),b=getValue("settings.block.auxlvl"),c=getValue("settings.block.auxproc");this.disabled=!(a&&(b||c))},e.onToggle=function(){settingsStorage.set("perm_aux"+(this.idx+1),this.state);switch(auxStrips[this.idx].getNameValue("stereoIndex")){case 0:this.idx<auxStrips.length&&settingsStorage.set("perm_aux"+(this.idx+2),this.state);regUpdate(a);break;case 1:0<this.idx&&settingsStorage.set("perm_aux"+this.idx,
this.state),regUpdate(a)}},this.buttons.push(e),this.auxs.push(e)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.white;ctx.fillText(lang.MASTER_PASSWORD_PROTECTION,60,50);ctx.fillStyle=color.yellow;ctx.fillText(lang.ALLOW_CLIENT_ACCESS_FOR+":",60,160);ctx.fillText(lang.LOCAL_AUX_CONTROL+":",60,370)}}),CASCADE_SUBPAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="CASCADE_SUBPAGE";
this.initWidgets()},initWidgets:function(){var a=0;this.cascade=new SWITCHBOX(this);this.cascade.label=lang.CASCADE+":";this.cascade.setPos(250,50+50*a++);this.cascade.setItemWidth(100);this.cascade.setItems([lang.DISABLE,lang.ENABLE]);a++;this.locate1=new MENUBUTTON(this);this.locate1.setAnchors(590,50+50*a,null,null);this.locate1.w=200;this.locate1.text="LOCATE UNIT 1";this.locate1.onPress=function(){};this.master=new SWITCHBOX(this);this.master.label=lang.CASCADE_MASTER+":";this.master.setPos(250,
50+50*a++);this.master.setItemWidth(100);this.master.setItems(["UNIT 1","UNIT 2"]);this.locate2=new MENUBUTTON(this);this.locate2.setAnchors(590,50+50*a,null,null);this.locate2.w=200;this.locate2.text="LOCATE UNIT 2";this.locate2.onPress=function(){};this.range=new SWITCHBOX(this);this.range.label=lang.MASTER_CHANNEL_RANGE+":";this.range.setPos(250,50+50*a++);this.range.setItemWidth(100);this.range.setItems(["1 - 24","25 - 48"])}}),ABOUTPage=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,
b){$super(b);this.widgetName="ABOUT";this.clickNum=0;this.CPY=new SButton(this);this.CPY.text=lang.COPY_TO_CLIPBOARD;this.CPY.w=150;this.CPY.onPress=function(){window.prompt("UNIQUE ID:",netConfig.uid||"unknown")}},onDown:function(a,b){var c=a-this.globalX(),d=b-this.globalY(),f=res.about.w(),e=res.about.h();isInRect((this.w-f)/2+3,(this.h-e)/2-100,f,e,c,d)&&(this.clickNum++,this.clickNum%10||window.open("/img1x/ui_about.png"),b=a=-1);this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){if(-1!=
this.pressPoint[0]){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)}},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;var a=this.w,b=res.about.w(),c=res.about.h(),d=(this.h-c)/2-100+c+80;2<a?(this.grd=ctx.createRadialGradient(a/
2,d,10,a/2,d,a/2),this.grd.addColorStop(0,"#0b1735"),this.grd.addColorStop(1,"#020203")):this.grd="#0b1735";a=(this.w-b)/2+3;d=(this.h-c)/2-100;this.CPY.setPos(a+207,d+(c+116))},paint:function(){ctx.fillStyle="#020203";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.grd;ctx.fillRect(0,0,this.w,this.h);var a=res.about.w(),b=res.about.h(),c=(this.h-b)/2-100;drawImage(res.about,(this.w-a)/2+3,c);ctx.textAlign="right";ctx.fillStyle=color.tabText;ctx.font="12pt open_sans_condensedbold";drawText("MODEL: "+
(netConfig.model||"unknown")+"<br>SERIAL: "+(netConfig.serial||"unknown")+"<br>FIRMWARE: "+(netConfig.firmware||"unknown")+"<br><br>UNIQUE ID: "+(netConfig.uid||"unknown"),this.w/2|0,c+(b+20),{align:"center",color:color.white});c=this.h-120;a=lang.COPYRIGHT_MSG;b=ctx.measureText("All third party marks are the trademarks of their respective owners. These marks are used to identify").width;drawText(a,(this.w-b)/2|0,c,{align:"left",color:color.white})}}),ROUTING_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,
b){$super(b);this.widgetName="SETTINGS_SUBPAGE";this.color=color.red;this.offsetY=this.mode=0;this.hh=this.maxY=900;this.needMoveEvt=this.needClip=!0;this.initWidgets()},setOffset:function(a){this.offsetY=bound(a|0,0,this.maxY);regUpdate(this)},onShow:function(){this.setOffset(0)},onDown:function(a,b,c){2<mouseTargets.length||isDefined(tHash[c])&&2<tHash[c].length||(this.lastPressPoint=this.pressPoint,this.pressPoint=[a,b+this.offsetY],this.ppy=this.offsetY+b,this.d=this.offsetY)},onMove:function(a,
b,c){2<mouseTargets.length||isDefined(tHash[c])&&2<tHash[c].length||this.setOffset(this.ppy-b)},onUp:function(a){if(!(2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length)){a=Date.now();var b=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),c=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);10>Math.abs(this.d-this.offsetY)&&30>b&&30>c&&a-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=a-DBL_CLK_TIME):this.lastClickTime=a}},onDouble:function(){setMode(E_MODE.MIX)},
onWheel:function(a){clearInterval(ticker);this.setOffset(this.offsetY-Math.round(a/3))},setMode:function(a){this.mode=a;this.grid.setMode(a);this.updateGeometry();regUpdate(this)},setSrc:function(a){this.grid.setSrc(a);regUpdate(this)},initWidgets:function(){var a=this;this.back=new MENUBUTTON(this);this.back.text="< "+lang.EDIT_CHANNEL;this.back.setAnchors(20,10,null,null);this.back.color=color.purple;this.back.w=200;this.back.h=40;this.back.onPress=function(){modeHistory.last()!=E_MODE.EDIT&&modeHistory.last()!=
E_MODE.PLAYER?(editWidget.setMode(editWidget.E_MODE.misc),setMode(E_MODE.EDIT)):modeBack()};this.clrArr=[color.orange,color.green,color.yellow];this.modes=new SWITCHBOX(this);this.modes.setItems([lang.INPUTS,lang.SOUNDCHECK]);this.modes.setItemWidth(180);this.modes.setAnchors(null,10,null,null);this.modes.h=40;this.modes.colors=this.clrArr;this.modes.font="18px open_sans_condensedbold";this.modes.getState=function(){this.state=a.grid.mode};this.modes.valueFunc=function(){a.setMode(this.state);regUpdate(a)};
this.grid=new R_GRID(this);this.grid.setAnchors(120,60,20,null);this.local=new CHECKBUTTON(this);this.local.setAnchors(20,81,null,null);this.local.color=this.local.textColor=color.LOCAL;this.local.mode=0;this.local.setSize(90,60);this.local.text=lang.LOCAL;this.local.getState=function(){this.state=a.grid.src==this.mode};this.local.onToggleUp=function(){a.grid.setSrc(this.mode);regUpdate(a)};this.usb=new CHECKBUTTON(this);this.usb.setAnchors(20,151,null,null);this.usb.color=this.usb.textColor=color.USB;
this.usb.mode=1;this.usb.setSize(90,60);this.usb.w=90;this.usb.text=lang.USB_A;this.usb.getState=function(){this.state=a.grid.src==this.mode};this.usb.onToggleUp=function(){a.grid.setSrc(this.mode);regUpdate(a)};ROUTING_TEST_MODE&&this.usb.hide();this.sd=new CHECKBUTTON(this);this.sd.setAnchors(20,221,null,null);this.sd.color=this.sd.textColor=color.SD;this.sd.mode=2;this.sd.setSize(90,60);this.sd.w=90;this.sd.text=lang.USB_B;this.sd.getState=function(){this.state=a.grid.src==this.mode};this.sd.onToggleUp=
function(){a.grid.setSrc(this.mode);regUpdate(a)};this.reset11=new MENUBUTTON(this);this.reset11.text=lang.PATCH_1_1;this.reset11.setAnchors(20,431,null,null);this.reset11.color=color.purple;this.reset11.w=90;this.reset11.h=40;this.reset11.onPress=function(){confOk.parSrc=a.grid.src;confOk.parMode=a.grid.mode;confOk.par1=a;confOk.valueFunc=function(){for(var a=0;a<this.par1.grid.channels.length;a++){var c=this.par1.grid.channels[a];if(1==this.parMode)switch(this.parSrc){case 0:c.type==E_STRIP_TYPE.IN&&
c.setNameValue("scsrc","hw."+c.subId);c.type==E_STRIP_TYPE.LINEIN&&c.setNameValue("scsrc","li."+c.subId);break;case 1:c.setNameValue("scsrc","ua."+a);break;case 2:c.setNameValue("scsrc","ub."+a)}else switch(this.parSrc){case 0:c.type==E_STRIP_TYPE.IN&&c.setNameValue("src","hw."+c.subId);c.type==E_STRIP_TYPE.LINEIN&&c.setNameValue("src","li."+c.subId);break;case 1:c.setNameValue("src","ua."+a);break;case 2:c.setNameValue("src","ub."+a)}}drawAll()};showConfBox(lang.PATCH_1_1)};this.reset=new MENUBUTTON(this);
this.reset.text=lang.RESET;this.reset.setAnchors(20,361,null,null);this.reset.color=color.purple;this.reset.w=90;this.reset.h=40;this.reset.onPress=function(){confOk.parSrc=a.grid.src;confOk.parMode=a.grid.mode;confOk.par1=a;confOk.valueFunc=function(){for(var a=0;a<this.par1.grid.channels.length;a++){var c=this.par1.grid.channels[a];1==this.parMode?c.setNameValue("scsrc",""):(c.type==E_STRIP_TYPE.IN&&c.setNameValue("src","hw."+c.subId),c.type==E_STRIP_TYPE.LINEIN&&c.setNameValue("src","li."+c.subId))}drawAll()};
showConfBox(lang.RESET)};this.scheck=new CHECKBUTTON(this);this.scheck.setAnchors(null,10,20,null);this.scheck.setSize(101,40);this.scheck.text=formatButtonText(lang.ACTIVATE_SOUNDCHECK);this.scheck.textColor=this.scheck.color=color.green;this.scheck.textColor2=color.white;this.scheck.setKey("var.mtk.soundcheck");this.scheck.regKey("var.mtk.soundcheck");this.scheck.onToggle=function(){updateByKey("var.mtk.soundcheck")}},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;
this.modes.x=220+(this.w-110-220-360)/2|0;this.hh=this.grid.y+this.grid.h+10;this.maxY=this.hh-this.h;0>this.maxY&&(this.maxY=0);this.offsetY=bound(this.offsetY,0,this.maxY)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,this.offsetY,this.w,this.h);if(this.hh>this.h){ctx.fillStyle="rgba(255,255,255,0.02)";ctx.fillRoundRect(this.w-10,this.offsetY+2,10,this.h-4,5);ctx.fillStyle="rgba(255,255,255,0.1)";var a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-10,this.offsetY+(2+
this.offsetY/this.maxY*(this.h-4-a)|0),10,a,5)}}}),R_GRID=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="R_GRID";this.needMoveEvt=!0;this.w=500;this.h=580;this.xHeight=21;this.yWidth=80;this.cols=20;this.rowH=this.rows=22;this.src=this.mode=0;this.topColor=color.LOCAL;this.clrArr=[color.LOCAL,color.USB,color.SD];this.haveSubs=!0;this.haveEth=!1;this.channels=inStrips;this.upd()},setMode:function(a){this.mode=a;this.upd();regUpdate(this)},setSrc:function(a){this.src=
a;this.upd();regUpdate(this)},upd:function(){var a=0;switch(this.mode){case 0:case 1:this.channels=inStrips.concat(lineinStrips);break;case 2:this.channels=[];for(var b=0;b<inStrips.length;b++)this.channels.push(inStrips[b]);for(b=0;b<lineinStrips.length;b++)this.channels.push(lineinStrips[b]);for(b=0;b<mediaStrips.length;b++)this.channels.push(mediaStrips[b]);if(this.haveSubs)for(b=0;b<subStrips.length;b++)this.channels.push(subStrips[b]);for(b=0;b<auxStrips.length;b++)this.channels.push(auxStrips[b]);
this.channels.push(masterWidget)}switch(this.src){case 0:a=curSetup.input+2;this.topColor=color.LOCAL;break;case 1:a=CASCADE_MODE?44:22;this.topColor=color.USB;break;case 2:a=CASCADE_MODE?64:32,this.topColor=color.SD}this.rows=this.channels.length;this.cols=a;this.h=this.xHeight+this.rows*this.rowH},onDown:function(a,b){this.onMove(a,b)},onMove:function(a,b){var c=b-this.globalY(),c=c-this.xHeight,c=c/this.rowH|0;0>c||c>=this.channels.length||(setSelected(this.channels[c].id),regUpdate(this.parent))},
paint:function(){var a=22;switch(this.src){case 0:a=22;break;case 1:a=22;break;case 2:a=32}this.cols=a;var b=this.w,c=this.h;ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,b,c);var d=this.yWidth,f=this.xHeight,b=(b-d)/this.cols|0,c=(c-f)/this.rows|0;ctx.fillStyle=color.black;ctx.fillRect(d,f,b*this.cols,c*this.rows);if(CASCADE_MODE){var e,g;ctx.fillStyle="rgba(255,255,100,0.04)";ctx.fillRect(d,f,b*a,c*a)}ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.beginPath();for(var h=0;h<=this.rows;h++)g=
f+c*h+.5,ctx.moveTo(0,g),ctx.lineTo(this.w,g);for(h=0;h<=this.cols;h++)e=d+b*h+.5,ctx.moveTo(e,0),ctx.lineTo(e,this.h);ctx.stroke();ctx.strokeStyle="#28292A";ctx.strokeRect(.5,.5,this.w,this.h);ctx.fillStyle=this.topColor;ctx.textAlign="center";ctx.textBaseline="middle";ctx.font="16px open_sans_condensedbold";800>this.w&&24<this.cols&&(ctx.font="13px open_sans_condensedbold");for(h=0;h<this.cols;h++)e=""+(h%a+1),0==this.src&&(20==h&&(e="LI L"),21==h&&(e="LI R")),ctx.drawText(e,d+(h+.5)*b,12,{max:b,
shadow:["#000",0,1,1]});ctx.textAlign="right";ctx.textBaseline="middle";ctx.font=(c-4|0)+"px open_sans_condensedbold";for(h=0;h<this.rows;h++)e=h,ctx.fillStyle=this.channels[e].color,ctx.drawText(this.channels[e].getLabel(),this.yWidth-4,f+(h+.5)*c,{max:this.yWidth,shadow:["#111",0,1,1]});ctx.lineWidth=2;for(h=0;h<this.channels.length;h++){a=this.channels[h];ctx.strokeStyle="hsla("+10*h+",50%,30%,0.8)";e=-1;switch(this.mode){case 0:if((g=a.getNameValue("src"))&&isString(g)){g=g.split(".");var l="hw"==
g[0]||"li"==g[0]?0:"ua"==g[0]?1:2;e=parseInt(g[1]);"li"==g[0]&&(e+=20)}break;case 1:if((g=a.getNameValue("scsrc"))&&isString(g)){g=g.split(".");var m="hw"==g[0]||"li"==g[0]?0:"ua"==g[0]?1:2;e=parseInt(g[1]);"li"==g[0]&&(e+=20)}break;case 2:if((g=getValue("ua."+h))&&isString(g)){g=g.split(".");var n=parseInputStr(g[0]);e=parseInt(g[1])}(g=getValue("ub."+h))&&isString(g)&&(g=g.split("."),n=parseInputStr(g[0]),e=parseInt(g[1]));(g=getValue("uc."+h))&&isString(g)&&(g=g.split("."),n=parseInputStr(g[0]),
e=parseInt(g[1]));(g=getValue("ud."+h))&&isString(g)&&(g=g.split("."),n=parseInputStr(g[0]),e=parseInt(g[1]))}-1!=e&&(a.id==selectedStrip.id&&(ctx.fillStyle="rgba(244,255,255,0.1)",ctx.fillRect(0,(h+1)*c-1,d+1,c+1)),0>e||0==this.mode&&l!=this.src||1==this.mode&&m!=this.src||2==this.mode&&0==n||2==this.mode&&n!=this.src||(a.id==selectedStrip.id&&(ctx.fillStyle="rgba(244,255,255,0.1)",ctx.fillRect(d+1,(h+1)*c-1,e*b+b|0,c+1),0<=e&&ctx.fillRect(d+e*b,0,b+1,f+h*c|0)),e=Math.floor(d+e*b+b/2)+.5,g=Math.floor(f+
h*c+c/2)+.5,ctx.beginPath(),ctx.moveTo(d+1,g),ctx.lineTo(e,g),ctx.lineTo(e,f+1),ctx.stroke()))}},drawLines:function(a,b,c){}});function parseInputStr(a){switch(a){case "hw":return 0;case "usb":return 1;case "sd":return 2}return-1}
var netConfig=null,NET_CFG=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="NET_CFG_PAGE";this.y=measures.topWidgetHeight;this.needClip=!0;this.mode=-1;this.color=color.blue;this.tabButtons=[];this.initWidgets();this.setMode(0)},onShow:function(){var a=this.pages[this.mode];if(isDefined(a))a.onShow()},setMode:function(a){this.mode=a;for(a=0;a<this.pages.length;a++)this.pages[a].hide();this.mode<this.pages.length&&this.pages[this.mode].show();regUpdate(this)},nextMode:function(){this.mode==
this.pages.length-1?this.setMode(0):this.setMode(this.mode+1)},initWidgets:function(){for(var a=["HOTSPOT","WI-FI","LAN","ADMIN PASS","STATE"],b=0;b<a.length;b++){var c=new TabButton(this);c.color=c.textColor="hsl("+32*(b+1)+",50%,45%)";c.mode=b;c.text=a[b];c.setSize(100,30);this.tabButtons.push(c)}this.pages=[];this.pages.push(new HOTSPOT_PAGE(this));this.pages.push(new SETTINGS_SUBPAGE(this));this.pages.push(new SETTINGS_SUBPAGE(this));this.pages.push(new SETTINGS_SUBPAGE(this));this.pages.push(new SETTINGS_SUBPAGE(this))},
calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;this.h=screenHeight-this.y;for(var a=0;a<this.tabButtons.length;a++)this.tabButtons[a].setPos(this.w-(this.tabButtons[a].w+1)*(this.tabButtons.length-a),5)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.tabButtons[this.mode].color;ctx.fillRect(4,35,this.w-4,4)}});function getNetValue(a){return netConfig[a]}function setNetValue(a,b){netConfig[a]=b;regUpdate(networkWidget)}
var HOTSPOT_PAGE=Class.create(SETTINGS_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="HOTSPOT_PAGE";this.initWidgets()},initWidgets:function(){var a=0;this.onoff=new SWITCHBOX(this);this.onoff.setPos(100,60+80*a++);this.onoff.setItems([lang.OFF,lang.ON]);this.onoff.setItemWidth(100);this.onoff.h=40;this.onoff.getState=function(){this.state=getNetValue("ap_enabled")?1:0};this.onoff.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setNetValue("ap_enabled",
this.state)};this.ssid=new INPUTBOX(this);this.ssid.setAnchors(100,60+80*a++);this.ssid.getState=function(){this.text=getNetValue("ap_ssid")};this.ssid.valueFunc=function(a){setNetValue("ap_ssid",a)};this.ssid_br=new SWITCHBOX(this);this.ssid_br.setPos(100,60+80*a++);this.ssid_br.setItems([lang.OFF,lang.ON]);this.ssid_br.setItemWidth(100);this.ssid_br.h=40;this.ssid_br.getState=function(){this.state=getNetValue("ap_ssid_mode")?1:0};this.ssid_br.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,
800):setNetValue("ap_ssid_mode",this.state)};var b={AL:"Albania",DZ:"Algeria",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BO:"Bolivia",BA:"Bosnia and Herzegovina",BR:"Brazil",BN:"Brunei Darussalam",BG:"Bulgaria",KH:"Cambodia",CA:"Canada",CL:"Chile",CN:"China",CO:"Colombia",CR:"Costa Rica",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DO:"Dominican Republic",EC:"Ecuador",
EG:"Egypt",SV:"El Salvador",EE:"Estonia",FI:"Finland",FR:"France",GE:"Georgia",DE:"Germany",GR:"Greece",GL:"Greenland",GD:"Grenada",GU:"Guam",GT:"Guatemala",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KR:"Korea",KW:"Kuwait",LV:"Latvia",LB:"Lebanon",LR:"Liberia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MY:"Malaysia",
MT:"Malta",MX:"Mexico",MC:"Monaco",MA:"Morocco",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NO:"Norway",OM:"Oman",PK:"Pakistan",PA:"Panama",PG:"Papua New Guinea",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SA:"Saudi Arabia",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",ZA:"South Africa",ES:"Spain",LK:"Sri Lanka",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",
TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam",YE:"Yemen",ZW:"Zimbabwe","00":"Other / Unlisted"},c=Object.keys(b),d=Object.keys(b).map(function(a){return b[a]});this.apcountry=new LIST(this);this.apcountry.setPos(100,60+80*a);this.apcountry.setItems(d);this.apcountry.h=240;this.apcountry.values=c;this.apcountry.getActiveItem=function(){var a=getNetValue("ap_country");
this.activeItemIdx=this.values.indexOf(a)};this.apchannel=new LIST(this);this.apchannel.setPos(500,60+80*a);this.apchannel.setItems(d);this.apchannel.h=240;this.apchannel.getActiveItem=function(){var a=getNetValue("ap_channel");this.activeItemIdx=this.items.indexOf(a)};a++;a++;a++;a++;this.apmode=new SWITCHBOX(this);this.apmode.setPos(100,60+80*a++);this.apmode.setItems(["NONE","WPA2"]);this.apmode.setItemWidth(100);this.apmode.h=40;this.apmode.getState=function(){this.state=getNetValue("ap_mode")?
1:0};this.apmode.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setNetValue("ap_mode",this.state)}},drawLabel:function(a,b){ctx.drawText(a,b.x,b.y-16,{color:color.white,align:"left",valign:"middle",font:font.editbox,shadow:Shadow.main})},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);this.drawLabel("Enable the Ui's internal Hotspot (AP)",this.onoff);this.drawLabel("SSID",this.ssid);this.drawLabel("SSID Broadcast",this.ssid_br);this.drawLabel("Wireless Regulatory Domain",
this.apcountry);this.drawLabel("Channel (ignored when remote WiFi is configured)",this.apchannel);this.drawLabel("Security",this.apmode)}});tvWidget=null;
var MODALS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MODALS";this.y=measures.topWidgetHeight;this.needClip=!0;this.mode=0;this.color=color.modal;this.initWidgets();this.setMode(0)},setMode:function(a){this.mode=a;this.pages.each(function(a){a.hide()});switch(a){case E_MODAL_MODE.TOTALVIEW:this.pages[0].show();break;case E_MODAL_MODE.MOREME:this.pages[1].show();break;case E_MODAL_MODE.MUTES:this.pages[2].show();break;case E_MODAL_MODE.VIEWS:this.pages[3].show();
break;case E_MODAL_MODE.SUBS:this.pages[4].show();break;case E_MODAL_MODE.VCA:this.pages[5].show()}this.color=this.clr[a];regUpdate(this)},nextMode:function(){this.mode==this.pages.length-1?this.setMode(0):this.setMode(this.mode+1)},onShow:function(){for(var a=0;a<this.pages.length;a++)if(this.pages[a].enabled)this.pages[a].onShow()},onHide:function(){for(var a=0;a<this.pages.length;a++)if(this.pages[a].enabled)this.pages[a].onHide()},initWidgets:function(){this.pages=[];this.pages.push(new METERS_PAGE(this));
var a=new MOREME(this);a.setAnchors(0,40,0,0);a.calcGeometry=function(){var a=this.w-40;this.ME_VU.w=.35*a|0;this.BAND_VU.w=.35*a|0;this.WHEEL.x=10+this.ME_VU.w+10;this.WHEEL.w=.3*a|0};this.pages.push(a);this.pages.push(new MUTESPAGE(this));this.pages.push(new VIEWSPAGE(this));this.pages.push(new SUBSPAGE(this));IS_UI_24&&this.pages.push(new VCAPAGE(this));tvWidget=this.pages[0];a=[lang.METERS,lang.MORE_ME,lang.MUTES,lang.VIEWS,lang.SUBS];this.clr=[color.yellow,color.orange,color.red,color.modal,
color.sub];IS_UI_24&&(a.push(lang.VCA),this.clr.push(color.green));for(var b=0;b<this.clr.length;b++)this.clr[b]=LightenDarkenColor(this.clr[b],16);this.tabButtons=[];for(b=0;b<a.length;b++){var c=new TabButton(this);c.mode=b;c.text=a[b];c.color=c.textColor=this.clr[b];c.setSize(112,30);this.tabButtons.push(c)}},calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;this.h=screenHeight-this.y;for(var a=0;a<this.tabButtons.length;a++)this.tabButtons[a].setPos(this.w-(this.tabButtons[a].w+
1)*(this.tabButtons.length-a),5)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.color;ctx.fillRect(4,35,this.w-4,4)}}),EMPTY_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EMPTY";this.y=40;this.enabled=!1;this.initWidgets()},initWidgets:function(){},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y-5},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;
ctx.textAlign="right";ctx.fillStyle=color.tabText;ctx.fillText(lang.EMPTY,214,50)}}),MUTESPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MUTESPAGE";this.y=40;this.enabled=!1;this.color=color.red;this.mode=0;this.initWidgets();this.setMode(0)},sync:function(){if(this.rename){var a="mg."+this.mode+".";this.rename.unRegAllKeys();this.rename.regKey(a+"name")}},onShow:function(){var a=this.BUTTONS.length;hideHPAUX?(this.BUTTONS[a-1].hide(),this.BUTTONS[a-2].hide()):
(this.BUTTONS[a-1].show(),this.BUTTONS[a-2].show())},onHide:function(){},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},
setMode:function(a){5<a||(this.mode=a,this.sync(),regUpdate(this))},initWidgets:function(){var a=this;this.VGB=[];for(var b=0;6>b;b++){var c=new TabButton(this);c.setPos(240+50*b,100);c.setSize(40,30);c.mode=b;c.text=""+(b+1);this.VGB.push(c)}this.bRESET=new MENUBUTTON(this);this.bRESET.setPos(40,38);this.bRESET.setSize(90,30);this.bRESET.text=lang.RESET;this.bRESET.onPress=function(){muteGroupReset(a.mode)};IS_UI_24&&(this.rename=new INPUTBOX(this),this.rename.setAnchors(340,38),this.rename.labelDX=
10,this.rename.w=190,this.rename.label=lang.GROUP_NAME+":",this.rename.getState=function(){this.text=getValue("mg."+a.mode+".name")||""},this.rename.valueFunc=function(b){setValue("mg."+a.mode+".name",b)});this.BUTTONS=[];var d=60,f=0,e=46;24<inStrips.length&&690>this.h&&(e=44,d=54);for(var g=mixerWidget.strips,b=0;b<g.length;b++)c=new CHECKBUTTON(this),0==b%8&&0!=b&&f++,c.setSize(90,e),c.setPos(40+100*(b-8*f),100+d*f),c.idx=b,c.st=g[b],c.text=g[b].text,c.textColor=g[b].color,c.getState=function(){this.state=
0!=(this.st.getNameValue("mgmask")&1<<this.parent.mode)?1:0;this.text=this.st.getName();this.textColor=this.st.getColor()},c.onToggleUp=function(){var b=1<<a.mode,c=mixerWidget.strips[this.idx].getNameValue("mgmask");mixerWidget.strips[this.idx].setNameValue("mgmask",c|b)},c.onToggleDown=function(){var b=1<<a.mode,c=mixerWidget.strips[this.idx].getNameValue("mgmask");mixerWidget.strips[this.idx].setNameValue("mgmask",c&~b);if(getValue("mgmask")&b){for(var d=c=0;d<mixerWidget.strips.length;d++)g[d].getNameValue("mgmask")&
b&&c++;0==c&&muteGroupOFF(a.mode)}},c.onToggle=function(){setValue("var.unsaved.mutegroups",1);regUpdate(a.bSAVE)},this.BUTTONS.push(c);f++;f+=.5;this.bSAVE=new MENUBUTTON(this);this.bSAVE.setAnchors(640,100+d*f,null,null);this.bSAVE.setSize(190,40);this.bSAVE.text=lang.SAVE_TO_SHOW;this.bSAVE.textColor=color.yellow;this.bSAVE.color=color.green;this.bSAVE.getState=function(){this.disabled=0==getValue("var.unsaved.mutegroups")};this.bSAVE.onPress=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,
1E3);else{var a=getValue("var.currentShow");0!=a.length&&(sendMessage(E_COMMANDS.SAVESHOW+"^"+a),setValue("var.unsaved.mutegroups",0))}}},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;for(var a=0;a<this.VGB.length;a++)this.VGB[a].setPos(this.w-326+50*a,38)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="right";ctx.fillStyle=color.white;ctx.fillText(lang.MUTE_GROUP_BUTTON_ASSIGN,this.w-80,26);for(var a=
getValue("mgmask"),b=0;6>b;b++)a&1<<b&&(ctx.fillStyle=this.color,ctx.fillRect(this.VGB[b].x,this.VGB[b].y+this.VGB[b].h+4,this.VGB[b].w,2))}}),VIEWSPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="VIEWSPAGE";this.y=40;this.enabled=!1;this.color=color.modal;this.viewNum=6;this.mode=0;this.initWidgets();this.setMode(0)},onShow:function(){var a=this.BUTTONS.length;this.BUTTONS.length&&(hideHPAUX?(this.BUTTONS[a-1].hide(),this.BUTTONS[a-2].hide()):(this.BUTTONS[a-1].show(),
this.BUTTONS[a-2].show()))},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},setMode:function(a){a>=this.viewNum||
(this.mode=a,regUpdate(this))},initWidgets:function(){var a=this;this.VGB=[];for(var b=0;b<this.viewNum;b++){var c=new TabButton(this);c.setPos(240+50*b,100);c.setSize(40,30);c.mode=b;c.text=""+(b+1);this.VGB.push(c)}this.bRESET=new MENUBUTTON(this);this.bRESET.setPos(40,38);this.bRESET.setSize(90,30);this.bRESET.text=lang.RESET;this.bRESET.onPress=function(){var b=a.mode;settings.viewGroups[b]=[];settingsStorage.put("viewGroups",settings.viewGroups);0<=b&&activeViewGroup==b&&mixerWidget.showViewGroup(activeViewGroup);
regUpdate(a)};IS_UI_24&&(this.rename=new INPUTBOX(this),this.rename.setAnchors(340,38),this.rename.labelDX=10,this.rename.w=190,this.rename.label=lang.GROUP_NAME+":",this.rename.getState=function(){this.text=settings.viewGroupsNames[a.mode]},this.rename.valueFunc=function(b){settings.viewGroupsNames[a.mode]=(b||"").trim();settingsStorage.put("viewGroupsNames",settings.viewGroupsNames)});this.BUTTONS=[];var d=60,f=0,e=46;24<inStrips.length&&690>this.h&&(e=44,d=54);for(var g=mixerWidget.strips,b=0;b<
g.length;b++)c=new SLOTBUTTON(this),c.showIndex=!0,0==b%8&&0!=b&&f++,c.setSize(90,e),c.setPos(40+(c.w+10)*(b-8*f),100+d*f),c.idx=b,c.st=g[b],c.id=g[b].id,c.text=g[b].text,c.textColor=g[b].color,c.getState=function(){var b=settings.viewGroups[a.mode]||[];this.state=-1!=b.indexOf(this.id);this.text=this.st.getName();this.textColorMain=this.textColor=this.st.getColor();b=b.indexOf(this.id);this.idxText=""+(-1==b?"":b+1)},c.onToggleUp=function(){var b=settings.viewGroups[a.mode]||[];-1==b.indexOf(this.id)&&
b.push(this.id);settingsStorage.put("viewGroups",settings.viewGroups);activeViewGroup==a.mode&&mixerWidget.showViewGroup(a.mode);regUpdate(a)},c.onToggleDown=function(){var b=settings.viewGroups[a.mode]||[],c=b.indexOf(this.id);-1!=c&&b.splice(c,1);settingsStorage.put("viewGroups",settings.viewGroups);activeViewGroup==a.mode&&mixerWidget.showViewGroup(a.mode);regUpdate(a)},this.BUTTONS.push(c)},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;for(var a=0;a<this.VGB.length;a++)this.VGB[a].setPos(this.w-
326+50*a,38)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="right";ctx.fillStyle=color.white;ctx.fillText(lang.VIEW_GROUP_BUTTON_ASSIGN,this.w-80,26);if(0<=activeViewGroup&&10>activeViewGroup){var a=activeViewGroup;ctx.fillStyle=this.color;isDefined(this.VGB[a])&&ctx.fillRect(this.VGB[a].x,this.VGB[a].y+this.VGB[a].h+4,this.VGB[a].w,2)}}}),SUBSPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SUBSPAGE";
this.y=40;this.enabled=!1;this.color=color.sub;this.mode=-1;this.initWidgets();this.setMode(0)},sync:function(){if(this.rename){var a="s."+this.mode+".";this.rename.unRegAllKeys();this.rename.regKey(a+"name")}},setMode:function(a){a>=curSetup.sub||(this.mode=a,this.sync(),regUpdate(this))},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);
2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},initWidgets:function(){var a=this;this.VGB=[];for(var b=0;b<curSetup.sub;b++){var c=new TabButton(this);c.setPos(240+50*b,100);c.setSize(40,30);c.mode=b;c.text=""+(b+1);this.VGB.push(c)}this.bRESET=new MENUBUTTON(this);this.bRESET.setPos(40,38);this.bRESET.setSize(90,30);this.bRESET.text=
lang.RESET;this.bRESET.onPress=function(){for(var b=0;b<allStrips.length;b++)allStrips[b].type!=E_STRIP_TYPE.AUX&&allStrips[b].type!=E_STRIP_TYPE.FX&&allStrips[b].type!=E_STRIP_TYPE.SUB&&allStrips[b].getNameValue("subgroup")==a.mode&&allStrips[b].setNameValue("subgroup",-1);activeSubGroup==a.mode&&mixerWidget.showSG(a.mode)};IS_UI_24&&(this.rename=new INPUTBOX(this),this.rename.setAnchors(340,38),this.rename.labelDX=10,this.rename.w=190,this.rename.label=lang.GROUP_NAME+":",this.rename.getState=function(){this.text=
getValue("s."+a.mode+".name")||""},this.rename.valueFunc=function(b){setValue("s."+a.mode+".name",b)});this.BUTTONS=[];var d=60,f=0,e=46;24<inStrips.length&&690>this.h&&(e=44,d=54);for(b=0;b<allStrips.length;b++){switch(allStrips[b].type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:break;default:continue}c=new CHECKBUTTON(this);0==b%8&&0!=b&&f++;c.setSize(90,e);c.setPos(40+(c.w+10)*(b-8*f),100+d*f);c.idx=b;c.id=allStrips[b].id;c.text=allStrips[b].text;c.textColor=allStrips[b].color;
c.getState=function(){this.state=allStrips[this.idx].getNameValue("subgroup")==a.mode;this.text=allStrips[this.idx].getName()};c.onToggleUp=function(){setValue(allStrips[this.id].name+"subgroup",a.mode);activeSubGroup==a.mode&&mixerWidget.showSG(a.mode)};c.onToggleDown=function(){setValue(allStrips[this.id].name+"subgroup",-1);activeSubGroup==a.mode&&mixerWidget.showSG(a.mode)};this.BUTTONS.push(c)}},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;for(var a=0;a<this.VGB.length;a++)this.VGB[a].setPos(this.w-
326+50*a,38)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="right";ctx.fillStyle=color.white;ctx.fillText(lang.SUB_GROUP_FADER_ASSIGN,this.w-90,26);0<=activeSubGroup&&(ctx.fillStyle=this.color,ctx.fillRect(this.w-325+50*activeSubGroup,74,38,2))}}),VCAPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="VCAPAGE";this.y=40;this.enabled=!1;this.color=color.green;this.mode=0;this.initWidgets();this.setMode(0)},
sync:function(){var a="v."+this.mode+".";this.rename.unRegAllKeys();this.rename.regKey(a+"name")},onShow:function(){},onHide:function(){},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=
b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},setMode:function(a){5<a||(this.mode=a,this.sync(),regUpdate(this))},initWidgets:function(){var a=this;this.VGB=[];for(var b=0;6>b;b++){var c=new TabButton(this);c.setPos(240+50*b,100);c.setSize(40,30);c.mode=b;c.text=""+(b+1);this.VGB.push(c)}this.BUTTONS=[];this.bRESET=new MENUBUTTON(this);this.bRESET.setPos(40,38);this.bRESET.setSize(90,30);this.bRESET.text=lang.RESET;this.bRESET.onPress=function(){for(var b=0;b<allStrips.length;b++){var c=
allStrips[b];c.haveVCA&&c.getNameValue("vca")==a.mode&&c.setNameValue("vca",-1)}regUpdate(a)};this.rename=new INPUTBOX(this);this.rename.setAnchors(340,38);this.rename.labelDX=10;this.rename.w=190;this.rename.label=lang.GROUP_NAME+":";this.rename.getState=function(){this.text=getValue("v."+a.mode+".name")||""};this.rename.valueFunc=function(b){setValue("v."+a.mode+".name",b)};var d=60,f=0,e=46;24<inStrips.length&&690>this.h&&(e=44,d=54);for(b=0;b<allStrips.length;b++){var g=allStrips[b];g.haveVCA&&
(c=new CHECKBUTTON(this),0==b%8&&0!=b&&f++,c.setSize(90,e),c.setPos(40+100*(b-8*f),100+d*f),c.idx=b,c.text=g.text,c.st=g,c.textColor=g.color,c.regKey(g.name+"vca"),c.getState=function(){var a=this.st;this.state=a.getNameValue("vca")==this.parent.mode?1:0;this.text=a.getName()},c.onToggleUp=function(){this.st.setNameValue("vca",this.parent.mode);regUpdate(a)},c.onToggleDown=function(){this.st.setNameValue("vca",-1);regUpdate(a)},this.BUTTONS.push(c))}f++},calcGeometry:function(){this.w=this.parent.w-
this.x;this.h=this.parent.h-this.y;for(var a=0;a<this.VGB.length;a++)this.VGB[a].setPos(this.w-326+50*a,38)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="right";ctx.fillStyle=color.white;ctx.fillText(lang.VCA_GROUP_BUTTON_ASSIGN,this.w-80,26)}}),INPUTBOX=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="INPUTBOX";this.text="";this.w=200;this.h=30;this.bg=color.eqBg;this.border=color.tabText;this.color="#fefefe";
this.label=null;this.info="";this.readOnly=this.passMode=!1;this.labelColor="#ccc";this.borderColor="#535457";this.labelDX=28},valueFunc:function(a){showPopupMsg(a)},onUp:function(){if(!this.readOnly){var a=this;editOk.valueFunc=function(){var b=editBox2.value;null!=b&&(a.valueFunc(b),regUpdate(a))};showEditBox2(this.info,this.passMode?"":this.text)}},getState:function(){},paint:function(){this.getState();ctx.fillStyle="#111";ctx.fillRect(0,0,this.w,this.h);ctx.strokeStyle=this.borderColor;ctx.strokeRect(.5,
.5,this.w,this.h);ctx.font=font.settings;ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillStyle=this.color;ctx.fillText(this.passMode?"*****":this.text,this.w/2,this.h/2);this.label&&this.label.length&&(ctx.fillStyle=this.bg,ctx.fillRect(0,0,-(ctx.measureText(this.label).width+this.labelDX),this.h),ctx.fillStyle=this.labelColor,ctx.textAlign="right",ctx.drawText(this.label,-this.labelDX,this.h/2|0,{max:220,shadow:Shadow.main}))}}),RADIO=Class.create(Widget,{initialize:function($super,b){$super(b);
this.widgetName="RADIO";this.state=0;this.h=this.w=26;this.bg=color.eqBg;this.border=color.tabText;this.labels=[];this.items=null;this.label="";this.rh=40;this.d=14;this.readOnly=!1},setItems:function(a){this.items=a},setLabels:function(a){this.h=a.length*this.rh;this.labels=a},onDown:function(a,b){if(!this.readOnly){var c=(b-this.globalY())/this.rh|0;this.state!=c&&(this.state=c,this.onSelect(),regUpdate(this.parent))}},onSelect:function(){this.key&&this.setVal(this.items?this.items[this.state]:
this.state)},getState:function(){this.key&&(this.state=this.getVal(),this.items&&(this.state=this.items.indexOf(this.state)))},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);for(var a=0;a<this.labels.length;a++){var b=Math.round(this.rh*a);ctx.strokeStyle=this.border;ctx.lineWidth=2;ctx.beginPath();ctx.arc(15,b+15,this.d,0,2*Math.PI);ctx.stroke();ctx.closePath();this.state==a&&(ctx.beginPath(),ctx.arc(15,b+15,this.d-6,0,2*Math.PI),ctx.fillStyle=color.red,
ctx.fill(),ctx.lineWidth=2,ctx.strokeStyle="#ccc",ctx.stroke());this.labels[a]&&(ctx.fillStyle=color.eqBg,ctx.fillRect(0,b,-(ctx.measureText(this.labels[a]).width+30),this.rh),ctx.font=font.settings,ctx.fillStyle=color.tabText,ctx.textAlign="right",ctx.drawText(this.labels[a],-26,b+.5*this.rh,{shadow:Shadow.main}))}}}),LOCK=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="LOCK";this.w=120;this.h=40;this.bg=color.eqBg;this.border=color.tabText;this.color=color.red;this.label=
lang.LOCK+":";this.borderColor="#535457";this.state=!1},onDown:function(){this.state=!this.state;this.valueFunc();regUpdate(this.parent)},valueFunc:function(){log(this.widgetName+": "+this.state)},getState:function(){},paint:function(){this.getState();var a=this.w/2|0;ctx.fillStyle=this.bg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(0,this.h,this.w,-10);ctx.fillStyle=this.color;this.state?ctx.fillRect(this.w/2,0,this.w/2,this.h):ctx.fillRect(0,0,this.w/2,this.h);
ctx.font="18px open_sans_condensedbold";ctx.fillStyle=color.tabText;ctx.setShadow(color.black,3,1,1);ctx.textAlign="center";ctx.fillStyle=1==this.state?color.tabTextSel:color.tabText;ctx.fillText(lang.ON,this.w/4*3,this.h-12,a-4);ctx.fillStyle=0==this.state?color.tabTextSel:color.tabText;ctx.fillText(lang.OFF,this.w/4,this.h-12,a-4);ctx.shadowColor="transparent";ctx.strokeStyle=this.borderColor;ctx.strokeRect(.5,.5,this.w,this.h);this.label.length&&(ctx.fillStyle=color.tabText,ctx.textAlign="right",
ctx.fillText(this.label,-26,this.h-9))}}),SWITCHBOX=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SWITCHBOX";this.w=100;this.h=30;this.bg=color.eqBg;this.border=color.tabText;this.color=color.red;this.colors=null;this.borderColor="#535457";this.textColor="black";this.labelColor=color.tabText;this.label="";this.font=font.settings;this.state=0;this.disabled=!1;this.items=[lang.ON,lang.OFF];this.itemW=50;this.readOnly=!1;this.disableOnNegative=!0},setState:function(a){this.state=
bound(a,0,this.items.length-1);this.key&&setValue(this.key,this.state);this.valueFunc();this.onValue();regUpdate(this)},setItems:function(a){this.w=a.length*this.itemW;this.items=a},setItemWidth:function(a){this.itemW=a;this.w=this.items.length*this.itemW},checkNewState:function(a){return!0},onDown:function(a,b){if(!(this.disableOnNegative&&0>this.state||this.readOnly||this.disabled)){var c=(a-this.globalX())/this.itemW|0,c=bound(c,0,this.items.length-1);if(this.state==c&&2==this.items.length)switch(this.state){case 0:this.setState(1);
break;case 1:this.setState(0)}else this.setState(c);this.key&&setValue(this.key,this.state);this.valueFunc();this.onValue();regUpdate(this)}},valueFunc:function(){},onValue:function(){},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(0,0,0,0)");this.grd.addColorStop(.5,"rgba(0,0,0,0.3)");this.grd.addColorStop(1,"rgba(0,0,0,0)")},getState:function(){},paint:function(){this.key&&(this.state=getValue(this.key));this.getState();-1==this.state&&(ctx.globalAlpha=
.3);this.disabled&&(ctx.globalAlpha=.3);ctx.fillStyle=this.bg;ctx.fillRect(0,0,this.w,this.h);ctx.font=this.font;ctx.textAlign="center";ctx.textBaseline="middle";for(var a=0;a<this.items.length;a++)a===this.state?(ctx.beginPath(),ctx.fillStyle=this.color,this.colors&&(ctx.fillStyle=this.colors[a]),ctx.rect(a*this.itemW+1,1,this.itemW-1,this.h-2),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill(),ctx.strokeStyle=this.borderColor,ctx.strokeRect(.5+a*this.itemW,.5,this.itemW,this.h-1)):(ctx.strokeStyle=this.borderColor,
ctx.strokeRect(.5+a*this.itemW,.5,this.itemW,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1+a*this.itemW,this.h,this.itemW-1,-10)),ctx.fillStyle=color.white,this.colors&&a!==this.state&&(ctx.fillStyle=this.colors[a]),ctx.drawText(this.items[a],(a+.5)*this.itemW|0,this.h/2|0,{max:this.itemW-4,shadow:Shadow.main});this.label&&this.label.length&&(ctx.fillStyle=color.eqBg,ctx.fillRect(0,0,-(ctx.measureText(this.label).width+28),this.h),ctx.fillStyle=this.labelColor,ctx.textAlign="right",
ctx.drawText(this.label,-26,this.h/2|0,{max:220,shadow:Shadow.main}))}}),HSWITCHBOX=Class.create(Widget,{}),CHECKBUTTON=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MENU_CHECKBUTTON";this.w=70;this.h=30;this.state=!1;this.color=null;this.text="TEXT";this.font=font.tabText;this.needBG=!0;this.bgColor=color.eqBg;this.strokeColor=color.tabStroke;this.textColor=color.tabText;this.textColor2=null;this.hidden=this.disabled=!1;this.dy=18},onDown:function(){if(!this.disabled&&
!this.hidden&&this.check()){if(this.state=!this.state)this.onToggleUp();else this.onToggleDown();null!=this.key&&this.setVal(fromBool(this.state));this.onToggle();this.valueFunc();regUpdate(this)}},check:function(){return!0},setState:function(a,b){isDefined(b)||(b=!0);null!=this.key&&(this.state=this.getVal());this.getState();if(this.state!=a){if(this.state=a)this.onToggleUp();else this.onToggleDown();null!=this.key&&this.setVal(fromBool(this.state));this.onToggle();this.valueFunc();b&&regUpdate(this)}},
onToggle:function(){},onToggleUp:function(){},onToggleDown:function(){},valueFunc:function(){},getState:function(){},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();this.hidden||(ctx.fillStyle=this.bgColor,ctx.fillRect(-1,-1,this.w+2,this.h+2),this.disabled&&(ctx.globalAlpha=.3),this.state?(ctx.fillStyle=hexToRGBA(this.color?this.color:this.parent.color,.5),ctx.fillRect(0,0,this.w,this.h),ctx.lineWidth=1,ctx.strokeStyle=this.color?this.color:this.parent.color,ctx.strokeRect(.5,
.5,this.w-1,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.font=this.font,ctx.drawText(this.text,this.w/2,this.h/2,{align:"center",valign:"middle",max:this.w-4,dy:this.dy,color:this.textColor2||this.textColor,shadow:[color.black,0,1,1]})):(ctx.strokeStyle=this.strokeColor,ctx.strokeRect(.5,.5,this.w-1,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.font=this.font,ctx.drawText(this.text,this.w/2,this.h/2,{align:"center",
valign:"middle",max:this.w-4,color:this.textColor,dy:this.dy,shadow:[color.black,0,1,1]})))}}),MENUBUTTON=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MENU_BUTTON";this.w=70;this.h=30;this.state=0;this.color=null;this.bg=color.eqBg;this.text="TEXT";this.textColor=color.tabText;this.needBG=!0;this.dimmed=this.disabled=!1},onDown:function(){this.disabled||this.dimmed||(this.state=1,regUpdate(this.parent))},onUp:function(){this.disabled||this.dimmed||(this.state=0,regUpdate(this.parent),
this.onPress())},onPress:function(){},valueFunc:function(){},getState:function(){},paint:function(){this.getState();this.disabled||(ctx.fillStyle=this.bg,ctx.fillRect(0,0,this.w,this.h),0==this.state?(this.dimmed&&(ctx.globalAlpha=.4),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.lineWidth=1,ctx.strokeStyle=color.tabStroke,ctx.strokeRect(.5,.5,this.w-1,this.h-2),ctx.font=font.tabText,ctx.fillStyle=this.textColor,ctx.textAlign="center"):(ctx.globalAlpha=.5,ctx.fillStyle=
this.color?this.color:this.parent.color,ctx.fillRect(0,0,this.w,this.h),ctx.globalAlpha=1,this.dimmed&&(ctx.globalAlpha=.4),ctx.lineWidth=1,ctx.strokeStyle=this.color?this.color:this.parent.color,ctx.strokeRect(.5,.5,this.w-1,this.h-2),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.font=font.tabText,ctx.textAlign="center",ctx.fillStyle=color.black,ctx.fillText(this.text,this.w/2+1|0,this.h/2+7|0,this.w-4),ctx.fillStyle=color.tabTextSel),ctx.fillText(this.text,this.w/
2|0,(this.h/2|0)+6,this.w-4),this.dimmed&&(ctx.globalAlpha=1))}}),SLOTBUTTON=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SLOTBUTTON";this.w=70;this.h=30;this.state=!1;this.color=null;this.text="TEXT";this.idxText="";this.font=font.tabText;this.font2="10pt open_sans_condensedbold";this.needBG=!0;this.textColor=color.tabText;this.textColor2=null;this.textColorMain=color.white;this.indexColor="#ccd";this.hidden=this.disabled=!1;this.showIndex=!0},onDown:function(){if(!this.disabled&&
!this.hidden){if(this.state=!this.state)this.onToggleUp();else this.onToggleDown();null!=this.key&&this.setVal(fromBool(this.state));this.onToggle();this.valueFunc();regUpdate(this)}},onToggle:function(){},onToggleUp:function(){},onToggleDown:function(){},valueFunc:function(){},getState:function(){},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();this.hidden||(ctx.fillStyle=color.eqBg,ctx.fillRect(-1,-1,this.w+2,this.h+2),this.disabled&&(ctx.globalAlpha=.3),this.state?
(ctx.fillStyle=hexToRGBA(this.color?this.color:this.parent.color,.5),ctx.fillRect(0,0,this.w,this.h),ctx.lineWidth=1,ctx.strokeStyle=this.color?this.color:this.parent.color,ctx.strokeRect(.5,.5,this.w-1,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.drawText(this.text,this.w/2,this.h/2,{align:"center",valign:"middle",max:this.w-4,font:this.font,color:this.textColor2||this.textColor,shadow:[color.black,0,1,1]})):(ctx.lineWidth=1,ctx.strokeStyle=color.tabStroke,
ctx.strokeRect(.5,.5,this.w-1,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1,this.h,this.w-2,-10),ctx.drawText(this.text,this.w/2,this.h/2,{align:"center",valign:"middle",max:this.w-4,font:this.font,color:this.textColorMain,shadow:[color.black,0,1,1]})),this.showIndex&&ctx.drawText(""+this.idxText,this.w-3,9,{align:"right",valign:"middle",font:this.font2,color:this.indexColor,shadow:[color.black,0,1,1]}))}});scrollingWidget=null;
var LIST=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MENU_LIST";this.h=this.w=300;this.needMoveEvt=this.needClip=!0;this.lastClickTime=0;this.items=["  Loading..."];this.items2=[];this.selectedIdx=this.selected=-1;this.selectedItem=null;this.prevSelected=this.hoverIdx=this.activeItemIdx=-1;this.filterValue="f:";this.filter=!1;this.font="16pt open_sans_condensedbold";this.itemH=40;this.maxVOffset=this.vOffsetOld=this.vOffset=0;this.vScrollEnabled=!0;this.vScrollWidth=
8;this.borderColor="#666";this.bgColor=color.presetBg;this.textColor=color.white;this.selTextColor="#111";this.selItemColor="#eee";this.activeTextColor="#e33";this.selectCanceled=this.snapList=this.showList=!1;this.listsOffsets={};this.scrollByScroller=!1},setFilter:function(a){clearInterval(ticker);null!=this.filterValue&&(this.listsOffsets[this.filterValue]=this.vOffset);this.filterValue=a;this.setItems(this.items2);this.filterValue in this.listsOffsets?this.setOffset(this.listsOffsets[this.filterValue]):
this.setOffset(0);regUpdate(this)},onSetItems:function(){},setItems:function(a){if(Array.isArray(a)){if(this.filter){this.items2=a;var b=this.filterValue;this.items=a.filter(function(a){return a.startsWith(b)})}else this.items=a;this.maxVOffset=this.items.length*this.itemH-this.h;0>this.maxVOffset&&(this.maxVOffset=0);this.vOffset>this.maxVOffset&&this.setOffset(this.maxVOffset);this.onSetItems();this.onSetItems=function(){};regUpdate(this)}},addItem:function(a){this.items.push(a);regUpdate(this)},
clear:function(){this.items.clear();this.clearSelection()},getActiveItem:function(){},selItem:function(){return 0>this.selected||this.selected>=this.items.length?null:this.items[this.selected]},select:function(a,b){if(!(a>=this.items.length)){0>a?(this.selectedIdx=this.selected=-1,this.selectedItem=null):(this.selectedIdx=this.selected=a,this.selectedItem=this.items[a]);if(!isDefined(b))this.onSelect();regUpdate(this)}},selectByName:function(a){a=this.items.indexOf(a);0<=a&&this.select(a);regUpdate(this)},
selectLast:function(){0!=this.items.length&&this.select(this.items.length-1)},clearSelection:function(){this.select(-1)},setOffset:function(a){this.vOffsetOld=this.vOffset=bound(a|0,0,this.maxVOffset);regUpdate(this)},onResize:function(){this.maxVOffset=this.items.length*this.itemH-this.h;0>this.maxVOffset&&(this.maxVOffset=0);this.vOffset>this.maxVOffset&&this.setOffset(this.maxVOffset)},onDown:function(a,b){var c=b-this.globalY(),d=a-this.globalX();this.pressPoint=[d,c];this.selectCanceled=!1;this.vScrollEnabled&&
d>this.w-this.vScrollWidth-2?this.selectCanceled=this.scrollByScroller=!0:(this.scrollByScroller=!1,this.hoverIdx=Math.floor((this.pressPoint[1]+this.vOffset)/this.itemH));!this.scrollByScroller&&0<this.maxVOffset&&this.velStart();regUpdate(this);this.onMove(a,b)},onMove:function(a,b){var c=b-this.globalY();this.globalX();var d=c-this.pressPoint[1];this.vOffset=this.scrollByScroller?bound(c/this.h*this.maxVOffset,0,this.maxVOffset):bound(this.vOffsetOld-d,0,this.maxVOffset);regUpdate(this);!this.selectCanceled&&
5<Math.abs(d)&&(this.selectCanceled=!0)},onUp:function(){if(!this.selectCanceled){var a=Math.floor((this.pressPoint[1]+this.vOffset)/this.itemH);this.selected!=a&&this.select(a)}this.onPress();var a=Date.now(),b=this.items.length*this.itemH;if(!this.selectCanceled&&this.pressPoint[1]+this.vOffset<=b&&this.prevSelected==this.selectedIdx&&a-this.lastClickTime<DBL_CLK_TIME)this.onDClick();this.lastClickTime=a;this.prevSelected=this.selectedIdx;this.hoverIdx=-1;this.vOffsetOld=this.vOffset;this.pressPoint=
[-1,-1];!this.scrollByScroller&&0<this.maxVOffset&&this.velRelease();regUpdate(this)},onWheel:function(a){clearInterval(ticker);this.setOffset(this.vOffset-Math.round(a/6))},velStart:function(){velocity=amplitude=0;timestamp=Date.now();clearInterval(ticker);frame=this.vOffset;scrollingWidget=this;ticker=setInterval(this.velTrack,20)},velTrack:function(){var a,b;a=Date.now();b=a-timestamp;timestamp=a;a=scrollingWidget.vOffset-frame;frame=scrollingWidget.vOffset;velocity=1E3*a/(1+b)*.8+.2*velocity},
velRelease:function(){clearInterval(ticker);10<Math.abs(velocity)&&this.mScroll(velocity)},mScroll:function(a){if(!settings.kinetic){position=this.vOffset;amplitude=.3*a;step=0;var b=this;clearInterval(ticker);ticker=setInterval(function(){var a=amplitude/20;position+=a;amplitude-=a;step+=1;80<step&&clearInterval(ticker);(0>=position||position>b.maxVOffset)&&clearInterval(ticker);scrollingWidget.vOffset!=(position|0)&&scrollingWidget.setOffset(position|0)},20)}},gotoSelected:function(){0>this.selected||
this.selected>=this.items.length||this.setOffset(this.selected*this.itemH-this.h/2)},gotoActive:function(){0>this.activeItemIdx||this.activeItemIdx>=this.items.length||this.setOffset(this.activeItemIdx*this.itemH-this.h/2)},onDClick:function(){},onSelect:function(){},onPress:function(){},valueFunc:function(){},calcGeometry:function(){this.maxVOffset=this.items.length*this.itemH-this.h;0>this.maxVOffset&&(this.maxVOffset=0);this.vOffset>this.maxVOffset&&this.setOffset(this.maxVOffset)},calcSize:function(){this.h=
this.items.length*this.itemH;this.parent&&regUpdate(this.parent)},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);this.getActiveItem();var a=this.items.length*this.itemH;this.vScrollEnabled=a>this.h?!0:!1;var b=this.w-1;ctx.font=this.font;ctx.textAlign="left";ctx.shadowColor="transparent";ctx.textBaseline="middle";var c=this.itemH/2|0;ctx.setShadow(color.black,0,1,1);for(var d=0;d<this.items.length;d++){var f=d*this.itemH-this.vOffset;if(!(f<-this.itemH||f>this.h)){this.selected==
d&&(ctx.fillStyle=this.selItemColor,ctx.fillRect(0,f,b,this.itemH));this.hoverIdx==d&&(ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,f,b,this.itemH));ctx.fillStyle=this.selected==d?this.selTextColor:this.textColor;this.activeItemIdx==d&&(ctx.fillStyle=this.activeTextColor);var e=this.items[d];this.filter&&(e=e.substr(2));ctx.fillText(e,8,f+c,b);ctx.shadowColor="transparent";ctx.fillStyle="#444";ctx.fillRect(0,f+this.itemH,b,-1)}}this.vScrollEnabled&&(a<this.h&&(a=this.h),b=this.h/a*this.h,
a=2+this.vOffset/(a-this.h)*(this.h-4-b),ctx.fillStyle="rgba(0,0,0,0.4)",ctx.fillRoundRect(this.w-this.vScrollWidth-2+1,a+1|0,this.vScrollWidth-2,b-2|0,5),ctx.fillStyle="rgba(255,255,255,0.6)",ctx.fillRoundRect(this.w-this.vScrollWidth-2,a,this.vScrollWidth,b|0,7));ctx.lineWidth=1+(isSmall?1:0);ctx.strokeStyle=this.borderColor;ctx.strokeRect(.5,.5,this.w-1,this.h-1);ctx.textBaseline="alphabetic"}});currentPresetWindow=null;cuurentPresetDir=0;
var PRESET_MENU2=Class.create(Widget,{initialize:function($super,b,c,d,f,e){$super(b);this.widgetName="PRESET_MENU";this.h=this.w=500;this.sy=58;this.title="PRESETS";this.color="#eee";this.bg="#262728";this.borderColor="#676869";this.type=c;this.t=null;this.target=d;this.center=!1;this.currentPreset=e||"";this.user=0;switch(this.type){case "ch":this.title=lang.CHANNEL_PRESETS;break;case "chm":this.title=lang.MASTER_PRESETS;break;case "eqch":this.title=lang.CHANNEL_EQ_PRESETS;break;case "eqaux":this.title=
lang.AUX_EQ_PRESETS;break;case "eqm":this.title=lang.MASTER_EQ_PRESETS;break;case "dynch":this.title=lang.CHANNEL_DYN_PRESETS;break;case "dynaux":this.title=lang.AUX_DYN_PRESETS;break;case "dynm":this.title=lang.MASTER_DYN_PRESETS;break;case "fxcho":this.title=lang.CHORUS_FX_PRESETS;break;case "fxdel":this.title=lang.DELAY_FX_PRESETS;break;case "fxrev":this.title=lang.REVERB_FX_PRESETS;break;case "fxroom":this.title=lang.ROOM_PRESETS;break;case "digi":this.title=lang.DIGITECH_PRESETS;break;case "gate":this.title=
lang.GATE_PRESETS;break;case "afs":this.title=lang.AFS_PRESETS;break;case "ux":this.title=lang.UX_PRESETS,cuurentPresetDir=1}isDefined(f)?this.color=f:this.type.contains("chm")?this.color=color.red:this.type.contains("afs")?this.color="#888":this.type.contains("ch")?this.color=color.yellow:this.type.contains("eq")?this.color=color.purple:this.type.contains("dyn")?this.color=color.orange:this.type.contains("fx")?this.color=color.blue:this.type.contains("gate")?this.color=color.GATE:(this.type.contains("ux"),
this.color=color.red);this.initWidgets();this.refreshList();this.calcGeometry();mWidgets.push(widgets.pop());currentPresetWindow=this},refreshList:function(){if(EMULATE){var a=$A($R("f:FACTORY PRESET A","f:FACTORY PRESET Z")),a=a.concat($A($R("u:USER PRESET A","u:USER PRESET Z")));this.LIST.setItems(a)}else widgetReqList=this.LIST,sendMessage(E_COMMANDS.PRESET_LIST+"^"+this.type)},checkDir:function(){0==cuurentPresetDir?(this.RENAME.hide(),this.DEL.hide()):(this.RENAME.show(),this.DEL.show())},initWidgets:function(){var a=
this;this.LIST=new LIST(this);this.LIST.filter=!0;this.LIST.filterValue=1==cuurentPresetDir?"u:":"f:";this.LIST.setPos(10,this.sy);this.LIST.setSize(100,100);this.LOAD=new MENUBUTTON(this);this.LOAD.text=lang.LOAD;this.LOAD.bg=this.bg;this.LOAD.setPos(200,20);this.LOAD.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{var b=a.LIST.selItem();null!=b&&(widgetReqPreset=a.target,sendMessage(E_COMMANDS.PRESET_READ+"^"+a.type+"^"+b),a.close())}};var b=this.LOAD;this.LIST.onDClick=
function(){b.click()};this.SAVE=new MENUBUTTON(this);this.SAVE.text=lang.SAVE;this.SAVE.bg=this.bg;this.SAVE.setPos(200,50);this.SAVE.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{editOk.valueFunc=function(){var b=editBox2.value;if(null!=b&&0!=b.length){var b=b.replace(/\^/g,"_"),c=JSON.stringify(a.target.savePreset(b));-1!=a.LIST.items.indexOf("u:"+b)?(confOk.valueFunc=function(){sendMessage(E_COMMANDS.PRESET_WRITE+"^"+a.type+"^u:"+b+"^"+c);a.close();showPopupMsg(lang.SAVED,
800)},confCancel.valueFunc=function(){},showConfBox(lang.REPLACE_PRESET.format(b))):(sendMessage(E_COMMANDS.PRESET_WRITE+"^"+a.type+"^u:"+b+"^"+c),a.close(),showPopupMsg(lang.SAVED,800))}};var b=a.LIST.selItem(),b=null!=b?b.substr(2):"";showEditBox2(lang.SAVE_PRESET_WITH_NAME,b)}};this.RENAME=new MENUBUTTON(this);this.RENAME.text=lang.RENAME;this.RENAME.bg=this.bg;this.RENAME.setPos(200,110);this.RENAME.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{var b=a.LIST.selItem();
null==b||b.startsWith("f:")||(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),c!=b&&(sendMessage(E_COMMANDS.PRESET_RENAME+"^"+a.type+"^"+b+"^u:"+c),a.refreshList()))},showEditBox2(lang.RENAME_PRESET,b.substr(2)))}};this.DEL=new MENUBUTTON(this);this.DEL.text=lang.DELETE;this.DEL.bg=this.bg;this.DEL.setPos(200,80);this.DEL.onPress=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{var b=a.LIST.selItem();null==b||b.startsWith("f:")||(confOk.valueFunc=
function(){sendMessage(E_COMMANDS.PRESET_DEL+"^"+a.type+"^"+b);a.refreshList()},confCancel.valueFunc=function(){},showConfBox(lang.DELETE_PRESET.format(b.substr(2))))}};this.FACUSER=new SWITCHBOX(this);this.FACUSER.setItems([lang.FACTORY,lang.USER]);this.FACUSER.setItemWidth(80);this.FACUSER.state=cuurentPresetDir;this.FACUSER.bg=this.bg;this.FACUSER.setPos(10,15);this.FACUSER.color=this.color;this.FACUSER.borderColor=this.borderColor;this.FACUSER.valueFunc=function(){cuurentPresetDir=a.user=this.state;
a.LIST.setFilter(0==this.state?"f:":"u:");a.checkDir()};"ux"==this.type&&this.FACUSER.hide();this.checkDir()},close:function(){currentPresetWindow=null;this.enabled=!1;clearModals();regUpdate(this.target)},onDelete:function(){currentPresetWindow=null},calcPos:function(){},calcGeometry:function(){if(!this.center&&null!=this.target&&isDefined(this.target.x)){var a=this.target;this.setPos(116+Math.round((a.w-116-this.w)/2),a.globalY()+Math.round((a.h-this.h)/2))}this.center&&this.setPos(Math.round((screenWidth-
this.w)/2)|0,(screenHeight-this.h)/2|0);var a=this.sy,b=0;this.LIST.setSize(this.w-this.LIST.x-this.DEL.w-20,this.h-this.LIST.y-15-50);var c=this.DEL.w+10;this.DEL.setPos(this.w-c,this.h-this.DEL.h-15-50);this.LOAD.setPos(this.w-c,a+45*b++);this.SAVE.setPos(this.w-c,a+45*b++);this.RENAME.setPos(this.w-c,a+45*b++);this.grd=ctx.createLinearGradient(0,0,0,40);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=
this.borderColor;ctx.lineWidth=1;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.fillStyle=this.grd;ctx.fillTopRoundRect(0,0,this.w,40,14);ctx.fillStyle=color.white;ctx.font="16pt open_sans_condensedbold";ctx.setShadow(color.black,3,1,1);"ux"!=this.type?(ctx.textAlign="right",ctx.fillText(this.title,this.LIST.x+this.LIST.w,38)):(ctx.textAlign="center",ctx.fillText(this.title,this.w/2,38));ctx.setShadow(null);ctx.fillStyle=this.color;ctx.fillBotRoundRect(10,this.h-59,this.w-20,50,10);
switch(this.type){case "ch":case "chm":case "eqch":case "eqaux":case "eqm":case "dynch":case "dynaux":case "dynm":case "gate":case "afs":drawImage(res.dbx_logo,20,this.h-53);break;case "fxrev":drawImage(res.lex_rev,20,this.h-53);break;case "fxroom":drawImage(res.lex_rmlogo,20,this.h-53);break;case "fxcho":drawImage(res.lex_cho,20,this.h-53);break;case "fxdel":drawImage(res.lex_dly,20,this.h-53);break;case "digi":drawImage(res.DIGI_PRE,22,this.h-45);break;case "ux":drawText(lang.CONFIG_WARNING,20,
this.h-40,{color:color.white,align:"left",font:"14px open_sans_condensedbold"})}}}),SHOW_MENU=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SHOW_MENU";this.w=510;this.h=420;this.color="black";showsPopup=this;this.initWidgets();this.refreshList();this.calcGeometry();mWidgets.push(widgets.pop())},refreshList:function(){if(EMULATE)this.SHOWS.setItems($A($R("SHOW A","SHOW Z"))),this.SNAPS.showName=getValue("var.currentShow"),this.SNAPS.setItems($A($R("SNAPSHOT A","SNAPSHOT Z")));
else{widgetReqList=this.LIST;sendMessage(E_COMMANDS.SHOW_LIST);var a=getValue("var.currentShow");0!=a.length&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}},initWidgets:function(){var a=this;this.SHOWS=new LIST(this);this.SHOWS.setPos(10,34);this.SHOWS.setSize(240,this.h-34-10);this.SHOWS.getActiveItem=function(){var a=getValue("var.currentShow");this.activeItemIdx=this.items.indexOf(a)};this.SHOWS.onDClick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,
800);else{var b=this.selItem();null!=b&&sendMessage(E_COMMANDS.SHOW_LOAD+"^"+b)}};this.SHOWS.onSelect=function(){if(!EMULATE){var b=this.selItem();null!=b&&(a.SNAPS.clear(),a.SNAPS.showName=b,sendMessage(E_COMMANDS.SNAP_LIST+"^"+b))}};this.SNAPS=new LIST(this);this.SNAPS.setPos(260,34);this.SNAPS.setSize(240,this.h-34-10);this.SNAPS.showName="";this.SNAPS.getActiveItem=function(){var a=getValue("var.currentShow");this.showName!=a?this.activeItemIdx=-1:(a=getValue("var.currentSnapshot"),this.activeItemIdx=
this.items.indexOf(a))};this.SNAPS.onDClick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=this.selItem();if(null!=b){var c=a.SHOWS.selItem();null==c&&(c=getValue("var.currentShow"));null!=c&&(getValue("var.currentShow")!=c&&sendMessage(E_COMMANDS.SHOW_LOAD+"^"+c),sendMessage(E_COMMANDS.SNAP_LOAD+"^"+c+"^"+b),a.close())}}}},onDelete:function(){clearInterval(ticker);this.hide();log("SHOW_MENU ONDELETE");for(var a=
0;a<this.widgets.length;a++)delete this.widgets[a];showsPopup=null},close:function(){log("SHOW_MENU CLOSE");this.enabled=!1;clearModals()},calcGeometry:function(){this.setPos(screenWidth-this.w-10,60);this.grd=ctx.createLinearGradient(0,0,0,40);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},paint:function(){ctx.fillStyle="#262728";ctx.strokeStyle="#676869";ctx.lineWidth=1;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.fillStyle=
this.grd;ctx.fillTopRoundRect(0,0,this.w,40,14);ctx.font=font.editbox;ctx.textAlign="center";ctx.fillStyle=color.tabTextSel;ctx.fillText(lang.SHOWS,130,24);ctx.fillText(lang.SNAPSHOTS,380,24)}}),MODAL_LIST=Class.create(Widget,{initialize:function($super,b,c){$super(b);this.widgetName="MODAL_LIST";this.h=this.w=400;this.sy=58;this.command=c;this.title="TITLE";this.color="#eee";this.bg="#262728";this.borderColor="#676869";this.initWidgets();this.updateGeometry();mWidgets.push(widgets.pop());this.refreshList()},
refreshList:function(){widgetReqList=this.LIST;sendMessage(this.command)},valueFunc:function(a){showPopupMsg(a)},initWidgets:function(){var a=this;this.LIST=new LIST(this);this.LIST.setAnchors(10,this.sy,10,50);this.LOAD=new MENUBUTTON(this);this.LOAD.text=lang.OK;this.LOAD.bg=this.bg;this.LOAD.w=90;this.LOAD.setAnchors(10,null,null,10);this.LOAD.onPress=function(){var b=a.LIST.selItem();a.valueFunc(b);a.close()};this.LIST.onDClick=function(){a.LOAD.click()};this.CANCEL=new MENUBUTTON(this);this.CANCEL.text=
lang.CANCEL;this.CANCEL.bg=this.bg;this.CANCEL.w=90;this.CANCEL.setAnchors(null,null,10,10);this.CANCEL.onPress=function(){a.close()}},close:function(){this.enabled=!1;clearModals()},onDelete:function(){},calcGeometry:function(){this.x=(screenWidth-this.w)/2|0;this.y=(screenHeight-this.h)/2|0;this.grd=ctx.createLinearGradient(0,0,0,40);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;
ctx.lineWidth=1;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.fillStyle=this.grd;ctx.fillTopRoundRect(0,0,this.w,40,14);ctx.fillStyle=color.white;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="center";ctx.setShadow(color.black,3,1,1);ctx.fillText(this.title,this.w/2|0,38)}}),METERS_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS_PAGE";this.y=40;this.compact=this.enabled=!1;1024>screenWidth&&(this.compact=!0);this.initWidgets()},initWidgets:function(){this.mi=
new METERS_IND(this);metersWidget=this.m=new METERS(this);var a=this;this.MGS=[];for(var b=0;6>b;b++){var c=new SCheckBox(this);c.text=lang.red;c.mline=!0;c.color=c.textColor=color.red;c.textColor=color.white;c.setSize(70,42);c.text=lang.MUTE_GROUP_X.format(b+1).replace(" ","<br>");c.idx=b;c.getState=function(){this.state=getMGroupState(this.idx)};c.onToggleUp=function(){muteGroupON(this.idx)};c.onToggleDown=function(){muteGroupOFF(this.idx)};c.setAnchors(20+80*b,null,null,8);this.MGS.push(c)}this.tap=
new SButton(this);this.tap.text=lang.TAP_TEMPO.replace(" ","<br>");this.tap.color=color.white;this.tap.textColor=color.white;this.tap.mline=!0;this.tap.setSize(100,42);this.tap.longClickMark=!0;this.tap.setAnchors(null,null,null,8);this.tap.valueFunc=bpmTapHandler;this.tap.regKey("f.0.bpm");this.tap.regKey("f.1.bpm");this.tap.regKey("f.2.bpm");this.tap.regKey("f.3.bpm");this.tap.getState=function(){var a=getGlobalBpm();this.text=lang.TAP_X_BPM.format(a)};this.tap.onHold=function(){askBpm()};this.mutefx=
new SCheckBox(this);this.mutefx.text=lang.MUTE_FX.replace(" ","<br>");this.mutefx.mline=!0;this.mutefx.color=this.mutefx.textColor=color.tvMuteFX;this.mutefx.setSize(70,42);this.mutefx.setAnchors(null,null,40,8);this.mutefx.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?1:0};this.mutefx.onToggleUp=function(){mixerWidget.muteFX()};this.mutefx.onToggleDown=function(){mixerWidget.unMuteFX()};this.muteall=new SCheckBox(this);this.muteall.text=lang.MUTE_ALL.replace(" ","<br>");
this.muteall.color=this.muteall.textColor=color.tvMuteALL;this.muteall.mline=!0;this.muteall.setSize(70,42);this.muteall.setAnchors(null,null,120,8);this.muteall.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?1:0};this.muteall.onToggleUp=function(){mixerWidget.muteAll()};this.muteall.onToggleDown=function(){mixerWidget.cancelMuteAll()};this.clearsolo=new SButton(this);this.clearsolo.text=lang.CLEAR_SOLO.replace(" ","<br>");this.clearsolo.mline=!0;this.clearsolo.color=
this.clearsolo.textColor=color.tvClearSolo;this.clearsolo.setSize(70,42);this.clearsolo.setAnchors(null,null,200,8);this.clearsolo.onPress=function(){mixerWidget.clearSolos();regUpdate(a)}},onShow:function(){},onHide:function(){},onDown:function(a,b){this.lastPressPoint=this.pressPoint;this.pressPoint=[a,b]},onUp:function(a){var b=Date.now(),c=Math.abs(this.lastPressPoint[0]-this.pressPoint[0]),d=Math.abs(this.lastPressPoint[1]-this.pressPoint[1]);2<mouseTargets.length||isDefined(tHash[a])&&2<tHash[a].length||
(30>c&&30>d&&b-this.lastClickTime<DBL_CLK_TIME?(this.onDouble(),this.lastClickTime=b-DBL_CLK_TIME):this.lastClickTime=b)},onDouble:function(){setMode(E_MODE.MIX)},calcGeometry:function(){this.w=this.parent.w-this.x;this.h=this.parent.h-this.y;this.mi.setAnchors(20,0,0,null);this.m.setAnchors(20,120,0,101);this.tap.x=490+(this.w-490-270-this.tap.w)/2|0},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);var a=20,b=this.m.y+this.m.h,c=(this.w-a)/allStripsNoVca.length-1|0,d;ctx.textAlign=
"center";ctx.font=font.botChLabel;ctx.fillStyle=color.INPUT;var f=inStrips.length*(c+1)-2;ctx.fillRect(a,b,f,20);if(!HAVE_ROUTING)for(d=0;4>d;d++)inStrips[d].getNameValue("hiz")&&(ctx.fillStyle=color.INPUT,ctx.font="14px open_sans_condensedbold",ctx.fillBotRoundRect(a+(c+1)*d,b+20,c,20,4),ctx.fillStyle="#eee",ctx.drawText("Z",a+(c+1)*d+c/2|0,b+20+10+5|0,{shadow:[color.black,0,1,1]}));ctx.font=font.botChLabel;ctx.fillStyle="#eee";ctx.drawText(lang.INPUT,a+f/2|0,b+38,{shadow:[color.black,0,1,1]});a+=
f+1;ctx.fillStyle=color.LINEIN;f=lineinStrips.length*(c+1)-1;ctx.fillRect(a,b,f,20);ctx.fillStyle="#eee";ctx.drawText(lang.LINE,a+f/2|0,b+38,{shadow:[color.black,0,1,1]});a+=f+1;ctx.fillStyle=color.media;f=mediaStrips.length*(c+1)-1;ctx.fillRect(a,b,f,20);ctx.fillStyle="#eee";d=a+f/2|0;ctx.fillTriangle2(d-6,b+38-15,d+6,b+38+8-15,d-6,b+38+16-15);a+=f+1;ctx.fillStyle=color.FX;f=fxStrips.length*(c+1)-1;ctx.fillRect(a,b,f,20);ctx.fillStyle="#eee";ctx.drawText(lang.FX,a+f/2|0,b+38,f,{shadow:[color.black,
0,1,1]});a+=f+1;ctx.fillStyle=color.sub;f=subStrips.length*(c+1)-1;ctx.fillRect(a,b,f,20);ctx.fillStyle="#eee";ctx.drawText(lang.SUB,a+f/2|0,b+38,f,{shadow:[color.black,0,1,1]});a+=f+1;ctx.fillStyle=color.AUX;f=auxStrips.length*(c+1);if(HAVE_MATRIX)for(d=0;d<auxStrips.length;d++)ctx.fillStyle=auxStrips[d].getNameValue("matrix")?color.MATRIX:color.AUX,ctx.fillRect(a+(c+1)*d,b,c+1,20);else ctx.fillRect(a,b,f-1,20);ctx.fillStyle="#eee";d=lang.AUX;HAVE_MATRIX&&(d+=" / "+lang.MTX);ctx.drawText(d,a+f/2|
0,b+38,{shadow:[color.black,0,1,1]});ctx.font="14px open_sans_condensedbold";CASCADE_MODE&&1E3>this.w&&(ctx.font="13px open_sans_condensedbold");ctx.textAlign="center";ctx.setShadow(color.black,0,1,1);for(d=0;d<allStripsNoVca.length;d++){var a=20+(c+1)*d|0,f=20+c/2+(c+1)*d|0,e=""+(allStripsNoVca[d].subId+1),g=c;if(24<inStrips.length&&(d<inStrips.length||d>=auxStrips[0].id))if(0==d%8)f=d+1,d>=auxStrips[0].id&&(f-=auxStrips[0].id),e=""+f+" - "+(f+7),f=20+(c+1)*(d+4)|0,g=9999,d/8%2&&(ctx.fillStyle="rgba(255,255,255,0.08)",
ctx.fillRect(a-1,b,8*(c+1),20));else continue;d%2&&(ctx.fillStyle="rgba(255,255,255,0.07)",ctx.fillRect(a,b,c-1,20));allStripsNoVca[d].type==E_STRIP_TYPE.LINEIN&&(e=0==allStripsNoVca[d].subId%2?"L":"R");allStripsNoVca[d].type==E_STRIP_TYPE.MEDIA&&(e=0==allStripsNoVca[d].subId%2?"L":"R");if(!hideHPAUX||d!=auxStrips[curSetup.aux-2].id&&d!=auxStrips[curSetup.aux-1].id)ctx.fillStyle="#000",ctx.fillText(e,f+1,b+15+1,g),ctx.fillStyle="#eee",ctx.fillText(e,f,b+15,g)}a=12;d=this.mi.hh/2|0;b=this.mi.hh;ctx.font=
"13px open_sans_condensedbold";ctx.textBaseline="middle";ctx.fillStyle=color.tvPhantom;ctx.fillText("48V",a-2,d,17);ctx.fillStyle=color.tvInvert;d+=b;drawImage(res.inv_pic,a-8,d-7);ctx.fillStyle=color.tvMute;ctx.fillText("M",a,d+=b,16);ctx.fillStyle=color.tvSolo;ctx.fillText("S",a,d+b,16);ctx.fillStyle="#999";ctx.fillText("№",a-1,this.h-92,16);ctx.fillText("G",a,this.h-200-c/2,16);ctx.fillText("C",a,this.h-200+20,16);ctx.fillText("O",a,this.h-200+40,16);ctx.fillText("M",a,this.h-200+60,16);ctx.fillText("P",
a,this.h-200+80,16);ctx.textAlign="right";ctx.font="10px open_sans_condensedbold";b=[-96,-90,-80,-70,-60,-50,-40,-24,-12,-6,0];f=this.mi.h;c=this.h-f-c-200-11;for(d=0;d<b.length;d++)b[d]<-VU_RANGE||(e=f+5+vuPosMark(b[d],c),ctx.fillText(""+b[d],a+4,e))}}),METERS_IND=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS_IND";this.hh=30;this.rows=4;this.h=this.hh*this.rows},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,
"rgba(0,0,0,0.00)");this.grd.addColorStop(.12,"rgba(0,0,0,0.4)");this.grd.addColorStop(.25,"rgba(0,0,0,0.00)");this.grd.addColorStop(.251,"rgba(0,0,0,0.00)");this.grd.addColorStop(.37,"rgba(0,0,0,0.4)");this.grd.addColorStop(.5,"rgba(0,0,0,0.00)");this.grd.addColorStop(.501,"rgba(0,0,0,0.00)");this.grd.addColorStop(.62,"rgba(0,0,0,0.4)");this.grd.addColorStop(.75,"rgba(0,0,0,0.00)");this.grd.addColorStop(.751,"rgba(0,0,0,0.00)");this.grd.addColorStop(.87,"rgba(0,0,0,0.4)");this.grd.addColorStop(1,
"rgba(0,0,0,0.00)")},paint:function(){var a=this.w,b=this.h,c=a/allStripsNoVca.length-1|0;ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,a,b);ctx.fillStyle="rgba(255,255,255,0.02)";ctx.fillRect(0,1*this.hh,(c+1)*inStrips.length-1,this.hh);var d=getValue("mgmask"),a=checkBit(d,MUTEALL_BIT_IDX),d=checkBit(d,MUTEFX_BIT_IDX);ctx.font="12px open_sans_condensedbold";24<inStrips.length&&(ctx.font="9px open_sans_condensedbold");ctx.textAlign="center";ctx.textBaseline="middle";for(var f=0,e=allStripsNoVca.length;f<
e;f++){var g=(c+1)*f,h=allStripsNoVca[f],l=hideHPAUX&&(f==auxStrips[curSetup.aux-2].id||f==auxStrips[curSetup.aux-1].id);ctx.globalAlpha=f%2?.09:.07;l&&(ctx.globalAlpha=.04);ctx.fillStyle=allStripsNoVca[f].color;h.type==E_STRIP_TYPE.IN?ctx.fillRect(g,0,c,b):ctx.fillRect(g,b/2,c,b/2);ctx.globalAlpha=1;var m=h.getNameValue("solo"),n=h.getNameValue("mute"),p=h.getNameValue("forceunmute"),r=h.getMuteState(!0,!0);ctx.strokeStyle="rgba(0,0,0,0.3)";if(n||r)ctx.fillStyle=p?color.tvMuteUn:r&&!n?color.tvMuteMG:
color.tvMute,l&&(ctx.fillStyle=color.tvGray),ctx.roundRect(g,2*this.hh,c-1,this.hh-1,4),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill(),ctx.fillStyle="#eee",ctx.fillText(p?"-M":n?"M":a?"MA":h.type==E_STRIP_TYPE.FX&&d?"MF":r?"MG":"M",g+c/2|0,2*this.hh+this.hh/2|0,c);m&&(ctx.fillStyle=color.tvSolo,l&&(ctx.fillStyle=color.tvGray),ctx.roundRect(g,3*this.hh,c-1,this.hh-1,4),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill());h.type==E_STRIP_TYPE.IN&&(m=h.getNameValue("invert"),n=!1,HAVE_ROUTING?(p=h.getNameValue("src"),
p.startsWith("hw.")&&(n=getValue(p+".phantom"))):n=h.getNameValue("phantom"),n&&(ctx.fillStyle=color.tvPhantom,l&&(ctx.fillStyle=color.tvGray),ctx.roundRect(g,0*this.hh,c-1,this.hh-1,4),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill()),m&&(ctx.fillStyle=color.tvInvert,l&&(ctx.fillStyle=color.tvGray),ctx.roundRect(g,1*this.hh,c-1,this.hh-1,4),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill()));ctx.fillStyle="#111";h.type==E_STRIP_TYPE.IN?ctx.fillRect(g+c-1,0,1,b):ctx.fillRect(g+c-1,b/2,1,b/2)}ctx.fillStyle=
"#111";ctx.fillRect(0,1*this.hh-1,(c+1)*inStrips.length,1);ctx.fillRect(0,2*this.hh-1,(c+1)*allStripsNoVca.length,1);ctx.fillRect(0,3*this.hh-1,(c+1)*allStripsNoVca.length,1);ctx.fillRect(0,4*this.hh-1,(c+1)*allStripsNoVca.length,1)}}),METERS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS";this.w=500;this.grh=this.h=100;this.v=[];this.v2=[];this.vfall=[];this.vg=[];this.vg2=[];this.vgfall=[];this.comp=[];this.clip=[];this.clipReleasing=[];this.gate=[];this.timers=
[];this.ptimers=[];this.peak=[];this.peakfall=[];this.ltt=0;for(var c=allStripsNoVca,d=0;d<c.length;d++)this.v.push(0),this.v2.push(0),this.vfall.push(0),this.vg.push(0),this.vg2.push(0),this.vgfall.push(0),this.peak.push(0),this.peakfall.push(0),this.comp.push(0),this.gate.push(!0),this.clip.push(!1),this.clipReleasing.push(!1),this.timers.push(null),c[d].stereo&&(this.v.push(0),this.v2.push(0),this.vfall.push(0),this.vg.push(0),this.vg2.push(0),this.vgfall.push(0),this.peak.push(0),this.peakfall.push(0),
this.comp.push(0),this.gate.push(!0),this.clip.push(!1),this.clipReleasing.push(!1),this.timers.push(null));regTick(this)},setValue:function(a,b,c,d,f,e,g){var h=this;this.comp[d]=bound(b/COMP_SCALE,0,1);this.gate[d]=c;this.v2[d]=bound(a,0,4);1<=a?(this.clip[d]=!0,this.clipReleasing[d]=!1):this.clip[d]&&!this.clipReleasing[d]&&(this.clipReleasing[d]=!0,clearTimeout(this.timers[d]),this.timers[d]=setTimeout(function(){h.clip[d]=!1},CLIP_HOLD_TIME));this.v[d]<this.v2[d]?this.v[d]=this.v2[d]:this.vfall[d]=
GLOBAL_VU_FALL_SPEED;this.peak[d]<=this.v2[d]?(this.peak[d]=this.v2[d],this.peakfall[d]=0,clearTimeout(this.ptimers[d]),this.ptimers[d]=null):null==this.ptimers[d]&&(this.ptimers[d]=setTimeout(function(){h.peakfall[d]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[d]=null},PEAK_HOLD_TIME));if(isDefined(f)&&d>=fxStrips[0].id&&d<auxStrips[0].id){var l=d-fxStrips[0].id+allStripsNoVca.length;this.comp[l]=bound(e/COMP_SCALE,0,1);this.gate[l]=g;this.v2[l]=bound(f,0,4);1<=a?(this.clip[l]=!0,this.clipReleasing[l]=!1):
this.clip[l]&&!this.clipReleasing[l]&&(this.clipReleasing[l]=!0,clearTimeout(this.timers[l]),this.timers[l]=setTimeout(function(){h.clip[l]=!1},CLIP_HOLD_TIME));this.v[l]<this.v2[l]?this.v[l]=this.v2[l]:this.vfall[l]=GLOBAL_VU_FALL_SPEED;this.peak[l]<=this.v2[l]?(this.peak[l]=this.v2[l],this.peakfall[l]=0,clearTimeout(this.ptimers[l]),this.ptimers[l]=null):null==this.ptimers[l]&&(this.ptimers[l]=setTimeout(function(){h.peakfall[l]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[l]=null},PEAK_HOLD_TIME))}},tick:function(a){for(var b=
0;b<this.v.length;b++)this.v[b]<=this.v2[b]?this.v[b]=this.v2[b]:(this.v[b]-=this.vfall[b]*a,this.vfall[b]+=.04*GLOBAL_VU_FALL_SPEED*a,this.v[b]<this.v2[b]&&(this.v[b]=this.v2[b])),this.peak[b]<=this.v2[b]?this.peak[b]=this.v2[b]:0<this.peak[b]&&0<this.peakfall[b]&&(this.peak[b]-=this.peakfall[b]*a,this.peakfall[b]+=GLOBAL_PEAK_FALL_ACC*a,this.peak[b]<this.v2[b]&&(this.peak[b]=this.v2[b]));regTick(this);this.globalEnabled()&&regUpdate(this)},onDown:function(a,b){var c=a-this.globalX(),c=bound(c/(this.w/
allStripsNoVca.length|0)|0,0,allStripsNoVca.length-1);setSelected(c);null!=inView&&(mixerWidget.showAll(),slideOutWidget.clearGotoButtons());setMode(E_MODE.MIX);bottomWidget.gotoIDmid(c)},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,this.h-(this.w/allStripsNoVca.length-1|0)-100,0,0);this.grd.addColorStop(0,"#0C630A");this.grd.addColorStop(.7,"#BDBC0A");this.grd.addColorStop(1,"#d0130A");this.grd2=ctx.createLinearGradient(0,this.h-100,0,this.h);this.grd2.addColorStop(0,"#711");this.grd2.addColorStop(1,
"#e11");this.grd3=ctx.createLinearGradient(0,0,0,this.h);this.grd3.addColorStop(0,"rgba(255,255,255,0.0)");this.grd3.addColorStop(1,"rgba(255,255,255,1)");this.clipColor="#d22222"},paint:function(){var a=this.w,b=this.h,c=a/allStripsNoVca.length-1|0;ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,a,b);ctx.strokeStyle="rgba(0,0,0,0.1)";ctx.lineWidth=1;a=b-c-this.grh;ctx.strokeStyle="rgba(0,0,0,0.9)";ctx.lineWidth=2;for(var d=0;d<allStripsNoVca.length;d++){var f=(c+1)*d,e=hideHPAUX&&(d==auxStrips[curSetup.aux-
2].id||d==auxStrips[curSetup.aux-1].id);ctx.globalAlpha=d%2?.11:.09;e&&(ctx.globalAlpha=.05);ctx.fillStyle=allStripsNoVca[d].color;ctx.fillRect(f,0,c,b);ctx.globalAlpha=1;if(allStripsNoVca[d].stereo){.001<this.peak[d]&&(ctx.fillStyle=this.grd,ctx.fillRect(f,b-this.grh-c-bound(this.peak[d]*a|0,1,a)|0,c/2,1));if(.001<this.v[d]){ctx.fillStyle=this.clip[d]?this.clipColor:this.grd;var g=bound(this.v[d],0,1),h=b-this.grh-c,g=-(g*a)|0;ctx.fillRect(f,h,c/2,g);ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRect(f,
h,1,g);ctx.fillStyle="rgba(0,0,0,0.07)";ctx.fillRect(f+c/2,h,-1,g)}this.clip[d]&&(ctx.fillStyle="#a11",ctx.fillRect(f,0,c/2,4),ctx.fillStyle="#f11",ctx.fillRect(f+1,1,c/2-2,2));.001<this.comp[d]&&(ctx.fillStyle=this.grd2,h=this.h-this.grh,g=this.comp[d]*(this.grh-1)|0,ctx.fillRect(f,h,c/2,g),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f,h,1,g),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+c/2,h,-1,g));this.gate[d]||(ctx.fillStyle="#b11",e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,this.h-
this.grh-c,c/2,c),h=2,ctx.beginPath(),ctx.moveTo(f+h-1,this.h-this.grh-c/2|0),ctx.lineTo(f+c/2-h,this.h-this.grh-c/2|0),ctx.stroke());var l=d-fxStrips[0].id+allStripsNoVca.length;.001<this.peak[l]&&(ctx.fillStyle=this.grd,ctx.fillRect(f+c/2,b-this.grh-c-bound(this.peak[l]*a|0,1,a)|0,c/2,1));.001<this.v[l]&&(ctx.fillStyle=this.clip[l]?this.clipColor:this.grd,g=bound(this.v[l],0,1),h=b-this.grh-c,g=-(g*a)|0,ctx.fillRect(f+c/2,h,c/2,g),ctx.fillStyle="rgba(255,255,255,0.07)",ctx.fillRect(f+c/2,h,1,g),
ctx.fillStyle="rgba(0,0,0,0.07)",ctx.fillRect(f+c-1,h,-1,g));this.clip[l]&&(ctx.fillStyle="#a11",ctx.fillRect(f+c/2,0,c/2,4),ctx.fillStyle="#f11",ctx.fillRect(f+c/2+1,1,c/2-3,2));.001<this.comp[l]&&(ctx.fillStyle=this.grd2,h=this.h-this.grh,g=this.comp[l]*(this.grh-1)|0,ctx.fillRect(f+c/2,h,c/2,g),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f+c/2,h,1,g),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+c-1,h,-1,g));this.gate[l]||(ctx.fillStyle="#b11",e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f+
c/2,this.h-this.grh-c,c/2,c),h=2,ctx.beginPath(),ctx.moveTo(f+c/2+h-1,this.h-this.grh-c/2|0),ctx.lineTo(f+c-h,this.h-this.grh-c/2|0),ctx.stroke())}else.001<this.peak[d]&&(ctx.fillStyle=this.grd,e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,b-this.grh-c-bound(this.peak[d]*a|0,1,a)|0,c,1)),.001<this.v[d]&&(ctx.fillStyle=this.clip[d]?this.clipColor:this.grd,e&&(ctx.fillStyle=color.tvGray),g=bound(this.v[d],0,1),h=b-this.grh-c,g=-(g*a)|0,ctx.fillRect(f,h,c,g),ctx.fillStyle="rgba(255,255,255,0.08)",ctx.fillRect(f,
h,1,g),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+c-1,h,-1,g)),this.clip[d]&&(ctx.fillStyle="#a11",e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,0,c,4),ctx.fillStyle="#f11",e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f+1,1,c-3,2)),.001<this.comp[d]&&(ctx.fillStyle=this.grd2,e&&(ctx.fillStyle=color.tvGray),h=this.h-this.grh,g=this.comp[d]*(this.grh-1)|0,ctx.fillRect(f,h,c,g),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f,h,1,g),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+c,h,-1,g)),
this.gate[d]||(ctx.fillStyle="#b11",e&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,this.h-this.grh-c,c,c),h=2,ctx.beginPath(),ctx.moveTo(f+h-1,this.h-this.grh-c/2|0),ctx.lineTo(f+c-h,this.h-this.grh-c/2|0),ctx.stroke());ctx.fillStyle="#111";ctx.fillRect(f+c-1,0,1,b)}ctx.fillRect(0,this.h-this.grh-c,(c+1)*allStripsNoVca.length,1);ctx.fillRect(0,this.h-this.grh,(c+1)*allStripsNoVca.length,1);ctx.globalAlpha=1}}),SButton=Class.create(Button,{initialize:function($super,b){$super(b);this.widgetName="SButton";
this.w=90;this.h=30;this.text="TEXT";this.color=color.white;this.longClickMark=!1;this.font="12pt open_sans_condensedbold";this.textColor=color.tabText;this.borderColor=color.tabStroke;this.grd=null;this.mline=!1;this.mdy=18;this.bgColor=color.eqBg},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0)");this.grd.addColorStop(.5,"rgba(255,255,255,0.1)");this.grd.addColorStop(1,"rgba(255,255,255,0)")},paint:function(){this.getState();ctx.fillStyle=
this.bgColor;ctx.fillRect(0,0,this.w,this.h);if(this.pressed)ctx.globalAlpha=.5,ctx.fillStyle=this.color,ctx.fillRect(0,0,this.w,this.h),ctx.globalAlpha=1,ctx.font=this.font,ctx.fillStyle=color.tabTextSel,ctx.textAlign="center",ctx.textBaseline="middle",ctx.setShadow(color.shadow,3,1,1),a=this.h/2,this.mline&&(a-=this.mdy*(this.text.split("<br>").length-1)/2),drawText(this.text,this.w/2|0,a|0,{max:this.w-2,dy:this.mdy}),ctx.setShadow(null),ctx.lineWidth=1,ctx.strokeStyle=this.color;else{ctx.fillStyle=
"rgba(255,255,255,0.1)";ctx.fillRect(1,this.h,this.w-2,-10);ctx.font=this.font;ctx.fillStyle=this.textColor;ctx.textAlign="center";ctx.textBaseline="middle";ctx.setShadow(color.black,3,2,2);var a=this.h/2;this.mline&&(a-=this.mdy*(this.text.split("<br>").length-1)/2);drawText(this.text,this.w/2|0,a|0,{max:this.w-2,dy:this.mdy});ctx.setShadow(null);ctx.lineWidth=1;ctx.strokeStyle=this.borderColor}ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.longClickMark&&(ctx.strokeStyle="rgba(255,255,255,0.25)",
ctx.beginPath(),ctx.moveTo(this.w-9,2),ctx.lineTo(this.w-3,9),ctx.moveTo(this.w-12,2),ctx.lineTo(this.w-3,12),ctx.stroke())}}),SCheckBox=Class.create(CheckBox,{initialize:function($super,b){$super(b);this.name="SCheckBox";this.w=70;this.h=30;this.textColor=color.tabText;this.textColor2=color.tabTextSel;this.color=color.white;this.text="TEXT";this.font=font.tabText;this.longClickMark=!1;this.grd=null;this.mline=!1;this.mdy=20;this.bgColor=color.eqBg},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,
0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0)");this.grd.addColorStop(.5,"rgba(255,255,255,0.1)");this.grd.addColorStop(1,"rgba(255,255,255,0)")},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();this.disabled&&(ctx.globalAlpha=.3);ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);switch(this.state){case 0:case !1:ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(1,this.h,this.w-2,-10);ctx.lineWidth=1;ctx.strokeStyle=color.tabStroke;ctx.strokeRect(.5,
.5,this.w-1,this.h-1);ctx.font=this.font;ctx.fillStyle=this.textColor;var a=this.h/2;ctx.drawText(this.text,this.w/2|0,a|0,{max:this.w-2,shadow:["#000",0,1,1],align:"center",valign:"middle",dy:this.mdy},"<br>");ctx.shadowColor="transparent";break;case 1:case !0:ctx.globalAlpha=this.disabled?.15:.5;ctx.fillStyle=this.color;ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=this.disabled?.3:1;ctx.lineWidth=1;ctx.strokeStyle=this.color;ctx.strokeRect(.5,.5,this.w-1,this.h-1);ctx.font=this.font;ctx.fillStyle=
this.textColor2;a=this.h/2;ctx.drawText(this.text,this.w/2|0,a|0,{max:this.w-2,shadow:["#000",0,1,1],align:"center",valign:"middle",dy:this.mdy},"<br>");ctx.shadowColor="transparent";break;default:ctx.fillStyle="#0ff",ctx.fillRect(0,0,this.w,this.h)}this.longClickMark&&(ctx.strokeStyle="rgba(255,255,255,0.2)",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(this.w-11,2),ctx.lineTo(this.w-2,11),ctx.moveTo(this.w-8,2),ctx.lineTo(this.w-2,8),ctx.stroke());this.disabled&&(ctx.globalAlpha=1)}}),PONG=Class.create(Widget,
{initialize:function($super,b){$super(b);this.widgetName="SETTINGS";this.y=measures.topWidgetHeight;this.needMoveEvt=this.needClip=!0;this.pw=10;this.ph=.15;this.by=this.bx=this.p2=this.p1=.5;this.ba=this.bsy=this.bsx=0;this.br=7;this.s2=this.s1=0;this.started=this.play=!1;this.speed=.01;this.yourTime=this.timeStart=0;this.newRecord=!1;this.zza=this.zzz=this.ltt=0},onShow:function(){this.play=!0},onHide:function(){this.play=!1},onDown:function(a,b,c){this.started||this.randomBallStart();this.onMove(a,
b,c)},onMove:function(a,b,c){this.globalX();a=b-this.globalY();this.p2=this.p1=a=bound(a/this.h,0,1)},ballStop:function(){this.by=this.bx=.5;this.bsy=this.bsx=0;this.started=!1},randomBallStart:function(){this.by=this.bx=.5;this.speed=.01;this.timeStart=Date.now();this.ph=.15;this.bsx=.5>Math.random()?-this.speed:this.speed;this.bsy=(2*Math.random()-1)*this.speed;this.started=!0;this.newRecord=!1},gameEnd:function(){this.play=!1;var a=Date.now()-this.timeStart;this.yourTime=a=precision(a/1E3,3);var b=
getValue("var.pongtime")||0;a>b&&(setValue("var.pongtime",a),this.newRecord=!0)},tick:function(a){this.bx+=this.bsx*a;this.by+=this.bsy*a;this.bx=bound(this.bx,-1,this.w+1);this.by=bound(this.by,-1,this.h+1);this.speed+=1E-4*a;this.ph-=1E-5;0>this.bx&&(this.by<=this.ph+this.p1*(1-this.ph)&&this.by>=this.p1*(1-this.ph)?0>this.bsx&&(this.bsx*=-1,this.bsy=.01*(2*Math.random()-1)):(this.s2++,this.ballStop(),this.gameEnd()));1<this.bx&&(this.by<=this.ph+this.p2*(1-this.ph)&&this.by>=this.p2*(1-this.ph)?
0<this.bsx&&(this.bsx*=-1,this.bsy=.01*(2*Math.random()-1)):(this.s1++,this.ballStop(),this.gameEnd()));if(0>this.by&&0>this.bsy||1<this.by&&0<this.bsy)this.bsy*=-1;regUpdate(this)},calcGeometry:function(){this.w=screenWidth-measures.mixerRightMargin;this.h=screenHeight-this.y},paint:function(){var a=this.w,b=this.h,c=b*this.ph;this.play?(ctx.fillStyle="hsl("+this.zzz%360+","+this.zza+"%,"+this.zza+"%)",this.zza+=.02):ctx.fillStyle="#000";ctx.fillRect(0,0,a,b);var d=b-c,f=a-2*this.pw-2*this.br;ctx.fillStyle=
"#fff";ctx.fillRect(0,this.p1*d,this.pw,c,10);ctx.fillRect(a-this.pw,this.p2*d,this.pw,c,10);a=this.pw+this.br+this.bx*f;b=this.br+this.by*(b-this.br);ctx.fillStyle="hsl("+(this.zzz+100)+",60%,60%)";ctx.fillCircle(a,b,this.br);ctx.font="26pt open_sans_condensedbold";ctx.textAlign="center";ctx.fillStyle="rgba(255,255,255,0.7)";this.started?(b=Date.now()-this.timeStart,b=precision(b/1E3,1),ctx.fillStyle="rgba(255,255,255,1)",ctx.textAlign="left",drawText(b+"s",this.w-100,this.h-20)):(drawText("TOUCH TO START THE CHALLENGE",
this.w/2,50),ctx.fillStyle="rgba(255,255,255,1)",0<this.yourTime&&drawText("YOUR TIME: "+this.yourTime+"s",this.w/2,92),b=getValue("var.pongtime")||0,drawText("BEST TIME: "+b+"s",this.w/2,this.h-90),ctx.fillStyle="rgba(255,0,0,0.6)",this.newRecord&&drawText("NEW RECORD!",this.w/2,134));this.zzz++;regTick(this)}}),SUBPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SETTINGS";this.x=0;this.y=measures.topWidgetHeight;this.bgColor=color.eqBg;this.initWidgets()},initWidgets:function(){},
calcGeometry:function(){this.y=topWidget.enabled?topWidget.h:0;this.w=screenWidth-this.x;masterWidget.enabled&&(this.w-=masterWidget.w);auxoutWidget.enabled&&(this.w-=auxoutWidget.w);fxoutWidget.enabled&&(this.w-=fxoutWidget.w);slideOutWidget.enabled&&(this.w-=slideOutWidget.w);this.h=screenHeight-this.y;bottomWidget.enabled&&(this.h-=bottomWidget.h)},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h)}});MOREME_CUTOFF=-120;
var MOREME=Class.create(SUBPAGE,{onShow:function(){checkMoreMe();-1!=settings.meout&&auxoutWidget.setAux(settings.meout);auxoutWidget.MIXTOAUX.hide()},onHide:function(){auxoutWidget.MIXTOAUX.show()},initWidgets:function(){this.widgetName="MOREME";var a=this;this.ME_VU=new MM_SLIDER(this);this.ME_VU.setAnchors(10,10,null,43);this.ME_VU.text=lang.ME;this.ME_VU.color=color.me;this.ME_VU.ondown=function(){var a=settings.meout,c=settings.me;if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=
0;else{a="aux."+a+".value";this.pressMix_dB=[];for(var d=0;d<c.length;d++){var f=c[d];if(!(f>=allStrips.length)){switch(allStrips[f].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}this.pressMix_dB[d]=VtoDBf(allStrips[f].getNameValue(a))}}}};this.ME_VU.getState=function(){var a=settings.meout,c=settings.me,d="aux."+a+".value";if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{for(var a=[],f=0;f<c.length;f++){var e=c[f];if(!(e>=allStrips.length)){switch(allStrips[e].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}a.push(allStrips[e].getNameValue(d))}}this.value=
a.max()}};this.ME_VU.onValue=function(a){if(!(.003787517547607422>a)){var b=settings.meout,d=settings.me;if(0>b||b>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else{a=VtoDBf(a);var f=VtoDBf(this.start);a-=f;b="aux."+b+".value";for(f=0;f<d.length;f++){var e=d[f];if(!(e>=allStrips.length)){e=allStrips[e];switch(e.type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var g=this.pressMix_dB[f];g<MOREME_CUTOFF||(g=DBtoVf(g+a),e.setNameValue(b,bound(g,0,1)))}}}}};
this.BAND_VU=new MM_SLIDER(this);this.BAND_VU.color=color.blue;this.BAND_VU.text=lang.BAND;this.BAND_VU.setAnchors(null,10,10,43);this.BAND_VU.ondown=function(){var a=settings.meout,c=settings.me;if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{a="aux."+a+".value";this.pressMix_dB=[];for(var d=0;d<allStrips.length;d++)if(!c.contains(d)){switch(allStrips[d].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}this.pressMix_dB[d]=VtoDBf(allStrips[d].getNameValue(a))}}};
this.BAND_VU.getState=function(){var a=settings.meout,c=settings.me;if(-1==a)this.value=0;else if(0==c.length)this.value=0;else{for(var a="aux."+a+".value",d=[],f=0;f<allStrips.length;f++)if(!c.contains(f)){switch(allStrips[f].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}d.push(allStrips[f].getNameValue(a))}this.value=d.max()}};this.BAND_VU.onValue=function(a){if(!(.003787517547607422>a)){var b=settings.meout,d=settings.me;if(0>b||b>curSetup.aux)this.value=0;else if(0==
d.length)this.value=0;else{a=VtoDBf(a);var f=VtoDBf(this.start);a-=f;b="aux."+b+".value";for(f=0;f<allStrips.length;f++)if(!d.contains(f)){switch(allStrips[f].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var e=allStrips[f],g=this.pressMix_dB[f];g<MOREME_CUTOFF||(g=DBtoVf(g+a),e.setNameValue(b,bound(g,0,1)))}}}};this.WHEEL=new MM_WHEEL(this);this.WHEEL.setAnchors(null,10,null,43);this.WHEEL.ondown=function(){var a=settings.meout,c=settings.me;if(0>a||a>curSetup.aux)this.value=
0;else if(0==c.length)this.value=0;else{a="aux."+a+".value";this.db_me=[];this.db_band=[];for(var d=0;d<allStrips.length;d++){switch(allStrips[d].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}c.contains(d)?this.db_me[c.indexOf(d)]=VtoDBf(allStrips[d].getNameValue(a)):this.db_band[d]=VtoDBf(allStrips[d].getNameValue(a))}this.max1=10-this.db_me.max();this.max2=10-this.db_band.max()}};this.WHEEL.onValue=function(b){b=-20*(b-.5);b>this.max1||-b>this.max2||(applyMEdelta(this.db_me,
b),applyBANDdelta(this.db_band,-b),regUpdate(a))}},calcGeometry:function($super){$super();var b=this.w-40;this.ME_VU.w=.35*b|0;this.BAND_VU.w=.35*b|0;this.WHEEL.x=10+this.ME_VU.w+10;this.WHEEL.w=.3*b|0},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(0,this.h,this.w,-measures.bottomWidgetHeight);ctx.fillStyle=color.me;ctx.fillRect(0,this.h-measures.bottomWidgetHeight,this.w,-3);var a=-1==settings.meout,b="";0==settings.me.length&&
(b+="("+lang.NO_ME_CHANNELS+") ");a&&(b+="("+lang.NO_AUX_OUT+")");drawText(b,this.w/2,this.h-18,{color:color.white,font:"15pt open_sans_condensedbold",align:"center",baseLine:"middle",sColor:"#000",sBlur:4,sX:2,sY:2})}}),MM_SLIDER=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MM_SLIDER";this.color=color.green;this.needMoveEvt=!0;this.value=.5;this.w=40;this.h=100;this.d=0;this.text="";this.grd=null},ondown:function(){},onDown:function(a,b){this.start=this.value;0==
this.start?showPopupMsg(lang.NO_SEND_LEVELS):(this.sy=b-this.globalY(),this.ondown(),this.onMove(a,b))},onMove:function(a,b){if(0!=this.start){var c=(b-this.globalY()-this.sy)/this.h,c=bound(this.start-c,0,1);this.onValue(c);regUpdate(this)}},onValue:function(a){},onwheel:function(a){this.start=this.value;this.onDown();var b=this.value,b=bound(b+a/120/30,0,1);this.onValue(b);regUpdate(this)},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.1)");
this.grd.addColorStop(1,"rgba(0,0,0,0.4)")},getState:function(){},paint:function(){this.getState();ctx.fillStyle=color.black;ctx.fillRoundRect(0,0,this.w,this.h,6);var a=(1-zeroDbPos)*this.h|0;ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.lineWidth=2;ctx.beginPath();ctx.dashedLine(1,a+1,this.w-1,a+1,10);ctx.stroke();var a=this.value,b=this.h-2;ctx.fillStyle=this.color;ctx.fillRoundRect(1,this.h-1,this.w-2,-b*a,6);ctx.fillStyle=this.grd;ctx.fillRoundRect(1,1,this.w-2,this.h-2,6);ctx.drawText(this.text,
this.w/2|0,22,{maxW:this.w-2,color:1.3E-4>a?"#555":"#eee",font:"13pt open_sans_condensedbold",align:"center",shadow:Shadow.main});ctx.drawText(VtoDB(a).replace("@","∞"),this.w/2|0,41,{color:1.3E-4>a?"#f11":"#ddd",maxW:this.w-2,shadow:Shadow.main});ctx.lineWidth=1;ctx.strokeStyle="#46474A";ctx.roundRect(.5,.5,this.w-1,this.h-1,6);ctx.stroke()}}),MM_WHEEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MM_WHEEL";this.needClip=this.needMoveEvt=!0;this.w=50;this.h=200;this.v=
.5},onDown:function(a,b){var c=a-this.globalX(),d=b-this.globalY();this.pressPoint=[c,d];this.ondown()},onMove:function(a,b){this.globalX();var c=b-this.globalY();this.v=c=bound(.5-(this.pressPoint[1]-c)/this.h,0,1);this.onValue(c);regUpdate(this)},onUp:function(){this.v=.5;regUpdate(this)},ondown:function(){},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.1)");this.grd.addColorStop(.5,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,
"rgba(255,255,255,0.1)")},paint:function(){ctx.fillStyle="#000";ctx.fillRoundRect(0,0,this.w,this.h,6);ctx.fillStyle=this.grd;ctx.fillRoundRect(0,0,this.w,this.h,6);ctx.fillStyle="#444";ctx.fillRect(1,this.h/2-1|0,this.w-2,2);var a=this.h-12,b=6+(this.v*a|0);ctx.fillStyle="rgba(200,136,40,0.06)";ctx.fillRect(8,this.h/2|0,this.w-16,(this.v-.5)*a|0);ctx.fillStyle="#CB8F4F";ctx.fillRoundRect(8,b-5,this.w-16,10,4);ctx.fillStyle="#CB8F4F";ctx.fillCircle(this.w/2,b,26);ctx.fillStyle="rgba(0,0,0,0.15)";
ctx.fillTriangle(this.w/2-14,b+12,14,8);ctx.fillTriangle(this.w/2-14,b-12,14,-8);.5!=this.v&&(a=formatValue(20*this.v-10,2,lang.DB,!0),ctx.drawText(a,this.w/2,b,{font:"14px open_sans_condensedbold",align:"center",valign:"middle",color:"rgba(0,0,0,0.5)"}));ctx.lineWidth=1;ctx.strokeStyle="#46474A";ctx.roundRect(.5,.5,this.w-1,this.h-1,6);ctx.stroke()}});
function checkMoreMe(){var a=settings.me.clone();log(JSON.stringify(a));for(var a=a.uniq(),b=[],c=0;c<a.length;c++){var d=a[c];if(!(0>d||d>=fxStrips[0].id))switch(b.push(d),allStrips[d].getNameValue("stereoIndex")){case 0:a.contains(d+1)||b.push(d+1);break;case 1:a.contains(d-1)||b.push(d-1)}}b.sort(function(a,b){return a-b});log(JSON.stringify(b));settingsStorage.set("me",b);a=settings.meout;isDefined(a)&&null!=a||(a=-1);settingsStorage.set("meout",bound(a,-1,curSetup.aux-1))}
function applyMEdelta(a,b){var c=settings.meout,d=settings.me;if(0>c||c>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else for(var c="aux."+c+".value",f=0;f<d.length;f++){var e=d[f];if(!(e>=allStrips.length)){switch(allStrips[e].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var e=allStrips[e],g=a[f];g<MOREME_CUTOFF||(g=DBtoVf(g+b),e.setNameValue(c,bound(g,0,1)))}}}
function applyBANDdelta(a,b){var c=settings.meout,d=settings.me;if(0>c||c>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else for(var c="aux."+c+".value",f=0;f<allStrips.length;f++)if(!d.contains(f)){var e=allStrips[f];switch(e.type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var g=a[f];g<MOREME_CUTOFF||(g=DBtoVf(g+b),e.setNameValue(c,bound(g,0,1)))}}
function secToTime(a){var b=parseInt(a/3600)%24,c=parseInt(a/60)%60;a%=60;return(0<b?b+":":"")+(10>c?"0"+c:c)+":"+(10>a?"0"+a:a)}mtkPlay=mtkRec=player2track=null;
var EMPTY_SUBPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EMPTY";this.y=40;this.setAnchors(0,40,0,0);this.enabled=!1},initWidgets:function(){},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="right";ctx.fillStyle=color.tabText;ctx.fillText(lang.EMPTY,214,50)}}),PLAYER_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PLAYER_PAGE";this.buttons=[];this.pages=[];this.y=
measures.topWidgetHeight;this.mode=0;this.color=color.yellow;this.arr=[];this.initWidgets();this.setMode(0)},updateLists:function(){},setItems:function(){},nextMode:function(){for(var a=this.mode+1;a<this.buttons.length;a++)if(this.buttons[a].enabled){this.buttons[a].click();return}for(a=0;a<this.mode;a++)this.buttons[a].enabled&&this.buttons[a].click()},setMode:function(a){this.mode=a;0==a?(playerStrips.show(),playerLabels.show()):(playerStrips.hide(),playerLabels.hide());for(var b=0;b<this.pages.length;b++)this.pages[b].hide();
this.updateGeometry();this.pages[a].show();drawAll(this)},initWidgets:function(){if(IS_UI_24){this.pages.push(new PLAYER(this));this.pages.push(new MTK_PLAY(this));this.pages.push(new MTK_REC(this));for(var a=[lang.TWO_TRACK_USB,lang.MULTITRACK,lang.MULTITRACK_CONFIG],b=[color.yellow,color.yellow,color.yellow],c=[color.yellow,color.yellow,color.yellow],d=0;d<a.length;d++){var f=new TabButton(this);f.color=b[d];f.textColor=c[d];f.mode=mode++;f.font="13pt open_sans_condensedbold";f.text=a[d];f.setSize(150,
30);f.setAnchors(null,5,1+151*(a.length-d-1),null);this.buttons.push(f)}}else this.page=new PLAYER},calcGeometry:function(){this.x=playerStrips.enabled?2*measures.mixerStripWidth:0;this.w=screenWidth-measures.mixerRightMargin-this.x;this.h=screenHeight-this.y},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.color;ctx.fillRect(4,35,this.w-4,4)}}),PLAYER=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="PLAYER";this.y=measures.topWidgetHeight;
this.color=color.media;this.mode=0;this.initWidgets();player2track=this},setMode:function(a){this.mode=a;regUpdate(this)},initWidgets:function(){this.regKey("settings.playMode");this.regKey("settings.cue");this.regKey("var.present");var a=this;this.SWITCH=new SWITCHBOX(this);this.SWITCH.setItems([lang.PLAYER,lang.PADS]);this.SWITCH.setItemWidth(70);this.SWITCH.color=color.media;this.SWITCH.hide();this.ORDER=new SWITCHBOX(this);this.ORDER.setAnchors(10,null,null,5);this.ORDER.color=color.media;this.ORDER.setItems([lang.MANUAL,
lang.AUTO]);this.ORDER.setItemWidth(90);this.ORDER.getState=function(){switch(getValue("settings.playMode")){case 0:this.state=0;break;case 1:this.state=0;break;case 2:this.state=1;break;case 3:this.state=1}this.text=this.state?lang.AUTO:lang.MANUAL};this.ORDER.valueFunc=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):(setValue("settings.playMode",0==this.state?0:3),regUpdate(a))};this.TIME=new TIME_LABEL(this);this.TIME.regKey("var.currentTrackPos");this.SEEKBAR=new SEEKBAR(this);this.SEEKBAR.setPos(10,
66);this.SEEKBAR.regKey("var.currentTrackPos");this.SEEKBAR.ondown=function(){a.TIME.setMode(1)};this.SEEKBAR.onup=function(){a.TIME.setMode(0)};this.SEEKBAR.onmove=function(b){a.TIME.setValue2(b);regUpdate(a.TIME)};this.SEEKBAR.onChange=function(a){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_JUMP_TO+"^"+a)};this.PREV=new Button(this);this.PREV.setImages(res.player_prev_off,res.player_prev_on);this.PREV.opaque=!1;this.PREV.disabledHide=!1;this.PREV.getState=function(){this.disabled=
0==getValue("var.present")};this.PREV.valueFunc=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_PREV)};this.PLAY=new CheckBox(this);this.PLAY.setImages(res.player_play,res.player_pause);this.PLAY.opaque=!1;this.PLAY.disabledHide=!1;this.PLAY.getState=function(){this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present")};this.PLAY.onToggleUp=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);
else if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var b=a.FLIST.selItem(),d=a.PLISTS.selItem(),f=getValue("var.currentTrack"),e=getValue("var.currentPlaylist");if(null!=b&&b!=f){if(null==d||0==d.length)d=e;null!=d&&0!=d.length&&null!=b&&0!=b.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK+"^"+d+"^"+b)}else getValue("settings.cue")&&sendMessage(E_COMMANDS.MEDIA_NEXT);sendMessage(E_COMMANDS.MEDIA_PLAY)}};this.PLAY.onToggleDown=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):
sendMessage(E_COMMANDS.MEDIA_PAUSE)};this.NEXT=new Button(this);this.NEXT.setImages(res.player_next_off,res.player_next_on);this.NEXT.opaque=!1;this.NEXT.disabledHide=!1;this.NEXT.getState=function(){this.disabled=0==getValue("var.present")};this.NEXT.onPress=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_NEXT)};this.STOP=new Button(this);this.STOP.setImages(res.player_stop_off,res.player_stop_on);this.STOP.opaque=
!1;this.STOP.disabledHide=!1;this.STOP.getState=function(){this.disabled=0==getValue("var.present")};this.STOP.onPress=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_STOP)};HAVE_REC&&(this.REC=new CheckBox(this),this.REC.setImages(res.player_rec_off,res.player_rec_on),this.REC.opaque=!1,this.REC.disabledHide=!1,this.REC.getState=function(){this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||
.5<getValue("var.recBusy")},this.REC.onToggle=function(){toggleRec()});this.PLISTS=new PLISTS(this);this.PLISTS.setPos(10,100);this.PLISTS.setSize(200,400);this.PLISTS.onSelect=function(){if(!EMULATE){var b=this.selItem();sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS+"^"+b);a.FLIST.clearSelection()}};this.PLISTS.onDClick=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=this.selItem();null!=a&&0!=a.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_PLIST+"^"+a)}};this.PLISTS.getActiveItem=
function(){var a=getValue("var.currentPlaylist"),a=this.items.indexOf(a);this.activeItemIdx=0<=a?a:-1};this.FLIST=new PLISTS(this);this.FLIST.label=lang.FILES;this.FLIST.setPos(410,100);this.FLIST.setSize(400,400);this.FLIST.plistName="";this.FLIST.onDClick=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var b=this.selItem();if(null!=b&&0!=b.length){var d=a.PLISTS.selItem();if(null==d||0==d.length)d=getValue("var.currentPlaylist");null!=d&&0!=d.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK+
"^"+d+"^"+b)}}};this.FLIST.getActiveItem=function(){var a=getValue("var.currentPlaylist");this.plistName!=a?this.activeItemIdx=-1:(a=getValue("var.currentTrack"),this.activeItemIdx=this.items.indexOf(a))};if(EMULATE){var b=$A($R("TRACK A","TRACK Z"));this.PLISTS.setItems($A($R("PLIST A","PLIST Z")));this.FLIST.setItems(b)}this.mutefx=new CHECKBUTTON(this);this.mutefx.text=lang.MUTE_FX;this.mutefx.color=this.mutefx.textColor=color.tvMuteFX;this.mutefx.w=90;this.mutefx.setAnchors(null,null,210,5);this.mutefx.getState=
function(){this.state=checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?1:0};this.mutefx.onToggleUp=function(){mixerWidget.muteFX()};this.mutefx.onToggleDown=function(){mixerWidget.unMuteFX()};this.muteall=new CHECKBUTTON(this);this.muteall.text=lang.MUTE_ALL;this.muteall.color=this.muteall.textColor=color.tvMuteALL;this.muteall.w=90;this.muteall.setAnchors(null,null,110,5);this.muteall.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?1:0};this.muteall.onToggleUp=function(){mixerWidget.muteAll()};
this.muteall.onToggleDown=function(){mixerWidget.cancelMuteAll()};this.CUE=new CHECKBUTTON(this);this.CUE.setAnchors(null,null,10,5);this.CUE.text=lang.CUE;this.CUE.w=90;this.CUE.getState=function(){this.state=getValue("settings.cue")?1:0};this.CUE.onToggle=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):setValue("settings.cue",this.state?1:0)};IS_UI_24&&(this.SHUFFLE=new CHECKBUTTON(this),this.SHUFFLE.setAnchors(200,null,null,5),this.SHUFFLE.text=lang.SHUFFLE,this.SHUFFLE.w=90,this.SHUFFLE.regKey("settings.shuffle"),
this.SHUFFLE.regKey("settings.playMode"),this.SHUFFLE.getState=function(){this.disabled=2>getValue("settings.playMode");this.state=getValue("settings.shuffle")?1:0},this.SHUFFLE.onToggle=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):setValue("settings.shuffle",this.state?1:0)},this.SHUFFLE.hide())},onShow:function(){this.updateLists()},updateLists:function(){if(!EMULATE){sendMessage(E_COMMANDS.MEDIA_GET_PLISTS);var a=this.PLISTS.selItem();null==a&&(a=getValue("var.currentPlaylist"));
log("curPLIST: "+a);a&&sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS+"^"+a)}},onHide:function(){},setStrip:function(){null!=this.strip&&this.unStrip();this.strip=mediaStrips[0];this.saveX=this.strip.x;this.saveEnabled=this.strip.enabled;this.strip.parent=this;this.strip.updateGeometry();this.strip.enabled=!0;this.strip.x=0;this.strip.needClip=!0;this.widgets.push(this.strip)},unStrip:function(){null!=this.strip&&(this.widgets.pop(),this.strip.parent=mixerWidget,this.strip.enabled=this.saveEnabled,
this.strip.needClip=!1,this.strip.calcGeometry=function(){this.h=this.parent.h},this.strip.updateGeometry(),this.strip.x=this.saveX,this.strip=null)},calcGeometry:function(){this.x=2*measures.mixerStripWidth;this.w=screenWidth-measures.mixerRightMargin-this.x;this.h=screenHeight-this.y;IS_UI_24&&(this.x=0,this.y=40,this.h=this.parent.h-this.y,this.w=this.parent.w);this.needClip=670>this.w;this.SWITCH.setPos(10,21);this.SEEKBAR.w=this.w-this.SEEKBAR.x-10;var a=(this.w-this.PREV.w-this.PLAY.w-this.NEXT.w-
this.STOP.w-this.REC.w-6)/2|0;this.TIME.setPos(this.w-this.TIME.w-10,10);this.PREV.setPos(a,15);this.PLAY.setPos(this.PREV.x+this.PREV.w+2,15);this.STOP.setPos(this.PLAY.x+this.PLAY.w+2,15);this.NEXT.setPos(this.STOP.x+this.STOP.w+2,15);HAVE_REC&&this.REC.setPos(this.NEXT.x+this.NEXT.w+2+6,15);a=this.h-this.PLISTS.y-10-32;this.PLISTS.setSize(700<this.w?300:270,a);this.FLIST.x=this.PLISTS.x+this.PLISTS.w+2;this.FLIST.setSize(this.w-this.FLIST.x-10,a)},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,
0,this.w,this.h)}}),MTK_REC=Class.create(EMPTY_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="MTK_REC";this.color=color.yellow;this.initWidgets();mtkRec=this},initWidgets:function(){var a=this;this.BUTTONS=[];var b=60,c=0,d=46;24<inStrips.length&&690>this.h&&(d=44,b=54);for(var f=0,e=0;e<allStrips.length;e++){var g=allStrips[e];switch(g.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:break;default:continue}var h=new CHECKBUTTON(this);0==f%8&&0!=f&&c++;h.setSize(90,d);h.setPos(40+
100*(f-8*c),100+b*c);h.st=g;h.text=g.text;h.textColor=g.color;h.setKey(g.name+"mtkrec",!0);h.regKey(g.name+"mtkrec");h.k="mtkrec";h.getState=function(){this.state=this.st.getNameValue("mtkrec");this.text=this.st.getName();this.textColor=this.st.getColor()};h.onToggle=function(){regUpdate(a)};this.BUTTONS.push(h);f++}this.MTKMODE=new SWITCHBOX(this);this.MTKMODE.setAnchors(240,22);this.MTKMODE.setItems(["FLAC 24","FLAC 16","WAV 24","WAV 16"]);this.MTKMODE.setItemWidth(80);this.MTKMODE.h=40;this.MTKMODE.regKey("settings.mtk.format");
this.MTKMODE.getState=function(){this.state=getValue("settings.mtk.format")};this.MTKMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.mtk.format",this.state)};this.selectall=new MENUBUTTON(this);this.selectall.setAnchors(640,22);this.selectall.setSize(90,40);this.selectall.text=lang.SELECT_ALL;this.selectall.onPress=function(){a.BUTTONS.each(function(a){a.setState(0,!1)});a.BUTTONS.each(function(a){a.st.type!=E_STRIP_TYPE.IN&&a.st.type!=E_STRIP_TYPE.LINEIN||
a.setState(1,!1)});regUpdate(a)};this.clearall=new MENUBUTTON(this);this.clearall.setAnchors(740,22);this.clearall.setSize(90,40);this.clearall.text=lang.CLEAR_ALL;this.clearall.onPress=function(){a.BUTTONS.each(function(a){a.setState(0,!1)});regUpdate(a)}},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.white;ctx.drawText(lang.RECORD_CHANNELS,40,50,{shadow:Shadow.main})}});
function keyToName(a){a.endsWith(".")||(a+=".");for(var b=0,c=allStrips.length;b<c;b++)if(allStrips[b].name==a)return allStrips[b].getLabel();return a}
var MTK_PLAY=Class.create(EMPTY_SUBPAGE,{initialize:function($super,b){$super(b);this.widgetName="MTK_REC";this.color=color.yellow;this.regKey("var.mtk.present");this.initWidgets();mtkPlay=this},onShow:function(){this.updateLists()},updateLists:function(){EMULATE||(sendMessage(E_COMMANDS.MTK_GET_SESSIONS),sendMessage(E_COMMANDS.MTK_GET_FILES))},initWidgets:function(){var a=this;this.regKey("var.mtk.rec.busy");this.overview=new MENUBUTTON(this);this.overview.text=lang.OVERVIEW;this.overview.color=
this.overview.textColor="#e44";this.overview.setPos(10,15);this.overview.setSize(100,40);this.overview.onPress=function(){settingsWidget.setMode(4);setMode(E_MODE.SETTINGS);settingsWidget.pages[4].setSrc(2);settingsWidget.pages[4].setMode(0)};this.scheck=new CHECKBUTTON(this);this.scheck.setAnchors(120,15);this.scheck.setSize(101,40);this.scheck.text=formatButtonText(lang.ACTIVATE_SOUNDCHECK);this.scheck.textColor=this.scheck.color=color.green;this.scheck.textColor2=color.white;this.scheck.setKey("var.mtk.soundcheck");
this.scheck.regKey("var.mtk.soundcheck");this.scheck.onToggle=function(){updateByKey("var.mtk.soundcheck");regUpdate(a)};this.PLAY=new CheckBox(this);this.PLAY.setImages(res.player_play,res.player_pause);this.PLAY.setAnchors(null,15,266,null);this.PLAY.regKey("var.mtk.currentState");this.PLAY.regKey("var.mtk.rec.currentState");this.PLAY.regKey("var.mtk.present");this.PLAY.opaque=!1;this.PLAY.disabledHide=!1;this.PLAY.getState=function(){this.state=2==getValue("var.mtk.currentState")?1:0;this.disabled=
0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")};this.PLAY.onToggleUp=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=getValue("var.mtk.rec.busy");.5<a&&2>a?showPopupMsg(lang.ERR_BUSYBUFFER):sendMessage(E_COMMANDS.MTK_PLAY)}};this.PLAY.onToggleDown=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MTK_PAUSE)};this.STOP=new Button(this);this.STOP.setImages(res.player_stop_off,res.player_stop_on);
this.STOP.setAnchors(null,15,194,null);this.STOP.regKey("var.mtk.rec.currentState");this.STOP.regKey("var.mtk.present");this.STOP.opaque=!1;this.STOP.disabledHide=!1;this.STOP.getState=function(){this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")};this.STOP.onPress=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=getValue("var.mtk.rec.busy");.5<a&&2>a?showPopupMsg(lang.ERR_BUSYBUFFER):sendMessage(E_COMMANDS.MTK_STOP)}};
this.REC=new CheckBox(this);this.REC.setImages(res.player_rec_off,res.player_rec_on);this.REC.setAnchors(null,15,116,null);this.REC.regKey("var.mtk.rec.currentState");this.REC.regKey("var.mtk.currentState");this.REC.regKey("var.mtk.present");this.REC.opaque=!1;this.REC.disabledHide=!1;this.REC.getState=function(){this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState")};this.REC.onToggle=toggleMTKRec;
this.TIME=new MTK_TIME(this);this.TIME.setAnchors(null,10,10,null);this.SEEKBAR=new SEEKBAR(this);this.SEEKBAR.setAnchors(10,66,10,null);this.SEEKBAR.setKey("var.mtk.currentTrackPos",!0);this.SEEKBAR.onChange=function(a){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MTK_JUMP_TO+"^"+a)};this.cap_a=new Label(this);this.cap_a.font="15px open_sans_condensedbold";this.cap_a.color="#88b";this.cap_a.setAnchors(390,19,null,null);this.cap_a.w=110;this.cap_a.align="center";this.cap_a.regKey("var.mtk.freespace");
this.cap_a.getState=function(){var a=getValue("var.mtk.freespace");this.text=0>a?lang.NOT_AVAILABLE:""+formatValue(a,2," "+lang.GB,!1)};this.buffer=new BufferLine(this);this.buffer.setAnchors(390,46,null,null);this.buffer.setKey("var.mtk.bufferfill",!0);this.sessions=new PLISTS(this);this.sessions.setAnchors(10,100,null,52);this.sessions.setSize(160,400);this.sessions.label=lang.SESSIONS;this.sessions.regKey("var.mtk.playsession");this.sessions.regKey("var.mtk.session");this.sessions.activeTextColor=
"#2a2";EMULATE&&(this.sessions.setItems($A($R("SESSION A","SESSION C"))),this.sessions.select(0));this.sessions.onSelect=function(){if(!isBlocked("player")){var a=this.selItem();a&&sendMessage(E_COMMANDS.MTK_SET_SESSION+"^"+a)}};this.sessions.getState=function(){var a=getValue("var.mtk.session");this.selectedIdx=this.selected=a=this.items.indexOf(a);this.selectedItem=this.items[a]};this.sessions.getActiveItem=function(){var a=getValue("var.mtk.playsession");this.activeItemIdx=this.items.indexOf(a)};
this.delet=new MENUBUTTON(this);this.delet.text=lang.DELETE_SESSION;this.delet.setAnchors(10,null,null,10);this.delet.setSize(160,40);this.delet.regKey("var.mtk.currentState");this.delet.regKey("var.mtk.rec.currentState");this.delet.opaque=!1;this.delet.getState=function(){this.dimmed=!!getValue("var.mtk.rec.currentState")||!!getValue("var.mtk.currentState")};this.delet.onPress=function(){var b=a.sessions.selItem();b&&(confOk.valueFunc=function(){sendMessage(E_COMMANDS.MTK_DEL_SESSION+"^"+b)},showConfBox(lang.DELETE+
" '"+b+"'?"))};this.patch=new PLISTS(this);this.patch.setAnchors(172,100,null,10);this.patch.setSize(160,400);this.patch.regKey("var.mtk.soundcheck");this.patch.label=lang.MIXER_PATCH;this.patch.maxTextLengthAuto=!1;this.patch.font="12pt open_sans_condensedbold";this.patch.setItems(Array(22));ROUTING_TEST_MODE?(this.patch.getState=function(){for(var a=getValue("var.mtk.soundcheck"),b=[],c=0;22>c;c++){var g="---",h=getValue((a?"mtk.scout.":"mtk.out.")+c);"none"!=h&&(g=keyToName(h));b.push(lang.SLOT+
(9>c?"  ":" ")+(c+1)+(9>c?" ":"")+" : "+g)}this.items=b},this.patch.onDClick=function(){var a=new CH_SEL_POPUP(inStrips.concat(lineinStrips));a.slot=this.selectedIdx;a.valueFunc=function(a){var b=getValue("var.mtk.soundcheck")?"mtk.scout.":"mtk.out.",c=this.slot;-1==a?setValue(b+c,"none"):setValue(b+c,chopLastDot(this.arr[a].name))}}):(this.patch.getState=function(){for(var a=getValue("var.mtk.soundcheck"),b=[],c=0;22>c;c++){for(var g="",h="ua."+c,l=0,m=allStrips.length;l<m;l++){var n=allStrips[l];
n.getNameValue(a?"scsrc":"src")==h&&(g+=n.getLabel()+" ")}g||(g="---");b.push(lang.SLOT+(9>c?"  ":" ")+(c+1)+(9>c?" ":"")+" : "+g)}this.items=b},this.patch.onDClick=function(){var a=new CH_SEL_POPUP(inStrips.concat(lineinStrips));a.slot=this.selectedIdx;a.valueFunc=function(a){var b="src";getValue("var.mtk.soundcheck")&&(b="scsrc");for(var c=0;c<this.arr.length;c++){var d=this.arr[c];d.getNameValue("src")=="ua."+this.slot&&d.setNameValue(b,"none")}-1!=a&&this.arr[a].setNameValue(b,"ua."+this.slot)}});
this.files=new PLISTS(this);this.files.setAnchors(334,100,10,10);this.files.label=lang.FILES;this.files.noSelection=!0;if(EMULATE){for(var b=[],c=0;22>c;c++)b.push("Track_"+(c+1)+".wav");this.files.setItems(b,!1)}},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);var a=this.cap_a.x-10;ctx.drawText(lang.SPACE_REMAINING+":",a,29,{font:"15px open_sans_condensedbold",color:color.white,align:"right",valign:"middle"});ctx.drawText(lang.BUFFER+":",a,50,{font:"15px open_sans_condensedbold",
color:color.white,align:"right",valign:"middle"});CASCADE_MODE&&ctx.drawText(lang.SLAVE+":",a,50,{font:"15px open_sans_condensedbold",color:color.white,align:"right",valign:"middle"})}}),BufferLine=Class.create(Widget,{initialize:function($super,b,c,d,f){$super(b);this.widgetName="BufferLine";this.ignoreEvents=!0;this.blockEvent=!1;this.w=110;this.h=10;this.value=0},paint:function(){this.value=this.getVal();var a=.9<=this.value?"#e11":.6<=this.value?"#e81":.2<=this.value?"#ee1":0>this.value?"#777":
"#4a4";this.value=bound(this.value,0,1);ctx.fillStyle=a;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=color.eqBg2;ctx.fillRect(1,1,this.w-2,this.h-2);ctx.fillStyle=a;ctx.fillRect(0,0,this.w*this.value|0,this.h)}}),MTK_TIME=Class.create(Widget,{initialize:function($super,b){$super(b);this.w=100;this.h=50;this.name="MTK_TIME";this.color="#67C266";this.len=this.pos=this.v2=this.mode=0;this.timer=null;this.regKey("var.mtk.rec.time");this.regKey("var.mtk.rec.currentState");this.regKey("var.mtk.currentTrackPos");
this.regKey("var.mtk.currentLength")},setMode:function(a){this.mode=a;regUpdate(this)},setValue2:function(a){this.v2=bound(a,0,1)},calcGeometry:function(){},getState:function(){(this.vmode=getValue("var.mtk.rec.currentState")?1:0)?this.len=getValue("var.mtk.rec.time"):(this.pos=getValue("var.mtk.currentTrackPos"),this.len=getValue("var.mtk.currentLength"))},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);if(!(0>this.len))if(this.vmode){ctx.font="17pt open_sans_condensedbold, monospace";
ctx.fillStyle="#c44";var a=secToTime(this.len|0);ctx.drawText(a,this.w-2,21,{align:"right",valign:"middle",shadow:Shadow.main})}else{var b=this.pos;1==this.mode&&(b=this.v2);a=this.len*b;b=secToTime(this.len|0);a=secToTime(a|0);ctx.font="17pt open_sans_condensedbold, monospace";ctx.textAlign="right";ctx.fillStyle=1==this.mode?"#ccc":this.color;ctx.drawText(a,this.w-2,20,{shadow:Shadow.main});ctx.fillStyle="#FFC777";ctx.drawText(b,this.w-2,44,{shadow:Shadow.main})}}}),Label=Class.create(Widget,{initialize:function($super,
b,c,d,f){$super(b);this.widgetName="Label";this.ignoreEvents=!0;this.bg=this.blockEvent=!1;this.bgColor="rgba(255,255,255,0.1)";this.w=55;this.h=20;this.opaque=!1;this.font=isDefined(c)?c:"bold 16px Arial";this.color=isDefined(f)?f:"#fff";this.textParam={shadow:Shadow.main};this.text=isDefined(d)?d:"Label";isDefined(d)&&this.recalc();this.align="center"},setFont:function(a){this.font=a;this.recalc();regUpdate(this)},recalc:function(){ctx.font=this.font;var a=ctx.measureText(this.text).width;a>this.w&&
(this.w=a+2)},setText:function(a){this.text=a;this.recalc();regUpdate(this)},getState:function(){},paint:function(){this.getState();this.bg&&(ctx.fillStyle=this.bgColor,ctx.fillRoundRect(0,0,this.w,this.h,6));ctx.fillStyle=this.color;ctx.font=this.font;var a=this.w/2|0,b=this.h/2|0;ctx.textBaseline="middle";ctx.textAlign=this.align;this.textParam.max=this.w;switch(this.align){case "center":ctx.drawText(this.text,a,b,this.textParam);break;case "left":ctx.drawText(this.text,0,b,this.textParam);break;
case "right":ctx.drawText(this.text,this.w,b,this.textParam)}}}),TIME_LABEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.w=100;this.h=52;this.name="TIME_LABEL";this.color2=this.color=color.white;this.max=this.text="";this.vmode=this.mode=0;this.text2="";this.timer=null;this.len=this.pos=this.v2=0},setMax:function(a){this.max=secToTime(a|0);regUpdate(this)},setTime:function(a){this.text=secToTime(a|0);regUpdate(this)},setMode:function(a){this.mode=a;regUpdate(this)},setValue2:function(a){this.v2=
bound(a,0,1)},calcGeometry:function(){},getState:function(){this.vmode=0;this.len=getValue("var.currentLength");this.pos=getValue("var.currentTrackPos")},paint:function(){this.getState();ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);ctx.font="17pt open_sans_condensedbold, monospace";ctx.textAlign="right";if(!(0>this.len)){var a=this.pos;1==this.mode&&(a=this.v2);a*=this.len;this.max=secToTime(this.len|0);this.text=secToTime(a|0);ctx.fillStyle=this.color;1==this.mode&&(ctx.fillStyle="#ccc");
ctx.drawText(this.text,this.w-2,20,{shadow:Shadow.main});ctx.fillStyle="#FFC777";ctx.drawText(this.max,this.w-2,44,{shadow:Shadow.main})}}}),SEEKBAR=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="SEEKBAR";this.color="white";this.w=100;this.h=26;this.position=.4;this.hw=0;this.needMoveEvt=!0;this.pos=EMULATE?.3:0;this.step=1E3;this.timer=null;this.curTime=0;this.trackLength=30;this.key="var.currentTrackPos";this.move=!1},setTrackTime:function(a){this.curTime=0;this.trackLength=
a},onDown:function(a,b){isBlocked("player")?showPopupMsg(lang.LOCKED,800):(this.move=!0,this.ondown(),this.onMove(a,b))},onMove:function(a,b){var c=bound(a-this.globalX(),0,this.w);this.pos=c=bound(c/this.w,0,1);this.onmove(c);regUpdate(this)},onUp:function(){this.move=!1;this.onChange(this.pos);this.onup();regUpdate(this)},ondown:function(){},onmove:function(a){},onup:function(){},onChange:function(a){sendMessage(E_COMMANDS.MEDIA_JUMP_TO+"^"+a)},paint:function(){this.position=this.move||EMULATE?
this.pos:bound(getValue(this.key),0,1);var a=(this.w-this.hw-6)*this.position|0;ctx.fillStyle="#131415";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=color.media;ctx.fillRect(3,3,a,this.h-6);ctx.fillStyle=this.grd;ctx.fillRect(3,3,a,this.h-6);ctx.fillStyle="#eee";ctx.fillRect(3+a-1,3,2,this.h-6);ctx.strokeStyle="#3D3E41";ctx.strokeRect(.5,.5,this.w-1,this.h-1)}}),PLISTS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PLAYER_LIST";this.label=lang.PLAYLISTS;this.bg="#212226";
this.needMoveEvt=!0;this.lastClickTime=0;this.items=[];this.noSelection=!1;this.selectedIdx=this.selected=-1;this.selectedItem=null;this.hoverIdx=this.activeItemIdx=-1;this.font="12pt open_sans_condensedbold";this.itemH=30;this.vOffsetOld=this.vOffset=0;this.vScrollEnabled=!0;this.vScrollWidth=8;this.textColor=color.white;this.selTextColor=color.black;this.selItemColor="#eee";this.activeTextColor="#e33";this.selectCanceled=!1;this.OY=29;this.linkSelectedWith=this.linkOffsetsWith=null;this.maxTextLength=
999;this.maxTextLengthAuto=!0},setItems:function(a,b){Array.isArray(a)&&(isDefined(b)||(b=!0),this.items=a,this.maxVOffset=this.items.length*this.itemH-this.h+this.OY,0>this.maxVOffset&&(this.maxVOffset=0),b&&this.setOffset(0),regUpdate(this))},clear:function(){this.items.clear();this.clearSelection()},getActiveItem:function(){},selItem:function(){return 0<=this.selectedIdx&&this.selectedIdx<this.items.length?this.items[this.selectedIdx]:null},selected:function(){return 0<=this.selectedIdx&&this.selectedIdx<
this.items.length?this.items[this.selectedIdx]:null},select:function(a,b){a>=this.items.length||(isDefined(b)||(b=!1),0>a?(this.selectedIdx=this.selected=-1,this.selectedItem=null):(this.selectedIdx=this.selected=a,this.selectedItem=this.items[a]),!b&&this.linkSelectedWith&&this.linkSelectedWith.select(a,!0),this.onSelect(),regUpdate(this))},selectByName:function(a){a=this.items.indexOf(a);0<=a&&this.select(a);regUpdate(this)},selectLast:function(){0!=this.items.length&&this.select(this.items.length-
1)},clearSelection:function(){this.select(-1)},setOffset:function(a){this.vOffsetOld=this.vOffset=bound(a,0,this.maxVOffset);regUpdate(this);this.linkOffsetsWith&&(this.linkOffsetsWith.vOffsetOld=this.linkOffsetsWith.vOffset=bound(a,0,this.linkOffsetsWith.maxVOffset),regUpdate(this.linkOffsetsWith))},onDown:function(a,b){var c=b-this.globalY(),d=a-this.globalX();c<this.OY||(this.pressPoint=[d,c],this.selectCanceled=!1,this.noSelection&&(this.selectCanceled=!0),this.vScrollEnabled&&d>this.w-this.vScrollWidth?
this.selectCanceled=!0:this.hoverIdx=Math.floor((this.pressPoint[1]+this.vOffset-this.OY)/this.itemH),0<this.maxVOffset&&this.velStart(),regUpdate(this))},onMove:function(a,b){var c=b-this.globalY();this.globalX();c-=this.pressPoint[1];this.vOffset=this.vOffsetOld-c;this.vOffset=bound(this.vOffset,0,this.maxVOffset);this.linkOffsetsWith&&(this.linkOffsetsWith.vOffsetOld=this.linkOffsetsWith.vOffset=bound(this.vOffset,0,this.linkOffsetsWith.maxVOffset),regUpdate(this.linkOffsetsWith));regUpdate(this);
5<Math.abs(c)&&(this.selectCanceled=!0)},onUp:function(){if(!this.selectCanceled){var a=Math.floor((this.pressPoint[1]+this.vOffset-this.OY)/this.itemH);this.selected!=a&&this.select(a)}this.onPress();a=Date.now();if(250>a-this.lastClickTime)this.onDClick();this.lastClickTime=a;this.hoverIdx=-1;this.vOffsetOld=this.vOffset;this.pressPoint=[-1,-1];0<this.maxVOffset&&this.velRelease();regUpdate(this)},onWheel:function(a){clearInterval(ticker);this.setOffset(this.vOffset-Math.round(a/6))},velStart:function(){velocity=
amplitude=0;timestamp=Date.now();clearInterval(ticker);frame=this.vOffset;scrollingWidget=this;ticker=setInterval(this.velTrack,20)},velTrack:function(){var a,b;a=Date.now();b=a-timestamp;timestamp=a;a=scrollingWidget.vOffset-frame;frame=scrollingWidget.vOffset;velocity=1E3*a/(1+b)*.8+.2*velocity},velRelease:function(){clearInterval(ticker);10<Math.abs(velocity)&&this.mScroll(velocity)},mScroll:function(a){settings.kinetic||(position=this.vOffset,amplitude=.3*a,step=0,clearInterval(ticker),ticker=
setInterval(function(){var a=amplitude/20;position+=a;amplitude-=a;step+=1;80<step&&clearInterval(ticker);scrollingWidget.vOffset!=(position|0)&&scrollingWidget.setOffset(position|0)},20))},calcGeometry:function(){this.maxVOffset=this.items.length*this.itemH-this.h+this.OY;this.maxTextLengthAuto&&(this.maxTextLength=this.w/8);0>this.maxVOffset&&(this.maxVOffset=0);this.vOffset>this.maxVOffset&&this.setOffset(this.maxVOffset)},onDClick:function(){},onSelect:function(){},onPress:function(){},valueFunc:function(){},
getState:function(){},paint:function(){this.getState();ctx.fillStyle=this.bg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#16171B";ctx.fillRect(0,0,this.w,this.OY-1);ctx.fillStyle=color.white;ctx.font="14pt open_sans_condensedbold";ctx.textAlign="left";ctx.fillText(this.label,8,21);ctx.lineWidth=1;ctx.strokeStyle="#3D3E41";ctx.strokeRect(.5,.5,this.w-1,this.h-1);ctx.strokeRect(.5,.5,this.w-1,28);this.getActiveItem();var a=this.items.length*this.itemH;this.vScrollEnabled=a>this.h-this.OY;ctx.beginPath();
ctx.rect(0,this.OY,this.w,this.h-this.OY);ctx.clip();ctx.font=this.font;ctx.textAlign="left";ctx.shadowColor="transparent";ctx.textBaseline="middle";for(var b=this.w-2,c=0;c<this.items.length;c++){var d=c*this.itemH-this.vOffset+this.OY;if(!(d<-this.itemH||d>this.h)){var f=this.selected==c,e=this.activeItemIdx==c;f&&(ctx.fillStyle=this.selItemColor,ctx.fillRect(0,d,b,this.itemH));this.hoverIdx==c&&(ctx.fillStyle="rgba(255,255,255,0.03)",ctx.fillRect(0,d,b,this.itemH));ctx.fillStyle=f?this.selTextColor:
this.textColor;e&&(ctx.fillStyle=this.activeTextColor);(f=this.items[c]||"")&&this.maxTextLength&&(f=f.truncate(this.maxTextLength));ctx.fillText(f,8,d+this.itemH/2|0,b-9);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(0,d+this.itemH,b,-1)}}this.vScrollEnabled&&(c=this.h-this.OY,a<c&&(a=c),b=c/a*c,a=this.OY+2+this.vOffset/(a-c)*(c-4-b),ctx.fillStyle="rgba(0,0,0,0.3)",ctx.fillRoundRect(this.w-this.vScrollWidth-2+1,a+1|0,this.vScrollWidth-2,b-2|0,5),ctx.fillStyle="rgba(255,255,255,0.5)",ctx.fillRoundRect(this.w-
this.vScrollWidth-2,a,this.vScrollWidth,b|0,7))}}),FLIST=Class.create(PLISTS,{initialize:function($super,b){$super(b);this.widgetName="PLAYER_LIST";this.items2=[10,1E3,2E4,300];this.col2=65;this.activeItemIdx=-1;this.label=lang.FILES}}),MEDIA_STRIPS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MEDIA_STRIP";this.holdTimer=this.strip2=this.strip=this.buff2=this.buff=null},onShow:function(){this.setStrip()},onHide:function(){this.unStrip()},onDown:function(){regUpdate(playerLabels)},
setStrip:function(){null!=this.strip&&this.unStrip();this.strip=mediaStrips[0];this.strip2=mediaStrips[1];this.strip.parent=this;this.strip2.parent=this;this.buff=[this.strip.x,this.strip.enabled];this.buff2=[this.strip2.x,this.strip2.enabled];this.strip.x=0;this.strip2.x=measures.mixerStripWidth;this.strip.enabled=this.strip2.enabled=!0;this.strip.updateGeometry();this.strip2.updateGeometry();this.widgets.push(this.strip);this.widgets.push(this.strip2)},unStrip:function(){null!=this.strip&&(this.widgets.pop(),
this.widgets.pop(),this.strip.parent=mixerWidget,this.strip2.parent=mixerWidget,this.buff&&(this.strip.x=this.buff[0],this.strip.enabled=this.buff[1]),this.buff2&&(this.strip2.x=this.buff2[0],this.strip2.enabled=this.buff2[1]),this.buff2=this.buff=this.strip2=this.strip=null)},calcGeometry:function(){this.x=0;this.y=measures.topWidgetHeight;this.w=2*measures.mixerStripWidth;this.h=screenHeight-this.y-bottomWidget.h},paint:function(){null!=this.strip?(ctx.fillStyle=color.botBG,ctx.fillRect(0,0,this.w,
this.h)):(fillVertPattern(res.blStripTile,this.h),drawImage(res.blStripBottom,0,this.h-res.blStripBottom.h()),drawImage(res.blStripLabel,0,this.h-res.blStripLabel.h()),drawImage(res.blStripTop,0,0))}}),MEDIA_LABELS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MEDIA_LABELS";this.w=2*measures.mixerStripWidth;this.h=measures.bottomWidgetHeight;this.lastClickTime=0;this.prevSelected=-2},onDown:function(a,b){this.globalY();a-this.globalX()<measures.mixerStripWidth?setSelected(mediaStrips[0].id):
setSelected(mediaStrips[1].id);var c=this;this.holdTimer=setTimeout(function(){c.onHold()},HOLD_TIME);regUpdate(this)},onUp:function(){clearTimeout(this.holdTimer);var a=Date.now();a-this.lastClickTime<DBL_CLK_TIME?this.prevSelected==selectedChannel&&(mode!=E_MODE.EDIT?(editWidget.setMode(3),setMode(E_MODE.EDIT)):setMode(lastMode),bottomWidget.gotoIDmid(selectedChannel)):(this.lastClickTime=a,this.prevSelected=selectedChannel)},onHold:function(){bottomWidget.move=!1;if(-1!=selectedChannel){var a=
new STRIPMENU(null,selectedStrip);a.x=selectedStrip.id==mediaStrips[0].id?0:measures.mixerStripWidth-20;a.x=bound(a.x,0,screenWidth-a.w);a.y=screenHeight-a.h-measures.bottomWidgetHeight;mWidgets.push(widgets.pop());regUpdate(a)}},calcGeometry:function(){this.x=0;this.y=screenHeight-this.h},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(0,0,this.w,this.h);var a=measures.mixerStripWidth;drawImage(res.stripLabel,0,0);drawImage(res.stripLabel,a,0);selectedStrip.id==mediaStrips[0].id&&(ctx.fillStyle=
mediaStrips[0].color,ctx.fillRect(2,0,a-4,bottomWidget.h-2));selectedStrip.id==mediaStrips[1].id&&(ctx.fillStyle=mediaStrips[1].color,ctx.fillRect(a+2,0,a-4,bottomWidget.h-2));ctx.font=font.botChLabel;ctx.textAlign="center";var b=mediaStrips[0].getName();ctx.fillStyle=color.black;ctx.fillText(b,a/2+2|0,25,a-6);ctx.fillStyle=color.labelText;ctx.fillText(b,a/2|0,24,a-6);b=mediaStrips[1].getName();ctx.fillStyle=color.black;ctx.fillText(b,a+(a/2+2|0),25,a-6);ctx.fillStyle=color.labelText;ctx.fillText(b,
a+(a/2|0),24,a-6)}}),CH_SEL_POPUP=Class.create(Widget,{initialize:function($super,b){$super(-1);this.widgetName="CH_SEL_POPUP";this.w=650;this.h=400;this.slot=-1;this.arr=b;this.initWidgets();this.calcGeometry();regUpdate(this)},initWidgets:function(){var a=0,b=0,c=this;this.buttons=[];for(var d=0;d<this.arr.length;d++){var f=this.arr[d],e=new SButton(this);e.idx=d;e.text=f.getLabel()+(f.stereo?" "+lang.L:"");e.textColor=f.getColor();e.setPos(10+80*b,10+60*a);e.setSize(70,50);e.onPress=function(){c.valueFunc(this.idx);
c.close()};this.buttons.push(e);b++;7<b&&(b=0,a++);f.stereo&&(e=new SButton(this),e.idx=d,e.text=f.getLabel()+" "+lang.R,e.textColor=f.getColor(),e.setPos(10+80*b,10+60*a),e.setSize(70,50),e.onPress=function(){c.valueFunc(this.idx,!0);c.close()},this.buttons.push(e),b++,7<b&&(b=0,a++))}e=new SButton(this);e.idx=-1;e.text=lang.NO_PATCH;e.textColor=color.white;e.setPos(10+80*b,10+60*a);e.setSize(70,50);e.onPress=function(){c.valueFunc(this.idx);c.close()};this.buttons.push(e);b++;7<b&&(b=0,a++);0<b&&
a++;this.h=10+60*a},valueFunc:function(){},calcGeometry:function(){this.x=(screenWidth-this.w)/2|0;this.y=(screenHeight-this.h)/2|0},onDelete:function(){},paint:function(){ctx.fillStyle="#28292D";ctx.fillRoundRect(0,0,this.w,this.h,10);var a=ctx.createLinearGradient(0,0,this.w,this.h);a.addColorStop(0,"rgba(255,255,255,0)");a.addColorStop(.2,"rgba(255,255,255,0)");a.addColorStop(.5,"rgba(255,255,255,0.15)");a.addColorStop(.8,"rgba(255,255,255,0)");a.addColorStop(1,"rgba(255,255,255,0)");ctx.fillStyle=
a;ctx.fillRoundRect(0,0,this.w,this.h,10);ctx.roundRect(0,0,this.w,this.h,10);ctx.strokeStyle="#333";ctx.lineWidth=2;ctx.stroke()}});
</script>
<script>
    DEPLOY = true;
</script>
<title>Soundcraft Ui</title>
</head>
<body style="">
<canvas id="mixer" width="921" height="768">Your browser does not support HTML5 Canvas.</canvas>
<div id="noConnectMessage" style="visibility: hidden;">
    <div>
        <div id="CON_MSG">Connecting...</div>
    </div>
</div>
<div id="MSG_CONTAINER">
    <div><span id="MSG_BODY">POPUP<br>MESSAGE</span></div>
</div>
<div id="EDIT_CONTAINER">
    <div>
        <span id="EDIT_BODY">
             <span id="DELAY_TIME" style="font-size: 16pt; display: none;">
                 <input type="radio" name="unit" value="ms" checked=""><span id="span_ms">ms</span>
                 <input type="radio" name="unit" value="meters"><span id="span_mt">meters</span>
                 <input type="radio" name="unit" value="ft"><span id="span_ft">ft</span>
                 <input type="radio" name="unit" value="smpl"><span id="span_smp">samples</span>
                 <input type="radio" name="unit" value="fps"><span id="span_fps">frames</span>
                 <br>
             </span>
             <input type="text" id="eb2" name="editbox" maxlength="20"><br>
             <span id="EDIT_LABEL">Input value:</span><br>
             <input type="submit" value="OK" id="EDIT_OK">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
             <input type="submit" value="CANCEL" id="EDIT_CANCEL">
        </span>
    </div>
</div>
<div id="CONF_CONTAINER">
    <div>
        <span id="CONF_BODY">
            <span id="CONF_LABEL">Confirmation text can be long really really 123</span><br><br>
            <input type="submit" value="OK" id="CONF_OK">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="submit" value="CANCEL" id="CONF_CANCEL">
        </span>
    </div>
</div>
<div id="DIM_CAPTURE"></div>
<div id="PORTRAIT_PAGE"><br>PORTRAIT ORIENTATION IS NOT SUPPORTED<br></div>
<input type="text" id="eb" maxlength="21">

</body></html>
